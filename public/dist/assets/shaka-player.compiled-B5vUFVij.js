import{g as ok,c as sk}from"./_commonjsHelpers-Cpj98o6Y.js";function uk(jo,Oo){for(var ir=0;ir<Oo.length;ir++){const Di=Oo[ir];if(typeof Di!="string"&&!Array.isArray(Di)){for(const B in Di)if(B!=="default"&&!(B in jo)){const Lr=Object.getOwnPropertyDescriptor(Di,B);Lr&&Object.defineProperty(jo,B,Lr.get?Lr:{enumerable:!0,get:()=>Di[B]})}}}return Object.freeze(Object.defineProperty(jo,Symbol.toStringTag,{value:"Module"}))}var Up={};/*
 @license
 Shaka Player
 Copyright 2016 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/(function(jo){(function(){var Oo=typeof window<"u"?window:sk,ir={};(function(B,Lr,lk){var d,GT=typeof Object.create=="function"?Object.create:function(e){function t(){}return t.prototype=e,new t},uu=typeof Object.defineProperties=="function"?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};function KT(e){e=[typeof globalThis=="object"&&globalThis,e,typeof B=="object"&&B,typeof self=="object"&&self,typeof Lr=="object"&&Lr];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}var Ri=KT(this);function Je(e,t){if(t)e:{var n=Ri;e=e.split(".");for(var i=0;i<e.length-1;i++){var r=e[i];if(!(r in n))break e;n=n[r]}e=e[e.length-1],i=n[e],t=t(i),t!=i&&t!=null&&uu(n,e,{configurable:!0,writable:!0,value:t})}}var Xl;if(typeof Object.setPrototypeOf=="function")Xl=Object.setPrototypeOf;else{var zl;e:{var WT={a:!0},_p={};try{_p.__proto__=WT,zl=_p.a;break e}catch{}zl=!1}Xl=zl?function(e,t){if(e.__proto__=t,e.__proto__!==t)throw new TypeError(e+" is not extensible");return e}:null}var Bp=Xl;function $e(e,t){if(e.prototype=GT(t.prototype),e.prototype.constructor=e,Bp)Bp(e,t);else for(var n in t)if(n!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(t,n);i&&Object.defineProperty(e,n,i)}else e[n]=t[n];e.Jm=t.prototype}function bp(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}}function m(e){var t=typeof Symbol<"u"&&Symbol.iterator&&e[Symbol.iterator];if(t)return t.call(e);if(typeof e.length=="number")return{next:bp(e)};throw Error(String(e)+" is not an iterable or ArrayLike")}function H(e){if(!(e instanceof Array)){e=m(e);for(var t,n=[];!(t=e.next()).done;)n.push(t.value);e=n}return e}function au(){this.o=!1,this.l=null,this.h=void 0,this.g=1,this.j=this.m=0,this.B=this.i=null}function Yl(e){if(e.o)throw new TypeError("Generator is already running");e.o=!0}au.prototype.u=function(e){this.h=e};function ql(e,t){e.i={ci:t,ti:!0},e.g=e.m||e.j}au.prototype.return=function(e){this.i={return:e},this.g=this.j};function T(e,t,n){return e.g=n,{value:t}}au.prototype.A=function(e){this.g=e};function G(e){e.g=0}function se(e,t,n){e.m=t,n!=null&&(e.j=n)}function ni(e,t){e.m=0,e.j=t||0}function fe(e,t,n){e.g=t,e.m=n||0}function ue(e,t){return e.m=t||0,t=e.i.ci,e.i=null,t}function on(e){e.B=[e.i],e.m=0,e.j=0}function sn(e,t){var n=e.B.splice(0)[0];(n=e.i=e.i||n)?n.ti?e.g=e.m||e.j:n.A!=null&&e.j<n.A?(e.g=n.A,e.i=null):e.g=e.j:e.g=t}function XT(e){this.g=new au,this.h=e}function zT(e,t){Yl(e.g);var n=e.g.l;return n?Jl(e,"return"in n?n.return:function(i){return{value:i,done:!0}},t,e.g.return):(e.g.return(t),Uo(e))}function Jl(e,t,n,i){try{var r=t.call(e.g.l,n);if(!(r instanceof Object))throw new TypeError("Iterator result "+r+" is not an object");if(!r.done)return e.g.o=!1,r;var o=r.value}catch(s){return e.g.l=null,ql(e.g,s),Uo(e)}return e.g.l=null,i.call(e.g,o),Uo(e)}function Uo(e){for(;e.g.g;)try{var t=e.h(e.g);if(t)return e.g.o=!1,{value:t.value,done:!1}}catch(n){e.g.h=void 0,ql(e.g,n)}if(e.g.o=!1,e.g.i){if(t=e.g.i,e.g.i=null,t.ti)throw t.ci;return{value:t.return,done:!0}}return{value:void 0,done:!0}}function YT(e){this.next=function(t){return Yl(e.g),e.g.l?t=Jl(e,e.g.l.next,t,e.g.u):(e.g.u(t),t=Uo(e)),t},this.throw=function(t){return Yl(e.g),e.g.l?t=Jl(e,e.g.l.throw,t,e.g.u):(ql(e.g,t),t=Uo(e)),t},this.return=function(t){return zT(e,t)},this[Symbol.iterator]=function(){return this}}function qT(e){function t(i){return e.next(i)}function n(i){return e.throw(i)}return new Promise(function(i,r){function o(s){s.done?i(s.value):Promise.resolve(s.value).then(t,n).then(o,r)}o(e.next())})}function k(e){return qT(new YT(new XT(e)))}function dt(){for(var e=Number(this),t=[],n=e;n<arguments.length;n++)t[n-e]=arguments[n];return t}Je("Symbol",function(e){function t(o){if(this instanceof t)throw new TypeError("Symbol is not a constructor");return new n(i+(o||"")+"_"+r++,o)}function n(o,s){this.g=o,uu(this,"description",{configurable:!0,writable:!0,value:s})}if(e)return e;n.prototype.toString=function(){return this.g};var i="jscomp_symbol_"+(Math.random()*1e9>>>0)+"_",r=0;return t}),Je("Symbol.iterator",function(e){return e||(e=Symbol("Symbol.iterator"),uu(Array.prototype,e,{configurable:!0,writable:!0,value:function(){return Fp(bp(this))}}),e)});function Fp(e){return e={next:e},e[Symbol.iterator]=function(){return this},e}Je("Promise",function(e){function t(s){this.h=0,this.i=void 0,this.g=[],this.o=!1;var u=this.j();try{s(u.resolve,u.reject)}catch(a){u.reject(a)}}function n(){this.g=null}function i(s){return s instanceof t?s:new t(function(u){u(s)})}if(e)return e;n.prototype.h=function(s){if(this.g==null){this.g=[];var u=this;this.i(function(){u.l()})}this.g.push(s)};var r=Ri.setTimeout;n.prototype.i=function(s){r(s,0)},n.prototype.l=function(){for(;this.g&&this.g.length;){var s=this.g;this.g=[];for(var u=0;u<s.length;++u){var a=s[u];s[u]=null;try{a()}catch(l){this.j(l)}}}this.g=null},n.prototype.j=function(s){this.i(function(){throw s})},t.prototype.j=function(){function s(l){return function(c){a||(a=!0,l.call(u,c))}}var u=this,a=!1;return{resolve:s(this.G),reject:s(this.l)}},t.prototype.G=function(s){if(s===this)this.l(new TypeError("A Promise cannot resolve to itself"));else if(s instanceof t)this.I(s);else{e:switch(typeof s){case"object":var u=s!=null;break e;case"function":u=!0;break e;default:u=!1}u?this.F(s):this.m(s)}},t.prototype.F=function(s){var u=void 0;try{u=s.then}catch(a){this.l(a);return}typeof u=="function"?this.J(u,s):this.m(s)},t.prototype.l=function(s){this.u(2,s)},t.prototype.m=function(s){this.u(1,s)},t.prototype.u=function(s,u){if(this.h!=0)throw Error("Cannot settle("+s+", "+u+"): Promise already settled in state"+this.h);this.h=s,this.i=u,this.h===2&&this.H(),this.B()},t.prototype.H=function(){var s=this;r(function(){if(s.C()){var u=Ri.console;typeof u<"u"&&u.error(s.i)}},1)},t.prototype.C=function(){if(this.o)return!1;var s=Ri.CustomEvent,u=Ri.Event,a=Ri.dispatchEvent;return typeof a>"u"?!0:(typeof s=="function"?s=new s("unhandledrejection",{cancelable:!0}):typeof u=="function"?s=new u("unhandledrejection",{cancelable:!0}):(s=Ri.document.createEvent("CustomEvent"),s.initCustomEvent("unhandledrejection",!1,!0,s)),s.promise=this,s.reason=this.i,a(s))},t.prototype.B=function(){if(this.g!=null){for(var s=0;s<this.g.length;++s)o.h(this.g[s]);this.g=null}};var o=new n;return t.prototype.I=function(s){var u=this.j();s.Te(u.resolve,u.reject)},t.prototype.J=function(s,u){var a=this.j();try{s.call(u,a.resolve,a.reject)}catch(l){a.reject(l)}},t.prototype.then=function(s,u){function a(p,h){return typeof p=="function"?function(g){try{l(p(g))}catch(v){c(v)}}:h}var l,c,f=new t(function(p,h){l=p,c=h});return this.Te(a(s,l),a(u,c)),f},t.prototype.catch=function(s){return this.then(void 0,s)},t.prototype.Te=function(s,u){function a(){switch(l.h){case 1:s(l.i);break;case 2:u(l.i);break;default:throw Error("Unexpected state: "+l.h)}}var l=this;this.g==null?o.h(a):this.g.push(a),this.o=!0},t.resolve=i,t.reject=function(s){return new t(function(u,a){a(s)})},t.race=function(s){return new t(function(u,a){for(var l=m(s),c=l.next();!c.done;c=l.next())i(c.value).Te(u,a)})},t.all=function(s){var u=m(s),a=u.next();return a.done?i([]):new t(function(l,c){function f(g){return function(v){p[g]=v,h--,h==0&&l(p)}}var p=[],h=0;do p.push(void 0),h++,i(a.value).Te(f(p.length-1),c),a=u.next();while(!a.done)})},t});function bn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}Je("WeakMap",function(e){function t(a){if(this.g=(u+=Math.random()+1).toString(),a){a=m(a);for(var l;!(l=a.next()).done;)l=l.value,this.set(l[0],l[1])}}function n(){}function i(a){var l=typeof a;return l==="object"&&a!==null||l==="function"}function r(a){if(!bn(a,s)){var l=new n;uu(a,s,{value:l})}}function o(a){var l=Object[a];l&&(Object[a]=function(c){return c instanceof n?c:(Object.isExtensible(c)&&r(c),l(c))})}if(function(){if(!e||!Object.seal)return!1;try{var a=Object.seal({}),l=Object.seal({}),c=new e([[a,2],[l,3]]);return c.get(a)!=2||c.get(l)!=3?!1:(c.delete(a),c.set(l,4),!c.has(a)&&c.get(l)==4)}catch{return!1}}())return e;var s="$jscomp_hidden_"+Math.random();o("freeze"),o("preventExtensions"),o("seal");var u=0;return t.prototype.set=function(a,l){if(!i(a))throw Error("Invalid WeakMap key");if(r(a),!bn(a,s))throw Error("WeakMap key fail: "+a);return a[s][this.g]=l,this},t.prototype.get=function(a){return i(a)&&bn(a,s)?a[s][this.g]:void 0},t.prototype.has=function(a){return i(a)&&bn(a,s)&&bn(a[s],this.g)},t.prototype.delete=function(a){return i(a)&&bn(a,s)&&bn(a[s],this.g)?delete a[s][this.g]:!1},t}),Je("Map",function(e){function t(){var u={};return u.yc=u.next=u.head=u}function n(u,a){var l=u[1];return Fp(function(){if(l){for(;l.head!=u[1];)l=l.yc;for(;l.next!=l.head;)return l=l.next,{done:!1,value:a(l)};l=null}return{done:!0,value:void 0}})}function i(u,a){var l=a&&typeof a;l=="object"||l=="function"?o.has(a)?l=o.get(a):(l=""+ ++s,o.set(a,l)):l="p_"+a;var c=u[0][l];if(c&&bn(u[0],l))for(u=0;u<c.length;u++){var f=c[u];if(a!==a&&f.key!==f.key||a===f.key)return{id:l,list:c,index:u,entry:f}}return{id:l,list:c,index:-1,entry:void 0}}function r(u){if(this[0]={},this[1]=t(),this.size=0,u){u=m(u);for(var a;!(a=u.next()).done;)a=a.value,this.set(a[0],a[1])}}if(function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var u=Object.seal({x:4}),a=new e(m([[u,"s"]]));if(a.get(u)!="s"||a.size!=1||a.get({x:4})||a.set({x:4},"t")!=a||a.size!=2)return!1;var l=a.entries(),c=l.next();return c.done||c.value[0]!=u||c.value[1]!="s"?!1:(c=l.next(),!(c.done||c.value[0].x!=4||c.value[1]!="t"||!l.next().done))}catch{return!1}}())return e;var o=new WeakMap;r.prototype.set=function(u,a){u=u===0?0:u;var l=i(this,u);return l.list||(l.list=this[0][l.id]=[]),l.entry?l.entry.value=a:(l.entry={next:this[1],yc:this[1].yc,head:this[1],key:u,value:a},l.list.push(l.entry),this[1].yc.next=l.entry,this[1].yc=l.entry,this.size++),this},r.prototype.delete=function(u){return u=i(this,u),u.entry&&u.list?(u.list.splice(u.index,1),u.list.length||delete this[0][u.id],u.entry.yc.next=u.entry.next,u.entry.next.yc=u.entry.yc,u.entry.head=null,this.size--,!0):!1},r.prototype.clear=function(){this[0]={},this[1]=this[1].yc=t(),this.size=0},r.prototype.has=function(u){return!!i(this,u).entry},r.prototype.get=function(u){return(u=i(this,u).entry)&&u.value},r.prototype.entries=function(){return n(this,function(u){return[u.key,u.value]})},r.prototype.keys=function(){return n(this,function(u){return u.key})},r.prototype.values=function(){return n(this,function(u){return u.value})},r.prototype.forEach=function(u,a){for(var l=this.entries(),c;!(c=l.next()).done;)c=c.value,u.call(a,c[1],c[0],this)},r.prototype[Symbol.iterator]=r.prototype.entries;var s=0;return r}),Je("Set",function(e){function t(n){if(this.g=new Map,n){n=m(n);for(var i;!(i=n.next()).done;)this.add(i.value)}this.size=this.g.size}return function(){if(!e||typeof e!="function"||!e.prototype.entries||typeof Object.seal!="function")return!1;try{var n=Object.seal({x:4}),i=new e(m([n]));if(!i.has(n)||i.size!=1||i.add(n)!=i||i.size!=1||i.add({x:4})!=i||i.size!=2)return!1;var r=i.entries(),o=r.next();return o.done||o.value[0]!=n||o.value[1]!=n?!1:(o=r.next(),o.done||o.value[0]==n||o.value[0].x!=4||o.value[1]!=o.value[0]?!1:r.next().done)}catch{return!1}}()?e:(t.prototype.add=function(n){return n=n===0?0:n,this.g.set(n,n),this.size=this.g.size,this},t.prototype.delete=function(n){return n=this.g.delete(n),this.size=this.g.size,n},t.prototype.clear=function(){this.g.clear(),this.size=0},t.prototype.has=function(n){return this.g.has(n)},t.prototype.entries=function(){return this.g.entries()},t.prototype.values=function(){return this.g.values()},t.prototype.keys=t.prototype.values,t.prototype[Symbol.iterator]=t.prototype.values,t.prototype.forEach=function(n,i){var r=this;this.g.forEach(function(o){return n.call(i,o,o,r)})},t)});function Vp(e,t,n){e instanceof String&&(e=String(e));for(var i=e.length,r=0;r<i;r++){var o=e[r];if(t.call(n,o,r,e))return{oi:r,v:o}}return{oi:-1,v:void 0}}Je("Array.prototype.findIndex",function(e){return e||function(t,n){return Vp(this,t,n).oi}});function $l(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var o=n++;return{value:t(o,e[o]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}Je("Array.prototype.values",function(e){return e||function(){return $l(this,function(t,n){return n})}}),Je("Array.from",function(e){return e||function(t,n,i){n=n??function(u){return u};var r=[],o=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];if(typeof o=="function"){t=o.call(t);for(var s=0;!(o=t.next()).done;)r.push(n.call(i,o.value,s++))}else for(o=t.length,s=0;s<o;s++)r.push(n.call(i,t[s],s));return r}}),Je("Array.prototype.keys",function(e){return e||function(){return $l(this,function(t){return t})}});function lu(e,t,n){if(e==null)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""}Je("String.prototype.startsWith",function(e){return e||function(t,n){var i=lu(this,t,"startsWith"),r=i.length,o=t.length;n=Math.max(0,Math.min(n|0,i.length));for(var s=0;s<o&&n<r;)if(i[n++]!=t[s++])return!1;return s>=o}}),Je("Object.is",function(e){return e||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}}),Je("Array.prototype.includes",function(e){return e||function(t,n){var i=this;i instanceof String&&(i=String(i));var r=i.length;for(n=n||0,n<0&&(n=Math.max(n+r,0));n<r;n++){var o=i[n];if(o===t||Object.is(o,t))return!0}return!1}}),Je("String.prototype.includes",function(e){return e||function(t,n){return lu(this,t,"includes").indexOf(t,n||0)!==-1}}),Je("String.fromCodePoint",function(e){return e||function(t){for(var n="",i=0;i<arguments.length;i++){var r=Number(arguments[i]);if(r<0||r>1114111||r!==Math.floor(r))throw new RangeError("invalid_code_point "+r);r<=65535?n+=String.fromCharCode(r):(r-=65536,n+=String.fromCharCode(r>>>10&1023|55296),n+=String.fromCharCode(r&1023|56320))}return n}}),Je("WeakSet",function(e){function t(n){if(this.g=new WeakMap,n){n=m(n);for(var i;!(i=n.next()).done;)this.add(i.value)}}return function(){if(!e||!Object.seal)return!1;try{var n=Object.seal({}),i=Object.seal({}),r=new e([n]);return!r.has(n)||r.has(i)?!1:(r.delete(n),r.add(i),!r.has(n)&&r.has(i))}catch{return!1}}()?e:(t.prototype.add=function(n){return this.g.set(n,!0),this},t.prototype.has=function(n){return this.g.has(n)},t.prototype.delete=function(n){return this.g.delete(n)},t)}),Je("Array.prototype.find",function(e){return e||function(t,n){return Vp(this,t,n).v}}),Je("Object.entries",function(e){return e||function(t){var n=[],i;for(i in t)bn(t,i)&&n.push([i,t[i]]);return n}});var JT=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("No nullish arg");e=Object(e);for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var r in i)bn(i,r)&&(e[r]=i[r])}return e};Je("Object.assign",function(e){return e||JT}),Je("Promise.prototype.finally",function(e){return e||function(t){return this.then(function(n){return Promise.resolve(t()).then(function(){return n})},function(n){return Promise.resolve(t()).then(function(){throw n})})}}),Je("Array.prototype.entries",function(e){return e||function(){return $l(this,function(t,n){return[t,n]})}}),Je("Number.isNaN",function(e){return e||function(t){return typeof t=="number"&&isNaN(t)}}),Je("String.prototype.repeat",function(e){return e||function(t){var n=lu(this,null,"repeat");if(t<0||t>1342177279)throw new RangeError("Invalid count value");t|=0;for(var i="";t;)t&1&&(i+=n),(t>>>=1)&&(n+=n);return i}}),Je("Number.EPSILON",function(){return 2220446049250313e-31}),Je("Number.MAX_SAFE_INTEGER",function(){return 9007199254740991}),Je("Number.isFinite",function(e){return e||function(t){return typeof t!="number"?!1:!isNaN(t)&&t!==1/0&&t!==-1/0}}),Je("Object.values",function(e){return e||function(t){var n=[],i;for(i in t)bn(t,i)&&n.push(t[i]);return n}}),Je("Math.log2",function(e){return e||function(t){return Math.log(t)/Math.LN2}}),Je("String.prototype.endsWith",function(e){return e||function(t,n){var i=lu(this,t,"endsWith");n===void 0&&(n=i.length),n=Math.max(0,Math.min(n|0,i.length));for(var r=t.length;r>0&&n>0;)if(i[--n]!=t[--r])return!1;return r<=0}}),Je("Math.trunc",function(e){return e||function(t){if(t=Number(t),isNaN(t)||t===1/0||t===-1/0||t===0)return t;var n=Math.floor(Math.abs(t));return t<0?-n:n}});var $T=this||self;function K(e,t){e=e.split(".");var n=$T;e[0]in n||typeof n.execScript>"u"||n.execScript("var "+e[0]);for(var i;e.length&&(i=e.shift());)e.length||t===void 0?n[i]&&n[i]!==Object.prototype[i]?n=n[i]:n=n[i]={}:n[i]=t}function Pr(e){this.g=Math.exp(Math.log(.5)/e),this.i=this.h=0}Pr.prototype.sample=function(e,t){var n=Math.pow(this.g,e);t=t*(1-n)+n*this.h,isNaN(t)||(this.h=t,this.i+=e)};function cu(e){return e.h/(1-Math.pow(e.g,e.i))}function _o(){this.h=new Pr(2),this.j=new Pr(5),this.g=0,this.i=128e3,this.l=16e3}_o.prototype.configure=function(e){this.i=e.minTotalBytes,this.l=e.minBytes,this.h.g=Math.exp(Math.log(.5)/e.fastHalfLife),this.j.g=Math.exp(Math.log(.5)/e.slowHalfLife)},_o.prototype.sample=function(e,t){if(!(t<this.l)){var n=8e3*t/e;e/=1e3,this.g+=t,this.h.sample(e,n),this.j.sample(e,n)}},_o.prototype.getBandwidthEstimate=function(e){return this.g<this.i?e:Math.min(cu(this.h),cu(this.j))};function QT(){}function Xn(){}function ve(){}function Li(e){var t=dt.apply(1,arguments);Hp.has(e)||(Hp.add(e),ve.apply(QT,H(t)))}function ZT(){}function ck(){}function fk(){}var Hp=new Set;B.console&&(new Map().set(1,function(){return console.error.apply(console,H(dt.apply(0,arguments)))}).set(2,function(){return console.warn.apply(console,H(dt.apply(0,arguments)))}).set(3,function(){return console.info.apply(console,H(dt.apply(0,arguments)))}).set(4,function(){return console.log.apply(console,H(dt.apply(0,arguments)))}).set(5,function(){return console.debug.apply(console,H(dt.apply(0,arguments)))}).set(6,function(){return console.debug.apply(console,H(dt.apply(0,arguments)))}),ve=function(){return console.warn.apply(console,H(dt.apply(0,arguments)))},Xn=function(){console.error.apply(console,H(dt.apply(0,arguments)))});function Gp(e,t){return typeof e=="number"&&typeof t=="number"&&isNaN(e)&&isNaN(t)?!0:e===t}function Rn(e,t){t=e.indexOf(t),t>-1&&e.splice(t,1)}function rr(e,t,n){if(n||(n=Gp),e.length!=t.length)return!1;t=t.slice(),e=m(e);for(var i=e.next(),r={};!i.done;r={wi:void 0},i=e.next()){if(r.wi=i.value,i=t.findIndex(function(o){return function(s){return n(o.wi,s)}}(r)),i==-1)return!1;t[i]=t[t.length-1],t.pop()}return t.length==0}function Pi(e,t,n){if(e===t)return!0;if(!e||!t)return e==t;if(n||(n=Gp),e.length!=t.length)return!1;for(var i=0;i<e.length;i++)if(!n(e[i],t[i]))return!1;return!0}function fu(){this.g=new Map}d=fu.prototype,d.push=function(e,t){this.g.getOrInsertComputed(e,function(){return[]}).push(t)},d.get=function(e){return this.g.has(e)?this.g.get(e).slice():null},d.remove=function(e,t){if(this.g.has(e)){var n=this.g.get(e).filter(function(i){return i!=t});this.g.set(e,n),n.length||this.g.delete(e)}},d.forEach=function(e){this.g.forEach(function(t,n){e(n,t)})},d.size=function(){return this.g.size},d.keys=function(){return Array.from(this.g.keys())};function Ee(){this.g=new fu}d=Ee.prototype,d.release=function(){this.Qa(),this.g=null},d.D=function(e,t,n,i){this.g&&(e=new Kp(e,t,n,i),this.g.push(t,e))},d.ya=function(e,t,n,i){function r(s){o.Ma(e,t,r),n(s)}var o=this;this.D(e,t,r,i)},d.Ma=function(e,t,n){if(this.g){var i=this.g.get(t)||[];i=m(i);for(var r=i.next();!r.done;r=i.next())r=r.value,r.target!=e||n!=r.listener&&n||(r.Ma(),this.g.remove(t,r))}},d.Qa=function(){if(this.g){for(var e=[],t=m(this.g.g.values()),n=t.next();!n.done;n=t.next())e.push.apply(e,H(n.value));for(e=m(e),t=e.next();!t.done;t=e.next())t.value.Ma();this.g.g.clear()}},K("shaka.util.EventManager",Ee),Ee.prototype.removeAll=Ee.prototype.Qa,Ee.prototype.unlisten=Ee.prototype.Ma,Ee.prototype.listenOnce=Ee.prototype.ya,Ee.prototype.listen=Ee.prototype.D,Ee.prototype.release=Ee.prototype.release;function Kp(e,t,n,i){this.target=e,this.type=t,this.listener=n,this.g=ex(e,i),this.target.addEventListener(t,n,this.g)}Kp.prototype.Ma=function(){this.target.removeEventListener(this.type,this.listener,this.g),this.listener=this.target=null,this.g=!1};function ex(e,t){if(t==null)return!1;if(typeof t=="boolean")return t;var n=new Set(["passive","capture"]);return Object.keys(t).filter(function(i){return!n.has(i)}),tx(e)?t:t.capture||!1}function tx(e){var t=Wp;if(t==null){t=!1;try{var n={},i={get:function(){return t=!0,!1}};Object.defineProperty(n,"passive",i),Object.defineProperty(n,"capture",i),i=function(){},e.addEventListener("test",i,n),e.removeEventListener("test",i,n)}catch{t=!1}Wp=t}return t||!1}var Wp=void 0;K("shaka.config.AutoShowText",{NEVER:0,ALWAYS:1,IF_PREFERRED_TEXT_LANGUAGE:2,IF_SUBTITLES_MAY_BE_NEEDED:3});function We(e){this.h=e,this.g=void 0}We.prototype.value=function(){return this.g===void 0&&(this.g=this.h()),this.g};/*
 @license
 Shaka Player
 Copyright 2025 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function pe(){return nx.value()}var Fn=null,Ql=null,nx=new We(function(){var e=void 0;return Fn&&(e=Fn()),!e&&Ql&&(e=Ql()),e});function Zl(e,t){this.g=e,this.h=t}Zl.prototype.toString=function(){return"v"+this.g+"."+this.h};function Te(e,t){var n=new Zl(5,0),i=Xp,r=i.g,o=n.h-r.h;((n.g-r.g||o)>0?i.i:i.h)(i.g,n,e,t)}function ix(e,t,n,i){ve([n,"has been deprecated and will be removed in",t,". We are currently at version",e,". Additional information:",i].join(" "))}function rx(e,t,n,i){Xn([n,"has been deprecated and has been removed in",t,". We are now at version",e,". Additional information:",i].join(" "))}var Xp=null;/*
 @license
 Copyright 2008 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/var ox=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$");/*
 @license
 Copyright 2006 The Closure Library Authors
 SPDX-License-Identifier: Apache-2.0
*/function tt(e){var t;e instanceof tt?(du(this,e.jc),this.hd=e.hd,pu(this,e.Db),ec(this,e.Ed),this.Sb=e.Sb,or(this,e.g.clone()),this.Rc=e.Rc):e&&(t=String(e).match(ox))?(du(this,t[1]||"",!0),this.hd=Nr(t[2]||""),pu(this,t[3]||"",!0),ec(this,t[4]),this.Sb=Nr(t[5]||"",!0),or(this,t[6]||"",!0),this.Rc=Nr(t[7]||"")):this.g=new jr(null)}d=tt.prototype,d.jc="",d.hd="",d.Db="",d.Ed=null,d.Sb="",d.Rc="",d.toString=function(){var e=[],t=this.jc;if(t&&e.push(Bo(t,zp,!0),":"),t=this.Db){e.push("//");var n=this.hd;n&&e.push(Bo(n,zp,!0),"@"),e.push(encodeURIComponent(t).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t=this.Ed,t!=null&&e.push(":",String(t))}return(t=this.Sb)&&(this.Db&&t.charAt(0)!="/"&&e.push("/"),e.push(Bo(t,t.charAt(0)=="/"?ax:ux,!0))),(t=this.g.toString())&&e.push("?",t),(t=this.Rc)&&e.push("#",Bo(t,cx)),e.join("")},d.resolve=function(e){var t=this.clone();t.jc==="data"&&(t=new tt);var n=!!e.jc;n?du(t,e.jc):n=!!e.hd,n?t.hd=e.hd:n=!!e.Db,n?pu(t,e.Db):n=e.Ed!=null;var i=e.Sb;if(n)ec(t,e.Ed);else if(n=!!e.Sb){if(i.charAt(0)!="/")if(this.Db&&!this.Sb)i="/"+i;else{var r=t.Sb.lastIndexOf("/");r!=-1&&(i=t.Sb.substr(0,r+1)+i)}if(i==".."||i==".")i="";else if(i.indexOf("./")!=-1||i.indexOf("/.")!=-1){r=i.lastIndexOf("/",0)==0,i=i.split("/");for(var o=[],s=0;s<i.length;){var u=i[s++];u=="."?r&&s==i.length&&o.push(""):u==".."?((o.length>1||o.length==1&&o[0]!="")&&o.pop(),r&&s==i.length&&o.push("")):(o.push(u),r=!0)}i=o.join("/")}}return n?t.Sb=i:n=e.g.toString()!=="",n?or(t,e.g.clone()):n=!!e.Rc,n&&(t.Rc=e.Rc),t},d.clone=function(){return new tt(this)};function du(e,t,n){e.jc=n?Nr(t,!0):t,e.jc&&(e.jc=e.jc.replace(/:$/,""))}function pu(e,t,n){e.Db=n?Nr(t,!0):t}function ec(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.Ed=t}else e.Ed=null}function or(e,t,n){t instanceof jr?e.g=t:(n||(t=Bo(t,lx)),e.g=new jr(t))}function Nr(e,t){return e?t?decodeURI(e):decodeURIComponent(e):""}function Bo(e,t,n){return e!=null?(e=encodeURI(e).replace(t,sx),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function sx(e){return e=e.charCodeAt(0),"%"+(e>>4&15).toString(16)+(e&15).toString(16)}var zp=/[#\/\?@]/g,ux=/[#\?:]/g,ax=/[#\?]/g,lx=/[#\?@]/g,cx=/#/g;function jr(e){this.g=e||null}function hu(e){if(!e.eb&&(e.eb=new Map,e.Wd=0,e.g))for(var t=e.g.split("&"),n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(i>=0){var o=t[n].substring(0,i);r=t[n].substring(i+1)}else o=t[n];o=decodeURIComponent(o),r=r||"",e.add(o,decodeURIComponent(r))}}d=jr.prototype,d.eb=null,d.Wd=null;function Yp(e){return hu(e),e.Wd}d.add=function(e,t){hu(this),this.g=null;var n=this.eb.has(e)?this.eb.get(e):null;return n||this.eb.set(e,n=[]),n.push(t),this.Wd++,this},d.set=function(e,t){return hu(this),this.g=null,this.eb.has(e)?this.eb.set(e,[t]):this.add(e,t),this},d.get=function(e){return hu(this),this.eb.get(e)||[]},d.toString=function(){if(this.g)return this.g;if(!this.eb||!this.eb.size)return"";for(var e=[],t=m(this.eb.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=encodeURIComponent(i),i=this.eb.get(i);for(var r=0;r<i.length;r++){var o=n;i[r]!==""&&(o+="="+encodeURIComponent(i[r])),e.push(o)}}return this.g=e.join("&")},d.clone=function(){var e=new jr;if(e.g=this.g,this.eb){for(var t=new Map,n=m(this.eb),i=n.next();!i.done;i=n.next()){var r=m(i.value);i=r.next().value,r=r.next().value,t.set(i,r.concat())}e.eb=t,e.Wd=this.Wd}return e};function Or(){}function ii(e,t){if(!e&&!t)return!0;if(!e||!t||e.byteLength!=t.byteLength)return!1;if((ArrayBuffer.isView(e)?e.buffer:e)==(ArrayBuffer.isView(t)?t.buffer:t)&&(e.byteOffset||0)==(t.byteOffset||0))return!0;var n=re(e);t=re(t);for(var i=0;i<e.byteLength;i++)if(n[i]!=t[i])return!1;return!0}function gn(e){return ArrayBuffer.isView(e)?e.byteOffset==0&&e.byteLength==e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer:e}function re(e,t,n){return n=n===void 0?1/0:n,tc(e,t===void 0?0:t,n,Uint8Array)}function qp(e,t,n){return n=n===void 0?1/0:n,tc(e,t===void 0?0:t,n,Uint16Array)}function Ht(e,t,n){return n=n===void 0?1/0:n,tc(e,t===void 0?0:t,n,DataView)}function tc(e,t,n,i){var r=ArrayBuffer.isView(e)?e.buffer:e,o=1;"BYTES_PER_ELEMENT"in i&&(o=i.BYTES_PER_ELEMENT);var s=((e.byteOffset||0)+e.byteLength)/o;return e=Math.floor(Math.max(0,Math.min(((e.byteOffset||0)+t)/o,s))),new i(r,e,Math.floor(Math.min(e+Math.max(n,0),s))-e)}K("shaka.util.BufferUtils",Or),Or.toDataView=Ht,Or.toUint16=qp,Or.toUint8=re,Or.toArrayBuffer=gn,Or.equal=ii;function Jp(e,t){if(e===t||!e.length||!t.length)return!0;e=m(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,gu(n))return!0;for(var i=m(t),r=i.next();!r.done;r=i.next())if(r=r.value,n.keySystem===r.keySystem||gu(r))return!0}return!1}function $p(e,t){if(!e.length)return t;if(!t.length)return e;var n=[];e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=m(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.keySystem==o.keySystem){r=new Map;for(var s=m((i.initData||[]).concat(o.initData||[])),u=s.next();!u.done;u=s.next())u=u.value,r.set(u.keyId,u);r=Array.from(r.values()),s=i.keyIds&&o.keyIds?new Set([].concat(H(i.keyIds),H(o.keyIds))):i.keyIds||o.keyIds,n.push({keySystem:i.keySystem,licenseServerUri:i.licenseServerUri||o.licenseServerUri,distinctiveIdentifierRequired:i.distinctiveIdentifierRequired||o.distinctiveIdentifierRequired,persistentStateRequired:i.persistentStateRequired||o.persistentStateRequired,videoRobustness:i.videoRobustness||o.videoRobustness,audioRobustness:i.audioRobustness||o.audioRobustness,serverCertificate:i.serverCertificate||o.serverCertificate,serverCertificateUri:i.serverCertificateUri||o.serverCertificateUri,initData:r,keyIds:s});break}else gu(i)?n.push(i):gu(o)&&n.push(o)}return n}function nc(e){return e?!!e.match(/^com\.(microsoft|chromecast)\.playready/):!1}function bo(e){return e?!!e.match(/^com\.apple\.fps/):!1}function gu(e){return(e=e.licenseServerUri)?e.startsWith("data:application/json;base64,"):!1}function ic(e,t,n,i){return i=[].concat(H(new Set(i))).sort().join("#"),e+"#"+t+"#"+n+"#"+i}var mu=new We(function(){return gn(new Uint8Array([0]))}),Ur=new Map;function D(e,t,n){var i=dt.apply(3,arguments);this.severity=e,this.category=t,this.code=n,this.data=i,this.handled=!1,this.message="Shaka Error "+this.code;try{throw Error(this.message||"Shaka Error")}catch(r){this.stack=r.stack}}D.prototype.toString=function(){return"shaka.util.Error "+JSON.stringify(this,null,"  ")},K("shaka.util.Error",D),D.Severity={RECOVERABLE:1,CRITICAL:2},D.Category={NETWORK:1,TEXT:2,MEDIA:3,MANIFEST:4,STREAMING:5,DRM:6,PLAYER:7,CAST:8,STORAGE:9,ADS:10},D.Code={UNSUPPORTED_SCHEME:1e3,BAD_HTTP_STATUS:1001,HTTP_ERROR:1002,TIMEOUT:1003,MALFORMED_DATA_URI:1004,REQUEST_FILTER_ERROR:1006,RESPONSE_FILTER_ERROR:1007,MALFORMED_TEST_URI:1008,UNEXPECTED_TEST_REQUEST:1009,ATTEMPTS_EXHAUSTED:1010,SEGMENT_MISSING:1011,INVALID_TEXT_HEADER:2e3,INVALID_TEXT_CUE:2001,UNABLE_TO_DETECT_ENCODING:2003,BAD_ENCODING:2004,INVALID_XML:2005,INVALID_MP4_TTML:2007,INVALID_MP4_VTT:2008,UNABLE_TO_EXTRACT_CUE_START_TIME:2009,INVALID_MP4_CEA:2010,TEXT_COULD_NOT_GUESS_MIME_TYPE:2011,CANNOT_ADD_EXTERNAL_TEXT_TO_SRC_EQUALS:2012,TEXT_ONLY_WEBVTT_SRC_EQUALS:2013,MISSING_TEXT_PLUGIN:2014,UNSUPPORTED_EXTERNAL_THUMBNAILS_URI:2017,BUFFER_READ_OUT_OF_BOUNDS:3e3,JS_INTEGER_OVERFLOW:3001,EBML_OVERFLOW:3002,EBML_BAD_FLOATING_POINT_SIZE:3003,MP4_SIDX_WRONG_BOX_TYPE:3004,MP4_SIDX_INVALID_TIMESCALE:3005,MP4_SIDX_TYPE_NOT_SUPPORTED:3006,WEBM_CUES_ELEMENT_MISSING:3007,WEBM_EBML_HEADER_ELEMENT_MISSING:3008,WEBM_SEGMENT_ELEMENT_MISSING:3009,WEBM_INFO_ELEMENT_MISSING:3010,WEBM_DURATION_ELEMENT_MISSING:3011,WEBM_CUE_TRACK_POSITIONS_ELEMENT_MISSING:3012,WEBM_CUE_TIME_ELEMENT_MISSING:3013,MEDIA_SOURCE_OPERATION_FAILED:3014,MEDIA_SOURCE_OPERATION_THREW:3015,VIDEO_ERROR:3016,QUOTA_EXCEEDED_ERROR:3017,TRANSMUXING_FAILED:3018,CONTENT_TRANSFORMATION_FAILED:3019,MSS_MISSING_DATA_FOR_TRANSMUXING:3020,MSS_TRANSMUXING_FAILED:3022,TRANSMUXING_NO_VIDEO_DATA:3023,STREAMING_NOT_ALLOWED:3024,UNABLE_TO_GUESS_MANIFEST_TYPE:4e3,DASH_INVALID_XML:4001,DASH_NO_SEGMENT_INFO:4002,DASH_EMPTY_ADAPTATION_SET:4003,DASH_EMPTY_PERIOD:4004,DASH_WEBM_MISSING_INIT:4005,DASH_UNSUPPORTED_CONTAINER:4006,DASH_PSSH_BAD_ENCODING:4007,DASH_NO_COMMON_KEY_SYSTEM:4008,DASH_MULTIPLE_KEY_IDS_NOT_SUPPORTED:4009,DASH_CONFLICTING_KEY_IDS:4010,RESTRICTIONS_CANNOT_BE_MET:4012,HLS_PLAYLIST_HEADER_MISSING:4015,INVALID_HLS_TAG:4016,HLS_INVALID_PLAYLIST_HIERARCHY:4017,DASH_DUPLICATE_REPRESENTATION_ID:4018,HLS_MULTIPLE_MEDIA_INIT_SECTIONS_FOUND:4020,HLS_REQUIRED_ATTRIBUTE_MISSING:4023,HLS_REQUIRED_TAG_MISSING:4024,HLS_COULD_NOT_GUESS_CODECS:4025,HLS_KEYFORMATS_NOT_SUPPORTED:4026,DASH_UNSUPPORTED_XLINK_ACTUATE:4027,DASH_XLINK_DEPTH_LIMIT:4028,CONTENT_UNSUPPORTED_BY_BROWSER:4032,CANNOT_ADD_EXTERNAL_TEXT_TO_LIVE_STREAM:4033,NO_VARIANTS:4036,PERIOD_FLATTENING_FAILED:4037,INCONSISTENT_DRM_ACROSS_PERIODS:4038,HLS_VARIABLE_NOT_FOUND:4039,HLS_MSE_ENCRYPTED_MP2T_NOT_SUPPORTED:4040,HLS_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4041,NO_WEB_CRYPTO_API:4042,CANNOT_ADD_EXTERNAL_THUMBNAILS_TO_LIVE_STREAM:4045,MSS_INVALID_XML:4046,MSS_LIVE_CONTENT_NOT_SUPPORTED:4047,AES_128_INVALID_IV_LENGTH:4048,AES_128_INVALID_KEY_LENGTH:4049,DASH_CONFLICTING_AES_128:4050,DASH_UNSUPPORTED_AES_128:4051,DASH_INVALID_PATCH:4052,HLS_EMPTY_MEDIA_PLAYLIST:4053,DASH_MSE_ENCRYPTED_LEGACY_APPLE_MEDIA_KEYS_NOT_SUPPORTED:4054,CANNOT_ADD_EXTERNAL_CHAPTERS_TO_LIVE_STREAM:4055,STREAMING_ENGINE_STARTUP_INVALID_STATE:5006,NO_RECOGNIZED_KEY_SYSTEMS:6e3,REQUESTED_KEY_SYSTEM_CONFIG_UNAVAILABLE:6001,FAILED_TO_CREATE_CDM:6002,FAILED_TO_ATTACH_TO_VIDEO:6003,INVALID_SERVER_CERTIFICATE:6004,FAILED_TO_CREATE_SESSION:6005,FAILED_TO_GENERATE_LICENSE_REQUEST:6006,LICENSE_REQUEST_FAILED:6007,LICENSE_RESPONSE_REJECTED:6008,ENCRYPTED_CONTENT_WITHOUT_DRM_INFO:6010,NO_LICENSE_SERVER_GIVEN:6012,OFFLINE_SESSION_REMOVED:6013,EXPIRED:6014,SERVER_CERTIFICATE_REQUIRED:6015,INIT_DATA_TRANSFORM_ERROR:6016,SERVER_CERTIFICATE_REQUEST_FAILED:6017,MIN_HDCP_VERSION_NOT_MATCH:6018,ERROR_CHECKING_HDCP_VERSION:6019,MISSING_EME_SUPPORT:6020,LOAD_INTERRUPTED:7e3,OPERATION_ABORTED:7001,NO_VIDEO_ELEMENT:7002,OBJECT_DESTROYED:7003,CONTENT_NOT_LOADED:7004,SRC_EQUALS_PRELOAD_NOT_SUPPORTED:7005,PRELOAD_DESTROYED:7006,QUEUE_INDEX_OUT_OF_BOUNDS:7007,CAST_API_UNAVAILABLE:8e3,NO_CAST_RECEIVERS:8001,ALREADY_CASTING:8002,UNEXPECTED_CAST_ERROR:8003,CAST_CANCELED_BY_USER:8004,CAST_CONNECTION_TIMED_OUT:8005,CAST_RECEIVER_APP_UNAVAILABLE:8006,STORAGE_NOT_SUPPORTED:9e3,INDEXED_DB_ERROR:9001,DEPRECATED_OPERATION_ABORTED:9002,REQUESTED_ITEM_NOT_FOUND:9003,MALFORMED_OFFLINE_URI:9004,CANNOT_STORE_LIVE_OFFLINE:9005,NO_INIT_DATA_FOR_OFFLINE:9007,LOCAL_PLAYER_INSTANCE_REQUIRED:9008,NEW_KEY_OPERATION_NOT_SUPPORTED:9011,KEY_NOT_FOUND:9012,MISSING_STORAGE_CELL:9013,STORAGE_LIMIT_REACHED:9014,DOWNLOAD_SIZE_CALLBACK_ERROR:9015,MODIFY_OPERATION_NOT_SUPPORTED:9016,INDEXED_DB_INIT_TIMED_OUT:9017,CS_IMA_SDK_MISSING:1e4,CS_AD_MANAGER_NOT_INITIALIZED:10001,SS_IMA_SDK_MISSING:10002,SS_AD_MANAGER_NOT_INITIALIZED:10003,CURRENT_DAI_REQUEST_NOT_FINISHED:10004,MT_AD_MANAGER_NOT_INITIALIZED:10005,INTERSTITIAL_AD_MANAGER_NOT_INITIALIZED:10006,VAST_INVALID_XML:10007};function sr(){}function Xe(e){if(!e)return"";if(e=re(e),e[0]==239&&e[1]==187&&e[2]==191&&(e=e.subarray(3)),B.TextDecoder&&!pe().yh())return e=new TextDecoder().decode(e),e.includes("�")&&Xn('Decoded string contains an "unknown character" codepoint.  That probably means the UTF8 encoding was incorrect!'),e;for(var t="",n=0;n<e.length;++n){var i=65533;if(e[n]&128?e.length>=n+2&&(e[n]&224)==192&&(e[n+1]&192)==128?(i=(e[n]&31)<<6|e[n+1]&63,n+=1):e.length>=n+3&&(e[n]&240)==224&&(e[n+1]&192)==128&&(e[n+2]&192)==128?(i=(e[n]&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,n+=2):e.length>=n+4&&(e[n]&241)==240&&(e[n+1]&192)==128&&(e[n+2]&192)==128&&(e[n+3]&192)==128&&(i=(e[n]&7)<<18|(e[n+1]&63)<<12|(e[n+2]&63)<<6|e[n+3]&63,n+=3):i=e[n],i<=65535)t+=String.fromCharCode(i);else{i-=65536;var r=i&1023;t+=String.fromCharCode(55296+(i>>10)),t+=String.fromCharCode(56320+r)}}return t}function Ni(e,t,n){if(!e)return"";if(!n&&e.byteLength%2!=0)throw new D(2,2,2004);n=Math.floor(e.byteLength/2);var i=new Uint16Array(n);e=Ht(e);for(var r=0;r<n;r++)i[r]=e.getUint16(r*2,t);return vu.value()(i)}function zn(e){function t(i){return n.byteLength<=i||n[i]>=9&&n[i]<=126}if(!e)return"";var n=re(e);if(n[0]==239&&n[1]==187&&n[2]==191)return Xe(n);if(n[0]==254&&n[1]==255)return Ni(n.subarray(2),!1);if(n[0]==255&&n[1]==254)return Ni(n.subarray(2),!0);if(n[0]==0&&n[2]==0)return Ni(e,!1);if(n[1]==0&&n[3]==0)return Ni(e,!0);if(t(0)&&t(1)&&t(2)&&t(3))return Xe(e);throw new D(2,2,2003)}function Ln(e){if(B.TextEncoder&&!pe().yh()){var t=new TextEncoder;return gn(t.encode(e))}e=encodeURIComponent(e),e=unescape(e),t=new Uint8Array(e.length);for(var n=0;n<e.length;n++)t[n]=e[n].charCodeAt(0);return gn(t)}function rc(e,t){for(var n=new ArrayBuffer(e.length*2),i=new DataView(n),r=0;r<e.length;++r)i.setUint16(r*2,e.charCodeAt(r),t);return n}function Ut(e){var t={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&apos;":"'","&nbsp;":" ","&lrm;":"‎","&rlm;":"‏"},n=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return r[1]=="#"?(r=r[2]=="x"||r[2]=="X"?parseInt(r.substring(3),16):parseInt(r.substring(2),10),r>=0&&r<=1114111?String.fromCodePoint(r):""):t[r]||"'"}):e||""}K("shaka.util.StringUtils",sr),sr.resetFromCharCode=function(){vu.g=void 0},sr.toUTF16=rc,sr.toUTF8=Ln,sr.fromBytesAutoDetect=zn,sr.fromUTF16=Ni,sr.fromUTF8=Xe;var vu=new We(function(){function e(n){try{var i=new Uint8Array(n);return String.fromCharCode.apply(null,i).length>0}catch{return!1}}for(var t={Pc:65536};t.Pc>0;t={Pc:t.Pc},t.Pc/=2)if(e(t.Pc))return function(n){return function(i){for(var r="",o=0;o<i.length;o+=n.Pc)r+=String.fromCharCode.apply(null,i.subarray(o,o+n.Pc));return r}}(t);return null});function Et(){}function yu(e){return e=re(e),Uint8Array.prototype.toBase64?e.toBase64({alphabet:"base64",omitPadding:!1}):(e=vu.value()(e),btoa(e))}function ri(e,t){return t=t??!0,Uint8Array.prototype.toBase64?re(e).toBase64({alphabet:"base64url",omitPadding:!t}):(e=yu(e).replace(/\+/g,"-").replace(/\//g,"_"),t?e:e.replace(/[=]*$/,""))}function mn(e){if(!("fromBase64"in Uint8Array)){e=B.atob(e.replace(/-/g,"+").replace(/_/g,"/"));for(var t=new Uint8Array(e.length),n=0;n<e.length;++n)t[n]=e.charCodeAt(n);return t}return e=e.replace(/\s+/g,""),Uint8Array.fromBase64(e,{alphabet:/[-_]/.test(e)?"base64url":"base64"})}function ur(e){if(!("fromHex"in Uint8Array)){for(var t=e.length/2,n=new Uint8Array(t),i=0;i<t;i++)n[i]=B.parseInt(e.substr(i*2,2),16);return n}return Uint8Array.fromHex(e)}function oi(e){var t=re(e);if(!Uint8Array.prototype.toHex){e="",t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n=n.toString(16),n.length==1&&(n="0"+n),e+=n;return e}return t.toHex()}function it(){for(var e=dt.apply(0,arguments),t=0,n=0;n<e.length;++n)t+=e[n].byteLength;t=new Uint8Array(t);for(var i=n=0;i<e.length;++i){var r=e[i];ArrayBuffer.isView(r)&&r.BYTES_PER_ELEMENT===1?t.set(r,n):t.set(re(r),n),n+=r.byteLength}return t}K("shaka.util.Uint8ArrayUtils",Et),Et.concat=it,Et.toHex=oi,Et.fromHex=ur,Et.fromBase64=mn,Et.toBase64=ri,Et.toStandardBase64=yu;function pt(e,t,n){if(n=n===void 0?"":n,t.length==0)return e;if(e.length==1&&t.length==1){var i=new tt(e[0]);return t=new tt(t[0]),t=i.resolve(t),n&&or(t,n),[t.toString()]}t=t.map(function(u){return new tt(u)}),i=[],e=m(e);for(var r=e.next();!r.done;r=e.next()){r=new tt(r.value);for(var o=m(t),s=o.next();!s.done;s=o.next())s=r.resolve(s.value),n&&or(s,n),i.push(s.toString())}return i}function si(e,t,n,i,r){return t={keySystem:e,encryptionScheme:t,licenseServerUri:"",distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:n||[],keyIds:new Set,mediaTypes:r},i&&(t.keySystemUris=new Set([i])),!n&&bo(e)&&t.initData.push({initDataType:"sinf",initData:new Uint8Array(0),keyId:null}),t}function Qp(e,t){t=t===void 0?"cenc":t;var n=[],i=[],r=[];e.forEach(function(s,u){var a=u;a.length!=22&&(a=ri(ur(u),!1));var l=s;l.length!=22&&(l=ri(ur(s),!1)),s={kty:"oct",kid:a,k:l},n.push(s),i.push(s.kid),r.push(u)}),e=JSON.stringify({keys:n});var o=JSON.stringify({kids:i});return o=[{initData:re(Ln(o)),initDataType:"keyids"}],{keySystem:"org.w3.clearkey",encryptionScheme:t,licenseServerUri:"data:application/json;base64,"+B.btoa(e),distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",sessionType:"",initData:o,keyIds:new Set(r)}}function _r(e,t){if(t.length==1)return t[0];if(e=Gt(e,t),e!=null)return e;throw new D(2,4,4025,t)}function Gt(e,t){var n=eh.get(e);n=m(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;for(var r=m(t),o=r.next();!o.done;o=r.next())if(o=o.value,i.test(o.trim()))return o.trim()}return e==he?"":null}function oc(e,t){var n=[];e=eh.get(e),e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;for(var r=m(t),o=r.next();!o.done;o=r.next())o=o.value,i.test(o.trim())&&n.push(o.trim())}return n}var he="text",rt={va:"video",$:"audio",Na:he,Yf:"image",vl:"application"},Zp=1/15,eh=new Map().set("audio",[/^vorbis$/,/^Opus$/,/^opus$/,/^fLaC$/,/^flac$/,/^mp4a/,/^[ae]c-3$/,/^ac-4/,/^dts[cex]$/,/^iamf/,/^mhm[12]/,/^ac3$/,/^eac3$/,/^apac$/]).set("video",[/^avc/,/^hev/,/^hvc/,/^vvc/,/^vvi/,/^vp0?[89]/,/^av01/,/^dvh/,/^dva/,/^dav/]).set("text",[/^vtt$/,/^wvtt/,/^stpp/]);function Fo(e,t,n,i){this.g=null,this.l=e,this.i=t,this.m=n,this.o=i,this.j=!1;e:{if(typeof libDPIModule>"u"&&ve("Could not find LCEVC Library dependencies on this page"),typeof LCEVCdec<"u")this.h=LCEVCdec;else if(typeof LcevcDil<"u")this.h=LcevcDil,this.j=!0,Te("LcevcDil","lcevc_dil.js is deprecated, please use lcevc_dec.js instead");else{ve("Could not find LCEVC Library on this page"),e=!1;break e}typeof this.h.SupportObject>"u"?(ve("Could not find LCEVC Library on this page"),e=!1):(this.h.SupportObject.SupportStatus||ve(this.h.SupportObject.SupportError),e=typeof this.h<"u"&&typeof libDPIModule<"u"&&this.i instanceof HTMLCanvasElement&&this.h.SupportObject.SupportStatus)}e&&!this.g&&this.h.SupportObject.webGLSupport(this.i)&&(this.i.classList.remove("shaka-hidden"),this.g=this.j?new this.h.LcevcDil(this.l,this.i,this.m):new this.h.LCEVCdec(this.l,this.i,this.m))}function Tu(e,t,n,i){i.type!=="video"||e.o&&!i.baseOriginalId||e.g&&e.g.appendBuffer(t,"video",i.id,-n,!e.o)}function th(e){e.g&&e.i.classList.add("shaka-hidden")}Fo.prototype.release=function(){this.g&&(this.g.close(),this.g=null)};function nh(e){return e&&typeof LCEVCdec<"u"?e.codecs=="lvc1":!1}K("shaka.lcevc.Dec",Fo),Fo.prototype.release=Fo.prototype.release;function Vo(){}function ar(e,t){Br.set(e,t)}function fx(){var e={};if(pe(),ei())for(var t=m(Br.keys()),n=t.next();!n.done;n=t.next())e[n.value]=!0;for(t=m(["application/dash+xml","application/x-mpegurl","application/vnd.apple.mpegurl","application/vnd.ms-sstr+xml"]),n=t.next();!n.done;n=t.next())n=n.value,e[n]=ei()?Br.has(n):Ar().canPlayType(n)!="";return e}function ih(e,t){if(t){var n=Br.get(t.toLowerCase());if(n)return n}throw new D(2,4,4e3,e,t)}K("shaka.media.ManifestParser",Vo),Vo.unregisterParserByMime=function(e){Br.delete(e)},Vo.registerParserByMime=ar,Vo.registerParserByExtension=function(){Te("ManifestParser.registerParserByExtension","Please use an ManifestParser with registerParserByMime function.")},Vo.AccessibilityPurpose={Dm:"visually impaired",Ol:"hard of hearing",lm:"spoken subtitles"};var Br=new Map;function Ho(){}Ho.prototype.extract=function(){},Ho.prototype.decode=function(){return[]},Ho.prototype.clear=function(){},Ho.prototype.getStreams=function(){return[]};function sc(){}sc.prototype.init=function(){},sc.prototype.parse=function(){return[]};function rh(){}d=rh.prototype,d.init=function(){},d.Af=function(){},d.Qd=function(){},d.remove=function(){},d.Zf=function(){},K("shaka.media.IClosedCaptionParser",rh);function Vn(e){this.h=new Map,this.i=0,this.j=new sc,(e=oh(e.toLowerCase()))&&(this.j=e()),this.g=new Ho,(e=lr)&&(this.g=e(),this.h.set(this.i,this.g))}d=Vn.prototype,d.init=function(e,t,n){if(t=t===void 0?!1:t,n=n===void 0?-1:n,n!=-1&&this.i!=n){t=n;var i=this.h.get(t);this.h.set(this.i,this.g),i?this.g=i:((i=lr)&&(this.g=i()),this.h.set(t,this.g))}else t||this.Qd();this.j.init(e),n!=-1&&(this.i=n)},d.Af=function(e){e=this.j.parse(e),e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=re(t.packet);n.length>0&&this.g.extract(n,t.pts)}return this.g.decode()},d.Qd=function(){this.g.clear()},d.remove=function(e){e=e===void 0?[]:e,e=new Set(e);for(var t=m(this.h.keys()),n=t.next();!n.done;n=t.next())if(n=n.value,!e.has(n)){var i=this.h.get(n);i&&i.clear(),this.h.delete(n)}},d.Zf=function(){return this.g.getStreams()};function uc(e,t){ac.set(e,t)}function oh(e){return ac.get(e)}K("shaka.media.ClosedCaptionParser",Vn),Vn.findDecoder=function(){return lr},Vn.unregisterDecoder=function(){lr=null},Vn.registerDecoder=function(e){lr=e},Vn.findParser=oh,Vn.unregisterParser=function(e){ac.delete(e)},Vn.registerParser=uc;var ac=new Map,lr=null;function cr(){this.id="",this.regionAnchorY=this.regionAnchorX=this.viewportAnchorY=this.viewportAnchorX=0,this.height=this.width=100,this.viewportAnchorUnits=this.widthUnits=this.heightUnits=qt,this.scroll=sh}K("shaka.text.CueRegion",cr);var qt=1;cr.units={PX:0,PERCENTAGE:qt,LINES:2};var sh="";cr.scrollMode={NONE:sh,UP:"up"};function br(e){this.h=e||"",this.g=0}function Fr(e){ji(e,/[ \t]+/gm)}function ji(e,t){return t.lastIndex=e.g,t=t.exec(e.h),t=t==null?null:{position:t.index,length:t[0].length,results:t},e.g==e.h.length||t==null||t.position!=e.g?null:(e.g+=t.length,t.results)}function fr(e){return e.g==e.h.length?null:(e=ji(e,/[^ \t\n]*/gm))?e[0]:null}function Go(e){if(e=ji(e,dx),e==null)return null;var t=Number(e[2]),n=Number(e[3]);return t>59||n>59?null:(Number(e[6])||0)/1e3+n+t*60+(Number(e[1])||0)*3600}function Vr(e){return e?Go(new br(e)):null}var dx=/(?:(\d{1,}):)?(\d{2}):(\d{2})((\.(\d{1,3})))?/g;function xu(){}function Pn(e){function t(i){switch(typeof i){case"undefined":case"boolean":case"number":case"string":case"symbol":case"function":return i;default:if(!i||ArrayBuffer.isView(i))return i;if(n.has(i))return null;var r=Array.isArray(i);if(i.constructor!=Object&&!r)return null;n.add(i);var o=r?[]:{},s;for(s in i)o[s]=t(i[s]);return r&&(o.length=i.length),o}}var n=new WeakSet;return t(e)}function Oi(e){var t={},n;for(n in e)t[n]=e[n];return t}function Su(e){if(Array.isArray(e)){for(var t=[],n=0;n<e.length;n++){var i=n.toString(),r=e[n];r!==void 0&&(r=Su(r))&&t.push(i+":"+r)}e="["+t.join(",")+"]"}else if(typeof e=="function")e="";else if(e instanceof Object){for(n=Object.keys(e),n.sort(),t=[],n=m(n),i=n.next();!i.done;i=n.next())r=i.value,i=JSON.stringify(r),r=e[r],r!==void 0&&(r=Su(r))&&t.push(i+":"+r);e="{"+t.join(",")+"}"}else e=JSON.stringify(e);return e}K("shaka.util.ObjectUtils",xu),xu.alphabeticalKeyOrderStringify=Su,xu.shallowCloneObject=Oi,xu.cloneObject=Pn;/*
 @license
 tXml
 Copyright 2015 Tobias Nickel
 SPDX-License-Identifier: MIT
*/function Ko(e,t){var n=n===void 0?!1:n;return e=zn(e),dr(e,t,n)}function dr(e,t,n){return e=px(e,n===void 0?!1:n),!t&&e.length?e[0]:(e=e.find(function(i){return t.split(",").includes(i.tagName)}))?e:null}function lc(e){return fc.has(e)?fc.get(e):""}function px(e,t){function n(o,s){s=s===void 0?!1:s;for(var u=[];e[r];)if(e.charCodeAt(r)==60){if(e.charCodeAt(r+1)===47){s=r+2,r=e.indexOf(">",r),s=e.substring(s,r);var a=s.indexOf(o);if(a==-1){var l=o.indexOf(".");l>0&&(a=s.indexOf(o.substring(0,l)))}if(a==-1)throw o=e.substring(0,r).split(`
`),Error(`Unexpected close tag
Line: `+(o.length-1)+`
Column: `+(o[o.length-1].length+1)+`
Char: `+e[r]);r+1&&(r+=1);break}else if(e.charCodeAt(r+1)===33){if(e.charCodeAt(r+2)==45){for(;r!==-1&&(e.charCodeAt(r)!==62||e.charCodeAt(r-1)!=45||e.charCodeAt(r-2)!=45||r==-1);)r=e.indexOf(">",r+1);r===-1&&(r=e.length)}else if(e.charCodeAt(r+2)===91&&e.charCodeAt(r+8)===91&&e.substr(r+3,5).toLowerCase()==="cdata"){a=e.indexOf("]]>",r),a==-1?(u.push(e.substr(r+9)),r=e.length):(u.push(e.substring(r+9,a)),r=a+3);continue}r++;continue}e:{l=s,r++;var c=i(),f={};for(a=[];e.charCodeAt(r)!==62&&e[r];){var p=e.charCodeAt(r);if(p>64&&p<91||p>96&&p<123){p=i();for(var h=e.charCodeAt(r);h&&h!==39&&h!==34&&!(h>64&&h<91||h>96&&h<123)&&h!==62;)r++,h=e.charCodeAt(r);var g=r+1;if(r=e.indexOf(e[r],g),g=(" "+e.slice(g,r)).slice(1),h===39||h===34){if(r===-1){if(l={tagName:c,attributes:f,children:a,parent:null},t)for(c=0;c<a.length;c++)typeof a[c]!="string"&&(a[c].parent=l);a=l;break e}}else g=null,r--;if(p.startsWith("xmlns:")){h=g;var v=p.split(":")[1];fc.set(h,v),dc.set(v,h)}c==="tt"&&p==="xml:space"&&g==="preserve"&&(l=!0),f[p]=g}r++}for(e.charCodeAt(r-1)!==47?(r++,a=n(c,l)):r++,l={tagName:c,attributes:f,children:a,parent:null},c=a.length,f=0;f<c;f++)p=a[f],typeof p!="string"?t&&(p.parent=l):f==c-1&&p==`
`&&a.pop();a=l}if(u.push(a),typeof a=="string")break;a.tagName[0]==="?"&&a.children&&(u.push.apply(u,H(a.children)),a.children=[])}else a=r,r=e.indexOf("<",r)-1,r===-2&&(r=e.length),a=(" "+e.slice(a,r+1)).slice(1),s?a.length>0&&u.push(a):(u.length&&a.length==1&&a[0]==`
`||a.trim().length>0)&&u.push(a),r++;return u}function i(){for(var o=r;`\r
	>/= `.indexOf(e[r])===-1&&e[r];)r++;return(" "+e.slice(o,r)).slice(1)}var r=0;return n("")}function wu(e){return typeof e=="string"}function uh(e){var t=[];if(!e.children)return[];e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n!="string"&&t.push(n);return t}function De(e,t){var n=[];if(!e.children)return[];e=m(e.children);for(var i=e.next();!i.done;i=e.next())i=i.value,i.tagName===t&&n.push(i);return n}function nt(e){return typeof e=="string"?Ut(e):(e=e.children.reduce(function(t,n){return typeof n=="string"?t+n:t},""),e===""?null:Ut(e))}function _t(e){return Array.from(e.children).every(function(t){return typeof t=="string"})?((e=nt(e))&&(e=e.trim()),e):null}function Hn(e,t,n){if(n=n===void 0?[]:n,e.tagName===t&&n.push(e),e.children){e=m(e.children);for(var i=e.next();!i.done;i=e.next())Hn(i.value,t,n)}return n}function He(e,t){return e=De(e,t),e.length!=1?null:e[0]}function vn(e,t,n){return e=ah(e,t,n),e.length!=1?null:e[0]}function oe(e,t,n,i){i=i===void 0?null:i;var r=null;return e=e.attributes[t],e!=null&&(r=n(e)),r??i}function ui(e,t,n){return t=lc(t),e.attributes[t+":"+n]||null}function ah(e,t,n){var i=lc(t);if(t=[],e.children)for(n=i?i+":"+n:n,e=m(e.children),i=e.next();!i.done;i=e.next())(i=i.value)&&i.tagName===n&&t.push(i);return t}function Yn(e,t,n){t=m(t);for(var i=t.next();!i.done;i=t.next())if(i=ui(e,i.value,n))return i;return null}function ai(e){return e?(/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e)&&(e+="Z"),e=Date.parse(e),isNaN(e)?null:e/1e3):null}function qn(e){return!e||(e=RegExp("^P(?:([0-9]*)Y)?(?:([0-9]*)M)?(?:([0-9]*)D)?(?:T(?:([0-9]*)H)?(?:([0-9]*)M)?(?:([0-9.]*)S)?)?$","i").exec(e),!e)?null:(e=31536e3*Number(e[1]||null)+2592e3*Number(e[2]||null)+86400*Number(e[3]||null)+3600*Number(e[4]||null)+60*Number(e[5]||null)+Number(e[6]||null),isFinite(e)?e:null)}function Au(e){var t=/([0-9]+)-([0-9]+)/.exec(e);return!t||(e=Number(t[1]),!isFinite(e))?null:(t=Number(t[2]),isFinite(t)?{start:e,end:t}:null)}function vt(e){return e=Number(e),e%1===0?e:null}function Jn(e){return e=Number(e),e%1===0&&e>0?e:null}function yt(e){return e=Number(e),e%1===0&&e>=0?e:null}function Eu(e){return e=Number(e),isNaN(e)?null:e}function Iu(e){return e?e.toLowerCase()==="true":!1}function hx(e){var t,n=(t=e.match(/^(\d+)\/(\d+)$/))?Number(t[1])/Number(t[2]):Number(e);return isNaN(n)?null:n}function Cu(e){var t=[];e=Ut(e).split(/\/+(?=(?:[^'"]*['"][^'"]*['"])*[^'"]*$)/),e=m(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=n.match(/^([\w]+)/);if(i){var r=n.match(/(@id='(.*?)')/),o=n.match(/(@t='(\d+)')/),s=n.match(/(@n='(\d+)')/),u=n.match(/\[(\d+)\]/);t.push({name:i[0],id:r?r[0].match(/'(.*?)'/)[0].replace(/'/gm,""):null,t:o?Number(o[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,n:s?Number(s[0].match(/'(.*?)'/)[0].replace(/'/gm,"")):null,position:u?Number(u[1])-1:null,Ec:n.split("/@")[1]||null})}else n.startsWith("@")&&t.length&&(t[t.length-1].Ec=n.slice(1))}return t}function lh(e,t){var n=Cu(t.attributes.sel||"");if(n.length){var i=n[n.length-1],r=t.attributes.pos||null;n=i.position,n==null&&(i.t!==null&&(n=ch(e,"t",i.t)),i.n!==null&&(n=ch(e,"n",i.n))),n===null?n=r==="prepend"?0:e.length:r==="prepend"?--n:r==="after"&&++n,r=t.tagName,(i=i.Ec)&&e[n]?fh(e[n],r,i,_t(t)||""):(r!=="remove"&&r!=="replace"||e.splice(n,1),r!=="add"&&r!=="replace"||e.splice.apply(e,[n,0].concat(H(t.children))))}}function ch(e,t,n){var i=0;e=m(e);for(var r=e.next();!r.done;r=e.next()){if(Number(r.value.attributes[t])===n)return i;i++}return null}function fh(e,t,n,i){t==="remove"?delete e.attributes[n]:(t==="add"||t==="replace")&&(e.attributes[n]=i)}function dh(e){var t="",n=e.tagName.split(":");n.length>0&&(t=n[0],t=dc.has(t)?dc.get(t):""),t=document.createElementNS(t,e.tagName);for(var i in e.attributes)t.setAttribute(i,e.attributes[i]);for(e=m(e.children),i=e.next();!i.done;i=e.next())i=i.value,n=void 0,typeof i=="string"?n=new Text(i):n=dh(i),t.appendChild(n);return t}function cc(e){if(!e)return null;var t={tagName:e.tagName,attributes:Oi(e.attributes),children:[],parent:null};e=m(e.children);for(var n=e.next();!n.done;n=e.next())n=n.value,typeof n=="string"||(n=cc(n),n.parent=t),t.children.push(n);return t}var fc=new Map,dc=new Map;function be(e,t,n){this.startTime=e,this.endTime=t,this.payload=n,this.region=new cr,this.position=null,this.positionAlign=Du,this.size=0,this.textAlign=$n,this.direction=zo,this.writingMode=pr,this.lineInterpretation=Yo,this.line=null,this.lineHeight="",this.lineAlign=hr,this.displayAlign=Xo,this.fontSize=this.border=this.backgroundImage=this.backgroundColor=this.color="",this.fontWeight=Th,this.fontStyle=gc,this.linePadding=this.letterSpacing=this.fontFamily="",this.opacity=1,this.textCombineUpright="",this.textDecoration=[],this.textStrokeWidth=this.textStrokeColor=this.textShadow="",this.wrapLine=!0,this.id="",this.nestedCues=[],this.lineBreak=this.isContainer=!1,this.rubyTag=null,this.cellResolution={columns:32,rows:15}}function ph(e,t){return e=new be(e,t,""),e.lineBreak=!0,e}be.prototype.clone=function(){var e=new be(0,0,""),t;for(t in this)e[t]=this[t],Array.isArray(e[t])&&(e[t]=e[t].slice());return e};function Mu(e,t){if(e.payload!=t.payload||!(Math.abs(e.startTime-t.startTime)<.001&&Math.abs(e.endTime-t.endTime)<.001))return!1;for(var n in e)if(n!="startTime"&&n!="endTime"&&n!="payload"){if(n=="nestedCues"){if(!Pi(e.nestedCues,t.nestedCues,Mu))return!1}else if(n=="region"||n=="cellResolution"){for(var i in e[n])if(e[n][i]!=t[n][i])return!1}else if(Array.isArray(e[n])){if(!Pi(e[n],t[n]))return!1}else if(e[n]!=t[n])return!1}return!0}function ku(e,t){t=t===void 0?new Map:t;var n=e.payload;if(n.includes("<")){t.size===0&&hh(t);var i=n;n=[];for(var r=-1,o=0;o<i.length;o++)i[o]==="<"?r=o+1:i[o]===">"&&r>0&&(r=i.substr(r,o-r),r.match(mx)&&n.push(r),r=-1);for(n=m(n),o=n.next();!o.done;o=n.next())o=o.value,i=i.replace("<"+o+">",'<div time="'+o+'">'),i+="</div>";e:{o=i,r=[];var s=-1;n="",i=!1;for(var u=0;u<o.length;u++)if(o[u]==="/"){var a=o.indexOf(">",u);if(a===-1){n=o;break e}if((a=o.substring(u+1,a))&&a=="v"){i=!0;var l=null;if(r.length&&(l=r[r.length-1]),l){if(l===a)n+="/"+a+">";else{if(!l.startsWith("v")){n+=o[u];continue}n+="/"+l+">"}u+=a.length+1}else n+=o[u]}else n+=o[u]}else o[u]==="<"?(s=u+1,o[s]!="v"&&(s=-1)):o[u]===">"&&s>0&&(r.push(o.substr(s,u-s)),s=-1),n+=o[u];for(o=m(r),r=o.next();!r.done;r=o.next())r=r.value,s=r.replace(" ",".voice-"),n=n.replace("<"+r+">","<"+s+">"),n=n.replace("</"+r+">","</"+s+">"),i||(n+="</"+s+">")}n=gx(n),e.payload="",i="<span>"+n.replace(/\n/g,"<br />")+"</span>";try{var c=dr(i,"span")}catch{}if(c)if(c=c.children,c.length!=1||c[0].tagName)for(c=m(c),n=c.next();!n.done;n=c.next())gh(n.value,e,t);else e.payload=Ut(n);else e.payload=Ut(n)}else e.payload=Ut(n)}function hh(e){for(var t=m(Object.entries(vh)),n=t.next();!n.done;n=t.next()){var i=m(n.value);n=i.next().value,i=i.next().value;var r=new be(0,0,"");r.color=i,e.set("."+n,r)}for(t=m(Object.entries(yh)),n=t.next();!n.done;n=t.next())i=m(n.value),n=i.next().value,i=i.next().value,r=new be(0,0,""),r.backgroundColor=i,e.set("."+n,r)}function gx(e){var t={"< ":""," >":" &gt;"},n=/(< +>|<\s|\s>)/g,i=RegExp(n.source);return e&&i.test(e)?e.replace(n,function(r){return t[r]||""}):e||""}function gh(e,t,n){var i=t.clone();if(i.nestedCues=[],i.payload="",i.rubyTag="",i.line=null,i.region=new cr,i.position=null,i.size=0,i.textAlign=$n,e.tagName)for(var r=m(e.tagName.split(/(?=[ .])+/g)),o=r.next();!o.done;o=r.next()){var s=o=o.value;if(s.startsWith(".voice-")){var u=s.split("-").pop();s='v[voice="'+u+'"]',n.has(s)||(s="v[voice="+u+"]")}switch(n.has(s)&&(u=i,s=n.get(s))&&(u.backgroundColor=Wo(s.backgroundColor,u.backgroundColor),u.color=Wo(s.color,u.color),u.fontFamily=Wo(s.fontFamily,u.fontFamily),u.fontSize=Wo(s.fontSize,u.fontSize),u.textShadow=Wo(s.textShadow,u.textShadow),u.fontWeight=s.fontWeight,u.fontStyle=s.fontStyle,u.opacity=s.opacity,u.rubyTag=s.rubyTag,u.textCombineUpright=s.textCombineUpright,u.wrapLine=s.wrapLine),o){case"br":i=ph(i.startTime,i.endTime),t.nestedCues.push(i);return;case"b":i.fontWeight=Hr;break;case"i":i.fontStyle=Gr;break;case"u":i.textDecoration.push(li);break;case"font":(o=e.attributes.color)&&(i.color=o);break;case"div":if(o=e.attributes.time,!o)break;(o=Vr(o))&&(i.startTime=o);break;case"ruby":case"rp":case"rt":i.rubyTag=o}}if(r=e.children,wu(e)||r.length==1&&wu(r[0]))for(n=nt(e).split(`
`),e=!0,n=m(n),r=n.next();!r.done;r=n.next())r=r.value,e||(e=ph(i.startTime,i.endTime),t.nestedCues.push(e)),r.length>0&&(e=i.clone(),e.payload=Ut(r),t.nestedCues.push(e)),e=!1;else for(t.nestedCues.push(i),t=m(r),e=t.next();!e.done;e=t.next())gh(e.value,i,n)}function Wo(e,t){return e&&e.length>0?e:t}K("shaka.text.Cue",be),be.parseCuePayload=ku,be.equal=Mu,be.prototype.clone=be.prototype.clone;var Du="auto";be.positionAlign={LEFT:"line-left",RIGHT:"line-right",CENTER:"center",AUTO:Du};var $n="center",pc={LEFT:"left",RIGHT:"right",CENTER:$n,START:"start",END:"end"};be.textAlign=pc;var Xo="after",mh={BEFORE:"before",CENTER:"center",AFTER:Xo};be.displayAlign=mh;var zo="ltr";be.direction={HORIZONTAL_LEFT_TO_RIGHT:zo,HORIZONTAL_RIGHT_TO_LEFT:"rtl"};var pr="horizontal-tb";be.writingMode={HORIZONTAL_TOP_TO_BOTTOM:pr,VERTICAL_LEFT_TO_RIGHT:"vertical-lr",VERTICAL_RIGHT_TO_LEFT:"vertical-rl"};var Yo=0;be.lineInterpretation={LINE_NUMBER:Yo,PERCENTAGE:1};var hr="start",hc={CENTER:"center",START:hr,END:"end"};be.lineAlign=hc;var vh={white:"white",lime:"lime",cyan:"cyan",red:"red",yellow:"yellow",magenta:"magenta",blue:"blue",black:"black"};be.defaultTextColor=vh;var yh={bg_white:"white",bg_lime:"lime",bg_cyan:"cyan",bg_red:"red",bg_yellow:"yellow",bg_magenta:"magenta",bg_blue:"blue",bg_black:"black"};be.defaultTextBackgroundColor=yh;var Th=400,Hr=700;be.fontWeight={NORMAL:Th,BOLD:Hr};var gc="normal",Gr="italic",xh={NORMAL:gc,ITALIC:Gr,OBLIQUE:"oblique"};be.fontStyle=xh;var li="underline";be.textDecoration={UNDERLINE:li,LINE_THROUGH:"lineThrough",OVERLINE:"overline"};var mx=/(?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{2,3})/g;function Ui(){}Ui.prototype.destroy=function(){};function ci(e,t,n){mc.set(e.toLowerCase().split(";")[0]+"-"+n,{priority:n,Bf:t})}function Kr(e,t){for(var n=e.toLowerCase().split(";")[0],i=m([Sh,yc,vc,_i]),r=i.next();!r.done;r=i.next())if(r=mc.get(n+"-"+r.value)){var o=r.Bf(),s=o.isSupported(e,t);if(o.destroy(),s)return r.Bf}return null}K("shaka.transmuxer.TransmuxerEngine",Ui),Ui.findTransmuxer=Kr,Ui.unregisterTransmuxer=function(e,t){mc.delete(e.toLowerCase().split(";")[0]+"-"+t)},Ui.registerTransmuxer=ci,Ui.prototype.destroy=Ui.prototype.destroy;var mc=new Map,_i=1,vc=2,yc=3,Sh=4;Ui.PluginPriority={FALLBACK:_i,PREFERRED_SECONDARY:vc,PREFERRED:yc,APPLICATION:Sh};function Tc(){}function Qe(e,t){var n=e;return t&&!fi.includes(e)&&(n+='; codecs="'+t+'"'),n}function Ru(e,t){return t&&(e+='; codecs="'+t+'"'),e}function xc(e,t,n){var i=Qe(e,t);return t=Ru(e,t),Kr(t)?(e=Kr(t))?(e=e(),n=e.convertCodecs(n,t),e.destroy()):n=t:n=e!="video/mp2t"&&n=="audio"?i.replace("video","audio"):i,n}function qo(e){return e.split(";")[0].split("/")[1]}function It(e){var t=wh(e);switch(e=t[0].toLowerCase(),t=t[1].toLowerCase(),!0){case(e==="mp4a"&&t==="69"):case(e==="mp4a"&&t==="6b"):case(e==="mp4a"&&t==="40.34"):return"mp3";case(e==="mp4a"&&t==="66"):case(e==="mp4a"&&t==="67"):case(e==="mp4a"&&t==="68"):case(e==="mp4a"&&t==="40.2"):case(e==="mp4a"&&t==="40.02"):case(e==="mp4a"&&t==="40.5"):case(e==="mp4a"&&t==="40.05"):case(e==="mp4a"&&t==="40.29"):case(e==="mp4a"&&t==="40.42"):return"aac";case(e==="mp4a"&&t==="a5"):case e==="ac3":case e==="ac-3":return"ac-3";case(e==="mp4a"&&t==="a6"):case e==="eac3":case e==="ec-3":return"ec-3";case e==="ac-4":return"ac-4";case(e==="mp4a"&&t==="b2"):return"dtsx";case(e==="mp4a"&&t==="a9"):return"dtsc";case e==="vp09":case e==="vp9":return"vp9";case e==="avc1":case e==="avc3":return"avc";case e==="hvc1":case e==="hev1":return"hevc";case e==="vvc1":case e==="vvi1":return"vvc";case e==="dvh1":case e==="dvhe":return t&&t.startsWith("05")?"dovi-p5":"dovi-hevc";case e==="dvav":case e==="dva1":return"dovi-avc";case e==="dav1":return"dovi-av1";case e==="dvc1":case e==="dvi1":return"dovi-vvc";case e==="lvc1":return"lcevc"}return e}function Bi(e){var t=[];e=m(e.split(","));for(var n=e.next();!n.done;n=e.next())n=wh(n.value),t.push(n[0]);return t.sort().join(",")}function Jt(e){return e.split(";")[0]}function Kt(e){return e=e.split(/ *; */),e.shift(),(e=e.find(function(t){return t.startsWith("codecs=")}))?e.split("=")[1].replace(/^"|"$/g,""):""}function Lu(e){return e==="application/x-mpegurl"||e==="application/vnd.apple.mpegurl"}function wh(e){e=e.split(".");var t=e[0];return e.shift(),[t,e.join(".")]}K("shaka.util.MimeUtils",Tc),Tc.getFullTypeWithAllCodecs=Ru,Tc.getFullType=Qe,new Map().set("codecs","codecs").set("frameRate","framerate").set("bandwidth","bitrate").set("width","width").set("height","height").set("channelsCount","channels");var fi=["audio/aac","audio/ac3","audio/ec3","audio/mpeg"];function di(e){this.i=null,this.j=e,this.B=this.G=!1,this.m=this.u=0,this.o=1/0,this.h=this.g=null,this.F="",this.C=function(){},this.l=new Map}function Tt(e,t){Qo.set(e,t)}function Jo(e){return Qo.get(e)}function $o(e){return Qo.has(e)?!0:e=="application/cea-608"||e=="application/cea-708"?!!lr:!1}di.prototype.destroy=function(){return this.j=this.i=null,this.l.clear(),Promise.resolve()};function vx(e,t,n,i,r){var o,s,u,a,l,c,f,p;return k(function(h){if(h.g==1)return T(h,Promise.resolve(),2);if(!e.i||!e.j)return h.return();if(n==null||i==null)return e.i.parseInit(re(t)),h.return();for(o=e.B?0:e.u,s=e.G||e.B?n:e.u,u={periodStart:o,segmentStart:n,segmentEnd:i,vttOffset:s},a=e.i.parseMedia(re(t),u,r,[]),l=m(a),c=l.next();!c.done;c=l.next())f=c.value,e.C(f,r||null,u);p=a.filter(function(g){return g.startTime>=e.m&&g.startTime<e.o}),e.j.append(p),e.g==null&&(e.g=Math.max(n,e.m)),e.h=Math.min(i,e.o),G(h)})}di.prototype.remove=function(e,t,n){n=n===void 0?!1:n;var i=this;return k(function(r){if(r.g==1)return T(r,Promise.resolve(),2);if(e>=t||n&&(xx(i,e,t),i.F===""))return r.return();i.j&&i.j.remove(e,t)&&i.g!=null&&(t<=i.g||e>=i.h||(e<=i.g&&t>=i.h?i.g=i.h=null:e<=i.g&&t<i.h?i.g=t:e>i.g&&t>=i.h&&(i.h=e)),Ih(i)),G(r)})};function yx(e,t,n){e.m=t,e.o=n}function Ah(e,t,n){e.F=t,(t=e.l.get(t))&&(t=t.filter(function(i){return i.endTime<=n}),t.length&&e.j.append(t))}function Eh(e,t,n){t.startTime+=n,t.endTime+=n,t=m(t.nestedCues);for(var i=t.next();!i.done;i=t.next())Eh(e,i.value,n)}function Tx(e,t,n){var i=new Map;t=m(t);for(var r=t.next();!r.done;r=t.next()){var o=r.value;r=o.stream,o=o.cue,i.getOrInsert(r,[]),Eh(e,o,n),o.startTime>=e.m&&o.startTime<e.o&&(i.get(r).push(o),r==e.F&&e.j.append([o]))}for(n=m(i.keys()),t=n.next();!t.done;t=n.next())for(r=t.value,t=e.l.getOrInsertComputed(r,function(){return[]}),r=m(i.get(r)),o=r.next();!o.done;o=r.next())t.push(o.value);Ih(e)}function xx(e,t,n){for(var i=m(e.l.keys()),r=i.next();!r.done;r=i.next()){r=r.value;var o=e.l.get(r);o=o.filter(function(s){return s.startTime<t||s.endTime>=n}),e.l.set(r,o)}}function Ih(e){for(var t=1/0,n=-1/0,i=m(e.l.values()),r=i.next();!r.done;r=i.next()){r=m(r.value);for(var o=r.next();!o.done;o=r.next())o=o.value,t=Math.min(t,o.startTime),n=Math.max(n,o.endTime)}t!==1/0&&n!==-1/0&&(e.g=e.g==null?Math.max(t,e.m):Math.min(e.g,Math.max(t,e.m)),e.h=Math.max(e.h,Math.min(n,e.o)))}K("shaka.text.TextEngine",di),di.prototype.destroy=di.prototype.destroy,di.findParser=Jo,di.unregisterParser=function(e){Qo.delete(e)},di.registerParser=Tt;var Qo=new Map;function Zo(e){this.h=e,this.g=null}Zo.prototype.ka=function(e){var t=this;this.stop();var n=!0,i=null;return this.g=function(){B.clearTimeout(i),n=!1},i=B.setTimeout(function(){n&&t.h()},e*1e3),this},Zo.prototype.stop=function(){this.g&&(this.g(),this.g=null)};function ge(e){this.h=e,this.g=null}ge.prototype.Jb=function(){return this.stop(),this.h(),this},ge.prototype.ka=function(e){var t=this;return this.stop(),this.g=new Zo(function(){t.h()}).ka(e),this},ge.prototype.Da=function(e){var t=this;return this.stop(),this.g=new Zo(function(){t.g.ka(e),t.h()}).ka(e),this},ge.prototype.stop=function(){this.g&&(this.g.stop(),this.g=null)},K("shaka.util.Timer",ge),ge.prototype.stop=ge.prototype.stop,ge.prototype.tickEvery=ge.prototype.Da,ge.prototype.tickAfter=ge.prototype.ka,ge.prototype.tickNow=ge.prototype.Jb;function Sx(e,t){return e.concat(t)}function wx(){}function bi(e){return e!=null}function Pu(e,t){return Promise.race([t,new Promise(function(n,i){new ge(i).ka(e)})])}function Nn(){}function Wr(e,t){return e=Ce(e),t=Ce(t),e.split("-")[0]==t.split("-")[0]}function es(e,t){return e=Ce(e),t=Ce(t),e=e.split("-"),t=t.split("-"),e[0]==t[0]&&e.length==1&&t.length==2}function Sc(e,t){return e=Ce(e),t=Ce(t),e=e.split("-"),t=t.split("-"),e.length==2&&t.length==2&&e[0]==t[0]}function Ce(e){e=m(e.split("-x-"));var t=e.next().value;t=t===void 0?"":t,e=e.next().value,e=e===void 0?"":e;var n=m(t.split("-"));return t=n.next().value,t=t===void 0?"":t,n=n.next().value,n=n===void 0?"":n,e=e?"x-"+e:"",t=t.toLowerCase(),t=Ch.get(t)||t,n=n.toUpperCase(),(n?t+"-"+n:t)+(e?"-"+e:"")}function gr(e,t){return e=Ce(e),t=Ce(t),t==e?4:es(t,e)?3:Sc(t,e)?2:es(e,t)?1:0}function Nu(e){var t=e.indexOf("-");return e=t>=0?e.substring(0,t):e,e=e.toLowerCase(),e=Ch.get(e)||e}function wc(e){return e.language?Ce(e.language):e.audio&&e.audio.language?Ce(e.audio.language):e.video&&e.video.language?Ce(e.video.language):"und"}function ju(e,t){e=Ce(e);var n=new Set;t=m(t);for(var i=t.next();!i.done;i=t.next())n.add(Ce(i.value));for(t=m(n),i=t.next();!i.done;i=t.next())if(i=i.value,i==e)return i;for(t=m(n),i=t.next();!i.done;i=t.next())if(i=i.value,es(i,e))return i;for(t=m(n),i=t.next();!i.done;i=t.next())if(i=i.value,Sc(i,e))return i;for(n=m(n),t=n.next();!t.done;t=n.next())if(t=t.value,es(e,t))return t;return null}K("shaka.util.LanguageUtils",Nn),Nn.findClosestLocale=ju,Nn.getLocaleForVariant=wc,Nn.getLocaleForText=function(e){return Ce(e.language||"und")},Nn.getBase=Nu,Nn.relatedness=gr,Nn.areSiblings=function(e,t){var n=Nu(e),i=Nu(t);return e!=n&&t!=i&&n==i},Nn.normalize=Ce,Nn.isSiblingOf=Sc,Nn.isParentOf=es,Nn.areLanguageCompatible=Wr,Nn.areLocaleCompatible=function(e,t){return e=Ce(e),t=Ce(t),e==t};var Ch=new Map([["aar","aa"],["abk","ab"],["afr","af"],["aka","ak"],["alb","sq"],["amh","am"],["ara","ar"],["arg","an"],["arm","hy"],["asm","as"],["ava","av"],["ave","ae"],["aym","ay"],["aze","az"],["bak","ba"],["bam","bm"],["baq","eu"],["bel","be"],["ben","bn"],["bih","bh"],["bis","bi"],["bod","bo"],["bos","bs"],["bre","br"],["bul","bg"],["bur","my"],["cat","ca"],["ces","cs"],["cha","ch"],["che","ce"],["chi","zh"],["chu","cu"],["chv","cv"],["cor","kw"],["cos","co"],["cre","cr"],["cym","cy"],["cze","cs"],["dan","da"],["deu","de"],["div","dv"],["dut","nl"],["dzo","dz"],["ell","el"],["eng","en"],["epo","eo"],["est","et"],["eus","eu"],["ewe","ee"],["fao","fo"],["fas","fa"],["fij","fj"],["fin","fi"],["fra","fr"],["fre","fr"],["fry","fy"],["ful","ff"],["geo","ka"],["ger","de"],["gla","gd"],["gle","ga"],["glg","gl"],["glv","gv"],["gre","el"],["grn","gn"],["guj","gu"],["hat","ht"],["hau","ha"],["heb","he"],["her","hz"],["hin","hi"],["hmo","ho"],["hrv","hr"],["hun","hu"],["hye","hy"],["ibo","ig"],["ice","is"],["ido","io"],["iii","ii"],["iku","iu"],["ile","ie"],["ina","ia"],["ind","id"],["ipk","ik"],["isl","is"],["ita","it"],["jav","jv"],["jpn","ja"],["kal","kl"],["kan","kn"],["kas","ks"],["kat","ka"],["kau","kr"],["kaz","kk"],["khm","km"],["kik","ki"],["kin","rw"],["kir","ky"],["kom","kv"],["kon","kg"],["kor","ko"],["kua","kj"],["kur","ku"],["lao","lo"],["lat","la"],["lav","lv"],["lim","li"],["lin","ln"],["lit","lt"],["ltz","lb"],["lub","lu"],["lug","lg"],["mac","mk"],["mah","mh"],["mal","ml"],["mao","mi"],["mar","mr"],["may","ms"],["mkd","mk"],["mlg","mg"],["mlt","mt"],["mon","mn"],["mri","mi"],["msa","ms"],["mya","my"],["nau","na"],["nav","nv"],["nbl","nr"],["nde","nd"],["ndo","ng"],["nep","ne"],["nld","nl"],["nno","nn"],["nob","nb"],["nor","no"],["nya","ny"],["oci","oc"],["oji","oj"],["ori","or"],["orm","om"],["oss","os"],["pan","pa"],["per","fa"],["pli","pi"],["pol","pl"],["por","pt"],["pus","ps"],["que","qu"],["roh","rm"],["ron","ro"],["rum","ro"],["run","rn"],["rus","ru"],["sag","sg"],["san","sa"],["sin","si"],["slk","sk"],["slo","sk"],["slv","sl"],["sme","se"],["smo","sm"],["sna","sn"],["snd","sd"],["som","so"],["sot","st"],["spa","es"],["sqi","sq"],["srd","sc"],["srp","sr"],["ssw","ss"],["sun","su"],["swa","sw"],["swe","sv"],["tah","ty"],["tam","ta"],["tat","tt"],["tel","te"],["tgk","tg"],["tgl","tl"],["tha","th"],["tib","bo"],["tir","ti"],["ton","to"],["tsn","tn"],["tso","ts"],["tuk","tk"],["tur","tr"],["twi","tw"],["uig","ug"],["ukr","uk"],["urd","ur"],["uzb","uz"],["ven","ve"],["vie","vi"],["vol","vo"],["wel","cy"],["wln","wa"],["wol","wo"],["xho","xh"],["yid","yi"],["yor","yo"],["zha","za"],["zho","zh"],["zul","zu"]]);function Mh(){}function kh(e,t,n,i,r){if(r.length){var o=e.textStreams;r=m(r);for(var s=r.next(),u={};!s.done;u={Gh:void 0},s=r.next())if(u.Gh=s.value,s=o.filter(function(g){return function(v){return!!(v.codecs.startsWith(g.Gh)||v.mimeType.startsWith(g.Gh))}}(u)),s.length){o=s;break}e.textStreams=o}if(o=e.variants,(t.length||n.length)&&(o=Ax(o,t,n)),i.length){for(t=new fu,o=m(o),n=o.next();!n.done;n=o.next())n=n.value,t.push(String(n.video.width||0),n);var a=[];t.forEach(function(g,v){g=0;var y=[];v=m(v);for(var S=v.next(),x={};!S.done;x={Xf:void 0},S=v.next())x.Xf=S.value,S=i.filter(function(w){return function(I){return w.Xf.decodingInfos[0][I]}}(x)).length,S>g?(g=S,y=[x.Xf]):S==g&&y.push(x.Xf);a.push.apply(a,H(y))}),o=a}for(t=new Set,n=m(o),r=n.next();!r.done;r=n.next())r=r.value,r.video&&t.add(r.video);if(t.size){var l={vp8:1,avc:1,"dovi-avc":.95,vp9:.9,vp09:.9,hevc:.85,"dovi-hevc":.8,"dovi-p5":.75,av01:.7,"dovi-av1":.65,vvc:.6};r=Array.from(t).sort(function(g,v){return g.bandwidth&&v.bandwidth&&g.bandwidth!=v.bandwidth?g.bandwidth-v.bandwidth:g.width!=v.width?g.width-v.width:g.codecs&&v.codecs?(g=It(g.codecs),v=It(v.codecs),(l[g]||1)-(l[v]||1)):0});var c=[];for(t=new Map,n=function(g){var v=[String(g.width||""),String(g.height||""),String(Math.round(g.frameRate||0)),g.hdr||"",g.fastSwitching];return g.dependencyStream&&v.push(g.dependencyStream.baseOriginalId||""),g.roles&&v.push(g.roles.sort().join("_")),v.join(";")},r=m(r),s=r.next();!s.done;s=r.next()){s=s.value,u=n(s);var f=t.get(u)||[];if(f.length){var p=It(f[f.length-1].codecs),h=It(s.codecs);p==h&&(f.push(s),c.push(s.id))}else f.push(s),c.push(s.id);t.set(u,f)}e.variants=o.filter(function(g){return!((g=g.video)&&!c.includes(g.id))})}else e.variants=o}function Ax(e,t,n){t=m(t);for(var i=t.next(),r={};!i.done;r={mj:void 0},i=t.next())if(r.mj=i.value,i=e.filter(function(o){return function(s){return s.video&&s.video.codecs.startsWith(o.mj)}}(r)),i.length){e=i;break}for(n=m(n),t=n.next(),i={};!t.done;i={Sh:void 0},t=n.next())if(i.Sh=t.value,t=e.filter(function(o){return function(s){return s.audio&&s.audio.codecs.startsWith(o.Sh)}}(i)),t.length){e=t;break}return e}function Ex(e,t,n){e.variants=e.variants.filter(function(i){return Ou(i,t,n)})}function Ou(e,t,n){function i(s,u,a){return s>=u&&s<=a}if(e&&e.video&&e.video.width&&e.video.height){var r=e.video.width,o=e.video.height;if(o>r&&(o=m([o,r]),r=o.next().value,o=o.next().value),!i(r,t.minWidth,Math.min(t.maxWidth,n.width))||!i(o,t.minHeight,Math.min(t.maxHeight,n.height))||!i(r*o,t.minPixels,t.maxPixels))return!1}return!(e&&e.video&&e.video.frameRate&&!i(e.video.frameRate,t.minFrameRate,t.maxFrameRate)||e&&e.audio&&e.audio.channelsCount&&!i(e.audio.channelsCount,t.minChannelsCount,t.maxChannelsCount)||!i(e.bandwidth,t.minBandwidth,t.maxBandwidth))}function Ix(e,t,n,i){return n=n===void 0?[]:n,i=i===void 0?{}:i,k(function(r){return r.g==1?T(r,Dh(e,t,t.offlineSessionIds.length>0,n,i),2):(Dx(t),T(r,Rx(t),0))})}function Dh(e,t,n,i,r){var o,s;return k(function(u){if(u.g==1)return pe().aj()&&Cx(t.variants),T(u,Ac(t.variants,n,!1,i),2);o=null,e&&(s=e.g)&&(o=s.keySystem),t.variants=t.variants.filter(function(a){var l=Mx(a,o,r);if(!l){var c=[];a.audio&&c.push(Uh(a.audio)),a.video&&c.push(Uh(a.video))}return l}),G(u)})}function Cx(e){var t=new Map().set("dvav","avc3").set("dva1","avc1").set("dvhe","hev1").set("dvh1","hvc1").set("dvc1","vvc1").set("dvi1","vvi1"),n=new Set;e=m(e);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&n.add(i.video);for(n=m(n),e=n.next();!e.done;e=n.next()){e=e.value,i=m(t);for(var r=i.next();!r.done;r=i.next()){var o=m(r.value);if(r=o.next().value,o=o.next().value,e.codecs.includes(r)){e.codecs=e.codecs.replace(r,o);break}}}}function Mx(e,t,n){if(!e.decodingInfos.some(function(a){return!(!a.supported||t&&(a=a.keySystemAccess)&&(n[a.keySystem]||a.keySystem)!=t)}))return!1;var i=pe(),r=i.Nb()==="Xbox";i=i.Oa()==="MOBILE"&&i.Ga()==="GECKO";var o=e.video,s=o&&o.width||0,u=o&&o.height||0;return r&&o&&(s>1920||u>1080)&&(o.codecs.includes("avc1.")||o.codecs.includes("avc3."))||(r=o&&o.dependencyStream)&&!nh(r)?!1:(e=e.audio,!(i&&e&&e.encrypted&&e.codecs.toLowerCase().includes("opus")||e&&e.dependencyStream))}function Rh(e,t){var n,i,r,o,s,u,a;return k(function(l){if(l.g==1){for(n=function(c,f){if(c){var p=Oi(c);return p.supported=c.supported&&f.supported,p.powerEfficient=c.powerEfficient&&f.powerEfficient,p.smooth=c.smooth&&f.smooth,f.keySystemAccess&&!p.keySystemAccess&&(p.keySystemAccess=f.keySystemAccess),p}return f},i=null,r=[],o=m(t),s=o.next(),u={};!s.done;u={cache:void 0,Se:void 0},s=o.next())a=s.value,u.Se=Su(a),u.cache=bu,u.cache.has(u.Se)?i=n(i,u.cache.get(u.Se)):r.push(kx(a).then(function(c){return function(f){var p=null;f=m(f||[]);for(var h=f.next();!h.done;h=f.next())p=n(p,h.value);p&&(c.cache.set(c.Se,p),i=n(i,p))}}(u)));return T(l,Promise.all(r),2)}i&&e.decodingInfos.push(i),G(l)})}function kx(e){var t=[""];e.video&&(t=Kt(e.video.contentType).split(","));var n=[""];e.audio&&(n=Kt(e.audio.contentType).split(","));var i=[];t=m(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;for(var o=m(n),s=o.next(),u={};!s.done;u={Qc:void 0},s=o.next())s=s.value,u.Qc=Pn(e),e.video&&(u.Qc.video.contentType=Qe(Jt(u.Qc.video.contentType),r)),e.audio&&(u.Qc.audio.contentType=Qe(Jt(u.Qc.audio.contentType),s)),i.push(new Promise(function(a){return function(l,c){(pe().Oa()=="MOBILE"?Pu(5,navigator.mediaCapabilities.decodingInfo(a.Qc)):navigator.mediaCapabilities.decodingInfo(a.Qc)).then(function(f){l(f)}).catch(c)}}(u)))}return Promise.all(i).catch(function(){return JSON.stringify(e),null})}function Ac(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L;return k(function(A){switch(A.g){case 1:if(e.some(function(C){return C.decodingInfos.length}))return A.return();r=m(i),o=r.next(),s={};case 2:if(o.done){A.A(4);break}s.Ki=o.value,u=!1,a=m(e),l=a.next();case 5:if(l.done){A.A(7);break}c=l.value,f=Lh(c,t,n).filter(function(C){return function(E){return E=E[0],(E.keySystemConfiguration&&E.keySystemConfiguration.keySystem)===C.Ki}}(s)),p=m(f),h=p.next();case 8:if(h.done){A.A(10);break}return g=h.value,T(A,Rh(c,g),9);case 9:h=p.next(),A.A(8);break;case 10:c.decodingInfos.some(function(C){return C.supported})&&(u=!0),l=a.next(),A.A(5);break;case 7:if(u)return A.return();s={Ki:void 0},o=r.next(),A.A(2);break;case 4:v=m(e),y=v.next();case 12:if(y.done){A.A(0);break}S=y.value,x=Lh(S,t,n).filter(function(C){return C=C[0],C=C.keySystemConfiguration&&C.keySystemConfiguration.keySystem,!C||!i.includes(C)}),w=m(x),I=w.next();case 15:if(I.done){y=v.next(),A.A(12);break}return L=I.value,T(A,Rh(S,L),16);case 16:I=w.next(),A.A(15)}})}function Lh(e,t,n){var i=e.audio,r=e.video,o=[],s=[];if(r)for(var u=m(r.fullMimeTypes),a=u.next();!a.done;a=u.next()){a=a.value;var l=Kt(a);if(l.includes(",")&&!i){var c=l.split(","),f=Jt(a);l=_r("video",c),c=_r("audio",c),c=ts(c,f),f=xc(f,c,"audio"),s.push({contentType:f,channels:2,bitrate:e.bandwidth||1,samplerate:1,spatialRendering:!1})}if(l=Ph(l),a={contentType:xc(Jt(a),l,"video"),width:r.width||64,height:r.height||64,bitrate:r.bandwidth||e.bandwidth||1,framerate:r.frameRate||30},r.hdr)switch(r.hdr){case"PQ":a.transferFunction="pq";break;case"HLG":a.transferFunction="hlg"}r.colorGamut&&(a.colorGamut=r.colorGamut),o.push(a)}if(i)for(u=m(i.fullMimeTypes),a=u.next();!a.done;a=u.next())l=a.value,a=Jt(l),l=ts(Kt(l),a),a=xc(a,l,"audio"),s.push({contentType:a,channels:i.channelsCount||2,bitrate:i.bandwidth||e.bandwidth||1,samplerate:i.audioSamplingRate||1,spatialRendering:i.spatialAudio});for(u=[],o.length==0&&o.push(null),s.length==0&&s.push(null),o=m(o),a=o.next();!a.done;a=o.next())for(a=a.value,l=m(s),f=l.next();!f.done;f=l.next())f=f.value,c={type:n?"file":"media-source"},a&&(c.video=a),f&&(c.audio=f),u.push(c);if(s=(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[]),!s.length)return[u];for(e=[],n=new Map,s=m(s),o=s.next();!o.done;o=s.next())o=o.value,n.get(o.keySystem)||n.set(o.keySystem,[]),n.get(o.keySystem).push(o);for(s=t?"required":"optional",t=t?["persistent-license"]:["temporary"],o=m(n.keys()),a=o.next();!a.done;a=o.next()){for(a=a.value,f=n.get(a),l=new Map,f=m(f),c=f.next();!c.done;c=f.next()){c=c.value;var p=c.videoRobustness+","+c.audioRobustness;l.get(p)||l.set(p,[]),l.get(p).push(c)}for(l=m(l.values()),f=l.next();!f.done;f=l.next()){f=f.value,c=[],p=m(u);for(var h=p.next();!h.done;h=p.next()){h=Object.assign({},h.value);for(var g={keySystem:a,initDataType:"cenc",persistentState:s,distinctiveIdentifier:"optional",sessionTypes:t},v=m(f),y=v.next();!y.done;y=v.next()){if(y=y.value,y.initData&&y.initData.length){for(var S=new Set,x=m(y.initData),w=x.next();!w.done;w=x.next())S.add(w.value.initDataType);g.initDataType=y.initData[0].initDataType}y.distinctiveIdentifierRequired&&(g.distinctiveIdentifier="required"),y.persistentStateRequired&&(g.persistentState="required"),y.sessionType&&(g.sessionTypes=[y.sessionType]),i&&(g.audio?(y.encryptionScheme&&(g.audio.encryptionScheme=g.audio.encryptionScheme||y.encryptionScheme),g.audio.robustness=g.audio.robustness||y.audioRobustness):(g.audio={robustness:y.audioRobustness},y.encryptionScheme&&(g.audio.encryptionScheme=y.encryptionScheme)),g.audio.robustness==""&&delete g.audio.robustness),r&&(g.video?(y.encryptionScheme&&(g.video.encryptionScheme=g.video.encryptionScheme||y.encryptionScheme),g.video.robustness=g.video.robustness||y.videoRobustness):(g.video={robustness:y.videoRobustness},y.encryptionScheme&&(g.video.encryptionScheme=y.encryptionScheme)),g.video.robustness==""&&delete g.video.robustness)}h.keySystemConfiguration=g,c.push(h)}e.push(c)}}return e}function ts(e,t){var n=pe();return e.toLowerCase()=="flac"?n.Ga()!="WEBKIT"?"flac":"fLaC":e.toLowerCase()==="opus"?n.Ga()!="WEBKIT"?"opus":qo(t)=="mp4"?"Opus":"opus":e.toLowerCase()=="ac-3"&&n.se()?"ec-3":e}function Ph(e){if(e.includes("avc1")){var t=e.split(".");if(t.length==3)return e=t.shift()+".",e+=parseInt(t.shift(),10).toString(16),e+=("000"+parseInt(t.shift(),10).toString(16)).slice(-4)}else if(e=="vp9")return"vp09.00.41.08";return e}function Dx(e){e.textStreams=e.textStreams.filter(function(t){return t=Qe(t.mimeType,t.codecs),$o(t)})}function Rx(e){var t,n,i,r,o,s,u;return k(function(a){switch(a.g){case 1:t=[],n=m(e.imageStreams),i=n.next();case 2:if(i.done){a.A(4);break}if(r=i.value,o=r.mimeType,o=="application/mp4"&&r.codecs=="mjpg"&&(o="image/jpg"),Fu.has(o)){a.A(5);break}if(s=jx.get(o),!s){Fu.set(o,!1),a.A(5);break}return T(a,Lx(s),7);case 7:u=a.h,Fu.set(o,u);case 5:Fu.get(o)&&t.push(r),i=n.next(),a.A(2);break;case 4:e.imageStreams=t,G(a)}})}function Lx(e){return new Promise(function(t){var n=new Image;n.src=e,"decode"in n?n.decode().then(function(){t(!0)}).catch(function(){t(!1)}):n.onload=n.onerror=function(){t(n.height===2)}})}function mr(e){var t=e.audio,n=e.video,i=t?t.mimeType:null,r=n?n.mimeType:null,o=t?t.codecs:null,s=n?n.codecs:null,u=t?t.groupId:null,a=[];n&&a.push(n.mimeType),t&&a.push(t.mimeType),a=a[0]||null;var l=[];t&&l.push(t.kind),n&&l.push(n.kind),l=l[0]||null;var c=new Set;if(t)for(var f=m(t.roles),p=f.next();!p.done;p=f.next())c.add(p.value);if(n)for(f=m(n.roles),p=f.next();!p.done;p=f.next())c.add(p.value);if(e={id:e.id,active:!1,type:"variant",bandwidth:e.bandwidth,language:e.language,label:null,videoLabel:null,kind:l,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:a,audioMimeType:i,videoMimeType:r,codecs:"",audioCodec:o,videoCodec:s,primary:e.primary,roles:Array.from(c),audioRoles:null,videoRoles:null,forced:!1,videoId:null,audioId:null,audioGroupId:u,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:null,originalAudioId:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:null},n&&(e.videoId=n.id,e.originalVideoId=n.originalId,e.width=n.width||null,e.height=n.height||null,e.frameRate=n.frameRate||null,e.pixelAspectRatio=n.pixelAspectRatio||null,e.videoBandwidth=n.bandwidth||null,e.hdr=n.hdr||null,e.colorGamut=n.colorGamut||null,e.videoLayout=n.videoLayout||null,e.videoRoles=n.roles,e.videoLabel=n.label,(i=n.dependencyStream)&&(e.width=i.width||e.width,e.height=i.height||e.height,e.videoCodec=i.codecs||e.videoCodec,e.pixelAspectRatio=i.pixelAspectRatio||e.pixelAspectRatio,e.videoBandwidth&&i.bandwidth&&(e.videoBandwidth+=i.bandwidth)),s.includes(","))){e.channelsCount=n.channelsCount,e.audioSamplingRate=n.audioSamplingRate,e.spatialAudio=n.spatialAudio,e.originalLanguage=n.originalLanguage,e.audioMimeType=r,r=s.split(",");try{e.videoCodec=_r("video",r),e.audioCodec=_r("audio",r)}catch{}}return t&&(e.audioId=t.id,e.originalAudioId=t.originalId,e.channelsCount=t.channelsCount,e.audioSamplingRate=t.audioSamplingRate,e.audioBandwidth=t.bandwidth||null,e.spatialAudio=t.spatialAudio,e.label=t.label,e.audioRoles=t.roles,e.accessibilityPurpose=t.accessibilityPurpose,e.originalLanguage=t.originalLanguage,r=t.dependencyStream)&&(e.audioCodec=r.codecs||e.audioCodec,e.audioBandwidth&&r.bandwidth&&(e.audioBandwidth+=r.bandwidth)),n&&!e.videoBandwidth&&(t?e.audioBandwidth&&(e.videoBandwidth=e.bandwidth-e.audioBandwidth):e.videoBandwidth=e.bandwidth),t&&!e.audioBandwidth&&(n?e.videoBandwidth&&(e.audioBandwidth=e.bandwidth-e.videoBandwidth):e.audioBandwidth=e.bandwidth),t=[],e.videoCodec&&t.push(e.videoCodec),e.audioCodec&&t.push(e.audioCodec),e.codecs=t.join(", "),e}function vr(e){return{id:e.id,active:!1,type:he,bandwidth:e.bandwidth||0,language:e.language,label:e.label,kind:e.kind||null,mimeType:e.mimeType,codecs:e.codecs||null,primary:e.primary,roles:e.roles,accessibilityPurpose:e.accessibilityPurpose,forced:e.forced,originalTextId:e.originalId,originalLanguage:e.originalLanguage}}function Ec(e){var t=e.width||null,n=e.height||null,i=null;e.segmentIndex&&(i=Gn(e.segmentIndex));var r=e.tilesLayout;return i&&(r=i.tilesLayout||r),r&&t!=null&&(t/=Number(r.split("x")[0])),r&&n!=null&&(n/=Number(r.split("x")[1])),{id:e.id,type:"image",bandwidth:e.bandwidth||0,width:t,height:n,mimeType:e.mimeType,codecs:e.codecs||null,tilesLayout:r||null,originalImageId:e.originalId}}function Uu(e){return e.__shaka_id||(e.__shaka_id=Nx++),e.__shaka_id}function Nh(e){var t={id:Uu(e),active:e.mode!="disabled",type:he,bandwidth:0,language:Ce(e.language||"und"),label:e.label,kind:e.kind,mimeType:null,codecs:null,primary:!1,roles:[],accessibilityPurpose:null,forced:e.kind=="forced",originalTextId:e.id,originalLanguage:e.language};return e.kind=="captions"&&(t.mimeType="unknown"),e.kind=="subtitles"&&(t.mimeType="text/vtt"),e.kind&&(t.roles=[e.kind]),t}function _u(e,t){var n=e?e.language:null;if(n={id:Uu(e||t),active:e?e.enabled:t.selected,type:"variant",bandwidth:0,language:Ce(n||"und"),label:e?e.label:null,videoLabel:null,kind:e?e.kind:null,width:null,height:null,frameRate:null,pixelAspectRatio:null,hdr:null,colorGamut:null,videoLayout:null,mimeType:null,audioMimeType:null,videoMimeType:null,codecs:null,audioCodec:null,videoCodec:null,primary:e?e.kind=="main":!1,roles:[],forced:!1,audioRoles:null,videoRoles:null,videoId:null,audioId:null,audioGroupId:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,tilesLayout:null,audioBandwidth:null,videoBandwidth:null,originalVideoId:t?t.id:null,originalAudioId:e?e.id:null,originalTextId:null,originalImageId:null,accessibilityPurpose:null,originalLanguage:n},e&&e.kind&&(n.roles=[e.kind],n.audioRoles=[e.kind]),e&&e.configuration&&(e.configuration.codec&&(n.audioCodec=e.configuration.codec,n.codecs=n.audioCodec),e.configuration.bitrate&&(n.audioBandwidth=e.configuration.bitrate,n.bandwidth+=n.audioBandwidth),e.configuration.sampleRate&&(n.audioSamplingRate=e.configuration.sampleRate),e.configuration.numberOfChannels&&(n.channelsCount=e.configuration.numberOfChannels)),t&&t.configuration&&(t.configuration.codec&&(n.videoCodec=t.configuration.codec,n.codecs=n.codecs?n.codecs+(","+n.videoCodec):n.videoCodec),t.configuration.bitrate&&(n.videoBandwidth=t.configuration.bitrate,n.bandwidth+=n.videoBandwidth),t.configuration.framerate&&(n.frameRate=t.configuration.framerate),t.configuration.width&&(n.width=t.configuration.width),t.configuration.height&&(n.height=t.configuration.height),t.configuration.colorSpace&&t.configuration.colorSpace.transfer))switch(t.configuration.colorSpace.transfer){case"pq":n.hdr="PQ";break;case"hlg":n.hdr="HLG";break;case"bt709":n.hdr="SDR"}return n}function ns(e){return e.allowedByApplication&&e.allowedByKeySystem&&e.disabledUntilTime==0}function Bu(e){return e.filter(function(t){return ns(t)})}function Xr(e,t,n,i){var r=e,o=e.filter(function(a){return a.primary});o.length&&(r=o);var s=r.length?r[0].language:"";if(r=r.filter(function(a){return a.language==s}),t){var u=ju(Ce(t),e.map(function(a){return a.language}));u&&(r=e.filter(function(a){return Ce(a.language)==u}))}if(r=r.filter(function(a){return a.forced==i}),n){if(e=jh(r,n),e.length)return e}else if(e=r.filter(function(a){return a.roles.length==0}),e.length)return e;return e=r.map(function(a){return a.roles}).reduce(Sx,[]),e.length?jh(r,e[0]):r}function jh(e,t){return e.filter(function(n){return n.roles.includes(t)})}function Px(e){var t=[];return e.audio&&t.push(e.audio),e.video&&t.push(e.video),t}function Oh(e,t){t.length&&(t=t.filter(function(n){return It(e.codecs)==It(n.codecs)}).sort(function(n,i){return n.bandwidth&&i.bandwidth&&n.bandwidth!=i.bandwidth?n.bandwidth-i.bandwidth:(n.width||0)-(i.width||0)}),e.trickModeVideo=t[0],t.length>1&&(t=t.find(function(n){return e.width==n.width&&e.height==n.height})))&&(e.trickModeVideo=t)}function Uh(e){return e.type=="audio"?"type=audio codecs="+e.codecs+" bandwidth="+e.bandwidth+" channelsCount="+e.channelsCount+" audioSamplingRate="+e.audioSamplingRate:e.type=="video"?"type=video codecs="+e.codecs+" bandwidth="+e.bandwidth+" frameRate="+e.frameRate+" width="+e.width+" height="+e.height:"unexpected stream type"}function _h(e,t,n){if(n.autoShowText==0)return!1;if(n.autoShowText==1)return!0;var i=Ce(n.preferredTextLanguage);return t=Ce(t.language),n.autoShowText==2?Wr(t,i):n.autoShowText==3?e?(e=Ce(e.language),Wr(t,i)&&!Wr(e,t)):!1:(ve("Invalid autoShowText setting!"),!1)}function Bh(e){var t={id:0,language:"und",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:100,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]};e=m(e);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i={id:0,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:n?Jt(n):"",codecs:n?Kt(n):"",encrypted:!0,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"video",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};i.fullMimeTypes.add(Qe(i.mimeType,i.codecs)),n.startsWith("audio/")?(i.type="audio",t.audio=i):t.video=i}return t}K("shaka.util.StreamUtils",Mh),Mh.meetsRestrictions=Ou;var bu=new Map,Nx=0,Fu=new Map().set("image/svg+xml",!0).set("image/png",!0).set("image/jpeg",!0).set("image/jpg",!0),jx=new Map().set("image/webp","data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA").set("image/avif","data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=");function Ye(){var e=this;this.G=null,this.H=!1,this.u=new _o,this.j=new Ee,navigator.connection&&navigator.connection.addEventListener&&this.j.D(navigator.connection,"change",function(){e.g.useNetworkInformation&&navigator.onLine&&(e.u=new _o,e.g&&e.u.configure(e.g.advanced),e.trySuggestStreams())}),this.l=[],this.I=1,this.J=!1,this.h=this.o=this.g=this.B=null,this.m=new ge(function(){if(e.H&&(e.g.restrictToElementSize||e.g.restrictToScreenSize)){var t=e.chooseVariant();t&&e.G&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}}),this.C=B,"documentPictureInPicture"in B&&this.j.D(B.documentPictureInPicture,"enter",function(){e.C=B.documentPictureInPicture.window,e.m&&e.m.Jb(),e.j.ya(e.C,"pagehide",function(){e.C=B,e.m&&e.m.Jb()})}),this.F=this.i=null}d=Ye.prototype,d.stop=function(){this.G=null,this.H=!1,this.l=[],this.I=1,this.o=this.B=null,this.h&&(this.h.disconnect(),this.h=null),this.m&&this.m.stop(),this.F=this.i=null},d.release=function(){this.stop(),this.j.release(),this.m=null},d.init=function(e){this.G=e},d.chooseVariant=function(e){e=e===void 0?!1:e;var t=1/0,n=1/0;if(this.g.restrictToScreenSize&&(n=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio,t=this.C.screen.height*n,n*=this.C.screen.width),this.h&&this.g.restrictToElementSize){var i=this.g.ignoreDevicePixelRatio?1:this.C.devicePixelRatio,r=this.o.clientHeight,o=this.o.clientWidth;this.i&&document.pictureInPictureElement&&document.pictureInPictureElement==this.o&&(r=this.i.height,o=this.i.width),t=Math.min(t,r*i),n=Math.min(n,o*i)}if(r=this.l.filter(function(l){return l&&!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)}),r.length||(r=this.l),i=r,e&&r.length!=this.l.length&&(i=this.l.filter(function(l){return l&&!!(l.audio&&l.audio.fastSwitching||l.video&&l.video.fastSwitching)})),e=Ic(this,this.g.restrictions,i,1/0,1/0),t!=1/0||n!=1/0){for(e=Ox(e),e=m(e),r=e.next();!r.done;r=e.next())if(r=r.value,r.height>=t&&r.width>=n){t=r.height,n=r.width;break}e=Ic(this,this.g.restrictions,i,t,n)}for(t=this.getBandwidthEstimate(),i.length&&!e.length&&(e=Ic(this,null,i,1/0,1/0),e=[e[0]]),n=e[0]||null,i=0;i<e.length;i++){r=e[i];var s=isNaN(this.I)?1:Math.abs(this.I);o=s*r.bandwidth/this.g.bandwidthDowngradeTarget;for(var u={bandwidth:1/0},a=i+1;a<e.length;a++)if(r.bandwidth!=e[a].bandwidth){u=e[a];break}s=s*u.bandwidth/this.g.bandwidthUpgradeTarget,n&&r&&t>=o&&t<=s&&(n.bandwidth!=r.bandwidth||n.bandwidth==r.bandwidth&&n.video&&r.video&&(n.video.width<r.video.width||n.video.height<r.video.height))&&(n=r)}return this.B=Date.now(),n},d.enable=function(){this.H=!0,this.l.length&&this.trySuggestStreams()},d.disable=function(){this.H=!1},d.segmentDownloaded=function(e,t,n,i){var r=e;this.g.removeLatencyFromFirstPacketTime&&i&&i.packetNumber===1&&i.timeToFirstByte&&(r=e-i.timeToFirstByte),r>=this.g.cacheLoadThreshold&&this.u.sample(r,t),n&&this.B!=null&&this.H&&bh(this)},d.trySuggestStreams=function(){this.H&&(this.B=Date.now(),bh(this,!0))},d.getBandwidthEstimate=function(){var e=this.g.defaultBandwidthEstimate;return navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&(e=navigator.connection.downlink*1e6),navigator.connection&&navigator.connection.downlink&&this.g.useNetworkInformation&&this.g.preferNetworkInformationBandwidth?e:(e=this.u.getBandwidthEstimate(e),this.F?this.F.getBandwidthEstimate(e):e)},d.setVariants=function(e){return rr(e,this.l)?!1:(this.l=e,!0)},d.playbackRateChanged=function(e){this.I=e},d.setMediaElement=function(e){function t(){n.m.ka(Ux)}var n=this;this.o=e,this.h&&(this.h.disconnect(),this.h=null),this.o&&"ResizeObserver"in B&&(this.h=new ResizeObserver(t),this.h.observe(this.o)),this.j.D(e,"enterpictureinpicture",function(i){i.pictureInPictureWindow&&(n.i=i.pictureInPictureWindow,n.j.D(n.i,"resize",t))}),this.j.D(e,"leavepictureinpicture",function(){n.i&&n.j.Ma(n.i,"resize",t),n.i=null})},d.setCmsdManager=function(e){this.F=e},d.configure=function(e){this.g=e,this.u&&this.g&&this.u.configure(this.g.advanced)};function bh(e,t){if(t===void 0||!t){if(!e.J){if(t=e.u,!(t.g>=t.i))return;e.J=!0,e.B-=(e.g.switchInterval-e.g.minTimeToSwitch)*1e3}if(Date.now()-e.B<e.g.switchInterval*1e3)return}t=e.chooseVariant(),e.getBandwidthEstimate(),t&&e.G&&e.G(t,e.g.clearBufferSwitch,e.g.safeMarginSwitch)}function Ic(e,t,n,i,r){if(e.F){var o=e.F.ki();o&&(n=n.filter(function(s){return s.bandwidth&&o?s.bandwidth<=o:!0}))}return t&&(n=n.filter(function(s){return Ou(s,t,{width:r,height:i})})),n.sort(function(s,u){return s.bandwidth-u.bandwidth})}function Ox(e){var t=[];e=m(e);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&(n=n.video)&&n.height&&n.width&&t.push({height:n.height,width:n.width});return t.sort(function(i,r){return i.width-r.width})}K("shaka.abr.SimpleAbrManager",Ye),Ye.prototype.configure=Ye.prototype.configure,Ye.prototype.setCmsdManager=Ye.prototype.setCmsdManager,Ye.prototype.setMediaElement=Ye.prototype.setMediaElement,Ye.prototype.playbackRateChanged=Ye.prototype.playbackRateChanged,Ye.prototype.setVariants=Ye.prototype.setVariants,Ye.prototype.getBandwidthEstimate=Ye.prototype.getBandwidthEstimate,Ye.prototype.trySuggestStreams=Ye.prototype.trySuggestStreams,Ye.prototype.segmentDownloaded=Ye.prototype.segmentDownloaded,Ye.prototype.disable=Ye.prototype.disable,Ye.prototype.enable=Ye.prototype.enable,Ye.prototype.chooseVariant=Ye.prototype.chooseVariant,Ye.prototype.init=Ye.prototype.init,Ye.prototype.release=Ye.prototype.release,Ye.prototype.stop=Ye.prototype.stop;var Ux=1;function Fh(e,t){var n=jn();this.l=e.maxAttempts==null?n.maxAttempts:e.maxAttempts,this.j=e.baseDelay==null?n.baseDelay:e.baseDelay,this.o=e.fuzzFactor==null?n.fuzzFactor:e.fuzzFactor,this.m=e.backoffFactor==null?n.backoffFactor:e.backoffFactor,this.g=0,this.h=this.j,(this.i=t===void 0?!1:t)&&(this.g=1)}function Vh(e){var t,n;return k(function(i){if(i.g==1){if(e.g>=e.l)if(e.i)e.g=1,e.h=e.j;else throw new D(2,7,1010);return t=e.g,e.g++,t==0?i.return():(n=e.h*(1+(Math.random()*2-1)*e.o),T(i,new Promise(function(r){new ge(r).ka(n/1e3)}),2))}e.h*=e.m,G(i)})}function jn(){return{maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5,timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4}}function Pe(){var e,t,n=new Promise(function(i,r){e=i,t=r});return n.resolve=e,n.reject=t,n}Pe.prototype.resolve=function(){},Pe.prototype.reject=function(){};function Ze(e,t){this.promise=e,this.i=t,this.g=null}function Fi(e){return new Ze(Promise.reject(e),function(){return Promise.resolve()})}function Cc(){var e=Promise.reject(new D(2,7,7001));return e.catch(function(){}),new Ze(e,function(){return Promise.resolve()})}function zr(e){return new Ze(Promise.resolve(e),function(){return Promise.resolve()})}function Hh(e){return new Ze(e,function(){return e.catch(function(){})})}Ze.prototype.abort=function(){return this.g||(this.g=this.i()),this.g};function Gh(e){return new Ze(Promise.all(e.map(function(t){return t.promise})),function(){return Promise.all(e.map(function(t){return t.abort()}))})}Ze.prototype.finally=function(e){return this.promise.then(function(){return e(!0)},function(){return e(!1)}),this},Ze.prototype.Xa=function(e,t){function n(u){return function(a){if(r.g&&u)o.reject(s);else{var l=u?e:t;l?i=_x(l,a,o):(u?o.resolve:o.reject)(a)}}}function i(){return o.reject(s),r.abort()}var r=this,o=new Pe;o.catch(function(){});var s=new D(2,7,7001);return this.promise.then(n(!0),n(!1)),new Ze(o,function(){return i()})};function _x(e,t,n){try{var i=e(t);return i&&i.promise&&i.abort?(n.resolve(i.promise),function(){return i.abort()}):(n.resolve(i),function(){return Promise.resolve(i).then(function(){},function(){})})}catch(r){return n.reject(r),function(){return Promise.resolve()}}}Ri.Object.defineProperties(Ze.prototype,{aborted:{configurable:!0,enumerable:!0,get:function(){return this.g!==null}}}),K("shaka.util.AbortableOperation",Ze),Ze.prototype.chain=Ze.prototype.Xa,Ze.prototype.finally=Ze.prototype.finally,Ze.all=Gh,Ze.prototype.abort=Ze.prototype.abort,Ze.notAbortable=Hh,Ze.completed=zr,Ze.aborted=Cc,Ze.failed=Fi;function z(e,t){if(t)if(t instanceof Map)for(var n=m(t.keys()),i=n.next();!i.done;i=n.next())i=i.value,Object.defineProperty(this,i,{value:t.get(i),writable:!0,enumerable:!0});else for(n in t)Object.defineProperty(this,n,{value:t[n],writable:!0,enumerable:!0});this.defaultPrevented=this.cancelable=this.bubbles=!1,this.timeStamp=B.performance&&B.performance.now?B.performance.now():Date.now(),this.type=e,this.isTrusted=!1,this.target=this.currentTarget=null,this.g=!1}function Kh(e){var t=new z(e.type),n;for(n in e)Object.defineProperty(t,n,{value:e[n],writable:!0,enumerable:!0});return t}z.prototype.preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)},z.prototype.stopImmediatePropagation=function(){this.g=!0},z.prototype.stopPropagation=function(){},K("shaka.util.FakeEvent",z);var Vu={xl:"abrstatuschanged",yl:"adaptation",zl:"audiotrackchanged",Al:"audiotrackschanged",Bl:"boundarycrossed",Cl:"buffering",Dl:"canupdatestarttime",El:"complete",Fl:"currentitemchanged",Gl:"downloadcompleted",Hl:"downloadfailed",Il:"downloadheadersreceived",Jl:"drmsessionupdate",Kl:"emsg",Ql:"itemsinserted",Rl:"itemsremoved",hm:"prft",Error:"error",Ll:"expirationupdated",Ml:"firstquartile",Nl:"gapjumped",Sl:"keystatuschanged",Vl:"loaded",Wl:"loading",Yl:"manifestparsed",Zl:"manifestupdated",$l:"mediaqualitychanged",am:"mediasourcerecovered",bm:"metadataadded",Metadata:"metadata",dm:"midpoint",fm:"nospatialvideoinfo",gm:"onstatechange",im:"ratechange",nm:"segmentappended",om:"sessiondata",pm:"spatialvideoinfo",qm:"stalldetected",rm:"started",sm:"statechanged",tm:"streaming",um:"textchanged",vm:"texttrackvisibility",wm:"thirdquartile",xm:"timelineregionadded",ym:"timelineregionenter",zm:"timelineregionexit",Am:"trackschanged",Cm:"unloading",Em:"variantchanged"};function Le(){this.ab=new fu,this.Je=this}Le.prototype.addEventListener=function(e,t){this.ab&&this.ab.push(e,t)},Le.prototype.removeEventListener=function(e,t){this.ab&&this.ab.remove(e,t)},Le.prototype.dispatchEvent=function(e){if(!this.ab)return!0;var t=this.ab.get(e.type)||[],n=this.ab.get("All");for(n&&(t=t.concat(n)),t=m(t),n=t.next();!n.done;n=t.next()){n=n.value,e.target=this.Je,e.currentTarget=this.Je;try{n.handleEvent?n.handleEvent(e):n.call(this,e)}catch{}if(e.g)break}return e.defaultPrevented},Le.prototype.release=function(){this.ab=null};function Yr(){this.g=[]}function yr(e,t){e.g.push(t.finally(function(){Rn(e.g,t)}))}Yr.prototype.destroy=function(){for(var e=[],t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.promise.catch(function(){}),e.push(n.abort());return this.g=[],Promise.all(e)};function Ge(e,t,n,i,r,o,s){Le.call(this),this.i=null,this.j=!1,this.u=new Yr,this.g=new Set,this.h=new Set,this.o=e||null,this.m=t||null,this.B=n||null,this.C=i||null,this.F=r||null,this.H=o||null,this.G=s||null,this.l=new Map}$e(Ge,Le),d=Ge.prototype,d.configure=function(e){this.i=e};function pi(e,t,n,i){i=i===void 0?!1:i,n=n||qh;var r=Gu.get(e);(!r||n>=r.priority)&&Gu.set(e,{priority:n,Bf:t,Jk:i})}function Wh(e,t){for(var n=m(e.g),i=n.next();!i.done;i=n.next())t.g.add(i.value);for(e=m(e.h),n=e.next();!n.done;n=e.next())t.h.add(n.value)}d.Mk=function(e){this.g.add(e)},d.ll=function(e){this.g.delete(e)},d.wj=function(){this.g.clear()},d.Nk=function(e){this.h.add(e)},d.ol=function(e){this.h.delete(e)},d.xj=function(){this.h.clear()},d.Xh=function(){this.l.clear()};function ot(e,t,n){return{uris:e,method:"GET",body:null,headers:{},allowCrossSiteCredentials:!1,retryParameters:t,licenseRequestType:null,sessionId:null,drmInfo:null,initData:null,initDataType:null,streamDataCallback:n===void 0?null:n}}d.destroy=function(){return this.j=!0,this.g.clear(),this.h.clear(),this.l.clear(),Le.prototype.release.call(this),this.u.destroy()},d.request=function(e,t,n){var i=this,r=new Yh;if(this.j){var o=Promise.reject(new D(2,7,7001));return o.catch(function(){}),new Hu(o,function(){return Promise.resolve()},r)}t.method=t.method||"GET",t.headers=t.headers||{},t.retryParameters=t.retryParameters?Pn(t.retryParameters):jn(),t.uris=Pn(t.uris),o=Bx(this,e,t,n);var s=o.Xa(function(){return Xh(i,e,t,n,new Fh(t.retryParameters,!1),0,null,r)}),u=s.Xa(function(p){return bx(i,e,p,n)}),a=Date.now(),l=0;o.promise.then(function(){l=Date.now()-a},function(){});var c=0;s.promise.then(function(){c=Date.now()},function(){});var f=u.Xa(function(p){var h=Date.now()-c,g=p.response;return g.timeMs+=l,g.timeMs+=h,p.kk||!i.o||g.fromCache||t.method=="HEAD"||e!=yn||i.o(g.timeMs,g.data.byteLength,zh(n),t,n),i.G&&i.G(e,g,n),g},function(p){throw p&&(p.severity=2),p});return o=new Hu(f.promise,function(){return f.abort()},r),yr(this.u,o),o};function Bx(e,t,n,i){function r(u){o=o.Xa(function(){return n.body&&(n.body=gn(n.body)),u(t,n,i)})}var o=zr(void 0);e.F&&r(e.F),e=m(e.g);for(var s=e.next();!s.done;s=e.next())r(s.value);return o.Xa(void 0,function(u){throw u instanceof D&&u.code==7001?u:new D(2,1,1006,u)})}function Xh(e,t,n,i,r,o,s,u){e.i.forceHTTP&&(n.uris[o]=n.uris[o].replace("https://","http://")),e.i.forceHTTPS&&(n.uris[o]=n.uris[o].replace("http://","https://")),o>0&&e.H&&e.H(t,i,n.uris[o],n.uris[o-1]);var a=new tt(n.uris[o]),l=a.jc,c=!1;l||(l=location.protocol,l=l.slice(0,-1),du(a,l),n.uris[o]=a.toString()),l=l.toLowerCase();var f=(l=Gu.get(l))?l.Bf:null;if(!f)return Fi(new D(2,1,1e3,a));var p=l.Jk;(a=e.l.get(a.Db))&&(n.headers["common-access-token"]=a);var h=null,g=null,v=!1,y=!1,S;return Hh(Vh(r)).Xa(function(){if(e.j)return Cc();S=Date.now();var x=0;n.requestStartTime=Date.now();var w=f(n.uris[o],n,t,function(A,C,E){h&&h.stop(),g&&g.ka(L/1e3),e.o&&t==yn&&(x++,n.packetNumber=x,e.o(A,C,zh(i),n,i),c=!0,u.g=E)},function(A){y=!0,n.timeToFirstByte=Date.now()-n.requestStartTime,e.m&&e.m(A,n,t)},{minBytesForProgressEvents:e.i.minBytesForProgressEvents});if(!p)return w;var I=n.retryParameters.connectionTimeout;I&&(h=new ge(function(){v=!0,w.abort()}),h.ka(I/1e3));var L=n.retryParameters.stallTimeout;return L&&(g=new ge(function(){v=!0,w.abort()})),w}).Xa(function(x){h&&h.stop(),g&&g.stop(),x.timeMs==null&&(x.timeMs=Date.now()-S);var w=x.headers["common-access-token"];if(w){var I=new tt(x.uri);e.l.set(I.Db,w)}return w={response:x,kk:c},!y&&e.m&&e.m(x.headers,n,t),e.B&&e.B(n,x),w},function(x){if(h&&h.stop(),g&&g.stop(),e.C){var w=null,I=0;x instanceof D&&(w=x,x.code==1001&&(I=x.data[1])),e.C(n,w,I,v)}if(e.j)return Cc();if(v&&(x=new D(1,1,1003,n.uris[o],t)),x instanceof D){if(x.code==7001)throw x;if(x.code==1010)throw s;if(x.severity==1){if(w=new Map().set("error",x),w=new z("retry",w),w.cancelable=!0,e.dispatchEvent(w),w.defaultPrevented)throw x;return o=(o+1)%n.uris.length,Xh(e,t,n,i,r,o,x,u)}}throw x})}function bx(e,t,n,i){var r=zr(void 0);e=m(e.h);for(var o=e.next(),s={};!o.done;s={Qi:void 0},o=e.next())s.Qi=o.value,r=r.Xa(function(u){return function(){var a=n.response;return a.data&&(a.data=gn(a.data)),(0,u.Qi)(t,a,i)}}(s));return r.Xa(function(){return n},function(u){var a=2;if(u instanceof D){if(u.code==7001)throw u;a=u.severity}throw new D(a,1,1007,u)})}function zh(e){if(e){var t=e.segment;if(e=e.stream,t&&e&&e.fastSwitching&&t.Xc)return!1}return!0}K("shaka.net.NetworkingEngine",Ge),Ge.prototype.request=Ge.prototype.request,Ge.prototype.destroy=Ge.prototype.destroy,Ge.makeRequest=ot,Ge.defaultRetryParameters=function(){return jn()},Ge.prototype.clearCommonAccessTokenMap=Ge.prototype.Xh,Ge.prototype.clearAllResponseFilters=Ge.prototype.xj,Ge.prototype.unregisterResponseFilter=Ge.prototype.ol,Ge.prototype.registerResponseFilter=Ge.prototype.Nk,Ge.prototype.clearAllRequestFilters=Ge.prototype.wj,Ge.prototype.unregisterRequestFilter=Ge.prototype.ll,Ge.prototype.registerRequestFilter=Ge.prototype.Mk,Ge.unregisterScheme=function(e){Gu.delete(e)},Ge.registerScheme=pi,Ge.prototype.configure=Ge.prototype.configure;function Yh(){this.g=0}Ge.NumBytesRemainingClass=Yh;function Hu(e,t,n){Ze.call(this,e,t),this.h=n}$e(Hu,Ze),Ge.PendingRequest=Hu;var yn=1;Ge.RequestType={MANIFEST:0,SEGMENT:yn,LICENSE:2,APP:3,TIMING:4,SERVER_CERTIFICATE:5,KEY:6,ADS:7,CONTENT_STEERING:8,CMCD:9},Ge.AdvancedRequestType={INIT_SEGMENT:0,MEDIA_SEGMENT:1,MEDIA_PLAYLIST:2,MASTER_PLAYLIST:3,MPD:4,MSS:5,MPD_PATCH:6,MEDIATAILOR_SESSION_INFO:7,MEDIATAILOR_TRACKING_INFO:8,MEDIATAILOR_STATIC_RESOURCE:9,MEDIATAILOR_TRACKING_EVENT:10,INTERSTITIAL_ASSET_LIST:11,INTERSTITIAL_AD_URL:12};var qh=3;Ge.PluginPriority={FALLBACK:1,PREFERRED:2,APPLICATION:qh};var Gu=new Map;function qr(e){this.g=!1,this.h=new Pe,this.i=e}qr.prototype.destroy=function(){var e=this;return this.g?this.h:(this.g=!0,this.i().then(function(){e.h.resolve()},function(){e.h.resolve()}))};function _e(e,t){if(e.g)throw t instanceof D&&t.code==7003?t:new D(2,7,7003,t)}function Mc(e,t){var n=[];e=m(e);for(var i=e.next();!i.done;i=e.next())n.push(t(i.value));return n}function Fx(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(!t(n.value))return!1;return!0}function Jr(e){for(var t=new Map,n=m(Object.keys(e)),i=n.next();!i.done;i=n.next())i=i.value,t.set(i,e[i]);return t}function kc(e){var t={};return e.forEach(function(n,i){t[i]=n}),t}function Fe(e,t){this.h=Ht(e),this.i=t==Jh,this.g=0}d=Fe.prototype,d.Ka=function(){return this.g<this.h.byteLength},d.Pa=function(){return this.g},d.getLength=function(){return this.h.byteLength},d.Z=function(){try{var e=this.h.getUint8(this.g);return this.g+=1,e}catch{throw hi()}},d.Ca=function(){try{var e=this.h.getUint16(this.g,this.i);return this.g+=2,e}catch{throw hi()}},d.U=function(){try{var e=this.h.getUint32(this.g,this.i);return this.g+=4,e}catch{throw hi()}},d.eh=function(){try{var e=this.h.getInt32(this.g,this.i);return this.g+=4,e}catch{throw hi()}},d.Fd=function(){try{if(this.i)var e=this.h.getUint32(this.g,!0),t=this.h.getUint32(this.g+4,!0);else t=this.h.getUint32(this.g,!1),e=this.h.getUint32(this.g+4,!1)}catch{throw hi()}if(t>2097151)throw new D(2,3,3001);return this.g+=8,t*4294967296+e},d.Tb=function(e,t){if(this.g+e>this.h.byteLength)throw hi();var n=re(this.h,this.g,e);return this.g+=e,t?new Uint8Array(n):n},d.skip=function(e){if(this.g+e>this.h.byteLength)throw hi();this.g+=e},d.Ri=function(e){if(this.g<e)throw hi();this.g-=e},d.seek=function(e){if(e<0||e>this.h.byteLength)throw hi();this.g=e},d.Yc=function(){for(var e=this.g;this.Ka()&&this.h.getUint8(this.g)!=0;)this.g+=1;return e=re(this.h,e,this.g-e),this.g+=1,Xe(e)};function hi(){return new D(2,3,3e3)}K("shaka.util.DataViewReader",Fe),Fe.prototype.readTerminatedString=Fe.prototype.Yc,Fe.prototype.seek=Fe.prototype.seek,Fe.prototype.rewind=Fe.prototype.Ri,Fe.prototype.skip=Fe.prototype.skip,Fe.prototype.readBytes=Fe.prototype.Tb,Fe.prototype.readUint64=Fe.prototype.Fd,Fe.prototype.readInt32=Fe.prototype.eh,Fe.prototype.readUint32=Fe.prototype.U,Fe.prototype.readUint16=Fe.prototype.Ca,Fe.prototype.readUint8=Fe.prototype.Z,Fe.prototype.getLength=Fe.prototype.getLength,Fe.prototype.getPosition=Fe.prototype.Pa,Fe.prototype.hasMoreData=Fe.prototype.Ka;var Jh=1;Fe.Endianness={BIG_ENDIAN:0,LITTLE_ENDIAN:Jh};function Ne(){this.i=new Map,this.h=new Map,this.g=!1}d=Ne.prototype,d.box=function(e,t){return e=$h(e),this.i.set(e,Vx),this.h.set(e,t),this},d.S=function(e,t){return e=$h(e),this.i.set(e,Qh),this.h.set(e,t),this},d.stop=function(){this.g=!0},d.parse=function(e,t,n){for(e=new Fe(e,0),this.g=!1;e.Ka()&&!this.g;)this.Cd(0,e,t,n)},d.Cd=function(e,t,n,i){var r=t.Pa();if(i&&r+8>t.getLength())this.g=!0;else{var o=t.U(),s=t.U(),u=Wu(s),a=!1;switch(o){case 0:o=t.getLength()-r;break;case 1:if(i&&t.Pa()+8>t.getLength()){this.g=!0;return}o=t.Fd(),a=!0}var l=this.h.get(s);if(l){var c=null,f=null;if(this.i.get(s)==Qh){if(i&&t.Pa()+4>t.getLength()){this.g=!0;return}f=t.U(),c=f>>>24,f&=16777215}s=r+o,n&&s>t.getLength()&&(s=t.getLength()),i&&s>t.getLength()?this.g=!0:(s-=t.Pa(),t=s>0?t.Tb(s,!1):new Uint8Array(0),t=new Fe(t,0),l({name:u,parser:this,partialOkay:n||!1,stopOnPartial:i||!1,version:c,flags:f,reader:t,size:o,start:r+e,has64BitSize:a}))}else t.skip(Math.min(r+o-t.Pa(),t.getLength()-t.Pa()))}};function ce(e){for(var t=Vi(e);e.reader.Ka()&&!e.parser.g;)e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function gi(e){for(var t=Vi(e),n=e.reader.U(),i=0;i<n&&(e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial),!e.parser.g);i++);}function $t(e){var t=Vi(e);for(e.reader.skip(78);e.reader.Ka()&&!e.parser.g;)e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function Ku(e){var t=Vi(e);e.reader.skip(8);var n=e.reader.Ca();for(e.reader.skip(6),n==2?e.reader.skip(48):e.reader.skip(12),n==1&&e.reader.skip(16);e.reader.Ka()&&!e.parser.g;)e.parser.Cd(e.start+t,e.reader,e.partialOkay,e.stopOnPartial)}function $r(e,t){return function(n){e(n.reader.Tb(n.reader.getLength()-n.reader.Pa(),t))}}function $h(e){var t=0;e=m(e);for(var n=e.next();!n.done;n=e.next())t=t<<8|n.value.charCodeAt(0);return t}function Wu(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,e&255)}function Vi(e){return 8+(e.has64BitSize?8:0)+(e.flags!=null?4:0)}K("shaka.util.Mp4Parser",Ne),Ne.headerSize=Vi,Ne.typeToString=Wu,Ne.allData=$r,Ne.audioSampleEntry=Ku,Ne.visualSampleEntry=$t,Ne.sampleDescription=gi,Ne.children=ce,Ne.prototype.parseNext=Ne.prototype.Cd,Ne.prototype.parse=Ne.prototype.parse,Ne.prototype.stop=Ne.prototype.stop,Ne.prototype.fullBox=Ne.prototype.S,Ne.prototype.box=Ne.prototype.box;var Vx=0,Qh=1;function Dc(e){var t=this;this.g=[],this.h=[],this.data=[],new Ne().box("moov",ce).box("moof",ce).S("pssh",function(n){if(!(n.version>1)){var i=re(n.reader.h,-12,n.size);if(t.data.push(i),i=n.reader.Tb(16,!1),t.g.push(oi(i)),n.version>0){i=n.reader.U();for(var r=0;r<i;r++){var o=n.reader.Tb(16,!1);o=oi(o),t.h.push(o)}}}}).parse(e)}function Xu(e,t,n,i){var r=e.length,o=12+t.length+4+r;i>0&&(o+=4+16*n.size);var s=new Uint8Array(o),u=Ht(s),a=0;if(u.setUint32(a,o),a+=4,u.setUint32(a,1886614376),a+=4,i<1?u.setUint32(a,0):u.setUint32(a,16777216),a+=4,s.set(t,a),a+=t.length,i>0)for(u.setUint32(a,n.size),a+=4,t=m(n),n=t.next();!n.done;n=t.next())n=ur(n.value),s.set(n,a),a+=n.length;return u.setUint32(a,r),s.set(e,a+4),s}function zu(e){var t=this;this.F=e,this.l=this.B=null,this.aa=this.T=!1,this.J=0,this.g=null,this.o=new Ee,this.i=new Map,this.X=[],this.C=new Map,this.K=!1,this.m=new Pe,this.h=null,this.u=function(n){n.severity==2&&t.m.reject(n),e.onError(n)},this.ha=new Map,this.ma=new Map,this.M=new ge(function(){return Qx(t)}),this.R=!1,this.N=[],this.oa=!1,this.G=new ge(function(){eS(t)}),this.m.catch(function(){}),this.j=new qr(function(){return Hx(t)}),this.O=!1,this.H=this.I=null,this.V=function(){return!1}}d=zu.prototype,d.destroy=function(){return this.j.destroy()};function Hx(e){return k(function(t){switch(t.g){case 1:return e.o.release(),e.o=null,e.m.reject(),e.G.stop(),e.G=null,e.M.stop(),e.M=null,T(t,rs(e),2);case 2:if(!e.l){t.A(3);break}return se(t,4),T(t,e.l.setMediaKeys(null),6);case 6:fe(t,5);break;case 4:ue(t);case 5:e.l=null;case 3:e.g=null,e.B=null,e.C=new Map,e.h=null,e.u=function(){},e.F=null,e.O=!1,e.I=null,G(t)}})}d.configure=function(e,t){this.h=e,t&&(this.V=t),this.G&&this.T&&this.g&&this.G.Da(this.h.updateExpirationTime)};function Gx(e,t,n){return e.aa=!0,e.C=new Map,e.R=n,eg(e,t,!1)}function Zh(e,t,n,i){i=i===void 0?!0:i,e.C=new Map,n=m(n);for(var r=n.next();!r.done;r=n.next())e.C.set(r.value,{initData:null,initDataType:null});for(n=m(e.h.persistentSessionsMetadata),r=n.next();!r.done;r=n.next())r=r.value,e.C.set(r.sessionId,{initData:r.initData,initDataType:r.initDataType});return e.R=e.C.size>0,eg(e,t,i)}function Kx(e,t,n,i,r,o){var s,u,a,l,c;return k(function(f){return f.g==1?(s=[],o.length&&s.push(o[0].contentType),r.length&&s.push(r[0].contentType),u=function(p){return p=si(t,p,null),p.licenseServerUri=n,p.serverCertificate=i,p.persistentStateRequired=!0,p.sessionType="persistent-license",p},a=Bh(s),a.video&&(l=u(o[0].encryptionScheme||""),a.video.drmInfos.push(l)),a.audio&&(c=u(r[0].encryptionScheme||""),a.audio.drmInfos.push(c)),T(f,Ac([a],!0,e.O,[]),2)):(_e(e.j),f.return(rg(e,[a])))})}function eg(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I;return k(function(L){if(L.g==1){for(cg(e.h.clearKeys,t),i=t.some(function(A){return!!(A.video&&A.video.drmInfos.length||A.audio&&A.audio.drmInfos.length)}),r=Jr(e.h.servers),o=Jr(e.h.advanced||{}),!i&&n&&nS(t,r),s=new WeakSet,u=m(t),a=u.next();!a.done;a=u.next())for(l=a.value,c=lg(l),f=m(c),p=f.next();!p.done;p=f.next())h=p.value,s.has(h)||(s.add(h),rS(h,r,o,e.h.keySystemsMapping));for(g=function(A,C){var E=[];A=m(A);for(var R=A.next();!R.done;R=A.next()){R=R.value;var M=R[C]||o.has(R.keySystem)&&o.get(R.keySystem)[C]||"",P;if((P=M=="")&&(P=(P=R.keySystem)?!!P.match(/^com\.widevine\.alpha/):!1),P&&(C=="audioRobustness"?M=[e.h.defaultAudioRobustnessForWidevine]:C=="videoRobustness"&&(M=[e.h.defaultVideoRobustnessForWidevine])),typeof M=="string")E.push(R);else if(Array.isArray(M))for(M.length===0&&(M=[""]),M=m(M),P=M.next();!P.done;P=M.next()){var N={};E.push(Object.assign({},R,(N[C]=P.value,N)))}}return E},v=new WeakSet,y=m(t),S=y.next();!S.done;S=y.next())x=S.value,x.video&&!v.has(x.video)&&(x.video.drmInfos=g(x.video.drmInfos,"videoRobustness"),x.video.drmInfos=g(x.video.drmInfos,"audioRobustness"),v.add(x.video)),x.audio&&!v.has(x.audio)&&(x.audio.drmInfos=g(x.audio.drmInfos,"videoRobustness"),x.audio.drmInfos=g(x.audio.drmInfos,"audioRobustness"),v.add(x.audio));return T(L,Ac(t,e.R,e.O,e.h.preferredKeySystems),2)}return _e(e.j),w=i||r.size>0,w?(I=rg(e,t),L.return(i?I:I.catch(function(){}))):(e.T=!0,L.return(Promise.resolve()))})}function tg(e){var t;return k(function(n){switch(n.g){case 1:if(e.l.mediaKeys)return n.return();if(!e.I){n.A(2);break}return T(n,e.I,3);case 3:return _e(e.j),n.return();case 2:return se(n,4),e.I=e.l.setMediaKeys(e.B),T(n,e.I,6);case 6:fe(n,5);break;case 4:t=ue(n),e.u(new D(2,6,6003,t.message));case 5:_e(e.j),G(n)}})}function Wx(e,t){return k(function(n){if(n.g==1)return T(n,tg(e),2);is(e,t.initDataType,re(t.initData)),G(n)})}d.Vb=function(e){var t=this,n,i;return k(function(r){if(r.g==1)return t.l===e?r.return():t.B?(t.l=e,t.h.delayLicenseRequestUntilPlayed&&t.o.ya(t.l,"play",function(){for(var o=m(t.N),s=o.next();!s.done;s=o.next())Pc(t,s.value);t.oa=!0,t.N=[]}),t.l.remote?(t.o.D(t.l.remote,"connect",function(){return rs(t)}),t.o.D(t.l.remote,"connecting",function(){return rs(t)}),t.o.D(t.l.remote,"disconnect",function(){return rs(t)})):"webkitCurrentPlaybackTargetIsWireless"in t.l&&t.o.D(t.l,"webkitcurrentplaybacktargetiswirelesschanged",function(){return rs(t)}),t.H=t.g&&t.g.initData.find(function(o){return o.initData.length>0})||null,n=t.g.keySystem,(i=pe().Wg(n))||!t.H&&t.g.keySystem==="com.apple.fps"&&!t.C.size?r.A(2):T(r,tg(t),2)):(t.o.ya(e,"encrypted",function(){t.u(new D(2,6,6010))}),r.return());ng(t).catch(function(){}),!i&&(t.H||t.C.size||t.h.parseInbandPsshEnabled)||t.o.D(t.l,"encrypted",function(o){return Wx(t,o)}),G(r)})};function Xx(e){var t,n,i,r,o;return k(function(s){switch(s.g){case 1:if(!e.B||!e.g)return s.return();if(!e.g.serverCertificateUri||e.g.serverCertificate&&e.g.serverCertificate.length){s.A(2);break}return t=ot([e.g.serverCertificateUri],e.h.retryParameters),se(s,3),n=e.F.wc.request(5,t,{isPreload:e.V()}),T(s,n.promise,5);case 5:i=s.h,e.g.serverCertificate=re(i.data),fe(s,4);break;case 3:throw r=ue(s),new D(2,6,6017,r);case 4:if(e.j.g)return s.return();case 2:return!e.g.serverCertificate||!e.g.serverCertificate.length?s.return():(se(s,6),T(s,e.B.setServerCertificate(e.g.serverCertificate),8));case 8:fe(s,0);break;case 6:throw o=ue(s),new D(2,6,6004,o.message)}})}function zx(e,t){var n,i,r;return k(function(o){if(o.g==1)return T(o,sg(e,t,{initData:null,initDataType:null}),2);if(o.g!=3)return n=o.h,n?(i=[],(r=e.i.get(n))&&(r.Kb=new Pe,i.push(r.Kb)),i.push(n.remove()),T(o,Promise.all(i),3)):o.return();e.i.delete(n),G(o)})}function ng(e){var t,n,i,r,o;return k(function(s){if(s.g==1)return e.C.size?(e.C.forEach(function(u,a){sg(e,a,u)}),T(s,e.m,3)):s.A(2);if(s.g!=2){if(t=e.g&&e.g.keyIds||new Set([]),t.size>0&&tS(e))return s.return(e.m);e.K=!1,e.m=new Pe,e.m.catch(function(){})}for(n=(e.g?e.g.initData:[])||[],i=m(n),r=i.next();!r.done;r=i.next())o=r.value,is(e,o.initDataType,o.initData);return os(e)&&e.m.resolve(),s.return(e.m)})}function is(e,t,n){if(n.length){try{n=e.h.initDataTransform(n,t,e.g)}catch(s){t=s,s instanceof D||(t=new D(2,6,6016,s)),e.u(t);return}if(e.h.ignoreDuplicateInitData){var i=e.i.values();i=m(i);for(var r=i.next();!r.done;r=i.next())if(ii(n,r.value.initData))return;var o=!1;if(e.C.forEach(function(s){!o&&ii(n,s.initData)&&(o=!0)}),o)return}e.K=!0,e.i.size>0&&os(e)&&(e.m.resolve(),e.K=!1,e.m=new Pe,e.m.catch(function(){})),Jx(e,t,n,e.g.sessionType)}}function ig(e){return e=e.i.keys(),e=Mc(e,function(t){return t.sessionId}),Array.from(e)}d.Kg=function(){var e=this,t=this.i.keys();return t=Mc(t,function(n){var i=e.i.get(n);return{sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType}}),Array.from(t)},d.$d=function(){var e=1/0,t=this.i.keys();t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,isNaN(n.expiration)||(e=Math.min(e,n.expiration));return e};function Yx(e){return e.J?e.J:NaN}d.$e=function(){return kc(this.ma)};function rg(e,t){var n,i,r,o,s,u,a;return k(function(l){switch(l.g){case 1:if(n=new Map,i=qx(e,t,n),!i)throw navigator.requestMediaKeySystemAccess?new D(2,6,6001):new D(2,6,6020);_e(e.j),se(l,2),i.getConfiguration();var c=r=e.h.keySystemsMapping[i.keySystem]||i.keySystem,f=n.get(r),p=[],h=[],g=[],v=[],y=[],S=new Set,x=new Set;iS(f,p,h,v,g,y,S,x);var w=e.R?"persistent-license":"temporary";for(c={keySystem:c,encryptionScheme:p[0],licenseServerUri:h[0],distinctiveIdentifierRequired:f[0].distinctiveIdentifierRequired,persistentStateRequired:f[0].persistentStateRequired,sessionType:f[0].sessionType||w,audioRobustness:f[0].audioRobustness||"",videoRobustness:f[0].videoRobustness||"",serverCertificate:v[0],serverCertificateUri:g[0],initData:y,keyIds:S,mediaTypes:f[0].mediaTypes},x.size>0&&(c.keySystemUris=x),f=m(f),x=f.next();!x.done;x=f.next())x=x.value,x.distinctiveIdentifierRequired&&(c.distinctiveIdentifierRequired=x.distinctiveIdentifierRequired),x.persistentStateRequired&&(c.persistentStateRequired=x.persistentStateRequired);if(e.g=c,!e.g.licenseServerUri)throw new D(2,6,6012,e.g.keySystem);return T(l,i.createMediaKeys(),4);case 4:if(o=l.h,_e(e.j),e.B=o,!(e.h.minHdcpVersion!=""&&"getStatusForPolicy"in e.B)){l.A(5);break}return se(l,6),T(l,e.B.getStatusForPolicy({minHdcpVersion:e.h.minHdcpVersion}),8);case 8:if(s=l.h,s!="usable")throw new D(2,6,6018);_e(e.j),fe(l,5,2);break;case 6:throw u=ue(l,2),u instanceof D?u:new D(2,6,6019,u.message);case 5:return e.T=!0,e.G.Da(e.h.updateExpirationTime),T(l,Xx(e),9);case 9:_e(e.j),fe(l,0);break;case 2:throw a=ue(l),_e(e.j,a),e.g=null,a instanceof D?a:new D(2,6,6002,a.message)}})}function qx(e,t,n){for(var i=m(t),r=i.next();!r.done;r=i.next()){r=m(lg(r.value));for(var o=r.next();!o.done;o=r.next())o=o.value,n.getOrInsertComputed(o.keySystem,function(){return[]}).push(o)}if(n.size==1&&n.has(""))throw new D(2,6,6e3);i=e.h.preferredKeySystems,i.length||(r=Jr(e.h.servers),r.size==1&&(i=Array.from(r.keys()))),r=m(i);var s=r.next();for(o={};!s.done;o={Li:void 0},s=r.next()){o.Li=s.value,s=m(t);for(var u=s.next();!u.done;u=s.next())if(u=u.value.decodingInfos.find(function(f){return function(p){return p.supported&&p.keySystemAccess!=null&&p.keySystemAccess.keySystem==f.Li}}(o)))return u.keySystemAccess}for(r=m([!0,!1]),o=r.next();!o.done;o=r.next())for(o=o.value,s=m(t),u=s.next();!u.done;u=s.next()){u=m(u.value.decodingInfos);for(var a=u.next();!a.done;a=u.next())if(a=a.value,a.supported&&a.keySystemAccess){var l=a.keySystemAccess.keySystem;if(!i.includes(l)){var c=n.get(l);for(!c&&e.h.keySystemsMapping[l]&&(c=n.get(e.h.keySystemsMapping[l])),l=m(c),c=l.next();!c.done;c=l.next())if(!!c.value.licenseServerUri==o)return a.keySystemAccess}}}return null}function Rc(e){os(e)&&e.m.resolve()}function og(e,t){new ge(function(){t.loaded=!0,Rc(e)}).ka(sS)}function sg(e,t,n){var i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:try{i=e.B.createSession("persistent-license")}catch(f){return r=new D(2,6,6005,f.message),e.u(r),c.return(Promise.reject(r))}return e.o.D(i,"message",function(f){Lc(e)?e.N.push(f):Pc(e,f)}),e.o.D(i,"keystatuseschange",function(f){return ug(e,f)}),o={initData:n.initData,initDataType:n.initDataType,loaded:!1,Zg:1/0,Kb:null,type:"persistent-license"},e.i.set(i,o),se(c,2),T(c,i.load(t),4);case 4:return s=c.h,_e(e.j),s||(e.i.delete(i),u=e.h.persistentSessionOnlinePlayback?1:2,e.u(new D(u,6,6013)),o.loaded=!0),og(e,o),Rc(e),c.return(i);case 2:a=ue(c),_e(e.j,a),e.i.delete(i),l=e.h.persistentSessionOnlinePlayback?1:2,e.u(new D(l,6,6005,a.message)),o.loaded=!0,Rc(e);case 3:return c.return(Promise.resolve())}})}function Jx(e,t,n,i){try{var r=e.B.createSession(i)}catch(o){e.u(new D(2,6,6005,o.message));return}e.o.D(r,"message",function(o){Lc(e)?e.N.push(o):Pc(e,o)}),e.o.D(r,"keystatuseschange",function(o){return ug(e,o)}),e.i.set(r,{initData:n,initDataType:t,loaded:!1,Zg:1/0,Kb:null,type:i}),e.h.logLicenseExchange&&ri(n),r.generateRequest(t,n).catch(function(o){if(!e.j.g){e.i.delete(r);var s=o.errorCode;if(s&&s.systemCode){var u=s.systemCode;u<0&&(u+=4294967296),u="0x"+u.toString(16)}e.u(new D(2,6,6006,o.message,o,u))}})}function Lc(e){return e.l?e.h.delayLicenseRequestUntilPlayed&&e.l.paused&&!e.oa:!e.aa&&e.h.delayLicenseRequestUntilPlayed}function $x(e){return k(function(t){return t.g==1?!e.K||Lc(e)?t.A(0):T(t,e.m,3):T(t,Promise.all(e.X.map(function(n){return n.promise})),0)})}function Pc(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S;k(function(x){switch(x.g){case 1:if(n=t.target,e.h.logLicenseExchange&&ri(t.message),i=e.i.get(n),r=e.g.licenseServerUri,o=e.h.advanced[e.g.keySystem],t.messageType=="individualization-request"&&o&&o.individualizationServer&&(r=o.individualizationServer),s=ot([r],e.h.retryParameters),s.body=t.message,s.method="POST",s.licenseRequestType=t.messageType,s.sessionId=n.sessionId,s.drmInfo=e.g,i&&(s.initData=i.initData,s.initDataType=i.initDataType),o&&o.headers)for(u in o.headers)s.headers[u]=o.headers[u];if(e.g.keySystem==="org.w3.clearkey"){var w=s,I=e.g;try{var L=zn(w.body);if(L){var A=JSON.parse(L);A.type||(A.type=I.sessionType,w.body=Ln(JSON.stringify(A)))}}catch{}}if(nc(e.g.keySystem))if(w=Ni(s.body,!0,!0),w.includes("PlayReadyKeyMessage")){for(w=dr(w,"PlayReadyKeyMessage"),I=Hn(w,"HttpHeader"),I=m(I),L=I.next();!L.done;L=I.next())A=L.value,L=Hn(A,"name")[0],A=Hn(A,"value")[0],s.headers[nt(L)]=nt(A);w=Hn(w,"Challenge")[0],s.body=mn(nt(w))}else s.headers["Content-Type"]="text/xml; charset=utf-8";return a=Date.now(),se(x,2),c=e.F.wc.request(2,s,{isPreload:e.V()}),e.X.push(c),T(x,c.promise,4);case 4:l=x.h,Rn(e.X,c),fe(x,3);break;case 2:return f=ue(x),e.j.g||(p={sessionId:n.sessionId,sessionType:i.type,initData:i.initData,initDataType:i.initDataType},h=new D(2,6,6007,f,p),e.i.size==1?(e.u(h),i&&i.Kb&&i.Kb.reject(h)):(i&&i.Kb&&i.Kb.reject(h),e.i.delete(n),os(e)&&(e.m.resolve(),e.M.ka(.1)))),x.return();case 3:return e.j.g?x.return():(e.J+=(Date.now()-a)/1e3,e.h.logLicenseExchange&&ri(l.data),se(x,5),T(x,n.update(l.data),7));case 7:fe(x,6);break;case 5:return v=(g=ue(x))&&g.message||String(g),y=new D(2,6,6008,v),e.u(y),i&&i.Kb&&i.Kb.reject(y),x.return();case 6:if(e.j.g)return x.return();S=new z("drmsessionupdate"),e.F.onEvent(S),i&&(i.Kb&&i.Kb.resolve(),og(e,i)),G(x)}})}function ug(e,t){t=t.target;var n=e.i.get(t),i=!1;t.keyStatuses.forEach(function(o,s){if(typeof s=="string"){var u=s;s=o,o=u}if(u=pe(),nc(e.g.keySystem)&&s.byteLength==16&&u.Ff()){u=Ht(s);var a=u.getUint32(0,!0),l=u.getUint16(4,!0),c=u.getUint16(6,!0);u.setUint32(0,a,!1),u.setUint16(4,l,!1),u.setUint16(6,c,!1)}o!="status-pending"&&(n.loaded=!0),o=="expired"&&(i=!0),s=oi(s).slice(0,32),e.ha.set(s,o)});var r=t.expiration-Date.now();(r<0||i&&r<1e3)&&n&&!n.Kb&&(e.i.delete(t),ag(t)),os(e)&&(e.m.resolve(),e.M.ka(uS))}function Qx(e){var t=e.ha,n=e.ma;n.clear(),t.forEach(function(i,r){return n.set(r,i)}),t=Array.from(n.values()),t.length&&t.every(function(i){return i=="expired"})&&e.u(new D(2,6,6014)),e.F.zf(kc(n))}function Zx(){var e,t,n,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N;return k(function(b){if(b.g==1){if(e="org.w3.clearkey com.widevine.alpha com.widevine.alpha.experiment com.microsoft.playready com.microsoft.playready.hardware com.microsoft.playready.recommendation com.microsoft.playready.recommendation.3000 com.microsoft.playready.recommendation.3000.clearlead com.chromecast.playready com.apple.fps.1_0 com.apple.fps com.huawei.wiseplay".split(" "),!(B.MediaKeys&&B.navigator&&B.navigator.requestMediaKeySystemAccess&&B.MediaKeySystemAccess&&B.MediaKeySystemAccess.prototype.getConfiguration)){for(t={},n=m(e),i=n.next();!i.done;i=n.next())r=i.value,t[r]=null;return b.return(t)}for(o="1.0 1.1 1.2 1.3 1.4 2.0 2.1 2.2 2.3".split(" "),s=["SW_SECURE_CRYPTO","SW_SECURE_DECODE","HW_SECURE_CRYPTO","HW_SECURE_DECODE","HW_SECURE_ALL"],u=["150","2000","3000"],a={"com.widevine.alpha":s,"com.widevine.alpha.experiment":s,"com.microsoft.playready.recommendation":u},l=[{contentType:'video/mp4; codecs="avc1.42E01E"'},{contentType:'video/webm; codecs="vp8"'}],c=[{contentType:'audio/mp4; codecs="mp4a.40.2"'},{contentType:'audio/webm; codecs="opus"'}],f={videoCapabilities:l,audioCapabilities:c,initDataTypes:["cenc","sinf","skd","keyids"]},p=[null,"cenc","cbcs"],h=new Map,g=pe(),v=function(_,j,O){var F,V,le,q,Re,ae,Ve,Ae,de,xe,ft,Ue,we;return k(function(Ie){switch(Ie.g){case 1:return se(Ie,2),T(Ie,j.createMediaKeys(),5);case 5:F=Ie.h;case 4:fe(Ie,3);break;case 2:return ue(Ie),Ie.return();case 3:if(le=(V=j.getConfiguration().sessionTypes)?V.includes("persistent-license"):!1,g.Di()&&(le=!1),q=j.getConfiguration().videoCapabilities,Re=j.getConfiguration().audioCapabilities,ae={persistentState:le,encryptionSchemes:[],videoRobustnessLevels:[],audioRobustnessLevels:[],minHdcpVersions:[]},h.get(_)?ae=h.get(_):h.set(_,ae),(Ve=q[0].encryptionScheme)&&!ae.encryptionSchemes.includes(Ve)&&ae.encryptionSchemes.push(Ve),(Ae=q[0].robustness)&&!ae.videoRobustnessLevels.includes(Ae)&&ae.videoRobustnessLevels.push(Ae),(de=Re[0].robustness)&&!ae.audioRobustnessLevels.includes(de)&&ae.audioRobustnessLevels.push(de),!(O&&"getStatusForPolicy"in F)){Ie.A(0);break}xe=m(o),ft=xe.next();case 7:if(ft.done){Ie.A(0);break}if(Ue=ft.value,ae.minHdcpVersions.includes(Ue)){Ie.A(8);break}return T(Ie,F.getStatusForPolicy({minHdcpVersion:Ue}),10);case 10:if(we=Ie.h,we=="usable")ae.minHdcpVersions.includes(Ue)||ae.minHdcpVersions.push(Ue);else{Ie.A(0);break}case 8:ft=xe.next(),Ie.A(7)}})},y=function(_,j,O,F,V){V=V===void 0?!1:V;var le,q,Re,ae,Ve,Ae,de,xe,ft,Ue,we;return k(function(Ie){switch(Ie.g){case 1:for(se(Ie,2),le=Pn(f),q=m(le.videoCapabilities),Re=q.next();!Re.done;Re=q.next())ae=Re.value,ae.encryptionScheme=j,ae.robustness=O;for(Ve=m(le.audioCapabilities),Ae=Ve.next();!Ae.done;Ae=Ve.next())de=Ae.value,de.encryptionScheme=j,de.robustness=F;return xe=Pn(le),xe.persistentState="required",xe.sessionTypes=["persistent-license"],ft=[xe,le],we=pe(),we.Oa()=="MOBILE"?T(Ie,Pu(5,navigator.requestMediaKeySystemAccess(_,ft)),7):T(Ie,navigator.requestMediaKeySystemAccess(_,ft),6);case 6:Ue=Ie.h,Ie.A(5);break;case 7:Ue=Ie.h;case 5:return T(Ie,v(_,Ue,V),8);case 8:fe(Ie,0);break;case 2:ue(Ie),G(Ie)}})},S=function(_){return!(pe().Ga()==="WEBKIT"&&_==="org.w3.clearkey")},x=[],w=m(e),I=w.next();!I.done;I=w.next())if(L=I.value,h.set(L,null),S(L)){for(A=!0,C=m(p),E=C.next();!E.done;E=C.next())R=E.value,x.push(y(L,R,"","",A)),A=!1;for(M=m(a[L]||[]),P=M.next();!P.done;P=M.next())N=P.value,x.push(y(L,null,N,"")),x.push(y(L,null,"",N))}return T(b,Promise.all(x),2)}return b.return(kc(h))})}function ag(e){return k(function(t){if(t.g==1)return se(t,2),T(t,Pu(oS,Promise.all([e.close().catch(function(){}),e.closed])),4);if(t.g!=2)return fe(t,0);ue(t),G(t)})}function rs(e){var t;return k(function(n){return t=Array.from(e.i.entries()),e.i.clear(),T(n,Promise.all(t.map(function(i){i=m(i);var r=i.next().value,o=i.next().value;return k(function(s){if(s.g==1)return se(s,2),e.aa||e.C.has(r.sessionId)||o.type!=="persistent-license"||e.h.persistentSessionOnlinePlayback?T(s,ag(r),5):T(s,r.remove(),5);if(s.g!=2)return fe(s,0);ue(s),G(s)})})),0)})}function lg(e){return(e.video?e.video.drmInfos:[]).concat(e.audio?e.audio.drmInfos:[])}function eS(e){e.i.forEach(function(t,n){var i=t.Zg,r=n.expiration;isNaN(r)&&(r=1/0),r!=i&&(e.F.onExpirationUpdated(n.sessionId,r),t.Zg=r)})}function os(e){return e=e.i.values(),Fx(e,function(t){return t.loaded})}function tS(e){for(var t=m(e.g&&e.g.keyIds||new Set([])),n=t.next();!n.done;n=t.next())if(e.ha.get(n.value)!=="usable")return!1;return!0}function nS(e,t){var n=[];for(t.forEach(function(i,r){n.push({keySystem:r,licenseServerUri:i,distinctiveIdentifierRequired:!1,persistentStateRequired:!1,audioRobustness:"",videoRobustness:"",serverCertificate:null,serverCertificateUri:"",initData:[],keyIds:new Set})}),e=m(e),t=e.next();!t.done;t=e.next())t=t.value,t.video&&(t.video.drmInfos=n),t.audio&&(t.audio.drmInfos=n)}function iS(e,t,n,i,r,o,s,u){var a=[];e=m(e);for(var l=e.next(),c={};!l.done;c={La:void 0},l=e.next()){if(c.La=l.value,t.includes(c.La.encryptionScheme)||t.push(c.La.encryptionScheme),c.La.keySystem=="org.w3.clearkey"&&c.La.licenseServerUri.startsWith("data:application/json;base64,")?a.includes(c.La.licenseServerUri)||a.push(c.La.licenseServerUri):n.includes(c.La.licenseServerUri)||n.push(c.La.licenseServerUri),r.includes(c.La.serverCertificateUri)||r.push(c.La.serverCertificateUri),c.La.serverCertificate&&(i.some(function(h){return function(g){return ii(g,h.La.serverCertificate)}}(c))||i.push(c.La.serverCertificate)),c.La.initData){l=m(c.La.initData);for(var f=l.next(),p={};!f.done;p={Pg:void 0},f=l.next())p.Pg=f.value,o.some(function(h){return function(g){var v=h.Pg;return g.keyId&&g.keyId==v.keyId?!0:g.initDataType==v.initDataType&&ii(g.initData,v.initData)}}(p))||o.push(p.Pg)}if(c.La.keyIds)for(l=m(c.La.keyIds),f=l.next();!f.done;f=l.next())s.add(f.value);if(c.La.keySystemUris&&u)for(c=m(c.La.keySystemUris),l=c.next();!l.done;l=c.next())u.add(l.value)}if(a.length==1)n.push(a[0]);else if(a.length>0){for(t=[],a=m(a),i=a.next();!i.done;i=a.next())i=B.atob(i.value.split("data:application/json;base64,").pop()),i=JSON.parse(i),t.push.apply(t,H(i.keys));a=JSON.stringify({keys:t}),n.push("data:application/json;base64,"+B.btoa(a))}}function rS(e,t,n,i){var r=e.keySystem;r&&(r!="org.w3.clearkey"||!e.licenseServerUri)&&(t.size&&t.get(r)&&(t=t.get(r),e.licenseServerUri=t),e.keyIds||(e.keyIds=new Set),(n=n.get(r))&&(e.distinctiveIdentifierRequired||(e.distinctiveIdentifierRequired=n.distinctiveIdentifierRequired),e.persistentStateRequired||(e.persistentStateRequired=n.persistentStateRequired),e.serverCertificate||(e.serverCertificate=n.serverCertificate),n.sessionType&&(e.sessionType=n.sessionType),e.serverCertificateUri||(e.serverCertificateUri=n.serverCertificateUri)),i[r]&&(e.keySystem=i[r]),B.cast&&B.cast.__platform__&&r=="com.microsoft.playready"&&(e.keySystem="com.chromecast.playready"))}function cg(e,t){if(e=Jr(e),e.size!=0){e=Qp(e),t=m(t);for(var n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.drmInfos=[e]),n.audio&&(n.audio.drmInfos=[e])}}var oS=1,sS=5,uS=.5;function aS(){this.g=xr,this.j=new Map().set(xr,2).set(Tr,1),this.i=0,this.h=-1}function Nc(e,t){var n=e.g!==t;return e.g=t,n&&t===xr&&(e.i=Date.now()),n}var Tr=0,xr=1;/*
 @license
 Shaka Player
 Copyright 2023 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function jc(e,t,n){this.h=e,this.i=t,this.g=n}function fg(e,t){return k(function(n){if(n.g==1)return T(n,Ix(e.g,t,e.h.drm.preferredKeySystems,e.h.drm.keySystemsMapping),2);if(e.h.streaming.dontChooseCodecs||kh(t,e.h.preferredVideoCodecs,e.h.preferredAudioCodecs,e.h.preferredDecodingAttributes,e.h.preferredTextFormats),!t.variants.some(ns))throw new D(2,4,4032);return n.return(pg(e,t))})}function dg(e,t){var n=e.h.restrictions;e=e.i;var i=!1;t=m(t.variants);for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=r.allowedByApplication;r.allowedByApplication=Ou(r,n,e),o!=r.allowedByApplication&&(i=!0)}return i}function pg(e,t){var n=dg(e,t);if(t){var i=e.g?e.g.g:null;if(i&&e.g.B){for(var r=new Set,o=m(t.variants),s=o.next();!s.done;s=o.next())s=s.value,s.audio&&r.add(s.audio),s.video&&r.add(s.video);for(r=m(r),o=r.next();!o.done;o=r.next())hg(e,i.keySystem,o.value)}gg(e,t)}return n}function hg(e,t,n){n=m(n.drmInfos);for(var i=n.next();!i.done;i=n.next())if(i=i.value,i.keySystem==t){for(var r=m(i.initData||[]),o=r.next();!o.done;o=r.next())o=o.value,is(e.g,o.initDataType,o.initData);r=e.g,r.g&&r.g.mediaTypes!==i.mediaTypes&&(r.g.mediaTypes=i.mediaTypes)}}function gg(e,t){function n(l){if(l&&!u.has(l)&&(u.add(l),l.keyIds.size)){l=m(l.keyIds);for(var c=l.next();!c.done;c=l.next()){c=c.value;var f=i[r?"00":c];f?mg.includes(f)&&s.add(f):o.add(c)}}}var i=e.g?e.g.$e():{};e=Object.keys(i);var r=e.length&&e[0]=="00";e=!1;var o=new Set,s=new Set,u=new WeakSet;t=m(t.variants);for(var a=t.next();!a.done;a=t.next()){if(a=a.value,!a.allowedByApplication)e=!0;else if(a.allowedByKeySystem)return;n(a.audio),n(a.video)}throw e={hasAppRestrictions:e,missingKeys:Array.from(o),restrictedKeyStatuses:Array.from(s)},new D(2,4,4012,e)}var mg=["output-restricted","internal-error"];K("shaka.config.CodecSwitchingStrategy",{RELOAD:"reload",SMOOTH:"smooth"});function jt(e){return lS.getOrInsertComputed(e,function(){var t,n;return(n=(t=B.ManagedMediaSource||B.MediaSource)==null?void 0:t.isTypeSupported(e))!=null?n:!1})}function vg(){var e=B.ManagedMediaSource||B.MediaSource;return e&&e.prototype?!!e.prototype.setLiveSeekableRange&&!!e.prototype.clearLiveSeekableRange:!1}var lS=new Map;function Yu(e,t){var n=null,i=null,r=null,o=null,s=e.U();return t&1&&(r=e.Fd()),t&2&&(o=e.U()),t&8&&(n=e.U()),t&16&&(i=e.U()),{trackId:s,Xd:n,Yd:i,sj:r,Si:o}}function qu(e,t){return t==1?(t=e.U(),e=e.U(),{baseMediaDecodeTime:t*4294967296+e}):{baseMediaDecodeTime:e.U()}}function Ju(e,t){return t==1?(e.skip(8),e.skip(8)):(e.skip(4),e.skip(4)),t=e.U(),e.skip(4),e=e.Ca(),{timescale:t,language:String.fromCharCode((e>>10)+96)+String.fromCharCode(((e&960)>>5)+96)+String.fromCharCode((e&31)+96)}}function $u(e,t,n){var i=e.U(),r=[],o=null;n&1&&(o=e.eh()),n&4&&e.skip(4);for(var s=0;s<i;s++){var u={oh:null,sampleSize:null,Gf:null};n&256&&(u.oh=e.U()),n&512&&(u.sampleSize=e.U()),n&1024&&e.skip(4),n&2048&&(u.Gf=t==0?e.U():e.eh()),r.push(u)}return{Im:i,nh:r,qg:o}}function yg(e){e.skip(6),e.skip(2),e.skip(8);var t=e.Ca();return e.skip(2),e.skip(2),e.skip(2),e=e.Ca()+e.Ca()/65536,{channelCount:t,sampleRate:e}}function Oc(e){return e=e.U(),{codec:Wu(e)}}function cS(e){var t=null,n=null,i=e.Tb(4,!1),r=String.fromCharCode(i[0]);if(r+=String.fromCharCode(i[1]),r+=String.fromCharCode(i[2]),r+=String.fromCharCode(i[3]),r==="nclx"){switch(e.Ca()){case 1:case 5:case 6:case 7:t="srgb";break;case 9:t="rec2020";break;case 11:case 12:t="p3"}switch(i=e.Ca(),e.Ca(),i){case 1:case 6:case 13:case 14:case 15:n="SDR";break;case 16:n="PQ";break;case 18:n="HLG"}}return{colorGamut:t,ze:n}}function ss(e,t){return t=t===void 0?!1:t,e=e.toString(16).toUpperCase(),t?e:("0"+e).slice(-2)}function Qt(e){return(e<10?"0":"")+e}function Qr(e){this.g=e=e===void 0?[]:e}function Zr(e){if(e.g.length===0)throw Error("StreamInfos must have elements");for(var t=[],n=m(e.g),i=n.next();!i.done;i=n.next()){var r=t,o=r.push,s=i.value;i=ye;var u=s.id+1,a=s.stream.width||0,l=s.stream.height||0;s.type=="audio"&&(l=a=0);var c=s.duration*s.timescale,f=Math.floor(c/(Hi+1));switch(c=Math.floor(c%(Hi+1)),u=new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(H(ze(u,4)),[0,0,0,0],H(ze(f,4)),H(ze(c,4)),[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0],H(ze(a,2)),[0,0],H(ze(l,2)),[0,0])),u=ye("tkhd",u),a=ye,f=s.duration*s.timescale,l=Math.floor(f/(Hi+1)),f=Math.floor(f%(Hi+1)),c=s.stream.language,c=c.charCodeAt(0)-96<<10|c.charCodeAt(1)-96<<5|c.charCodeAt(2)-96,l=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(H(ze(s.timescale,4)),H(ze(l,4)),H(ze(f,4)),H(ze(c,2)),[0,0])),l=ye("mdhd",l),f=s,c=new Uint8Array([]),f.type){case"video":c=dS.value();break;case"audio":c=pS.value()}f=ye("hdlr",c);e:{switch(s.type){case"video":s=ye("minf",ye("vmhd",yS.value()),Eg.value(),Tg(s));break e;case"audio":s=ye("minf",ye("smhd",TS.value()),Eg.value(),Tg(s));break e}s=new Uint8Array([])}s=a("mdia",l,f,s),i=i("trak",u,s),o.call(r,i)}for(t=it.apply(Et,H(t)),o=e.g[0],n=ye,i=o.duration*o.timescale,r=Math.floor(i/(Hi+1)),i=Math.floor(i%(Hi+1)),r=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3].concat(H(ze(o.timescale,4)),H(ze(r,4)),H(ze(i,4)),[0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255])),r=ye("mvhd",r),i=[],e=m(e.g),a=e.next();!a.done;a=e.next())s=i,u=s.push,a=new Uint8Array([0,0,0,0].concat(H(ze(a.value.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=ye("trex",a),u.call(s,a);if(e=it.apply(Et,H(i)),e=ye("mvex",e),i=[],wr(o.stream)){for(o=m(o.stream.drmInfos),s=o.next();!s.done;s=o.next())if(s=s.value,s.initData)for(s=m(s.initData),u=s.next();!u.done;u=s.next())i.push(u.value.initData);o=it.apply(Et,H(i))}else o=new Uint8Array([]);return e=n("moov",r,t,e,o),t=SS.value(),n=new Uint8Array(t.byteLength+e.byteLength),n.set(t),n.set(e,t.byteLength),n}function Tg(e){var t=ye,n="aac";e.codecs.includes("mp3")?n="mp3":e.codecs.includes("ac-3")?n=pe().se()?"ec-3":"ac-3":e.codecs.includes("ec-3")?n="ec-3":e.codecs.includes("opus")&&(n="opus");var i=new Uint8Array([]);switch(e.type){case"video":if(e.codecs.includes("avc1")){if(n=e.stream.width||0,i=e.stream.height||0,e.Sa.byteLength>0)var r=ye("avcC",e.Sa);else{r=ye;for(var o=7,s=[],u=[],a=0,l=0,c=0,f=0;f<e.Bb.length;f++){var p=Sg(e.Bb[f]);switch(p[0]&31){case 7:s.push(p),o+=p.length+2;break;case 8:u.push(p),o+=p.length+2}}for(s.length>0&&(a=s[0][1],c=s[0][2],l=s[0][3]),o=new Uint8Array(o),f=0,o[f++]=1,o[f++]=a,o[f++]=c,o[f++]=l,o[f++]=255,o[f++]=224|s.length,a=0;a<s.length;a++)o[f++]=(s[a].length&65280)>>8,o[f++]=s[a].length&255,o.set(s[a],f),f+=s[a].length;for(o[f++]=u.length,s=0;s<u.length;s++)o[f++]=(u[s].length&65280)>>8,o[f++]=u[s].length&255,o.set(u[s],f),f+=u[s].length;r=r("avcC",o)}n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(H(ze(n,2)),H(ze(i,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),i="avc1",u=xg(e),s=new Uint8Array([]),wr(e.stream)&&(s=Sr(e.stream,e.codecs),i="encv"),i=ye(i,n,r,u,s)}else e.codecs.includes("hvc1")&&(i=e.stream.width||0,r=e.stream.height||0,n=new Uint8Array([]),e.Sa.byteLength>0&&(n=ye("hvcC",e.Sa)),i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].concat(H(ze(i,2)),H(ze(r,2)),[0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17])),r="hvc1",u=xg(e),s=new Uint8Array([]),wr(e.stream)&&(s=Sr(e.stream,e.codecs),r="encv"),i=ye(r,i,n,u,s));break;case"audio":n=="mp3"?e=ye(".mp3",us(e)):n=="ac-3"?(n=ye("dac3",e.Fa),i="ac-3",r=new Uint8Array([]),wr(e.stream)&&(r=Sr(e.stream,e.codecs),i="enca"),e=ye(i,us(e),n,r)):n=="ec-3"?(n=ye("dec3",e.Fa),i="ec-3",r=new Uint8Array([]),wr(e.stream)&&(r=Sr(e.stream,e.codecs),i="enca"),e=ye(i,us(e),n,r)):n=="opus"?(n=ye("dOps",e.Fa),i="Opus",r=new Uint8Array([]),wr(e.stream)&&(r=Sr(e.stream,e.codecs),i="enca"),e=ye(i,us(e),n,r)):(e.Fa.byteLength>0?n=ye("esds",e.Fa):(n=ye,i=e.id+1,r=e.stream.channelsCount||2,s=e.stream.audioSamplingRate||44100,a=_r("audio",e.codecs.split(",")),l={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12},u=l[s],(a==="mp4a.40.5"||a==="mp4a.40.29")&&(u=l[s*2]),s=parseInt(a.split(".").pop(),10),i=new Uint8Array([0,0,0,0,3,25].concat(H(ze(i,2)),[0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,s<<3|u>>>1,u<<7|r<<3,6,1,2])),n=n("esds",i)),i="mp4a",r=new Uint8Array([]),wr(e.stream)&&(r=Sr(e.stream,e.codecs),i="enca"),e=ye(i,us(e),n,r)),i=e}return e=ye("stsd",xS.value(),i),t("stbl",e,ye("stts",hS.value()),ye("stsc",gS.value()),ye("stsz",vS.value()),ye("stco",mS.value()))}function xg(e){if(!e.Za&&!e.$a)return new Uint8Array([]);var t=e.$a;return e=new Uint8Array([].concat(H(ze(e.Za,4)),H(ze(t,4)))),ye("pasp",e)}function us(e){return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.stream.channelsCount||2,0,16,0,0,0,0].concat(H(ze(e.stream.audioSamplingRate||44100,2)),[0,0]))}function Sr(e,t){var n=ye;t=new Uint8Array([].concat(H(ze(wg(t.split(".")[0]),4)))),t=ye("frma",t);var i="cenc",r=e.drmInfos[0];r&&r.encryptionScheme&&(i=r.encryptionScheme),i=new Uint8Array([0,0,0,0].concat(H(ze(wg(i),4)),[0,1,0,0])),i=ye("schm",i),r=ye;var o=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]);e=m(e.drmInfos);for(var s=e.next();!s.done;s=e.next())if((s=s.value)&&s.keyIds&&s.keyIds.size){s=m(s.keyIds);for(var u=s.next();!u.done;u=s.next())o=Sg(u.value)}return e=new Uint8Array([0,0,0,0,0,0,1,8]),o=ye("tenc",e,o),n("sinf",t,i,r("schi",o))}function as(e){var t=[];e=m(e.g);for(var n=e.next();!n.done;n=e.next()){n=n.value;var i=t.push,r=i.apply,o=ye,s=new Uint8Array([0,0,0,0].concat(H(ze(n.data?n.data.sequenceNumber:0,4))));s=ye("mfhd",s);var u,a=n.data?n.data.zb:[],l=new Uint8Array(4+a.length);for(u=0;u<a.length;u++){var c=a[u].flags;l[u+4]=c.hb<<4|c.kb<<2|c.jb}a=ye("sdtp",l);var f=a.length+32+20+8+16+8+8;l=ye,u=new Uint8Array([0,0,0,58].concat(H(ze(n.id+1,4)),[0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),u=ye("tfhd",u),c=n.data?n.data.baseMediaDecodeTime:0;var p=Math.floor(c%(Hi+1));c=new Uint8Array([1,0,0,0].concat(H(ze(Math.floor(c/(Hi+1)),4)),H(ze(p,4)))),c=ye("tfdt",c);var h=f;f=n.data?n.data.zb:[],p=f.length;var g=12+16*p,v=new Uint8Array(g);for(h+=8+g,v.set([n.type==="video"?1:0,0,15,1].concat(H(ze(p,4)),H(ze(h,4))),0),h=0;h<p;h++){var y=f[h];g=ze(y.duration,4);var S=ze(y.size,4),x=y.flags;y=ze(y.qb,4),v.set([].concat(H(g),H(S),[x.wb<<2|x.hb,x.kb<<6|x.jb<<4|x.xb,x.gb&61440,x.gb&15],H(y)),12+16*h)}f=ye("trun",v),a=l("traf",u,c,f,a),o=o("moof",s,a),r.call(i,t,[o,fS(n)])}return it.apply(Et,H(t))}function fS(e){return e=(e.data?e.data.zb:[]).map(function(t){return t.data}),e=it.apply(Et,H(e)),ye("mdat",e)}function ze(e,t){var n=[];for(--t;t>=0;t--)n.push(e>>8*t&255);return n}function Sg(e){for(var t=new Uint8Array(e.length/2),n=0;n<e.length/2;n+=1)t[n]=parseInt(String(e[n*2]+e[n*2+1]),16);return t}function wg(e){for(var t=0,n=0;n<e.length;n+=1)t|=e.charCodeAt(n)<<(e.length-n-1)*8;return t}function ye(e){var t=dt.apply(1,arguments),n=Ag.get(e);n||(n=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)],Ag.set(e,n));for(var i=8,r=t.length-1;r>=0;r--)i+=t[r].byteLength;for(r=new Uint8Array(i),r[0]=i>>24&255,r[1]=i>>16&255,r[2]=i>>8&255,r[3]=i&255,r.set(n,4),n=0,i=8;n<t.length;n++)r.set(t[n],i),i+=t[n].byteLength;return r}function wr(e){return e.encrypted&&e.drmInfos.length>0}var Hi=4294967295,Ag=new Map,dS=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0])}),pS=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0])}),hS=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),gS=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),mS=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),vS=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0])}),yS=new We(function(){return new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}),TS=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,0])}),xS=new We(function(){return new Uint8Array([0,0,0,0,0,0,0,1])}),SS=new We(function(){var e=new Uint8Array([105,115,111,109]),t=new Uint8Array([97,118,99,49]),n=new Uint8Array([0,0,0,1]);return ye("ftyp",e,n,e,t)}),Eg=new We(function(){var e=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);return e=ye("dref",e),ye("dinf",e)});function wS(e){e=re(e);var t=null;return new Ne().box("moov",ce).box("trak",ce).box("mdia",ce).box("minf",ce).box("stbl",ce).S("stsd",gi).box("enca",function(n){return t=n.reader.h,Ku(n)}).box("sinf",ce).box("frma",function(n){n.parser.stop(),Oc(n.reader).codec==="ec-3"&&t&&t.getUint16(16)!==2&&t.setUint16(16,2)}).parse(e),e}function AS(e,t,n){function i(h){f.push({box:h,Fi:1701733217})}function r(h){f.push({box:h,Fi:1701733238})}function o(h){a=!0,h.parser.stop()}function s(h){c.push(h),ce(h)}var u=t=re(t),a=!1,l,c=[],f=[];if(new Ne().box("moov",s).box("trak",s).box("mdia",s).box("minf",s).box("stbl",s).S("stsd",function(h){l=h,c.push(h),gi(h)}).S("encv",o).S("enca",o).S("dvav",r).S("dva1",r).S("dvh1",r).S("dvhe",r).S("dvc1",r).S("dvi1",r).S("hev1",r).S("hvc1",r).S("avc1",r).S("avc3",r).S("ac-3",i).S("ec-3",i).S("ac-4",i).S("Opus",i).S("fLaC",i).S("mp4a",i).parse(t),a)return t;if(f.length==0||!l)throw oi(t),new D(2,3,3019,n);f.reverse(),n=m(f);for(var p=n.next();!p.done;p=n.next())p=p.value,u=CS(e,u,l,p.box,c,p.Fi);return pe().jh()?(e=new Uint8Array(t.byteLength+u.byteLength),e.set(u),e.set(t,u.byteLength),e):u}function ES(e){e=re(e);var t=[];new Ne().box("mdat",function(s){t.push(s)}).parse(e);for(var n=[],i=0;i<t.length;i++){var r=t[i-1],o=t[i];n.push(IS(e.subarray(r?r.start+r.size:0,o.start+o.size)))}return it.apply(Et,H(n))}function IS(e){function t(f){s.push(f),ce(f)}var n,i,r,o,s=[];if(new Ne().box("moof",t).box("traf",t).S("tfhd",function(f){n=f,r=Yu(f.reader,f.flags)}).S("trun",function(f){i=f,o=$u(f.reader,f.version,f.flags)}).parse(e),r&&r.Si!==2){var u=n.start+Vi(n)+4+(r.sj!==null?8:0),a=Ht(e);if(r.Si!==null)a.setUint32(u,2);else{Qu(e,n.start,n.size+4);var l=a.getUint32(n.start+8);a.setUint32(n.start+8,l|2),o&&o.qg!==null&&a.setInt32(i.start+Vi(i)+4,o.qg+4),l=e.subarray(0,u),a=e.subarray(u),e=new Uint8Array(e.byteLength+4),e.set(l),l=[];for(var c=3;c>=0;c--)l.push(2>>8*c&255);for(e.set(new Uint8Array(l),u),e.set(a,u+4),u=m(s),a=u.next();!a.done;a=u.next())a=a.value,Qu(e,a.start,a.size+4)}}return e}function CS(e,t,n,i,r,o){var s=Sr(e,i.name),u=t.subarray(i.start,i.start+i.size);for(e=new Uint8Array(i.size+s.byteLength),e.set(u,0),Ht(e).setUint32(4,o),e.set(s,i.size),Qu(e,0,e.byteLength),o=new Uint8Array(t.byteLength+e.byteLength),i=pe().jf()?i.start:i.start+i.size,s=t.subarray(i),o.set(t.subarray(0,i)),o.set(e,i),o.set(s,i+e.byteLength),t=m(r),r=t.next();!r.done;r=t.next())r=r.value,Qu(o,r.start,r.size+e.byteLength);return e=Ht(o,n.start),n=Vi(n),t=e.getUint32(n),e.setUint32(n,t+1),o}function Qu(e,t,n){e=Ht(e,t),t=e.getUint32(0),t!=0&&(t==1?(e.setUint32(8,n>>32),e.setUint32(12,n&4294967295)):e.setUint32(0,n))}function MS(e){function t(r){i.push({start:r.start,size:r.size}),ce(r)}var n=re(e),i=[];return new Ne().box("moov",t).box("trak",t).box("mdia",t).box("minf",t).box("stbl",t).box("stsd",function(r){i.push({start:r.start,size:r.size});for(var o=Ht(n,r.start),s=0;s<r.size-3;s++){var u=o.getUint32(s);u==1633889587?o.setUint32(s,1700998451):u==1684103987&&o.setUint32(s,1684366131)}}).parse(n),n}function Wt(e,t,n,i,r,o,s,u){this.P=e,this.startByte=t,this.endByte=n,this.yd=i===void 0?null:i,this.timescale=r===void 0?null:r,this.h=o===void 0?null:o,this.aesKey=s===void 0?null:s,this.g=this.mimeType=this.codecs=null,this.encrypted=u===void 0?!1:u}Wt.prototype.Kc=function(){return this.startByte},Wt.prototype.Ic=function(){return this.endByte},Wt.prototype.ue=function(e){this.h=e},Wt.prototype.ac=function(){return this.h};function ls(e,t){return e===t?!0:e&&t?e.Kc()==t.Kc()&&e.Ic()==t.Ic()&&Pi(e.P().sort(),t.P().sort())&&ii(e.ac(),t.ac()):e==t}K("shaka.media.InitSegmentReference",Wt),Wt.prototype.getEndByte=Wt.prototype.Ic,Wt.prototype.getStartByte=Wt.prototype.Kc;function Q(e,t,n,i,r,o,s,u,a,l,c,f,p,h,g,v){for(l=l===void 0?[]:l,h=h===void 0?mi:h,this.startTime=e,this.j=this.endTime=t,this.C=n,this.startByte=i,this.endByte=r,this.ba=o,this.timestampOffset=s,this.appendWindowStart=u,this.appendWindowEnd=a,this.g=l,this.tilesLayout=c===void 0?"":c,this.B=f===void 0?null:f,this.h=p===void 0?null:p,this.status=h,this.preload=!1,this.l=!0,this.o=!1,this.aesKey=g===void 0?null:g,this.thumbnailSprite=null,this.i=-1,this.m=v===void 0?!1:v,this.je=this.Xc=!1,e=m(this.g),t=e.next();!t.done;t=e.next())t.value.Bi();this.m&&this.g.length&&this.g[this.g.length-1].Ai(),this.u=this.bandwidth=this.mimeType=this.codecs=null,this.F=!1}d=Q.prototype,d.P=function(){return this.C()},d.getStartTime=function(){return this.startTime},d.Lj=function(){return this.endTime},d.Kc=function(){return this.startByte},d.Ic=function(){return this.endByte};function Uc(e){if(e.endByte)return e.endByte+1-e.startByte;if(e.bandwidth){var t=e.bandwidth*(e.endTime-e.startTime);if(!isNaN(t)&&t>0)return t}if(e.g.length>0&&e.m)for(e=m(e.g),e=e.next();!e.done;e=e.next()){Uc(e.value);break}return null}d.fk=function(){return this.tilesLayout},d.ek=function(){return this.B},d.bc=function(){return this.status},d.Bk=function(){this.status=Cg},d.Vg=function(){this.preload=!0},d.isPreload=function(){return this.preload},d.xd=function(){this.l=!1},d.rk=function(){return this.l},d.Bi=function(){this.Xc=!0},d.vk=function(){return this.Xc},d.Ai=function(){this.je=!0},d.tk=function(){return this.je},d.zi=function(){this.o=!0},d.lk=function(){return this.o},d.Mf=function(e){this.thumbnailSprite=e},d.ck=function(){return this.thumbnailSprite},d.offset=function(e){this.startTime+=e,this.endTime+=e,this.j+=e;for(var t=m(this.g),n=t.next();!n.done;n=t.next())n=n.value,n.startTime+=e,n.endTime+=e,n.j+=e},d.Eh=function(e){this.h==null?Xn("Sync attempted without sync time!"):(e=this.h-e-this.startTime,Math.abs(e)>=.001&&this.offset(e))},d.ue=function(e,t){this.u=e,this.F=t===void 0?!1:t},d.ac=function(e){var t=this.u;return(e===void 0||e)&&this.F&&(this.u=null),t};function Ig(e,t){e.ba=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())Ig(n.value,t)}K("shaka.media.SegmentReference",Q),Q.prototype.getSegmentData=Q.prototype.ac,Q.prototype.setSegmentData=Q.prototype.ue,Q.prototype.syncAgainst=Q.prototype.Eh,Q.prototype.offset=Q.prototype.offset,Q.prototype.getThumbnailSprite=Q.prototype.ck,Q.prototype.setThumbnailSprite=Q.prototype.Mf,Q.prototype.hasByterangeOptimization=Q.prototype.lk,Q.prototype.markAsByterangeOptimization=Q.prototype.zi,Q.prototype.isLastPartial=Q.prototype.tk,Q.prototype.markAsLastPartial=Q.prototype.Ai,Q.prototype.isPartial=Q.prototype.vk,Q.prototype.markAsPartial=Q.prototype.Bi,Q.prototype.isIndependent=Q.prototype.rk,Q.prototype.markAsNonIndependent=Q.prototype.xd,Q.prototype.isPreload=Q.prototype.isPreload,Q.prototype.markAsPreload=Q.prototype.Vg,Q.prototype.markAsUnavailable=Q.prototype.Bk,Q.prototype.getStatus=Q.prototype.bc,Q.prototype.getTileDuration=Q.prototype.ek,Q.prototype.getTilesLayout=Q.prototype.fk,Q.prototype.getEndByte=Q.prototype.Ic,Q.prototype.getStartByte=Q.prototype.Kc,Q.prototype.getEndTime=Q.prototype.Lj,Q.prototype.getStartTime=Q.prototype.getStartTime,Q.prototype.getUris=Q.prototype.P;var mi=0,Cg=1;Q.Status={wl:mi,Bm:Cg,Xl:2};function cs(e){return e.length==1&&e.end(0)-e.start(0)<1e-4}function Mg(e){return!e||cs(e)?null:e.length==1&&e.start(0)<0?0:e.length?e.start(0):null}function Zu(e){return!e||cs(e)?null:e.length?e.end(e.length-1):null}function _c(e,t){return!e||!e.length||cs(e)||t>e.end(e.length-1)?!1:t>=e.start(0)}function kg(e,t){if(!e||!e.length||cs(e))return 0;var n=0;e=m(vi(e));for(var i=e.next();!i.done;i=e.next()){var r=i.value;i=r.start,r=r.end,r>t&&(n+=r-Math.max(i,t))}return n}function kS(e,t,n){return!e||!e.length||cs(e)?null:(e=vi(e).findIndex(function(i,r,o){return i.start>t&&(r==0||o[r-1].end-t<=n)}),e>=0?e:null)}function vi(e){if(!e)return[];for(var t=[],n=0;n<e.length;n++)t.push({start:e.start(n),end:e.end(n)});return t}function Bc(){}function Dg(e,t){var n=document.createElement("source");return n.src=e,n.type=t===void 0?"":t,n}function ea(e){for(var t=!1,n=e.getElementsByTagName("source"),i=n.length-1;i>=0;--i)e.removeChild(n[i]),t=!0;return e.src&&(e.removeAttribute("src"),t=!0),t}function fs(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Ar(){return eo||(bc||(bc=new ge(function(){eo=null})),(eo=document.getElementsByTagName("video")[0]||document.getElementsByTagName("audio")[0])||(eo=document.createElement("video")),bc.ka(1),eo)}function DS(e,t){var n,i,r,o,s;return k(function(u){if(u.g==1)return"fonts"in document&&"FontFace"in B?T(u,document.fonts.ready,2):u.return();if(!("entries"in document.fonts))return u.return();for(n=function(a){a=a.entries();for(var l=[],c=a.next();c.done===!1;)l.push(c.value),c=a.next();return l},i=m(n(document.fonts)),r=i.next();!r.done;r=i.next())if(o=r.value,o.family===e&&o.display==="swap")return u.return();s=new FontFace(e,"url("+t+")",{display:"swap"}),document.fonts.add(s),G(u)})}K("shaka.util.Dom",Bc),Bc.removeAllChildren=fs,Bc.clearSourceFromVideo=ea;var bc=null,eo=null;/*
 @license
 Shaka Player
 Copyright 2022 Google LLC
 SPDX-License-Identifier: Apache-2.0
*/function Fc(){}function Rg(e,t){return t+10<=e.length&&e[t]===73&&e[t+1]===68&&e[t+2]===51&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Lg(e,t){return t+10<=e.length&&e[t]===51&&e[t+1]===68&&e[t+2]===73&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128}function Vc(e,t){var n=(e[t]&127)<<21;return n|=(e[t+1]&127)<<14,n|=(e[t+2]&127)<<7,n|=e[t+3]&127}function RS(e){var t={key:e.type,description:"",data:"",mimeType:null,pictureType:null};if(e.type==="APIC"){if(e.size<2||e.data[0]!==3)return null;var n=e.data.subarray(1).indexOf(0);if(n===-1)return null;var i=Xe(re(e.data,1,n)),r=e.data[2+n],o=e.data.subarray(3+n).indexOf(0);if(o===-1)return null;var s=Xe(re(e.data,3+n,o)),u;return i==="-->"?u=Xe(re(e.data,4+n+o)):u=gn(e.data.subarray(4+n+o)),t.mimeType=i,t.pictureType=r,t.description=s,t.data=u,t}return e.type==="TXXX"?e.size<2||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=Xe(re(e.data,1,i)),e=Xe(re(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="WXXX"?e.size<2||e.data[0]!==3||(i=e.data.subarray(1).indexOf(0),i===-1)?null:(n=Xe(re(e.data,1,i)),e=Xe(re(e.data,2+i)).replace(/\0*$/,""),t.description=n,t.data=e,t):e.type==="PRIV"?e.size<2||(n=e.data.indexOf(0),n===-1)?null:(n=Xe(re(e.data,0,n)),t.description=n,n=="com.apple.streaming.transportStreamTimestamp"?(n=e.data.subarray(n.length+1),e=n[3]&1,n=(n[4]<<23)+(n[5]<<15)+(n[6]<<7)+n[7],n/=45,e&&(n+=4772185884e-2),t.data=n):(e=gn(e.data.subarray(n.length+1)),t.data=e),t):e.type[0]==="T"?e.size<2||e.data[0]!==3?null:(e=Xe(e.data.subarray(1)).replace(/\0*$/,""),t.data=e,t):e.type[0]==="W"?(e=Xe(e.data).replace(/\0*$/,""),t.data=e,t):e.data?(t.data=gn(e.data),t):null}function Er(e){for(var t=0,n=[];Rg(e,t);){var i=Vc(e,t+6);for(e[t+5]>>6&1&&(t+=10),t+=10,i=t+i;t+10<i;){var r=e.subarray(t),o=Vc(r,4);r={type:String.fromCharCode(r[0],r[1],r[2],r[3]),size:o,data:r.subarray(10,10+o)},(o=RS(r))&&n.push(o),t+=r.size+10}Lg(e,t)&&(t+=10)}return n}function to(e,t){for(var n=t=t===void 0?0:t,i=0;Rg(e,t);)e[t+5]>>6&1&&(i+=10),i+=10,i+=Vc(e,t+6),Lg(e,t+10)&&(i+=10),t+=i;return i>0?e.subarray(n,n+i):new Uint8Array([])}K("shaka.util.Id3Utils",Fc),Fc.getID3Data=to,Fc.getID3Frames=Er;function Pg(e){return new Date(Date.UTC(1900,0,1,0,0,0,0)+e).getTime()}function yi(e,t){if(this.j=e,t!==void 0&&t){t=new Uint8Array(e.byteLength);for(var n=0,i=0;i<e.byteLength;i++)i>=2&&e[i]==3&&e[i-1]==0&&e[i-2]==0||(t[n]=e[i],n++);this.j=re(t,0,n)}this.i=this.j.byteLength,this.g=this.h=0}function Hc(e){var t=e.j.byteLength-e.i,n=new Uint8Array(4),i=Math.min(4,e.i);i!==0&&(n.set(e.j.subarray(t,t+i)),e.h=new Fe(n,0).U(),e.g=i*8,e.i-=i)}function Zt(e,t){if(e.g<=t){t-=e.g;var n=Math.floor(t/8);t-=n*8,e.g-=n,Hc(e)}e.h<<=t,e.g-=t}function me(e,t){var n=Math.min(e.g,t),i=e.h>>>32-n;return e.g-=n,e.g>0?e.h<<=n:e.i>0&&Hc(e),n=t-n,n>0?i<<n|me(e,n):i}function Gc(e){var t;for(t=0;t<e.g;++t)if(e.h&2147483648>>>t)return e.h<<=t,e.g-=t,t;return Hc(e),t+Gc(e)}function xt(e){Zt(e,1+Gc(e))}function X(e){var t=Gc(e);return me(e,t+1)-1}function no(e){return e=X(e),1&e?1+e>>>1:-1*(e>>>1)}function J(e){return me(e,1)===1}function Me(e){return me(e,8)}function ta(e,t){for(var n=8,i=8,r=0;r<t;r++)i!==0&&(i=no(e),i=(n+i+256)%256),n=i===0?n:i}function LS(e){return Me(e),X(e),X(e)}K("shaka.util.ExpGolomb",yi);function Be(){this.I=null,this.J=!1,this.m=this.K=null,this.j=[],this.g=[],this.C=this.F=null,this.i=[],this.h=[],this.G=null,this.l=[],this.B=this.H=this.o=this.u=null}d=Be.prototype,d.clearData=function(){this.j=[],this.g=[],this.i=[],this.h=[],this.l=[]},d.Kf=function(e){this.B!=null&&this.B!=e&&(this.o=this.u=null),this.B=e},d.parse=function(e){if(e.length<564)return this;for(var t=Math.max(0,Wc(e)),n=e.length-(e.length+t)%188,i=!1,r=t;r<n;r+=188)if(e[r]==71){var o=!!(e[r+1]&64),s=((e[r+1]&31)<<8)+e[r+2];if((e[r+3]&48)>>4>1){var u=r+5+e[r+4];if(u==r+188)continue}else u=r+4;switch(s){case 0:o&&(u+=e[u]+1),this.I=(e[u+10]&31)<<8|e[u+11];break;case 17:case 8191:break;case this.I:o&&(u+=e[u]+1),o=e,s={audio:-1,video:-1,gf:-1,audioCodec:"",videoCodec:""};var a=u+3+((o[u+1]&15)<<8|o[u+2])-4;for(u+=12+((o[u+10]&15)<<8|o[u+11]);u<a;){var l=(o[u+1]&31)<<8|o[u+2],c=(o[u+3]&15)<<8|o[u+4];switch(o[u]){case 6:if(c>0)for(var f=u+5,p=c;p>2;){var h=o[f+1]+2;switch(o[f]){case 5:var g=o.subarray(f+2,f+h);g=vu.value()(g),s.audio==-1&&g==="Opus"?(s.audio=l,s.audioCodec="opus"):s.video==-1&&g==="AV01"&&(s.video=l,s.videoCodec="av1");break;case 106:s.audio==-1&&(s.audio=l,s.audioCodec="ac3");break;case 122:s.audio==-1&&(s.audio=l,s.audioCodec="ec3");break;case 124:s.audio==-1&&(s.audio=l,s.audioCodec="aac");break;case 127:s.audioCodec=="opus"&&(g=null,o[f+2]===128&&(g=o[f+3]),g!=null&&(this.H={channelCount:g&15?g&15:2,vj:g,sampleRate:48e3}))}f+=h,p-=h}break;case 15:s.audio==-1&&(s.audio=l,s.audioCodec="aac");break;case 17:s.audio==-1&&(s.audio=l,s.audioCodec="aac-loas");break;case 21:s.gf==-1&&(s.gf=l);break;case 27:s.video==-1&&(s.video=l,s.videoCodec="avc");break;case 3:case 4:s.audio==-1&&(s.audio=l,s.audioCodec="mp3");break;case 36:s.video==-1&&(s.video=l,s.videoCodec="hvc");break;case 129:s.audio==-1&&(s.audio=l,s.audioCodec="ac3");break;case 132:case 135:s.audio==-1&&(s.audio=l,s.audioCodec="ec3")}u+=c+5}o=s,o.video!=-1&&(this.K=o.video,this.m=o.videoCodec),o.audio!=-1&&(this.F=o.audio,this.C=o.audioCodec),o.gf!=-1&&(this.G=o.gf),i&&!this.J&&(i=!1,r=t-188),this.J=!0;break;case this.K:u=e.subarray(u,r+188),o?this.j.push([u]):this.j.length&&this.j[this.j.length-1]&&this.j[this.j.length-1].push(u);break;case this.F:u=e.subarray(u,r+188),o?this.i.push([u]):this.i.length&&this.i[this.i.length-1]&&this.i[this.i.length-1].push(u);break;case this.G:u=e.subarray(u,r+188),o?this.l.push([u]):this.l.length&&this.l[this.l.length-1]&&this.l[this.l.length-1].push(u);break;default:i=!0}}return this};function Kc(e,t){if((t[0]<<16|t[1]<<8|t[2])!==1)return null;var n={data:new Uint8Array(0),packetLength:t[4]<<8|t[5],pts:null,dts:null,nalus:[]};if(n.packetLength&&n.packetLength>t.byteLength-6)return null;var i=t[7];if(i&192){var r=(t[9]&14)*536870912+(t[10]&255)*4194304+(t[11]&254)*16384+(t[12]&255)*128+(t[13]&254)/2;e.u==null&&(e.u=r),n.pts=jg(r,e.u),e.u=n.pts,n.dts=n.pts,i&64&&(i=(t[14]&14)*536870912+(t[15]&255)*4194304+(t[16]&254)*16384+(t[17]&255)*128+(t[18]&254)/2,e.o==null&&(e.o=i),n.dts=n.pts!=r?jg(i,e.o):i),e.o=n.dts}return e=t[8]+9,t.byteLength<=e?null:(n.data=t.subarray(e),n)}d.Ik=function(e){return Te("TsParser.parseAvcNalus","Please use parseNalus function instead."),this.ah(e,{le:null,state:null})},d.ah=function(e,t){var n=e.pts?e.pts/9e4:null;e=e.data;var i=e.byteLength,r=1;this.m=="hvc"&&(r=2);var o=t.state||0,s=o,u=0,a=[],l=-1,c=0;for(o==-1&&(l=0,c=this.m=="hvc"?e[0]>>1&63:e[0]&31,o=0,u=1);u<i;){var f=e[u++];o?o===1?o=f?0:2:f?f==1?(f=u-o-1,l>=0?a.push({data:e.subarray(l+r,f),fullData:e.subarray(l,f),type:c,time:n,state:null}):(o=a.length?a[a.length-1]:t.le)&&(s&&u<=4-s&&o.state&&(o.data=o.data.subarray(0,o.data.byteLength-s),o.fullData=o.fullData.subarray(0,o.fullData.byteLength-s)),f>0&&(f=e.subarray(0,f),o.data=it(o.data,f),o.fullData=it(o.fullData,f),o.state=0)),u<i?(c=this.m=="hvc"?e[u]>>1&63:e[u]&31,l=u,o=0):o=-1):o=0:o=3:o=f?0:1}return l>=0&&o>=0&&a.push({data:e.subarray(l+r,i),fullData:e.subarray(l,i),type:c,time:n,state:o}),!a.length&&t.le&&(n=a.length?a[a.length-1]:t.le)&&(n.data=it(n.data,e),n.fullData=it(n.fullData,e)),t.state=o,a},d.getMetadata=function(){for(var e=[],t=m(this.l),n=t.next();!n.done;n=t.next())n=it.apply(Et,H(n.value)),(n=Kc(this,n))&&e.push({cueTime:n.pts?n.pts/9e4:null,data:n.data,frames:Er(n.data),dts:n.dts,pts:n.pts});return e},d.rb=function(){if(this.i.length&&!this.h.length)for(var e=m(this.i),t=e.next();!t.done;t=e.next()){var n=it.apply(Et,H(t.value)),i=Kc(this,n);t=this.h.length?this.h[this.h.length-1]:null,i&&i.pts!=null&&i.dts!=null&&(!t||t.pts!=i.pts&&t.dts!=i.dts)?this.h.push(i):this.h.length&&(n=i?i.data:n)&&(t=this.h.pop(),t.data=it(t.data,n),this.h.push(t))}return this.h},d.ud=function(e){if(e=e===void 0?!0:e,this.j.length&&!this.g.length){for(var t=m(this.j),n=t.next();!n.done;n=t.next()){var i=it.apply(Et,H(n.value)),r=Kc(this,i);n=this.g.length?this.g[this.g.length-1]:null,r&&r.pts!=null&&r.dts!=null&&(!n||n.pts!=r.pts&&n.dts!=r.dts)?this.g.push(r):this.g.length&&(i=r?r.data:i)&&(n=this.g.pop(),n.data=it(n.data,i),this.g.push(n))}if(e){for(t={le:null,state:null},n=[],i=m(this.g),r=i.next();!r.done;r=i.next())r=r.value,r.nalus=this.ah(r,t),r.nalus.length&&(n.push(r),t.le=r.nalus[r.nalus.length-1]);this.g=n}}return e?this.g:(e=this.g,this.g=[],e)},d.getStartTime=function(e){if(e=="audio"){e=null;var t=this.rb();return t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e}return e=="video"?(e=null,t=this.ud(!1),t.length&&(e=t[0],e=Math.min(e.dts,e.pts)/9e4),e):null},d.Zd=function(){return{audio:this.C,video:this.m}},d.ef=function(){for(var e=[],t=m(this.ud()),n=t.next();!n.done;n=t.next())e.push.apply(e,H(n.value.nalus));return e},d.ik=function(){Te("TsParser.getVideoResolution","Please use getVideoInfo function instead.");var e=this.Ng();return{height:e.height,width:e.width}},d.Ng=function(){return this.m=="hvc"?NS(this):PS(this)};function Ng(e){var t=e.ud();return t.length>1&&(e=t[0].pts,t=t[1].pts,!isNaN(t-e))?String(Math.abs(1/(t-e)*9e4)):null}function PS(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.ef();if(!n.length||(n=n.find(function(h){return h.type==7}),!n))return t;n=new yi(n.data);var i=Me(n),r=Me(n),o=Me(n);if(xt(n),jS.includes(i)){var s=X(n);if(s===3&&Zt(n,1),xt(n),xt(n),Zt(n,1),J(n)){s=s!==3?8:12;for(var u=0;u<s;u++)J(n)&&(u<6?ta(n,16):ta(n,64))}}if(xt(n),s=X(n),s===0)X(n);else if(s===1)for(Zt(n,1),xt(n),xt(n),s=X(n),u=0;u<s;u++)xt(n);xt(n),Zt(n,1),s=X(n),u=X(n);var a=me(n,1);a===0&&Zt(n,1),Zt(n,1);var l=0,c=0,f=0,p=0;return J(n)&&(l=X(n),c=X(n),f=X(n),p=X(n)),t.height=String((2-a)*(u+1)*16-f*2-p*2),t.width=String((s+1)*16-l*2-c*2),t.codec="avc1."+("0"+i.toString(16).toUpperCase()).slice(-2)+("0"+r.toString(16).toUpperCase()).slice(-2)+("0"+o.toString(16).toUpperCase()).slice(-2),t.frameRate=Ng(e),t}function NS(e){var t={height:null,width:null,codec:null,frameRate:null},n=e.ef();if(!n.length||(n=n.find(function(L){return L.type==33}),!n))return t;var i=new yi(n.fullData,!0);Me(i),Me(i),me(i,4);var r=me(i,3);J(i);var o=me(i,2),s=me(i,1),u=me(i,5),a=me(i,32);n=Me(i);for(var l=Me(i),c=Me(i),f=Me(i),p=Me(i),h=Me(i),g=Me(i),v=[],y=[],S=0;S<r;S++)v.push(J(i)),y.push(J(i));if(r>0)for(S=r;S<8;S++)me(i,2);for(S=0;S<r;S++)v[S]&&me(i,88),y[S]&&Me(i);X(i),r=X(i),r==3&&me(i,1),v=X(i),y=X(i);var x=S=0,w=0,I=0;return J(i)&&(S+=X(i),x+=X(i),w+=X(i),I+=X(i)),t.width=String(v-(S+x)*(r===1||r===2?2:1)),t.height=String(y-(w+I)*(r===1?2:1)),i=function(L){for(var A=0,C=0;C<32;C++)A|=(L>>C&1)<<31-C;return A>>>0}(a),s=s==1?"H":"L",o="hvc1"+("."+["","A","B","C"][o]+u),o+="."+i.toString(16).toUpperCase(),o+="."+s+g,h&&(o+="."+h.toString(16).toUpperCase()),p&&(o+="."+p.toString(16).toUpperCase()),f&&(o+="."+f.toString(16).toUpperCase()),c&&(o+="."+c.toString(16).toUpperCase()),l&&(o+="."+l.toString(16).toUpperCase()),n&&(o+="."+n.toString(16).toUpperCase()),t.codec=o,t.frameRate=Ng(e),t}function jg(e,t){var n=1;for(e>t&&(n=-1);Math.abs(t-e)>4294967296;)e+=n*8589934592;return e}function io(e){return!(Wc(e)<0)}function Wc(e){for(var t=Math.min(1e3,e.length-564),n=0;n<t;){if(e[n]==71&&e[n+188]==71&&e[n+376]==71)return n;n++}return-1}K("shaka.util.TsParser",Be),Be.syncOffset=Wc,Be.probe=io,Be.prototype.getVideoInfo=Be.prototype.Ng,Be.prototype.getVideoResolution=Be.prototype.ik,Be.prototype.getVideoNalus=Be.prototype.ef,Be.prototype.getCodecs=Be.prototype.Zd,Be.prototype.getStartTime=Be.prototype.getStartTime,Be.prototype.getVideoData=Be.prototype.ud,Be.prototype.getAudioData=Be.prototype.rb,Be.prototype.getMetadata=Be.prototype.getMetadata,Be.prototype.parseNalus=Be.prototype.ah,Be.prototype.parseAvcNalus=Be.prototype.Ik,Be.prototype.parse=Be.prototype.parse,Be.prototype.setDiscontinuitySequence=Be.prototype.Kf,Be.prototype.clearData=Be.prototype.clearData,Be.Timescale=9e4;var jS=[100,110,122,244,44,83,86,118,128,138,139,134];function Og(e,t,n,i,r){var o=this;this.g=e,this.O=n,this.B=i,this.aa=t,this.l=new Map,this.G=new Map,this.Ja=new Map,this.h=null,this.Ea=!1,this.C=r||null,this.o=new Map,this.u=new Ee,this.j=new Map,this.K=null,this.M=new Pe,this.Aa="",this.yb=!1,this.za=!0,this.N=!1,this.F=this.R=null,this.i=Xc(this,this.M),this.Ta=this.H=!1,this.I=new qr(function(){return _S(o)}),this.J=!1,this.X="UNKNOWN",this.ib=this.sb=!1,this.Ua=new Pe,this.m=!1,this.wa=null,this.ab=new Map,this.ma=this.T=this.oa=this.V=null,this.ha=new Pe,this.g.remote&&(this.N=this.g.remote.state!="disconnected",this.u.D(this.g.remote,"connect",function(){o.N=o.g.remote.state!="disconnected"}),this.u.D(this.g.remote,"connecting",function(){o.N=o.g.remote.state!="disconnected"}),this.u.D(this.g.remote,"disconnect",function(){o.N=o.g.remote.state!="disconnected"}))}function Xc(e,t){if(e.za=!0,B.ManagedMediaSource){e.F||(e.g.disableRemotePlayback=!0);var n=new ManagedMediaSource;e.u.D(n,"startstreaming",function(){e.za=!0}),e.u.D(n,"endstreaming",function(){e.za=!1})}else n=new MediaSource;return e.u.ya(n,"sourceopen",function(){URL.revokeObjectURL(e.Aa),t.resolve()}),e.u.ya(e.g,"playing",function(){e.yb=!0}),e.Aa=Jc(n),e.B.useSourceElements?(e.g.removeAttribute("src"),e.R&&e.g.removeChild(e.R),e.F&&e.g.removeChild(e.F),e.R=Dg(e.Aa),e.g.appendChild(e.R),e.F&&e.g.appendChild(e.F),e.g.load()):e.g.src=e.Aa,n}function OS(e,t,n){e.g&&B.ManagedMediaSource&&e.i&&e.B.useSourceElements&&(e.F&&e.g.removeChild(e.F),e.F=Dg(t,n),e.g.appendChild(e.F),e.g.disableRemotePlayback=!1)}function US(){var e='video/mp4; codecs="avc1.42E01E",video/mp4; codecs="avc3.42E01E",video/mp4; codecs="hev1.1.6.L93.90",video/mp4; codecs="hvc1.1.6.L93.90",video/mp4; codecs="hev1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.4.L153.B0"; eotf="smpte2084",video/mp4; codecs="hvc1.2.20000000.L153.B0",video/mp4; codecs="hvc1.2.4.L120.b0",video/mp4; codecs="hvc1.2.4.L123.b0",video/mp4; codecs="vp9",video/mp4; codecs="vp09.00.10.08",video/mp4; codecs="av01.0.01M.08",video/mp4; codecs="av01.0.31M.10.0.111.09.16.09.0",video/mp4; codecs="av01.0.31M.10.0.112.09.18.09.0",video/mp4; codecs="dvh1.05.01",video/mp4; codecs="dvh1.08.01",video/mp4; codecs="dav1.10.01",video/mp4; codecs="dvh1.20.01",audio/mp4; codecs="mp4a.40.2",audio/mp4; codecs="ac-3",audio/mp4; codecs="ec-3",audio/mp4; codecs="ac-4.02.01.03",audio/mp4; codecs="opus",audio/mp4; codecs="flac",audio/mp4; codecs="dtsc",audio/mp4; codecs="dtse",audio/mp4; codecs="dtsx",audio/mp4; codecs="apac.31.00",video/webm; codecs="vp8",video/webm; codecs="vp9",video/webm; codecs="vp09.00.10.08",audio/webm; codecs="vorbis",audio/webm; codecs="opus",video/mp2t; codecs="avc1.42E01E",video/mp2t; codecs="avc3.42E01E",video/mp2t; codecs="hvc1.1.6.L93.90",video/mp2t; codecs="mp4a.40.2",video/mp2t; codecs="ac-3",video/mp2t; codecs="ec-3",text/vtt,application/mp4; codecs="wvtt",application/ttml+xml,application/mp4; codecs="stpp"'.split(",").concat(H(fi)),t={};pe(),e=m(e);for(var n=e.next();!n.done;n=e.next()){if(n=n.value,$o(n))t[n]=!0;else if(ei()){var i=Jt(n),r=ts(Kt(n),i);i=Qe(i,r),t[n]=jt(i)||!!Kr(i)}else t[n]=Ar().canPlayType(n)!="";i=n.split(";")[0],t[i]=t[i]||t[n]}return t}d=Og.prototype,d.destroy=function(){return this.I.destroy()};function _S(e){var t,n,i,r,o,s,u,a,l,c,f,p,h,g,v;return k(function(y){if(y.g==1){for(t=[],n=m(e.o),i=n.next();!i.done;i=n.next())for(r=i.value,o=m(r),s=o.next().value,u=o.next().value,a=u[0],l=s,e.o.set(l,u.slice(0,1)),a&&t.push(a.p.catch(wx)),c=m(u.slice(1)),f=c.next();!f.done;f=c.next())p=f.value,p.p.reject(new D(2,7,7003,void 0));return e.h&&t.push(e.h.destroy()),T(y,Promise.all(t),2)}for(h=m(e.j.values()),g=h.next();!g.done;g=h.next())v=g.value,v.destroy();e.u&&(e.u.release(),e.u=null),e.g&&e.F&&e.g.removeChild(e.F),e.g&&e.R&&(e.g.removeChild(e.R),e.g.load(),e.g.disableRemotePlayback=!1),e.g=null,e.R=null,e.F=null,e.B=null,e.i=null,e.h=null,e.aa=null,e.l.clear(),e.Ja.clear(),e.j.clear(),e.K=null,e.o.clear(),e.C=null,e.ab.clear(),e.O=null,G(y)})}d.init=function(e,t,n,i){t=t===void 0?!1:t,n=n===void 0?"UNKNOWN":n,i=i===void 0?!1:i;var r=this,o,s,u,a,l,c;return k(function(f){if(f.g==1)return o=rt,T(f,r.M,2);if(f.g!=3)return!Ir(r)&&!Gi(r)?f.A(3):(Xn("Expected MediaSource to be open during init(); reopening the media source."),r.M=new Pe,r.i=Xc(r,r.M),T(f,r.M,3));for(r.J=t,r.X=n,r.sb=i,r.ib=!r.J&&r.X=="HLS"&&!r.sb,r.ab.clear(),r.V=null,r.oa=null,r.T=null,r.ma=null,r.ha=new Pe,s=m(e.keys()),u=s.next();!u.done;u=s.next())a=u.value,l=e.get(a),na(r,a,l,l.codecs),r.m?(r.o.set(o.$,[]),r.o.set(o.va,[])):r.o.set(a,[]);(c=e.get(o.$))&&c.isAudioMuxedInVideo&&(r.m=!0),G(f)})};function na(e,t,n,i){t=="audio"&&i&&(i=ts(i,n.mimeType));var r=Qe(n.mimeType,i);if(t==he)ia(e,r,e.J,n.external);else{var o=e.B.forceTransmux;(!jt(r)||!e.J&&fi.includes(r))&&(o=!0);var s=Ru(n.mimeType,i);if(o){if(o=Gt("audio",(i||"").split(",")),i=Gt("video",(i||"").split(",")),o&&i){e.m=!0,na(e,"audio",n,o),na(e,"video",n,i);return}(i=Kr(s))&&(r=i(),e.j.set(t,r),r=r.convertCodecs(t,s))}s=r+e.B.addExtraFeaturesToSourceBuffer(r),_e(e.I);try{var u=e.i.addSourceBuffer(s)}catch(a){throw new D(2,3,3015,a,"The mediaSource_ status was "+e.i.readyState+" expected 'open'",null)}e.J&&(u.mode=qS),e.u.D(u,"error",function(){var a=e.o.get(t)[0];a.p.reject(new D(2,3,3014,e.g.error?e.g.error.code:0,a.uri))}),e.u.D(u,"updateend",function(){return Wi(e,t)}),e.l.set(t,u),e.G.set(t,r),e.Ja.set(t,!!n.drmInfos.length)}}d.configure=function(e){this.B=e,this.h&&(this.h.C=e.modifyCueCallback)};function Ug(e){return e.za&&!e.N&&!e.H}function ia(e,t,n,i){e.h||(e.h=new di(e.aa),e.h&&(e.h.C=e.B.modifyCueCallback));var r=e.h,o=e.Ea;e=e.X,t=="application/cea-608"||t=="application/cea-708"?r.i=null:(r.i=Qo.get(t)(),r.i.setSequenceMode?r.i.setSequenceMode(n):Te("Text parsers w/ setSequenceMode",'Text parsers should have a "setSequenceMode" method!'),r.i.setManifestType?r.i.setManifestType(e):Te("Text parsers w/ setManifestType",'Text parsers should have a "setManifestType" method!'),r.G=o,r.B=i)}function Ir(e){return e.H?!1:e.i?e.i.readyState=="ended":!0}function Gi(e){return e.H?!1:e.i?e.i.readyState=="closed":!0}function zc(e,t){return e.l.size?t==he?e.h.g:Mg(ro(e,t)):null}function Ki(e,t){return e.l.size?t==he?e.h.h:Zu(ro(e,t)):null}function BS(e,t,n){return t==he?(e=e.h,e.h==null||e.h<n?0:e.h-Math.max(n,e.g)):(e=ro(e,t),kg(e,n))}d.Hc=function(){var e={total:this.H?[]:vi(this.g.buffered),audio:vi(ro(this,"audio")),video:vi(ro(this,"video")),text:[]};if(this.h){var t=this.h.g,n=this.h.h;t!=null&&n!=null&&e.text.push({start:t,end:n})}return e};function ro(e,t){if(e.H||e.N||Gi(e))return null;try{return e.l.get(t).buffered}catch{return e.l.has(t),null}}function bS(e,t,n,i,r,o,s){s=s===void 0?!1:s;var u=null,a=[],l=re(n);if(fi.includes(o))n=Er(l),n.length&&i&&((s=n.find(function(g){return g.description==="com.apple.streaming.transportStreamTimestamp"}))&&typeof s.data=="number"&&(u=Math.round(s.data)/1e3),e.O.onMetadata([{cueTime:i.startTime,data:l,frames:n,dts:i.startTime,pts:i.startTime}],0,i.endTime));else if(o.includes("/mp4")&&i&&i.ba){l=new Ne;var c=r.emsgSchemeIdUris!=null&&r.emsgSchemeIdUris.length>0||e.B.dispatchAllEmsgBoxes;c&&l.S("emsg",function(g){var v=r.emsgSchemeIdUris;if(g.version===0)var y=g.reader.Yc(),S=g.reader.Yc(),x=g.reader.U(),w=g.reader.U(),I=g.reader.U(),L=g.reader.U(),A=i.startTime+w/x;else x=g.reader.U(),A=g.reader.Fd()/x+i.timestampOffset,w=A-i.startTime,I=g.reader.U(),L=g.reader.U(),y=g.reader.Yc(),S=g.reader.Yc();g=g.reader.Tb(g.reader.getLength()-g.reader.Pa(),!0),(v&&v.includes(y)||e.B.dispatchAllEmsgBoxes)&&(y=="urn:mpeg:dash:event:2012"?e.O.Hk():(v=A+I/x,e.O.Fk({startTime:A,endTime:v,schemeIdUri:y,value:S,timescale:x,presentationTimeDelta:w,eventDuration:I,id:L,messageData:g}),(y=="https://aomedia.org/emsg/ID3"||y=="https://developer.apple.com/streaming/emsg-id3")&&(x=Er(g),x.length&&e.O.onMetadata([{cueTime:A,data:g,frames:x,dts:A,pts:A}],0,v))))});var f=i.ba.timescale;t=f&&!isNaN(f);var p=0,h=!1;t&&l.S("prft",function(g){var v=g.reader,y=g.version;v.U(),g=v.U();var S=v.U();g=g*1e3+S/4294967296*1e3,y===0?v=v.U():(y=v.U(),v=v.U(),v=y*4294967296+v),g=Pg(g),v=new Map().set("detail",{wallClockTime:g,programStartDate:new Date(g-v/f*1e3)}),v=new z("prft",v),e.O.onEvent(v)}).box("moof",ce).box("traf",ce).S("tfdt",function(g){h||(p=qu(g.reader,g.version).baseMediaDecodeTime/f,h=!0,c||g.parser.stop())}),(c||t)&&l.parse(n,!1,s),h&&i.timestampOffset==0&&(u=p)}else o.includes("/mp4")||o.includes("/webm")||!io(l)||(a=e.ab.getOrInsertComputed(t,function(){return new Be}),a.clearData(),a.Kf(i.i),a.parse(l),l=a.getStartTime(t),l!=null&&(u=l),a=a.getMetadata());return{timestamp:u,metadata:a}}function ra(e,t,n,i,r,o,s,u,a,l,c){s=s===void 0?!1:s,u=u===void 0?!1:u,a=a===void 0?!1:a,l=l===void 0?!1:l;var f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_;return k(function(j){switch(j.g){case 1:if(f=rt,t!=f.Na){j.A(2);break}if(e.X!="HLS"){j.A(3);break}return T(j,e.Ua,4);case 4:p=j.h,e.h.u=p;case 3:return T(j,vx(e.h,n,i?i.startTime:null,i?i.endTime:null,i?i.P()[0]:null),5);case 5:return j.return();case 2:if(l||!e.m){j.A(6);break}return T(j,ra(e,f.$,n,i,r,o,s,u,a,!0),7);case 7:return T(j,ra(e,f.va,n,i,r,o,s,u,a,!0),8);case 8:return j.return();case 6:if(!e.l.has(t))return j.return();if(h=e.l.get(t).timestampOffset,g=e.G.get(t),e.j.has(t)&&(g=e.j.get(t).getOriginalMimeType()),i&&(v=bS(e,t,n,i,r,g,a),y=v.timestamp,S=v.metadata,y!=null&&(e.V==null&&t==f.va&&(e.V=y,e.oa=i.startTime,e.T!=null&&(x=0,e.oa==e.ma&&(x=e.V-e.T),e.ha.resolve(x))),e.T==null&&t==f.$&&(e.T=y,e.ma=i.startTime,e.V!=null&&(w=0,e.oa==e.ma&&(w=e.V-e.T),e.ha.resolve(w))),I=y,L=fi,!e.J&&L.includes(e.G.get(t))&&(I=0),A=i.startTime-I,C=Math.abs(h-A),(C>=.001||s||u)&&(!a||A>0||!h)&&(h=A,e.ib&&(ut(e,t,function(){return oo(e,t)},null),ut(e,t,function(){return so(e,t,h)},null))),(t==f.va||!e.l.has(f.va))&&e.Ua.resolve(h)),S.length)&&e.O.onMetadata(S,h,i?i.endTime:null),o&&t==f.va&&(e.h||ia(e,"application/cea-608",e.J,!1),e.K||(E=g.split(";",1)[0],e.K=new Vn(E)),i?(R=e.K.Af(n),R.length&&Tx(e.h,R,h)):e.K.init(n,u,c)),!e.j.has(t)){j.A(9);break}return T(j,e.j.get(t).transmux(n,r,i,e.i.duration,t),10);case 10:M=j.h,ArrayBuffer.isView(M)?n=M:(P=M,P.init!=null&&(N=P.init,ut(e,t,function(){e.C&&Tu(e.C,N,h,r),e.l.get(t).appendBuffer(N)},i?i.P()[0]:null)),n=P.data);case 9:if(n=KS(e,r,n,i,t),!i||!e.J||t==f.Na){j.A(11);break}if(!s&&!u){j.A(11);break}if(b=i.startTime,e.X!="HLS"||e.m||t!=f.$||!e.l.has(f.va)){j.A(13);break}return T(j,e.ha,14);case 14:_=j.h,Math.abs(_)>.15&&(b-=_);case 13:ut(e,t,function(){return oo(e,t)},null),ut(e,t,function(){return so(e,t,b)},null);case 11:return T(j,ut(e,t,function(){var O=n;e.C&&Tu(e.C,O,h,r),e.l.get(t).appendBuffer(O)},i?i.P()[0]:null),15);case 15:G(j)}})}function FS(e,t){var n=Ki(e,"video")||0;Ah(e.h,t,n)}function VS(e){e.h&&Ah(e.h,"",0)}d.remove=function(e,t,n,i){var r=this,o,s;return k(function(u){return u.g==1?(o=rt,e==o.va&&r.K&&(r.K.remove(i),s=r.h.g||0,r.h.remove(s,n,!0)),e==o.Na?T(u,r.h.remove(t,n),0):n>t?T(u,ut(r,e,function(){return oa(r,e,t,n)},null),5):u.A(0)):r.m?T(u,ut(r,o.$,function(){return oa(r,o.$,t,n)},null),0):u.A(0)})};function _g(e,t){var n;return k(function(i){return i.g==1?(n=rt,t==n.Na?e.h?T(i,e.h.remove(0,1/0),0):i.return():t===n.va&&e.K&&e.h?T(i,e.h.remove(0,1/0,!0),4):i.A(4)):i.g!=6?T(i,ut(e,t,function(){return oa(e,t,0,e.i.duration)},null),6):e.m?T(i,ut(e,n.$,function(){return oa(e,n.$,0,e.i.duration)},null),0):i.A(0)})}d.flush=function(e){var t=this,n;return k(function(i){return i.g==1?(n=rt,e==n.Na?i.return():T(i,ut(t,e,function(){t.g.currentTime-=.001,Wi(t,e)},null),2)):t.m?T(i,ut(t,n.$,function(){var r=n.$;t.g.currentTime-=.001,Wi(t,r)},null),0):i.A(0)})};function Bg(e,t,n,i,r,o,s,u,a){var l,c,f;return k(function(p){return p.g==1?(l=rt,t==l.Na?(o||(e.h.u=n),yx(e.h,i,r),p.return()):(c=[],T(p,zS(e,t,s,u,a),2))):(f=p.h,f||(c.push(ut(e,t,function(){return oo(e,t)},null)),e.m&&c.push(ut(e,l.$,function(){return oo(e,l.$)},null))),o||(c.push(ut(e,t,function(){return so(e,t,n)},null)),e.m&&c.push(ut(e,l.$,function(){return so(e,l.$,n)},null))),(i!=0||r!=1/0)&&(c.push(ut(e,t,function(){return Fg(e,t,i,r)},null)),e.m&&c.push(ut(e,l.$,function(){return Fg(e,l.$,i,r)},null))),c.length?T(p,Promise.all(c),0):p.A(0))})}function bg(e,t,n){var i,r;return k(function(o){return o.g==1?(i=rt,t==i.Na||(t==i.va&&(e.Ua=new Pe),!e.J||(r=Ki(e,t))&&Math.abs(r-n)<.15)?o.return():(ut(e,t,function(){return oo(e,t)},null),e.m&&ut(e,i.$,function(){return oo(e,i.$)},null),T(o,ut(e,t,function(){return so(e,t,n)},null),2))):e.m?T(o,ut(e,i.$,function(){return so(e,i.$,n)},null),0):o.A(0)})}d.endOfStream=function(e){var t=this;return k(function(n){return T(n,ds(t,function(){Ir(t)||Gi(t)||(e?t.i.endOfStream(e):t.i.endOfStream())}),0)})},d.Ab=function(e){var t=this;return k(function(n){return T(n,ds(t,function(){if(t.B.durationReductionEmitsUpdateEnd&&e<t.i.duration)for(var i=m(t.l.keys()),r=i.next();!r.done;r=i.next()){r=r.value;var o={start:function(){},p:new Pe,uri:null};t.o.get(r).unshift(o)}t.i.duration=e,t.wa=e}),0)})},d.getDuration=function(){return this.i.duration};function HS(e,t,n){k(function(i){return e.I.g||e.g.error||e.N||e.H||Ir(e)||Gi(e)?i.return():T(i,ds(e,function(){Ir(e)||Gi(e)||e.i.setLiveSeekableRange(t,n)}),0)})}function Yc(e){k(function(t){return e.I.g||e.g.error||e.N||e.H||Ir(e)||Gi(e)?t.return():T(t,ds(e,function(){Ir(e)||Gi(e)||e.i.clearLiveSeekableRange()}),0)})}function oa(e,t,n,i){if(i<=n)Wi(e,t);else{if(e.C){var r=e.C;t==="video"&&r.g&&r.g.flushBuffer(n,i)}e.l.get(t).remove(n,i)}}function oo(e,t){var n=e.l.get(t),i=n.appendWindowStart,r=n.appendWindowEnd;n.abort(),n.appendWindowStart=i,n.appendWindowEnd=r,Wi(e,t)}function so(e,t,n){n<0&&(n+=.001),e.l.get(t).timestampOffset=n,Wi(e,t)}function Fg(e,t,n,i){var r=e.l.get(t);(r.appendWindowEnd!==i||r.appendWindowStart!==n)&&(r.appendWindowStart=0,r.appendWindowEnd=i,r.appendWindowStart=n),Wi(e,t)}function Wi(e,t){if(e.H||e.I.g){var n=e.o.get(t);n&&n.length&&((n=n[0])&&n.p&&n.p.resolve(),e.o.set(t,[]))}else(n=e.o.get(t)[0])&&(n.p.resolve(),qc(e,t))}function ut(e,t,n,i){return _e(e.I),n={start:n,p:new Pe,uri:i},e.o.get(t).push(n),e.o.get(t).length==1&&Vg(e,t),n.p}function ds(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,g;return k(function(v){switch(v.g){case 1:for(_e(e.I),n=[],i=Array.from(e.l.keys()),r=m(i),o=r.next(),s={};!o.done;s={ready:void 0},o=r.next())u=o.value,s.ready=new Pe,a={start:function(y){return function(){return y.ready.resolve()}}(s),p:s.ready,uri:null},l=e.o.get(u),l.push(a),n.push(s.ready),l.length==1&&a.start();return se(v,2),T(v,Promise.all(n),4);case 4:fe(v,3);break;case 2:throw c=ue(v),c;case 3:return se(v,5,6),T(v,t(),6);case 6:for(on(v),f=m(i),p=f.next();!p.done;p=f.next())h=p.value,qc(e,h);sn(v,0);break;case 5:throw g=ue(v),new D(2,3,3015,g,e.g.error||"No error in the media element",null)}})}function qc(e,t){e.o.get(t).shift(),Vg(e,t)}function Vg(e,t){var n=e.o.get(t)[0];if(n)try{n.start()}catch(i){i.name=="QuotaExceededError"?n.p.reject(new D(2,3,3017,t)):Ug(e)?n.p.reject(new D(2,3,3015,i,e.g.error||"No error in the media element",n.uri)):n.p.reject(new D(2,3,3024,t)),qc(e,t)}}function GS(e,t){e.aa=t,e.h&&(e.h.j=t)}function KS(e,t,n,i,r){if(qo(e.G.get(r))!="mp4")return n;var o=i===null,s=e.Ja.get(r),u=e.O.Qj(),a=!1;i&&i.ba&&(a=i.ba.encrypted),i=i?i.P()[0]:null;var l=pe();return e.B.correctEc3Enca&&o&&r==="audio"&&(n=wS(n)),e.B.insertFakeEncryptionInInit&&s&&l.Gd(u,r)&&(o?n=AS(t,n,i):!a&&l.Oi(r)&&(n=ES(n))),o&&l.se()&&(n=MS(n)),n}function WS(e,t,n,i){return ut(e,t,function(){if(t!==he){if(e.G.get(t),pe().Ib()){e.j.has(t)&&(e.j.get(t).destroy(),e.j.delete(t)),i&&e.j.set(t,i);var r=n+e.B.addExtraFeaturesToSourceBuffer(n);e.l.get(t).changeType(r),e.G.set(t,n)}Wi(e,t)}},null)}function XS(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L;return k(function(A){if(A.g==1){if(e.H||e.N)return A.return();for(n=rt,e.H=!0,e.m=!1,i=e.g.currentTime,r=e.g.autoplay,e.g.paused||(e.Ta=!0),e.yb&&(e.g.autoplay=!1),ni(A,2),e.u.Qa(),o=m(e.j.values()),s=o.next();!s.done;s=o.next())u=s.value,u.destroy();for(a=m(e.l.values()),l=a.next();!l.done;l=a.next()){c=l.value;try{e.i.removeSourceBuffer(c)}catch{}}return e.j.clear(),e.l.clear(),f=e.i.duration,e.M=new Pe,e.i=Xc(e,e.M),T(A,e.M,4)}if(A.g!=2){for(!isNaN(f)&&f?e.i.duration=f:!isNaN(e.wa)&&e.wa&&(e.i.duration=e.wa),p=new Pe,h=e.i.sourceBuffers,g=t.size,v=0,y=function(){v++,v===g&&(p.resolve(),e.u.Ma(h,"addsourcebuffer",y))},e.u.D(h,"addsourcebuffer",y),S=m(t.keys()),x=S.next();!x.done;x=S.next())w=x.value,I=t.get(w),na(e,w,I,I.codecs);return(L=t.get(n.$))&&L.isAudioMuxedInVideo&&(e.m=!0),e.m&&!e.o.has(n.$)&&e.o.set(n.$,[]),T(A,p,2)}return on(A),e.H=!1,_e(e.I),e.u.ya(e.g,"loadedmetadata",function(){e.I.g||(e.g.currentTime=i)}),e.u.ya(e.g,"canplaythrough",function(){e.I.g||(e.g.autoplay=r,e.Ta&&(e.Ta=!1,e.g.play()))}),sn(A,0)})}function Hg(e,t){return ds(e,function(){return XS(e,t)})}function Gg(e,t,n,i){var r=!1,o=Gt("audio",(i||"").split(",")),s=Gt("video",(i||"").split(",")),u=s;t=="audio"&&(u=o),u||(u=i);var a=Qe(n,u),l=Jt(e.G.get(t)),c=e.B.forceTransmux;if(!jt(a)||!e.J&&fi.includes(a)?c=!0:c||n==l||(c=!pe().Nf()&&fi.includes(n)),c&&(e=Ru(n,u),u=Kr(e))){var f=u();o&&s&&(r=!0),a=f.convertCodecs(t,e)}return!f&&t==="video"&&o&&(a=Qe(n,i)),t=It(Kt(a)),{lc:f,kl:r,Uh:Jt(a),codec:t,mimeType:a}}function Kg(e,t,n,i,r){if(t==he)return{type:$c,wf:n,lc:null};var o=It(Kt(e.G.get(t))),s=Jt(e.G.get(t)),u=Gg(e,t,n,i),a=u.lc,l=u.kl,c=u.Uh,f=u.codec;u=u.mimeType;var p=!0;return l&&e.G.has("audio")&&(n=Gg(e,"audio",n,i),i=It(Kt(e.G.get("audio"))),p=Jt(e.G.get("audio")),p=i==n.codec&&p==n.Uh,n.lc&&n.lc.destroy()),o===f&&s===c&&p?{type:$c,wf:u,lc:a}:(o=!0,(e.m&&!r.has("audio")||l&&a&&!e.j.has(t))&&(o=!1),t=pe(),o&&e.B.codecSwitchingStrategy==="smooth"&&t.Ib()?{type:Wg,wf:u,lc:a}:(a&&a.destroy(),{type:Qc,wf:u,lc:null}))}function zS(e,t,n,i,r){var o,s,u,a,l,c;return k(function(f){return f.g==1?(o=rt,s=Kg(e,t,n,i,r),u=s.type,a=s.lc,l=s.wf,(c=r.get(o.$))&&(e.m=c.isAudioMuxedInVideo),u==$c?(e.j.has(t)&&!a?(e.j.get(t).destroy(),e.j.delete(t)):!e.j.has(t)&&a?e.j.set(t,a):a&&(e.j.has(t)&&e.j.get(t).transmux!==a.transmux?(e.j.get(t).destroy(),e.j.set(t,a)):a.destroy()),f.return(!1)):u==Wg?T(f,WS(e,t,l,a),3):u!=Qc?f.A(3):(a&&a.destroy(),T(f,Hg(e,r),3))):f.return(!0)})}function YS(e,t,n,i,r){return e=Kg(e,t,n,i,r),e.lc&&e.lc.destroy(),e.type==Qc}var Jc=B.URL.createObjectURL,qS="sequence",$c="none",Qc="reset",Wg="changeType";function ie(e,t,n){this.i=e,this.F=t,this.u=this.l=1/0,this.h=1,this.g=this.j=null,this.B=0,this.C=!0,this.J=!1,this.I=0,this.G=n===void 0?!0:n,this.H=0,this.o=!1,this.m=e}d=ie.prototype,d.getDuration=function(){return this.l},d.Sj=function(){return this.h},d.Xi=function(e){this.i=e},d.Ab=function(e){this.l=e},d.Xj=function(){return this.i},d.Wi=function(e){this.B=e},d.cd=function(e){e&&!this.C&&(this.J=!0),this.C=e},d.Lf=function(e){this.u=e},d.df=function(){return this.u},d.sh=function(e){this.F=e},d.Kj=function(){return this.F},d.Ii=function(e,t){if(e.length!=0){var n=(Date.now()+this.B)/1e3;if(e=e.filter(function(r){return r.start+t<n}),e.length!=0){var i=e[e.length-1].end+t;this.xf(e[0].start+t),this.h=e.reduce(function(r,o){return Math.max(r,o.end-o.start)},this.h),this.g=Math.max(this.g,i),this.i!=null&&this.G&&!this.o&&(this.i=n-this.g-this.h)}}},d.me=function(e){if(e.length!=0){var t=e[0].startTime,n=e[0].endTime,i=(Date.now()+this.B)/1e3;e=m(e);for(var r=e.next();!r.done;r=e.next())r=r.value,i<r.startTime||(t=Math.min(t,r.startTime),n=Math.max(n,r.endTime),this.h=Math.max(this.h,r.endTime-r.startTime));this.xf(t),this.g=Math.max(this.g,n),this.i!=null&&this.G&&!this.o&&(this.i=i-this.g-this.h)}},d.Hi=function(e,t){this.xf(e),t==1/0||this.W()||(this.g=Math.max(this.g,t))},d.Tj=function(){return this.g},d.qf=function(){this.o=!0},d.wk=function(){return this.o},d.uh=function(e){this.m=e},d.Pj=function(){return this.m},d.xf=function(e){this.j==null?this.j=e:this.J||(this.j=Math.min(this.j,e))},d.Xg=function(e){this.h=Math.max(this.h,e)},d.offset=function(e){this.j!=null&&(this.j+=e),this.g!=null&&(this.g+=e)},d.W=function(){return this.l==1/0&&!this.C},d.Vc=function(){return this.l!=1/0&&!this.C},d.Hb=function(){return Math.max(this.I,this.Jc()-this.u)},d.Zi=function(e){this.I=e},d.Jc=function(){return this.W()||this.Vc()?Math.min(Math.max(0,(Date.now()+this.B)/1e3-this.h-this.i)+this.H,this.l):this.g?Math.min(this.g,this.l):this.l},d.be=function(e){var t=Math.max(this.j,this.I);return this.u==1/0?Math.ceil(t*1e3)/1e3:Math.max(t,Math.min(this.Jc()-this.u+e,this.Gb()))},d.$b=function(){return this.be(0)},d.Gb=function(){return Math.max(0,this.Jc()-(this.W()||this.Vc()?this.F:0))},d.lj=function(){return!(this.i==null||this.g!=null&&this.G)},d.Vi=function(e){this.H=e},d.Fj=function(){return this.H},K("shaka.media.PresentationTimeline",ie),ie.prototype.getAvailabilityTimeOffset=ie.prototype.Fj,ie.prototype.setAvailabilityTimeOffset=ie.prototype.Vi,ie.prototype.usingPresentationStartTime=ie.prototype.lj,ie.prototype.getSeekRangeEnd=ie.prototype.Gb,ie.prototype.getSeekRangeStart=ie.prototype.$b,ie.prototype.getSafeSeekRangeStart=ie.prototype.be,ie.prototype.getSegmentAvailabilityEnd=ie.prototype.Jc,ie.prototype.setUserSeekStart=ie.prototype.Zi,ie.prototype.getSegmentAvailabilityStart=ie.prototype.Hb,ie.prototype.isInProgress=ie.prototype.Vc,ie.prototype.isLive=ie.prototype.W,ie.prototype.offset=ie.prototype.offset,ie.prototype.notifyMaxSegmentDuration=ie.prototype.Xg,ie.prototype.notifyMinSegmentStartTime=ie.prototype.xf,ie.prototype.getInitialProgramDateTime=ie.prototype.Pj,ie.prototype.setInitialProgramDateTime=ie.prototype.uh,ie.prototype.isStartTimeLocked=ie.prototype.wk,ie.prototype.lockStartTime=ie.prototype.qf,ie.prototype.getMaxSegmentEndTime=ie.prototype.Tj,ie.prototype.notifyPeriodDuration=ie.prototype.Hi,ie.prototype.notifySegments=ie.prototype.me,ie.prototype.notifyTimeRange=ie.prototype.Ii,ie.prototype.getDelay=ie.prototype.Kj,ie.prototype.setDelay=ie.prototype.sh,ie.prototype.getSegmentAvailabilityDuration=ie.prototype.df,ie.prototype.setSegmentAvailabilityDuration=ie.prototype.Lf,ie.prototype.setStatic=ie.prototype.cd,ie.prototype.setClockOffset=ie.prototype.Wi,ie.prototype.getPresentationStartTime=ie.prototype.Xj,ie.prototype.setDuration=ie.prototype.Ab,ie.prototype.setPresentationStartTime=ie.prototype.Xi,ie.prototype.getMaxSegmentDuration=ie.prototype.Sj,ie.prototype.getDuration=ie.prototype.getDuration;function Zc(e,t,n,i){var r=this;this.u=i,this.g=e,this.F=t,this.h=n,this.j=new Ee,this.m=!1,this.l=0,this.C=!1,this.H=this.G=0,this.o=$S(this),this.B=!1,this.j.D(e,"waiting",function(){return ps(r)}),this.i=new ge(function(){ps(r)}).Da(this.h.gapJumpTimerTime)}Zc.prototype.release=function(){this.j&&(this.j.release(),this.j=null),this.i!=null&&(this.i.stop(),this.i=null),this.o&&(this.o.release(),this.o=null),this.g=this.F=this.u=null},Zc.prototype.Bd=function(){this.B=!0,this.i&&this.i.Da(this.h.gapJumpTimerTime),ps(this)};function ps(e){if(e.g.readyState!=0){if(e.g.seeking){if(!e.m)return}else e.m=!1;if(!e.g.paused||e.g.currentTime==e.l&&(e.g.autoplay||e.g.currentTime!=e.l)){var t;if(!(t=!e.o)){t=e.o;var n=t.h,i=Yg(n),r=n.g.currentTime,o=Date.now()/1e3;(t.g!=r||t.m!=i)&&(t.l=o,t.g=r,t.m=i,t.i=!1),r=o-t.l,(i=r>=t.o&&i&&!t.i)&&(t.j&&t.j(t.g,r),t.i=!0,t.g=n.g.currentTime),t=!i}t&&(t=e.g.currentTime,n=e.g.buffered,i=kS(n,t,e.h.gapDetectionThreshold),i==null||i==0&&!e.B||(r=n.start(i),(o=e.h.gapPadding)&&(r=Math.ceil((r+o)*100)/100),r>=e.F.Gb()||r-t<.001||(i!=0&&n.end(i-1),JS(e,r),t==e.l&&(e.l=r),e.G++,e.u(new z("gapjumped")))))}}}function JS(e,t){e.C=!0,e.j.ya(e.g,"seeked",function(){e.C=!1}),e.g.currentTime=t}function $S(e){if(!e.h.stallEnabled)return null;var t=e.h.stallThreshold,n=e.h.stallSkip;return new Xg(new zg(e.g),t,function(){var i;return k(function(r){if(r.g==1)return i=vi(e.g.buffered),i.length?n?(e.g.currentTime+=n,r.A(2)):T(r,e.g.play(),3):r.return();if(r.g!=2){if(!e.g)return r.return();e.g.pause(),e.g.play()}e.H++,e.u(new z("stalldetected")),G(r)})})}function Xg(e,t,n){this.h=e,this.m=Yg(e),this.g=e.g.currentTime,this.l=Date.now()/1e3,this.i=!1,this.o=t,this.j=n}Xg.prototype.release=function(){this.h&&this.h.release(),this.j=this.h=null};function zg(e){var t=this;this.g=e,this.h=new Ee,this.i=!1,this.h.D(this.g,"audiofocuspaused",function(){t.i=!0}),this.h.D(this.g,"audiofocusgranted",function(){t.i=!1}),this.h.D(this.g,"audiofocuslost",function(){t.i=!0})}function Yg(e){if(e.g.paused||e.g.playbackRate==0||e.i||e.g.buffered.length==0)var t=!1;else e:{t=e.g.currentTime,e=m(vi(e.g.buffered));for(var n=e.next();!n.done;n=e.next())if(n=n.value,!(t<n.start-.1||t>n.end-.5)){t=!0;break e}t=!1}return t}zg.prototype.release=function(){this.h&&this.h.release(),this.h=null};function uo(e,t,n,i){t==HTMLMediaElement.HAVE_NOTHING||e.readyState>=t?i():(t=QS.value().get(t),n.ya(e,t,i))}var QS=new We(function(){return new Map([[HTMLMediaElement.HAVE_METADATA,"loadedmetadata"],[HTMLMediaElement.HAVE_CURRENT_DATA,"loadeddata"],[HTMLMediaElement.HAVE_FUTURE_DATA,"canplay"],[HTMLMediaElement.HAVE_ENOUGH_DATA,"canplaythrough"]])});function qg(e,t,n,i){var r=this;this.g=e,this.m=t,this.u=n,this.l=null,this.j=function(){return r.l==null&&(r.l=i()),r.l},this.o=!1,this.h=new Ee,this.i=new Zg(e),uo(this.g,HTMLMediaElement.HAVE_METADATA,this.h,function(){$g(r,r.j())})}qg.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i!=null&&(this.i.release(),this.i=null),this.m=function(){},this.g=null};function ef(e){return e.o?e.g.currentTime:e.j()}function Jg(e,t){e.g.readyState>0?em(e.i,t):uo(e.g,HTMLMediaElement.HAVE_METADATA,e.h,function(){$g(e,e.j())})}function $g(e,t){Math.abs(e.g.currentTime-t)<.001?Qg(e):(e.h.ya(e.g,"seeking",function(){Qg(e)}),em(e.i,e.g.currentTime&&e.g.currentTime!=0?e.g.currentTime:t))}function Qg(e){e.o=!0,e.h.D(e.g,"seeking",function(){return e.m()}),e.u(e.g.currentTime)}function Zg(e){var t=this;this.g=e,this.m=10,this.j=this.l=this.i=0,this.h=new ge(function(){t.i<=0||t.g.currentTime!=t.l||t.g.currentTime===t.j?t.h.stop():(t.g.currentTime=t.j,t.i--)})}Zg.prototype.release=function(){this.h&&(this.h.stop(),this.h=null),this.g=null};function em(e,t){e.l=e.g.currentTime,e.j=t,e.i=e.m,e.g.currentTime=t,e.h.Da(.1)}function tm(e){this.g=e,this.i=!1,this.h=null,this.j=new Ee}d=tm.prototype,d.ready=function(){function e(){if(t.h==null||t.h==0&&t.g.duration!=1/0)t.i=!0;else{var n=t.g.currentTime,i=null;if(typeof t.h=="number")i=t.h;else if(t.h instanceof Date){var r=nm(t);r!==null&&(i=t.h.getTime()/1e3-r,i=im(t,i))}i==null?t.i=!0:(i<0&&(i=Math.max(0,n+i)),n!=i?(t.j.ya(t.g,"seeking",function(){t.i=!0}),t.g.currentTime=i):t.i=!0)}}var t=this;uo(this.g,HTMLMediaElement.HAVE_FUTURE_DATA,this.j,function(){e()})},d.release=function(){this.j&&(this.j.release(),this.j=null),this.g=null},d.$f=function(e){this.h=this.i?this.h:e},d.Rd=function(){var e=this.i?this.g.currentTime:this.h;return e instanceof Date&&(e=e.getTime()/1e3-(nm(this)||0),e=im(this,e)),e||0},d.Oh=function(){return 0},d.Mh=function(){return 0},d.Nh=function(){return!1},d.Gi=function(){},d.si=function(){var e=Zu(this.g.buffered);return e!=null&&e>=this.g.duration-1};function nm(e){return e.g.getStartDate&&(e=e.g.getStartDate().getTime(),!isNaN(e))?e/1e3:null}function im(e,t){return e=e.g.seekable,e.length>0&&(t=Math.max(e.start(0),t),t=Math.min(e.end(e.length-1),t)),t}function rm(e,t,n,i,r,o){var s=this;this.h=e,this.g=t.presentationTimeline,this.l=n,this.u=r,this.o=null,this.i=new Zc(e,t.presentationTimeline,n,o),this.j=new qg(e,function(){e:{var u=s.i;u.m=!0,u.B=!1,u.i&&u.i.Da(u.h.gapJumpTimerTime),ps(u);var a=ef(s.j);if(u=um(s,a),!vg()&&Math.abs(u-a)>.001){a=!1;var l=pe().Ti();if(l){var c=Date.now()/1e3;(!s.o||s.o<c-l)&&(s.o=c,a=!0)}else a=!0;if(a){Jg(s.j,u),u=void 0;break e}}s.u(),u=void 0}return u},function(u){var a=s.i;a.g.seeking&&!a.m&&(a.m=!0,a.l=u),a.i&&a.i.Da(a.h.gapJumpTimerTime),ps(a)},function(){return om(s,i)}),this.m=new ge(function(){if(s.h.readyState!=0&&!s.h.paused){var u=ef(s.j),a=s.g.$b(),l=s.g.Gb();l-a<3&&(a=l-3),u<a&&(u=um(s,u),s.h.currentTime=u)}})}d=rm.prototype,d.ready=function(){this.m.Da(.25)},d.release=function(){this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.m&&(this.m.stop(),this.m=null),this.h=this.j=this.g=this.l=null,this.u=function(){}},d.$f=function(e){Jg(this.j,om(this,e))},d.Rd=function(){var e=ef(this.j);return this.h.readyState>0&&!this.h.paused?am(this,e):e},d.Oh=function(){return this.i.H},d.Mh=function(){return this.i.G},d.Nh=function(){return this.i.C};function om(e,t){return t==null?t=e.g.getDuration()<1/0?e.g.$b():e.g.Gb():t instanceof Date?t=t.getTime()/1e3-(e.g.m||e.g.i):t<0&&(t=e.g.Gb()+t),sm(e,am(e,t))}d.Gi=function(){this.i.Bd()},d.si=function(){if(this.g.W()){var e=this.g.Jc(),t=Zu(this.h.buffered);if(t!=null&&t>=e)return!0}return!1};function sm(e,t){var n=e.g.getDuration();return t>=n?n-e.l.durationBackoff:t}function um(e,t){var n=e.l.rebufferingGoal,i=e.l.safeSeekOffset,r=e.g.$b(),o=e.g.Gb(),s=e.g.getDuration();o-r<3&&(r=o-3);var u=e.g.be(n),a=e.g.be(i);return n=e.g.be(n+i),t>=s?sm(e,t):t>o?o-e.l.safeSeekEndOffset:t<r?e.g.W()&&e.l.returnToEndOfLiveWindowWhenOutside?o-e.l.safeSeekEndOffset:_c(e.h.buffered,a)?a:n:t>=u||_c(e.h.buffered,t)?t:n}function am(e,t){var n=e.g.$b();return t<n?n:(e=e.g.Gb(),t>e?e:t)}function Se(e){this.g=e,this.m=null,this.i=0,this.o=!1}d=Se.prototype,d.getNumReferences=function(){return this.g.length},d.getNumEvicted=function(){return this.i},d.release=function(){this.o||(this.g=[],this.m&&this.m.stop(),this.m=null)},d.Ck=function(){this.o=!0},d.Fb=function(e){for(var t=m(this.g),n=t.next();!n.done;n=t.next())e(n.value)};function Gn(e){return e.g[0]||null}d.find=function(e){for(var t=this.g.length-1,n=t;n>=0;--n){var i=this.g[n],r=n<t?this.g[n+1].startTime:i.endTime;if(e>=i.startTime&&e<r)return n+this.i}return this.g.length&&e<this.g[0].startTime?this.i:null},d.get=function(e){return this.g.length==0?null:(e-=this.i,e<0||e>=this.g.length?null:this.g[e])},d.offset=function(e){if(!this.o)for(var t=m(this.g),n=t.next();!n.done;n=t.next())n.value.offset(e)},d.tf=function(e){if(!this.o&&e.length){var t=Math.round(e[0].startTime*1e3)/1e3;this.g=this.g.filter(function(n){return Math.round(n.startTime*1e3)/1e3<t}),this.g.push.apply(this.g,H(e))}},d.ke=function(e,t){var n=this;e=e.filter(function(i){return i.endTime>t&&(n.g.length==0||i.endTime>n.g[0].startTime)}),this.tf(e),this.Ya(t)},d.Ya=function(e){if(!this.o){var t=this.g.length;this.g=this.g.filter(function(n){return n.endTime>e}),this.i+=t-this.g.length}},d.pd=function(e,t,n){if(n=n===void 0?!1:n,!this.o){for(;this.g.length&&this.g[this.g.length-1].startTime>=t;)this.g.pop();for(;this.g.length&&this.g[0].endTime<=e;)this.g.shift(),n||this.i++;this.g.length!=0&&(e=this.g[this.g.length-1],t=new Q(e.startTime,t,e.C,e.startByte,e.endByte,e.ba,e.timestampOffset,e.appendWindowStart,e.appendWindowEnd,e.g,e.tilesLayout,e.B,e.h,e.status,e.aesKey),t.mimeType=e.mimeType,t.codecs=e.codecs,t.i=e.i,this.g[this.g.length-1]=t)}},d.Rf=function(e,t){var n=this;this.o||(this.m&&this.m.stop(),this.m=new ge(function(){var i=t();i?n.g.push.apply(n.g,H(i)):(n.m.stop(),n.m=null)}),this.m.Da(e))},Se.prototype[Symbol.iterator]=function(){return this.Xb(0)},Se.prototype.Xb=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this.find(e);if(i==null)return null;var r=this.get(i);n?i++:i--;var o=-1;if(r&&r.g.length>0)for(var s=r.g.length-1;s>=0;--s){var u=r.g[s];if(e>=u.startTime&&e<u.endTime){if(!t){for(;s&&!u.l;)s--,u=r.g[s];if(!u.l)return Xn("No independent partial segment found!"),null}n?i--:i++,o=s-1;break}}return new Tn(this,i,o,n)},Se.prototype.We=function(){return-1};function sa(e,t,n){return e=new Q(e,e+t,function(){return n},0,null,null,e,e,e+t),new Se([e])}K("shaka.media.SegmentIndex",Se),Se.forSingleSegment=sa,Se.prototype.getIteratorForTime=Se.prototype.Xb,Se.prototype.updateEvery=Se.prototype.Rf,Se.prototype.fit=Se.prototype.pd,Se.prototype.evict=Se.prototype.Ya,Se.prototype.mergeAndEvict=Se.prototype.ke,Se.prototype.offset=Se.prototype.offset,Se.prototype.get=Se.prototype.get,Se.prototype.find=Se.prototype.find,Se.prototype.markImmutable=Se.prototype.Ck,Se.prototype.release=Se.prototype.release,Se.prototype.getNumEvicted=Se.prototype.getNumEvicted,Se.prototype.getNumReferences=Se.prototype.getNumReferences;function Tn(e,t,n,i){this.i=e,this.h=t,this.g=n,this.reverse=i}d=Tn.prototype,d.Kd=function(e){this.reverse=e},d.Aj=function(){return this.h},d.current=function(){var e=this.i.get(this.h);return e&&e.g.length>0&&e.m&&this.g>=e.g.length&&(this.h++,this.g=0,e=this.i.get(this.h)),e&&e.g.length>0?e.g[this.g]:e},d.next=function(){var e=this.i.get(this.h);return this.reverse?e&&e.g.length>0?(this.g--,this.g<0&&(this.h--,this.g=(e=this.i.get(this.h))&&e.g.length>0?e.g.length-1:0)):(this.h--,this.g=0):e&&e.g.length>0?(this.g++,e.m&&this.g==e.g.length&&(this.h++,this.g=0)):(this.h++,this.g=0),e=this.current(),{value:e,done:!e}},d.kh=function(){var e=this.current();if(e&&e.Xc&&!e.l&&(e=this.i.get(this.h))&&e.g.length>0)for(var t=e.g[this.g];t.l&&!(this.g<=0);)this.g--,t=e.g[this.g]},K("shaka.media.SegmentIterator",Tn),Tn.prototype.resetToLastIndependent=Tn.prototype.kh,Tn.prototype.next=Tn.prototype.next,Tn.prototype.current=Tn.prototype.current,Tn.prototype.currentPosition=Tn.prototype.Aj,Tn.prototype.setReverse=Tn.prototype.Kd;function qe(){Se.call(this,[]),this.h=[]}$e(qe,Se),d=qe.prototype,d.clone=function(){var e=new qe;return e.h=this.h.slice(),e.i=this.i,e},d.release=function(){this.h=[]},d.Fb=function(e){for(var t=m(this.h),n=t.next();!n.done;n=t.next())n.value.Fb(e)};function ZS(e,t){e=m(e.h);for(var n=e.next();!n.done;n=e.next())t(n.value)}d.find=function(e){for(var t=this.i,n=m(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.find(e);if(r!=null)return r+t;t+=i.getNumEvicted()+i.getNumReferences()}return null};function ew(e,t){e=m(e.h);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.find(t)!=null)return n.We();return-1}d.get=function(e){for(var t=this.i,n=m(this.h),i=n.next();!i.done;i=n.next()){i=i.value;var r=i.get(e-t);if(r)return r;r=i.getNumReferences(),t+=i.getNumEvicted()+r}return null},d.offset=function(){},d.tf=function(){},d.Ya=function(e){if(this.h.length){var t=this.h[0];t.Ya(e),t.getNumReferences()==0&&(this.h.shift(),this.i+=t.getNumEvicted(),t.release(),this.Ya(e))}},d.ke=function(){},d.pd=function(){},d.Rf=function(){},K("shaka.media.MetaSegmentIndex",qe),qe.prototype.updateEvery=qe.prototype.Rf,qe.prototype.fit=qe.prototype.pd,qe.prototype.mergeAndEvict=qe.prototype.ke,qe.prototype.evict=qe.prototype.Ya,qe.prototype.merge=qe.prototype.tf,qe.prototype.offset=qe.prototype.offset,qe.prototype.get=qe.prototype.get,qe.prototype.find=qe.prototype.find,qe.prototype.forEachTopLevelReference=qe.prototype.Fb,qe.prototype.release=qe.prototype.release;function hs(e){var t=this;this.g=e,this.j=!1,this.i=this.g.cf(),this.h=new ge(function(){t.g.Ei(t.i*.25)})}hs.prototype.release=function(){this.set(this.Tc()),this.h&&(this.h.stop(),this.h=null),this.g=null},hs.prototype.set=function(e){this.i=e,tf(this)},hs.prototype.Tc=function(){return this.g.Tc()};function tf(e){e.h.stop();var t=e.j?0:e.i;if(t>=0)try{e.g.cf()!=t&&e.g.wh(t);return}catch{}e.h.Da(.25),e.g.cf()!=0&&e.g.wh(0)}function nf(e){var t=this;this.j=e,this.h=new Ee,this.g=new Set,this.i=new ge(function(){lm(t,!1)}).Jb(),e.paused||this.i.Da(.25),this.h.D(e,"playing",function(){t.i.Jb().Da(.25)}),this.h.D(e,"pause",function(){t.i.stop()})}nf.prototype.release=function(){this.h&&(this.h.release(),this.h=null),this.i.stop();for(var e=m(this.g),t=e.next();!t.done;t=e.next())t.value.release();this.g.clear()};function lm(e,t){var n=e.j.currentTime;e=m(e.g);for(var i=e.next();!i.done;i=e.next())i.value.j(n,t)}function ua(e){Le.call(this),this.g=new Map,this.h=e}$e(ua,Le),ua.prototype.release=function(){this.g.clear(),Le.prototype.release.call(this)};function tw(e,t){var n=e.g.get(t);return n||(n={re:[],pg:null,contentType:t},e.g.set(t,n)),n}function nw(e,t,n){var i=tw(e,t.contentType);iw(e,i),e={yd:t,position:n},i=i.re,t=i.findIndex(function(r){return r.position>=n}),t>=0?i.splice(t,i[t].position==n?1:0,e):i.push(e)}ua.prototype.j=function(e){for(var t=m(this.g.values()),n=t.next();!n.done;n=t.next()){n=n.value;var i=n.pg;e:{for(var r=n.re,o=r.length-1;o>=0;o--){var s=r[o];if(s.position<=e){r=s.yd;break e}}r=null}o=r&&!(i===r||i&&r&&i.bandwidth==r.bandwidth&&i.audioSamplingRate==r.audioSamplingRate&&i.codecs==r.codecs&&i.contentType==r.contentType&&i.frameRate==r.frameRate&&i.height==r.height&&i.mimeType==r.mimeType&&i.channelsCount==r.channelsCount&&i.pixelAspectRatio==r.pixelAspectRatio&&i.width==r.width),s=r&&i&&r.label&&i.label&&i.label!==r.label;var u=r&&i&&r.language&&i.language&&i.language!==r.language;i=r&&i&&r.roles&&i.roles&&!Pi(i.roles,r.roles),(s||u||i)&&cm(this,e,r.contentType)&&(n.pg=r,i=new z("audiotrackchange",new Map([["quality",r],["position",e]])),this.dispatchEvent(i)),o&&cm(this,e,r.contentType)&&(n.pg=r,JSON.stringify(r),n=new z("qualitychange",new Map([["quality",r],["position",e]])),this.dispatchEvent(n))}};function cm(e,t,n){return!!((e=e.h()[n])&&e.length>0&&(n=e[e.length-1].end,t>=e[0].start&&t<n))}function iw(e,t){if((e=e.h()[t.contentType])&&e.length>0){var n=e[0].start,i=e[e.length-1].end,r=t.re;t.re=r.filter(function(o,s){return!(o.position<=n&&s+1<r.length&&r[s+1].position<=n||o.position>=i)})}else t.re=[]}function aa(e){var t={bandwidth:e.bandwidth||0,audioSamplingRate:null,codecs:e.codecs,contentType:e.type,frameRate:null,height:null,mimeType:e.mimeType,channelsCount:null,pixelAspectRatio:null,width:null,label:null,roles:e.roles,language:null};return e.type=="video"&&(t.frameRate=e.frameRate||null,t.height=e.height||null,t.pixelAspectRatio=e.pixelAspectRatio||null,t.width=e.width||null),e.type=="audio"&&(t.audioSamplingRate=e.audioSamplingRate,t.channelsCount=e.channelsCount,t.label=e.label||null,t.language=e.language),t}function gs(e){Le.call(this),this.h=new Map,this.i=e,this.g=null}$e(gs,Le),gs.prototype.release=function(){this.h.clear(),this.g&&(this.g.stop(),this.g=null),Le.prototype.release.call(this)};function rf(e,t){var n=t.schemeIdUri+"_"+t.id+"_"+(t.startTime.toFixed(1)+"_"+t.endTime.toFixed(1));e.h.has(n)||(e.h.set(n,t),t=new z("regionadd",new Map([["region",t]])),e.dispatchEvent(t),rw(e))}function rw(e){e.g||(e.g=new ge(function(){for(var t=e.i(),n=m(e.h),i=n.next();!i.done;i=n.next()){var r=m(i.value);i=r.next().value,r=r.next().value,r.endTime<t.start&&(e.h.delete(i),i=new z("regionremove",new Map([["region",r]])),e.dispatchEvent(i))}!e.h.size&&e.g&&(e.g.stop(),e.g=null)}).Da(2))}function la(e,t,n,i,r){function o(s,u){return!(u.fastSwitching&&s.Xc&&s.je)}this.m=e,this.i=t,this.l=n,this.g=new Map,this.j=new Map,this.h=null,this.o=i,this.u=r||o}function ow(e,t){e.l=t,e=m(e.g.values());for(var n=e.next();!n.done;n=e.next())n.value.g=t}function ms(e,t,n){if(n=n===void 0?!1:n,!e.i.segmentIndex||(e.h||(e.h=e.i.segmentIndex.Xb(t,!0,e.o)),!e.h))return Promise.resolve();for(n&&e.h.next(),t=[];e.g.size<e.m&&(n=e.h.next().value,!!n);){var i=!0;if(n.isPreload()&&n.endByte!=null&&(i=!1),n.bc()==2&&(i=!1),n.ac(!1)&&(i=!1),i&&n.ba&&t.push(fm(e,n.ba)),i&&!e.g.has(n)&&(i=new sf(e.l),t.push(hm(i,n,e.i)),e.g.set(n,i)),!e.u(n,e.i))break}return of(e),Promise.all(t)}function fm(e,t){if(!e.i.segmentIndex||t.ac()||Array.from(e.j.keys()).some(function(r){return ls(r,t)}))return Promise.resolve();var n=new sf(e.l),i=hm(n,t,e.i);return e.j.set(t,n),i}function dm(e,t){t=m(t.keys());for(var n=t.next();!n.done;n=t.next())(n=n.value)&&vs(e,n)}function Kn(e){dm(e,e.g),dm(e,e.j),e.h=null}la.prototype.Ya=function(e,t){t=t===void 0?!1:t;for(var n=m(this.g.keys()),i=n.next();!i.done;i=n.next())i=i.value,e>i.endTime&&vs(this,i);t&&of(this)},la.prototype.Kd=function(e){this.o=e,this.h&&this.h.Kd(e)};function of(e){if(e.g.size)for(var t=Array.from(e.g.keys()),n=m(e.j.keys()),i=n.next(),r={};!i.done;r={Qg:void 0},i=n.next())r.Qg=i.value,t.some(function(o){return function(s){return ls(s.ba,o.Qg)}}(r))||vs(e,r.Qg)}function pm(e,t){e.m=t;for(var n=Array.from(e.g.keys());n.length>t;){var i=n.pop();i&&vs(e,i)}of(e)}function sw(e,t){t&&t!==e.i&&(Kn(e),e.i=t)}function vs(e,t){var n=e.g;t instanceof Wt&&(n=e.j),e=n.get(t),n.delete(t),e&&e.abort()}function sf(e){this.g=e,this.oe=this.Ch=null}function hm(e,t,n){var i=new Uint8Array(0);return e.oe=e.g(t,n,function(r){return k(function(o){if(o.g==1)return i.byteLength>0?i=it(i,r):i=r,e.Ch?T(o,e.Ch(i),3):o.A(0);i=new Uint8Array(0),G(o)})}),e.oe.promise.catch(function(r){return r instanceof D&&r.code==7001?Promise.resolve():Promise.reject(r)})}sf.prototype.abort=function(){this.oe&&this.oe.abort()},K("shaka.config.CrossBoundaryStrategy",{KEEP:"keep",RESET:"reset",RESET_TO_ENCRYPTED:"reset_to_encrypted",RESET_ON_ENCRYPTION_CHANGE:"RESET_ON_ENCRYPTION_CHANGE"});function uf(e){var t=Jt(e),n=t.split("/")[0];return e=Kt(e),{type:n,mimeType:t,codecs:e,language:null,height:null,width:null,channelCount:null,sampleRate:null,closedCaptions:new Map,ze:null,colorGamut:null,frameRate:null,timescale:null}}function uw(e,t,n){function i(E){x=E.name;var R=E.reader;R.skip(24);var M=R.Ca(),P=R.Ca();R.skip(50),p=String(M),f=String(P),E.reader.Ka()&&ce(E)}function r(E){var R=yg(E.reader);h=R.channelCount,g=R.sampleRate,o(E.name)}function o(E){switch(E=E.toLowerCase(),E){case"avc1":case"avc3":u.push(E+".42E01E"),l=!0;break;case"hev1":case"hvc1":u.push(E+".1.6.L93.90"),l=!0;break;case"dvh1":case"dvhe":u.push(E+".05.04"),l=!0;break;case"vp09":u.push(E+".00.10.08"),l=!0;break;case"av01":u.push(E+".0.01M.08"),l=!0;break;case"mp4a":s.push("mp4a.40.2"),a=!0;break;case"ac-3":case"ec-3":case"ac-4":case"opus":case"flac":s.push(E),a=!0;break;case"apac":s.push("apac.31.00"),a=!0}}var s=[],u=[],a=!1,l=!1,c=null,f=null,p=null,h=null,g=null,v=null,y=null,S=null,x;if(new Ne().box("moov",ce).box("trak",ce).box("mdia",ce).S("mdhd",function(E){E=Ju(E.reader,E.version),c=E.language,S=E.timescale}).box("minf",ce).box("stbl",ce).S("stsd",gi).box("mp4a",function(E){var R=yg(E.reader);h=R.channelCount,g=R.sampleRate,E.reader.Ka()?ce(E):o(E.name)}).box("esds",function(E){E=E.reader;for(var R="mp4a",M,P;E.Ka();){M=E.Z();for(var N=E.Z();N&128;)N=E.Z();if(M==3)E.Ca(),N=E.Z(),N&128&&E.Ca(),N&64&&E.skip(E.Z()),N&32&&E.Ca();else if(M==4)P=E.Z(),E.skip(12);else if(M==5)break}P&&(R+="."+ss(P),M==5&&E.Ka()&&(M=E.Z(),P=(M&248)>>3,P===31&&E.Ka()&&(P=32+((M&7)<<3)+((E.Z()&224)>>5)),R+="."+P)),s.push(R),a=!0}).box("ac-3",r).box("ec-3",r).box("ac-4",r).box("Opus",r).box("fLaC",r).box("apac",r).box("avc1",i).box("avc3",i).box("hev1",i).box("hvc1",i).box("dva1",i).box("dvav",i).box("dvh1",i).box("dvhe",i).box("vp09",i).box("av01",i).box("avcC",function(E){var R=x||"";switch(x){case"dvav":R="avc3";break;case"dva1":R="avc1"}E=E.reader,E.skip(1),E=R+"."+ss(E.Z())+ss(E.Z())+ss(E.Z()),u.push(E),l=!0}).box("hvcC",function(E){var R=x||"";switch(x){case"dvh1":R="hvc1";break;case"dvhe":R="hev1"}var M=E.reader;M.skip(1),E=M.Z();var P=["","A","B","C"][E>>6],N=E&31,b=M.U(),_=(E&32)>>5?"H":"L";E=[M.Z(),M.Z(),M.Z(),M.Z(),M.Z(),M.Z()],M=M.Z();for(var j=0,O=0;O<32&&(j|=b&1,O!=31);O++)j<<=1,b>>=1;for(R=R+("."+P+N)+("."+ss(j,!0)),R+="."+_+M,P="",N=E.length;N--;)((_=E[N])||P)&&(P="."+_.toString(16).toUpperCase()+P);R+=P,u.push(R),l=!0}).box("dvcC",function(E){var R=x||"";switch(x){case"hvc1":R="dvh1";break;case"hev1":R="dvhe";break;case"avc1":R="dva1";break;case"avc3":R="dvav";break;case"av01":R="dav1"}var M=E.reader;M.skip(2),E=M.Z(),M=M.Z(),u.push(R+"."+Qt(E>>1&127)+"."+Qt(E<<5&32|M>>3&31)),l=!0}).box("dvvC",function(E){var R=x||"";switch(x){case"hvc1":R="dvh1";break;case"hev1":R="dvhe";break;case"avc1":R="dva1";break;case"avc3":R="dvav";break;case"av01":R="dav1"}var M=E.reader;M.skip(2),E=M.Z(),M=M.Z(),u.push(R+"."+Qt(E>>1&127)+"."+Qt(E<<5&32|M>>3&31)),l=!0}).S("vpcC",function(E){var R=x||"",M=E.reader;E=M.Z();var P=M.Z();M=M.Z()>>4&15,u.push(R+"."+Qt(E)+"."+Qt(P)+"."+Qt(M)),l=!0}).box("av1C",function(E){var R=x||"";switch(x){case"dav1":R="av01"}var M=E.reader;M.skip(1),E=M.Z(),M=M.Z();var P=E>>>5,N=(M&64)>>6;u.push(R+"."+P+"."+Qt(E&31)+(M>>>7?"H":"M")+"."+Qt(P===2&&N?(M&32)>>5?12:10:N?10:8)+"."+((M&16)>>4)+"."+((M&8)>>3)+((M&4)>>2)+(M&3)+"."+Qt(1)+"."+Qt(1)+"."+Qt(1)+".0"),l=!0}).box("enca",Ku).box("encv",$t).box("sinf",ce).box("frma",function(E){E=Oc(E.reader).codec,o(E)}).box("colr",function(E){u=u.map(function(P){if(P.startsWith("av01.")){var N=E.reader,b=N.Pa(),_=N.Tb(4,!1),j=String.fromCharCode(_[0]);if(j+=String.fromCharCode(_[1]),j+=String.fromCharCode(_[2]),j+=String.fromCharCode(_[3]),j==="nclx"){_=N.Ca(),j=N.Ca();var O=N.Ca(),F=N.Z()>>7,V=P.split(".");V.length==10&&(V[6]=Qt(_),V[7]=Qt(j),V[8]=Qt(O),V[9]=String(F),P=V.join("."))}N.seek(b)}return P});var R=cS(E.reader),M=R.colorGamut;v=R.ze,y=M}).parse(e||t,!0,!0),!s.length&&!u.length)return null;var w=a&&!l,I=new Map;if(l&&!n){n=new Vn("video/mp4"),e&&n.init(e);try{n.Af(t);for(var L=m(n.Zf()),A=L.next();!A.done;A=L.next()){var C=A.value;I.set(C,C)}}catch{}n.Qd()}return{type:w?"audio":"video",mimeType:w?"audio/mp4":"video/mp4",codecs:af(s.concat(u)).join(", "),language:c,height:f,width:p,channelCount:h,sampleRate:g,closedCaptions:I,ze:v,colorGamut:y,frameRate:null,timescale:S}}function af(e){var t=new Set,n=[];e=m(e);for(var i=e.next();!i.done;i=e.next()){i=i.value;var r=Bi(i);t.has(r)||(n.push(i),t.add(r))}return t=oc("audio",n),i=oc("video",n),e=oc(he,n),i=aw(i),t=t.concat(i).concat(e),n.length&&!t.length?n:t}function aw(e){if(e.length<=1)return e;var t=e.find(function(n){return n.startsWith("dvav.")||n.startsWith("dva1.")||n.startsWith("dvh1.")||n.startsWith("dvhe.")||n.startsWith("dav1.")||n.startsWith("dvc1.")||n.startsWith("dvi1.")});return t?jt('video/mp4; codecs="'+t+'"')?[t]:e.filter(function(n){return n!=t}):e}function lw(e){var t=null;return new Ne().box("moov",ce).box("trak",ce).box("mdia",ce).box("minf",ce).box("stbl",ce).S("stsd",gi).box("encv",$t).box("enca",Ku).box("sinf",ce).box("schi",ce).S("tenc",function(n){n=n.reader,n.Z(),n.Z(),n.Z(),n.Z(),n=n.Tb(16,!1),t=oi(n)}).parse(e,!0),t}function lf(e,t,n){var i,r,o,s,u;return k(function(a){if(a.g==1)return i=t,i.cryptoKey?a.A(2):T(a,i.fetchKey(),3);if(r=i.iv,!r)for(r=re(new ArrayBuffer(16)),o=i.firstMediaSequenceNumber+n,s=r.byteLength-1;s>=0;s--)r[s]=o&255,o>>=8;return t.blockCipherMode=="CBC"?u={name:"AES-CBC",iv:r}:u={name:"AES-CTR",counter:r,length:64},a.return(B.crypto.subtle.decrypt(u,i.cryptoKey,e))})}function ao(e,t,n){var i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:return i=lo(e),(r=cw.get(i))?c.return(r):(o=0,s=ot([e],n),se(c,2),s.method="HEAD",T(c,t.request(o,s).promise,4));case 4:u=c.h,r=u.headers["content-type"],fe(c,3);break;case 2:if(a=ue(c),!a||a.code!=1002&&a.code!=1001){c.A(3);break}return s.method="GET",T(c,t.request(o,s).promise,6);case 6:l=c.h,r=l.headers["content-type"];case 3:return c.return(r?r.toLowerCase().split(";").shift():"")}})}function lo(e){return e=new tt(e).Sb.split("/").pop().split("."),e.length==1?"":e.pop().toLowerCase()}function ys(e,t,n,i,r){return e=ot(e,i,r),(t!=0||n!=null)&&(e.headers.Range=n?"bytes="+t+"-"+n:"bytes="+t+"-"),e}var cw=new Map().set("mp4","video/mp4").set("m4v","video/mp4").set("m4a","audio/mp4").set("webm","video/webm").set("weba","audio/webm").set("mkv","video/webm").set("ts","video/mp2t").set("ogv","video/ogg").set("ogg","audio/ogg").set("mpg","video/mpeg").set("mpeg","video/mpeg").set("mov","video/quicktime").set("m3u8","application/x-mpegurl").set("mpd","application/dash+xml").set("ism","application/vnd.ms-sstr+xml").set("mp3","audio/mpeg").set("aac","audio/aac").set("flac","audio/flac").set("wav","audio/wav").set("sbv","text/x-subviewer").set("srt","text/srt").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml").set("lrc","application/x-subtitle-lrc").set("ssa","text/x-ssa").set("ass","text/x-ssa").set("jpeg","image/jpeg").set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif").set("html","text/html").set("htm","text/html");function gm(e,t){var n=this;this.g=t,this.j=e,this.i=null,this.O=new Map,this.C=1,this.B=this.o=null,this.V=0,this.h=new Map,this.M=!1,this.X=null,this.F=!1,this.l=new qr(function(){return fw(n)}),this.R=Date.now()/1e3,this.m=new Map,this.T={projection:null,hfov:null},this.ha=0,this.aa=1/0,this.H=null,this.N=[],this.u=new ge(function(){if(n.j&&n.g)if(n.j.presentationTimeline.W()){var i=n.j.presentationTimeline.$b(),r=n.j.presentationTimeline.Gb();r-i>1?HS(n.g.Y,i,r):Yc(n.g.Y)}else Yc(n.g.Y),n.u&&n.u.stop();else n.u&&n.u.stop()}),this.I=null,this.J=!1,this.K=new ge(function(){var i=n.g.video;!i.ended&&n.I&&(n.J=!0,i.currentTime=n.I,n.I=null)}),this.G=new Ee}d=gm.prototype,d.destroy=function(){return this.l.destroy()};function fw(e){var t,n,i,r,o,s,u;return k(function(a){if(a.g==1){for(e.u&&e.u.stop(),e.u=null,e.K&&e.K.stop(),e.K=null,e.G&&(e.G.release(),e.G=null),t=[],n=m(e.h.values()),i=n.next();!i.done;i=n.next())r=i.value,Qn(r),t.push(ga(r)),r.ia&&(Kn(r.ia),r.ia=null);for(o=m(e.m.values()),s=o.next();!s.done;s=o.next())u=s.value,Kn(u);return T(a,Promise.all(t),2)}e.h.clear(),e.m.clear(),e.g=null,e.j=null,e.i=null,e.I=null,G(a)})}d.configure=function(e){if(this.i=e,this.X=new Fh({maxAttempts:Math.max(e.retryParameters.maxAttempts,2),baseDelay:e.retryParameters.baseDelay,backoffFactor:e.retryParameters.backoffFactor,fuzzFactor:e.retryParameters.fuzzFactor},!0),e.disableAudioPrefetch){var t=this.h.get("audio");t&&t.ia&&(Kn(t.ia),t.ia=null),t=m(this.m.keys());for(var n=t.next();!n.done;n=t.next())n=n.value,Kn(this.m.get(n)),this.m.delete(n)}for(e.disableTextPrefetch&&(t=this.h.get(he))&&t.ia&&(Kn(t.ia),t.ia=null),e.disableVideoPrefetch&&(t=this.h.get("video"))&&t.ia&&(Kn(t.ia),t.ia=null),t=m(this.h.keys()),n=t.next();!n.done;n=t.next())n=this.h.get(n.value),n.ia?(pm(n.ia,e.segmentPrefetchLimit),e.segmentPrefetchLimit>0||(Kn(n.ia),n.ia=null)):e.segmentPrefetchLimit>0&&(n.ia=ff(this,n.stream));e.disableAudioPrefetch||yw(this)};function dw(e,t,n){e.j.presentationTimeline.W()||(e.ha=t,e.aa=n)}d.start=function(e){var t=this;return k(function(n){if(n.g==1)return T(n,vw(t,e||new Map),2);_e(t.l),t.M=!0,G(n)})};function pw(e,t){var n,i,r,o,s,u;k(function(a){switch(a.g){case 1:return n=rt,e.V++,i=e.V,se(a,2),T(a,_g(e.g.Y,n.Na),4);case 4:fe(a,3);break;case 2:r=ue(a),e.g&&e.g.onError(r);case 3:o=Qe(t.mimeType,t.codecs),ia(e.g.Y,o,e.j.sequenceMode,t.external),s=e.g.Y.aa,(s.isTextVisible()||e.i.alwaysStreamText)&&e.V==i&&(u=fa(e,t),e.h.set(n.Na,u),Ct(e,u,0)),G(a)}})}function hw(e){var t=e.h.get(he);t&&(Qn(t),ga(t).catch(function(){}),e.H=e.h.get(he),e.h.delete(he),t.stream&&t.stream.closeSegmentIndex&&t.stream.closeSegmentIndex()),e.B=null}function mm(e,t){for(var n=e.g.Ob()<0,i=m(e.h.values()),r=i.next();!r.done;r=i.next())r=r.value,r.sa&&r.sa.Kd(n),r.ia&&r.ia.Kd(n);for(i=m(e.m.values()),r=i.next();!r.done;r=i.next())r.value.Kd(n);(n=e.h.get("video"))&&(i=n.stream)&&(t?(t=i.trickModeVideo)&&!n.Nc&&(co(e,t,!1,0,!1),n.Nc=i):(t=n.Nc)&&(n.Nc=null,co(e,t,!0,0,!1)))}function vm(e,t,n,i,r,o){n=n===void 0?!1:n,i=i===void 0?0:i,r=r===void 0?!1:r,o=o===void 0?!1:o,e.o=t,e.M&&(t.video&&co(e,t.video,n,i,r,o),t.audio&&co(e,t.audio,n,i,r,o))}function ca(e,t){k(function(n){if(n.g==1)return e.H=null,e.B=t,e.M?t.segmentIndex?n.A(2):T(n,t.createSegmentIndex(),2):n.return();co(e,t,!0,0,!1),G(n)})}function gw(e){var t=e.h.get(he);t&&co(e,t.stream,!0,0,!0)}function mw(e,t){for(var n=m(e.O.entries()),i=n.next();!i.done;i=n.next()){var r=m(i.value);i=r.next().value,r=r.next().value,i.includes(t.type)&&(r(),e.O.delete(i))}}function co(e,t,n,i,r,o){var s=e.h.get(t.type);s||t.type!=he?s&&(s.Nc&&(t.trickModeVideo?(s.Nc=t,t=t.trickModeVideo):s.Nc=null),s.stream!=t||r)&&(e.m.has(t)?s.ia=e.m.get(t):s.ia&&sw(s.ia,t),t.type==he&&s.stream!=t&&(r=Qe(t.mimeType,t.codecs),ia(e.g.Y,r,e.j.sequenceMode,t.external)),e.m.has(s.stream)||s.stream.closeSegmentIndex&&(s.Ia?e.O.getOrInsert("("+s.type+":"+s.stream.id+")",s.stream.closeSegmentIndex):s.stream.closeSegmentIndex()),r=s.stream.isAudioMuxedInVideo!=t.isAudioMuxedInVideo,s.stream=t,s.sa=null,s.gg=!!o,t.dependencyStream?s.Gc=fa(e,t.dependencyStream):s.Gc=null,Sm(e),r&&(s.mb=null,s.uc=null,s.tc=null,t.isAudioMuxedInVideo&&(t=null,s.type==="video"?t=e.h.get("audio"):s.type==="audio"&&(t=e.h.get("video")),t&&(ga(t).catch(function(){}),t.mb=null,t.uc=null,t.tc=null,cf(e,t),ym(e,t).catch(function(u){e.g&&e.g.onError(u)})))),n?s.Wb?s.Nd=!0:s.Ia?(s.Ub=!0,s.ld=i,s.Nd=!0):(Qn(s),hf(e,s,!0,i).catch(function(u){e.g&&e.g.onError(u)})):s.Ia||s.ob||Ct(e,s,0),ym(e,s).catch(function(u){e.g&&e.g.onError(u)})):pw(e,t)}function ym(e,t){var n,i,r;return k(function(o){if(o.g==1)return t.Va?(n=t.stream,i=t.Va,n.segmentIndex?o.A(2):T(o,n.createSegmentIndex(),2)):o.return();if(o.g!=4)return r=n.dependencyStream,!r||r.segmentIndex?o.A(4):T(o,r.createSegmentIndex(),4);if(t.Va!=i||t.stream!=n)return o.return();var s=e.g.Zb(),u=Ki(e.g.Y,t.type),a=t.stream.segmentIndex.find(t.Ha?t.Ha.endTime:s),l=a==null?null:t.stream.segmentIndex.get(a);a=l?Uc(l):null,l&&!a&&(a=(l.endTime-l.getStartTime())*(t.stream.bandwidth||e.o.bandwidth)/8),a?((l=l.ba)&&(a+=(l.endByte?l.endByte+1-l.startByte:null)||0),l=e.g.getBandwidthEstimate(),s=a*8/l<(u||0)-s-e.i.rebufferingGoal||t.Va.h.g>a):s=!0,s&&t.Va.abort(),G(o)})}d.bd=function(){if(this.g){for(var e=this.g.Zb(),t=m(this.h.keys()),n=t.next();!n.done;n=t.next()){var i=n.value;n=this.h.get(i);var r;if((r=!this.J)&&(r=this.g.Y,i==he?(r=r.h,r=r.g==null||r.h==null?!1:e>=r.g&&e<r.h):(r=ro(r,i),r=_c(r,e)),r=!r),r){if(this.R=0,n.ia&&(n.ia.h=null),n.type==="audio"){r=m(this.m.values());for(var o=r.next();!o.done;o=r.next())o.value.h=null}n.sa=null,(Ki(this.g.Y,i)!=null||n.Ia)&&cf(this,n),n.Va&&(n.Va.abort(),n.Va=null),i===he&&(i=this.g.Y,i.K&&i.K.Qd()),n.bd=!0}!this.J||n.Wb||n.Ia||n.ob||Ct(this,n,0)}xs(this)&&vf(this)}};function cf(e,t){t.Wb||t.Ub||(t.Ia?(t.Ub=!0,t.ld=0):zc(e.g.Y,t.type)==null?t.ob==null&&Ct(e,t,0):(Qn(t),hf(e,t,!1,0).catch(function(n){e.g&&e.g.onError(n)})))}function vw(e,t){var n,i,r,o,s,u,a,l;return k(function(c){if(c.g==1){if(!e.o)throw new D(2,5,5006);return n=va(e,!0),i=e.g.Y,T(c,i.init(n,e.j.sequenceMode,e.j.type,e.j.ignoreManifestTimestampsInSegmentsMode),2)}for(_e(e.l),e.updateDuration(),r=m(n.keys()),o=r.next();!o.done;o=r.next())s=o.value,u=n.get(s),!e.h.has(s)&&(a=fa(e,u),(l=t.get(u.id))&&(ow(l,function(f,p,h){return ha(f,p,h||null,e.i.retryParameters,e.g.wc)}),a.ia=l),e.h.set(s,a),Ct(e,a,0));Sm(e),G(c)})}function fa(e,t){var n={stream:t,type:t.type,sa:null,ia:ff(e,t),Ha:null,mb:null,pf:null,uc:null,tc:null,mf:null,nf:null,Nc:null,endOfStream:!1,Ia:!1,ob:null,Ub:!1,ld:0,Nd:!1,Wb:!1,bd:!0,gg:!1,gh:!1,vd:!1,Va:null,Gc:null};return t.dependencyStream&&(n.Gc=fa(e,t.dependencyStream)),n}function ff(e,t){if(t.type==="video"&&e.i.disableVideoPrefetch||t.type==="audio"&&e.i.disableAudioPrefetch||t.type===he&&(t.mimeType=="application/cea-608"||t.mimeType=="application/cea-708")||t.type===he&&e.i.disableTextPrefetch)return null;if(e.m.has(t))return e.m.get(t);var n=e.h.get(t.type);return(n=n&&n.ia)&&t===n.i?n:e.i.segmentPrefetchLimit>0?new la(e.i.segmentPrefetchLimit,t,function(i,r,o){return ha(i,r,o||null,e.i.retryParameters,e.g.wc)},e.g.Ob()<0,e.g.il):null}function yw(e){for(var t=e.i.segmentPrefetchLimit,n=e.i.prefetchAudioLanguages,i=m(e.j.variants),r=i.next(),o={};!r.done;o={Mb:void 0},r=i.next())if(o.Mb=r.value,o.Mb.audio)if(e.m.has(o.Mb.audio)){if(r=e.m.get(o.Mb.audio),pm(r,t),!(t>0&&n.some(function(u){return function(a){return Wr(u.Mb.audio.language,a)}}(o)))){var s=e.h.get(o.Mb.audio.type);r!==(s&&s.ia)&&Kn(r),e.m.delete(o.Mb.audio)}}else t<=0||!n.some(function(u){return function(a){return Wr(u.Mb.audio.language,a)}}(o))||!(r=ff(e,o.Mb.audio))||(o.Mb.audio.segmentIndex||o.Mb.audio.createSegmentIndex(),e.m.set(o.Mb.audio,r))}d.updateDuration=function(){var e=vg(),t=this.j.presentationTimeline.getDuration();t<1/0?(e&&(this.u&&this.u.stop(),Yc(this.g.Y)),this.g.Y.Ab(t)):e?(this.u&&this.u.Da(.5),this.g.Y.Ab(1/0)):this.g.Y.Ab(4294967296)};function Tw(e,t){var n,i,r,o,s,u,a,l,c;return k(function(f){switch(f.g){case 1:if(_e(e.l),n=rt,t.Ia||t.ob==null||t.Wb)return f.return();if(t.ob=null,!t.Ub){f.A(2);break}return T(f,hf(e,t,t.Nd,t.ld),3);case 3:return f.return();case 2:if(mw(e,t),t.stream.segmentIndex){f.A(4);break}return i=t.stream,se(f,5),T(f,t.stream.createSegmentIndex(),7);case 7:fe(f,6);break;case 5:return r=ue(f),T(f,gf(e,t,r),8);case 8:return f.return();case 6:if(i!=t.stream)return i.closeSegmentIndex&&i.closeSegmentIndex(),t.Ia||t.ob||Ct(e,t,0),f.return();case 4:if(!t.Gc){f.A(9);break}if(t.Gc.stream.segmentIndex){f.A(9);break}return se(f,11),T(f,t.Gc.stream.createSegmentIndex(),13);case 13:fe(f,9);break;case 11:ue(f);case 9:se(f,14),o=xw(e,t),o!=null&&(Ct(e,t,o),t.vd=!1),fe(f,15);break;case 14:return s=ue(f),T(f,gf(e,t,s),16);case 16:return f.return();case 15:if(t.type===n.Na)return f.return();if(u=[],t.stream&&!t.stream.isAudioMuxedInVideo&&u.push(t),a=t.type===n.$?n.va:n.$,(l=e.h.get(a))&&l.stream&&!l.stream.isAudioMuxedInVideo&&u.push(l),!e.M||!u.every(function(p){return p.endOfStream})){f.A(0);break}return T(f,e.g.Y.endOfStream(),18);case 18:_e(e.l),c=e.g.Y.getDuration(),c!=0&&c<e.j.presentationTimeline.getDuration()&&e.j.presentationTimeline.Ab(c),G(f)}})}function xw(e,t){if(pf(t))return FS(e.g.Y,t.stream.originalId||""),null;if(t.type==he&&VS(e.g.Y),t.stream.isAudioMuxedInVideo&&t.type=="audio")return null;if(t.type!=he&&Gi(e.g.Y))return ma(e,!0),null;var n=e.i.updateIntervalSeconds/Math.max(1,Math.abs(e.g.Ob()));if(!Ug(e.g.Y)&&t.type!=he)return n/2;var i=e.g.Zb();if(t.type==="audio")for(var r=m(e.m.keys()),o=r.next();!o.done;o=r.next())o=e.m.get(o.value),o.Ya(i,!0),ms(o,i);r=t.Ha?t.Ha.endTime:i;var s=BS(e.g.Y,t.type,i);o=Math.max(1,Math.max(e.i.rebufferingGoal,e.i.bufferingGoal)*e.C);var u=e.j.presentationTimeline.getDuration()-r,a=Ki(e.g.Y,t.type);if(u<1e-6&&a)return t.endOfStream=!0,t.type=="video"&&(n=e.h.get(he))&&pf(n)&&(n.endOfStream=!0),null;if(t.endOfStream=!1,s>=o)return n/2;if(u=!t.sa,a=da(e,t,i,a),!a)return e=1/0,(t=t.Ha)&&(e=t.endTime-t.startTime),Math.min(e/2,n);s=t.mb;var l=a.ba;s&&l&&ls(l,s)&&(s.g=l.g),s=!1,u&&t.gg&&(s=!0,t.gg=!1),u=1/0,l=Array.from(e.h.values()),l=m(l);for(var c=l.next();!c.done;c=l.next())c=c.value,pf(c)||c.sa&&!c.sa.current()||(u=Math.min(u,c.Ha?c.Ha.endTime:i));return r>=u+e.j.presentationTimeline.h?n:(t.ia&&t.sa&&!e.m.has(t.stream)&&(t.ia.Ya(a.startTime+.001),ms(t.ia,a.startTime).catch(function(){})),xs(e)&&Iw(e,t,a)||(Sw(e,t,i,a,s).catch(function(){}),t.Gc&&Tm(e,t.Gc,i,o)),null)}function da(e,t,n,i){if(t.sa){var r=t.sa.current();return r&&t.Ha&&Math.abs(t.Ha.startTime-r.startTime)<.001&&(r=t.sa.next().value),r}if(t.Ha||i)return r=t.Ha?t.Ha.endTime:i,n=e.g.Ob()<0,t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Xb(r,!1,n)),t.sa&&t.sa.next().value;i=e.j.sequenceMode||xs(e)?0:e.i.inaccurateManifestTolerance;var o=Math.max(n-i,0),s=e.g.Ob()<0;for(e=null,i&&(t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Xb(o,!1,s)),e=t.sa&&t.sa.next().value),e||(t.stream.segmentIndex&&(t.sa=t.stream.segmentIndex.Xb(n,!1,s)),e=t.sa&&t.sa.next().value);((r=e)==null?void 0:r.bc())===2;)i=n=void 0,e=(i=(n=t.sa)==null?void 0:n.next().value)!=null?i:null;return e}function Sw(e,t,n,i,r){var o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L;return k(function(A){switch(A.g){case 1:if(o=rt,s=t.stream,u=t.sa,t.Ia=!0,se(A,2),i.bc()==2)throw new D(1,1,1011);return T(A,Aw(e,t,i,r),4);case 4:return _e(e.l),e.F?A.return():(a=s.mimeType=="video/mp4"||s.mimeType=="audio/mp4",l=B.ReadableStream,e.i.lowLatencyMode&&e.j.isLowLatency&&l&&a&&(e.j.type!="HLS"||i.o)?(p=new Uint8Array(0),g=h=!1,y=function(C){var E,R,M;return k(function(P){switch(P.g){case 1:if(h||(g=!0,_e(e.l),e.F))return P.return();if(se(P,2),p=it(p,C),E=!1,R=0,new Ne().box("mdat",function(N){R=N.size+N.start,E=!0}).parse(p,!1,!0),!E){P.A(4);break}return M=p.subarray(0,R),p=p.subarray(R),T(P,df(e,t,n,s,i,M,!0,r),5);case 5:t.ia&&t.sa&&ms(t.ia,i.startTime,!0);case 4:fe(P,0);break;case 2:v=ue(P),G(P)}})},T(A,Ts(e,t,i,y),9)):(c=Ts(e,t,i),T(A,c,7)));case 7:return f=A.h,_e(e.l),e.F?A.return():(_e(e.l),t.Ub?(t.Ia=!1,Ct(e,t,0),A.return()):T(A,df(e,t,n,s,i,f,!1,r),6));case 9:if(S=A.h,v)throw v;if(g){A.A(10);break}return h=!0,_e(e.l),e.F?A.return():t.Ub?(t.Ia=!1,Ct(e,t,0),A.return()):T(A,df(e,t,n,s,i,S,!1,r),10);case 10:t.ia&&t.sa&&ms(t.ia,i.startTime,!0);case 6:if(_e(e.l),e.F)return A.return();t.Ha=i,u.next(),t.Ia=!1,t.gh=!1,x=e.g.Y.Hc(),w=x[t.type],JSON.stringify(w),t.Ub||(I=null,t.type===o.va?I=e.h.get(o.$):t.type===o.$&&(I=e.h.get(o.va)),I&&I.type==o.$?e.g.Bd(i,t.stream,I.stream.isAudioMuxedInVideo,!1):e.g.Bd(i,t.stream,t.stream.codecs.includes(","),!1)),Qn(t),Ct(e,t,0),fe(A,0);break;case 2:if(L=ue(A),_e(e.l,L),e.F)return A.return();if(t.Ia=!1,L.code==7001)t.Ia=!1,Qn(t),Ct(e,t,0),A.A(0);else if(t.type==o.Na&&e.i.ignoreTextStreamFailures)e.h.delete(o.Na),A.A(0);else return L.code==3017?T(A,ww(e,t,L),0):(t.vd=!0,L.category==1&&t.ia&&vs(t.ia,i),L.severity=2,T(A,gf(e,t,L),0))}})}function Tm(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,g,v,y;return k(function(S){switch(S.g){case 1:for(r=rt,o=t.stream,a=(u=(s=o.segmentIndex)&&s.Xb(n))&&u.next().value;a&&e.N.includes(a.startTime);)a=u&&u.next().value;if(!a){S.A(0);break}if(l=a.ba,!l||ls(l,t.mb)){S.A(3);break}return t.mb=l,se(S,4),T(S,Ts(e,t,l),6);case 6:c=S.h;var x=e.g.Y;x.C&&Tu(x.C,c,0,o),e.N=[],fe(S,3);break;case 4:throw f=ue(S),t.mb=null,f;case 3:if(t.Ha&&t.Ha==a){S.A(0);break}return t.Ha=a,se(S,8),T(S,Ts(e,t,a),10);case 10:p=S.h,x=e.g.Y,x.C&&Tu(x.C,p,0,o),e.N.push(a.startTime),fe(S,9);break;case 8:throw h=ue(S),t.Ha=null,h;case 9:if(t.Ub||(g=null,t.type===r.va?g=e.h.get(r.$):t.type===r.$&&(g=e.h.get(r.va)),g&&g.type==r.$?e.g.Bd(a,t.stream,g.stream.isAudioMuxedInVideo,!0):e.g.Bd(a,t.stream,t.stream.codecs.includes(","),!0)),v=Math.max.apply(Math,[0].concat(H(e.N))),y=e.g.Zb(),y+i>v)return T(S,Tm(e,t,a.startTime,i),0);S.A(0)}})}function ww(e,t,n){var i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:if(i=Array.from(e.h.values()),i.some(function(f){return f!=t&&f.gh})){c.A(2);break}if(e.i.avoidEvictionOnQuotaExceededError)return r=mf(e,n),e.g.disableStream(t.stream,r)||Ct(e,t,4),c.return();if(o=Math.round(100*e.C),o>20){e.C-=.2,c.A(3);break}if(o>4){e.C-=.04,c.A(3);break}if(s=mf(e,n),u=e.g.disableStream(t.stream,s),!u){t.vd=!0,e.F=!0,e.g.onError(n),c.A(5);break}return e.C=1,a=e.g.Zb(),T(c,pa(e,t,a),5);case 5:return c.return();case 3:return t.gh=!0,l=e.g.Zb(),T(c,pa(e,t,l),2);case 2:Ct(e,t,4),G(c)}})}function Aw(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w;return k(function(I){switch(I.g){case 1:if(r=rt,o=t.Ha==null,s=[],u=Math.max(0,Math.max(n.appendWindowStart,e.ha)-.1),a=Math.min(n.appendWindowEnd,e.aa)+.1,l=n.codecs||t.stream.codecs,c=Bi(l),f=Jt(n.mimeType||t.stream.mimeType),p=n.timestampOffset,p==t.pf&&u==t.uc&&a==t.tc&&c==t.mf&&f==t.nf){I.A(2);break}if(h=t.mf&&t.nf&&YS(e.g.Y,t.type,f,l,va(e)),!h){I.A(3);break}if(g=null,t.type===r.va?g=e.h.get(r.$):t.type===r.$&&(g=e.h.get(r.va)),!g){I.A(3);break}return T(I,ga(g).catch(function(){}),5);case 5:g.mb=null,g.uc=null,g.tc=null,cf(e,g);case 3:return T(I,xm(e,t,p,u,a,n,c,f),2);case 2:return ls(n.ba,t.mb)||(t.mb=n.ba,n.l&&n.ba&&(v=Ts(e,t,n.ba),y=function(){var L,A,C,E,R,M,P,N,b,_,j;return k(function(O){switch(O.g){case 1:return se(O,2),T(O,v,4);case 4:return L=O.h,_e(e.l),A=null,C=new Map,E={projection:null,hfov:null},t.stream&&(R=t.stream.videoLayout)&&(M=R.split("/"),M.includes("PROJ-RECT")?E.projection="rect":M.includes("PROJ-EQUI")?E.projection="equi":M.includes("PROJ-HEQU")?E.projection="hequ":M.includes("PROJ-PRIM")?E.projection="prim":M.includes("PROJ-AIV")&&(E.projection="hequ")),P=new Ne,P.box("moov",ce).box("trak",ce).box("mdia",ce).S("mdhd",function(F){A=Ju(F.reader,F.version).timescale}).box("hdlr",function(F){switch(F=F.reader,F.skip(8),F.Yc()){case"soun":C.set(r.$,A);break;case"vide":C.set(r.va,A)}A=null}),t.type!==r.va||E.projection||P.box("minf",ce).box("stbl",ce).S("stsd",gi).box("encv",$t).box("avc1",$t).box("avc3",$t).box("hev1",$t).box("hvc1",$t).box("dvav",$t).box("dva1",$t).box("dvh1",$t).box("dvhe",$t).box("dvc1",$t).box("dvi1",$t).box("vexu",ce).box("proj",ce).S("prji",function(F){F=F.reader.Yc(),E.projection=F}).box("hfov",function(F){F=F.reader.U()/1e3,E.hfov=F}),P.parse(L,!0,!0),t.type===r.va&&Ew(e,E),C.has(t.type)?n.ba.timescale=C.get(t.type):A!=null&&(n.ba.timescale=A),N=t.stream.segmentIndex,N instanceof qe&&(b=ew(N,n.startTime)),_=t.stream.closedCaptions&&t.stream.closedCaptions.size>0,T(O,e.g.Vh(t.type,L),5);case 5:return T(O,ra(e.g.Y,t.type,L,null,t.stream,_,t.bd,i,!1,!1,b),6);case 6:fe(O,0);break;case 2:throw j=ue(O),t.mb=null,j}})},S=n.startTime,o&&(x=Ki(e.g.Y,t.type),x!=null&&(S=x)),e.g.Gk(S,n.ba),s.push(y()))),w=t.Ha?t.Ha.i:-1,n.i!=w&&s.push(bg(e.g.Y,t.type,n.startTime)),T(I,Promise.all(s),0)}})}function xm(e,t,n,i,r,o,s,u){var a,l,c,f,p;return k(function(h){switch(h.g){case 1:if(a=rt,l=va(e),se(h,2),t.uc=i,t.tc=r,s&&(t.mf=s),u&&(t.nf=u),t.pf=n,c=e.j.sequenceMode||e.j.type=="HLS",f=null,t.type===a.va?f=e.h.get(a.$):t.type===a.$&&(f=e.h.get(a.va)),!(f&&f.stream&&f.stream.isAudioMuxedInVideo)){h.A(4);break}return T(h,Bg(e.g.Y,f.type,n,i,r,c,f.stream.mimeType,f.stream.codecs,l),4);case 4:return T(h,Bg(e.g.Y,t.type,n,i,r,c,o.mimeType||t.stream.mimeType,o.codecs||t.stream.codecs,l),6);case 6:fe(h,0);break;case 2:throw p=ue(h),t.uc=null,t.tc=null,t.mf=null,t.nf=null,t.pf=null,p}})}function df(e,t,n,i,r,o,s,u){s=s===void 0?!1:s,u=u===void 0?!1:u;var a,l,c,f;return k(function(p){switch(p.g){case 1:return a=i.closedCaptions&&i.closedCaptions.size>0,e.i.shouldFixTimestampOffset&&(l=i.mimeType=="video/mp4"||i.mimeType=="audio/mp4",c=null,r.ba&&(c=r.ba.timescale),l&&c&&i.type==="video"&&e.j.type=="DASH"&&new Ne().box("moof",ce).box("traf",ce).S("tfdt",function(h){var g,v,y,S,x,w;return k(function(I){return g=qu(h.reader,h.version),v=g.baseMediaDecodeTime,v?(y=-v/c,S=Number(t.pf)||0,S<y?(x=t.uc,w=t.tc,T(I,xm(e,t,y,x,w,r),0)):I.A(0)):I.return()})}).parse(o,!1,s)),T(p,pa(e,t,n),2);case 2:return _e(e.l),f=t.bd,t.bd=!1,T(p,e.g.Vh(t.type,o),3);case 3:return T(p,ra(e.g.Y,t.type,o,r,i,a,f,u,s),4);case 4:_e(e.l),G(p)}})}function pa(e,t,n){var i,r,o,s,u,a,l,c,f;return k(function(p){if(p.g==1)return e.H==t&&(e.H=null),i=t.stream.segmentIndex,i instanceof qe&&(i.Ya(e.j.presentationTimeline.Hb()),r=[],ZS(i,function(h){r.push(h.We())})),o=Math.max(e.i.bufferBehind*e.C,e.j.presentationTimeline.h),s=zc(e.g.Y,t.type),s==null?p.return():(u=n-s,a=e.i.evictionGoal,l=e.j.presentationTimeline.$b(),c=e.j.presentationTimeline.Gb(),f=u-o,c-l>a&&(f=Math.max(u-o,l-a-s)),f<=a?p.return():T(p,e.g.Y.remove(t.type,s,s+f,r),2));if(p.g!=4)return _e(e.l),e.H?T(p,pa(e,e.H,n),4):p.A(0);_e(e.l),G(p)})}function pf(e){return e&&e.type==he&&(e.stream.mimeType=="application/cea-608"||e.stream.mimeType=="application/cea-708")}function Ts(e,t,n,i){var r,o,s,u,a;return k(function(l){switch(l.g){case 1:if(r=n.ac())return l.return(r);if(o=null,t.ia){var c=t.ia,f=c.g;n instanceof Wt&&(f=c.j),f.has(n)?(c=f.get(n),i&&(c.Ch=i),o=c.oe):o=null}return o||(o=ha(n,t.stream,i||null,e.i.retryParameters,e.g.wc)),s=0,t.sa&&(s=t.sa.h),t.Va=o,T(l,o.promise,2);case 2:if(u=l.h,t.Va=null,a=u.data,!n.aesKey){l.A(3);break}return T(l,lf(a,n.aesKey,s),4);case 4:a=l.h;case 3:return l.return(a)}})}function ha(e,t,n,i,r,o){o=o===void 0?!1:o;var s=e instanceof Q?e:void 0,u=s?1:0;return e=ys(e.P(),e.startByte,e.endByte,i,n),e.contentType=t.type,r.request(yn,e,{type:u,stream:t,segment:s,isPreload:o})}function hf(e,t,n,i){var r,o;return k(function(s){if(s.g==1)return t.Ub=!1,t.Nd=!1,t.ld=0,t.Wb=!0,t.Ha=null,t.sa=null,t.ia&&!e.m.has(t.stream)&&Kn(t.ia),i?(r=e.g.Zb(),o=e.g.Y.getDuration(),T(s,e.g.Y.remove(t.type,r+i,o),3)):T(s,_g(e.g.Y,t.type),4);if(s.g!=3)return _e(e.l),n?T(s,e.g.Y.flush(t.type),3):s.A(3);_e(e.l),t.Wb=!1,t.endOfStream=!1,t.Ia||t.ob||Ct(e,t,0),G(s)})}function Ct(e,t,n){var i=t.type;(i!=he||e.h.has(i))&&(t.ob=new Zo(function(){var r;return k(function(o){if(o.g==1)return se(o,2),T(o,Tw(e,t),4);if(o.g!=2)return fe(o,0);r=ue(o),e.g&&e.g.onError(r),G(o)})}).ka(n))}function Qn(e){e.ob!=null&&(e.ob.stop(),e.ob=null)}function ga(e){return k(function(t){return e.Va?T(t,e.Va.abort(),0):t.A(0)})}function gf(e,t,n){var i,r,o,s,u;return k(function(a){switch(a.g){case 1:return n.code==3024?(t.Ia=!1,Qn(t),Ct(e,t,0),a.return()):T(a,Vh(e.X),2);case 2:if(_e(e.l),n.category===1&&n.code!=1003){if(t.Nc)return mm(e,!1),a.return();i=mf(e,n),n.handled=e.g.disableStream(t.stream,i),n.handled&&(n.severity=1)}if(n.handled||n.code!=1011){a.A(3);break}for(r=e.g.Zb(),o=Ki(e.g.Y,t.type),s=da(e,t,r,o);((u=s)==null?void 0:u.bc())===2;)t.Ha=s,s=da(e,t,r,o);if(!s){a.A(3);break}return T(a,bg(e.g.Y,t.type,s.startTime),5);case 5:return t.Ia=!1,t.vd=!1,Qn(t),Ct(e,t,0),a.return();case 3:(!n.handled||n.code!=1011)&&e.g.onError(n),n.handled||e.i.failureCallback(n),G(a)}})}function mf(e,t){return e.i.maxDisabledTime===0&&t.code==1011?1:e.i.maxDisabledTime}function ma(e,t){t=t===void 0?!1:t;var n,i,r,o,s,u;return k(function(a){if(a.g==1){if(n=Date.now()/1e3,i=e.i.minTimeBetweenRecoveries,!t){if(!e.i.allowMediaSourceRecoveries||n-e.R<i)return a.return(!1);e.R=n}return r=rt,(o=e.h.get(r.$))&&(Qn(o),o.Va&&(o.Va.abort(),o.Va=null),o.mb=null,o.uc=null,o.tc=null,o.Ia=!1,o.Ub=!1,o.ld=0,o.Nd=!1,o.Wb=!1,o.sa&&o.sa.kh()),(s=e.h.get(r.va))&&(Qn(s),s.Va&&(s.Va.abort(),s.Va=null),s.mb=null,s.uc=null,s.tc=null,s.Ia=!1,s.Ub=!1,s.ld=0,s.Nd=!1,s.Wb=!1,s.sa&&s.sa.kh()),u=e.g.video.paused,T(a,Hg(e.g.Y,va(e)),2)}return!s||s.Wb||s.Ia||s.ob||Ct(e,s,0),!o||o.Wb||o.Ia||o.ob||Ct(e,o,0),u||e.g.video.play(),a.return(!0)})}function Ew(e,t){if(e.T.projection!=t.projection||e.T.hfov!=t.hfov){if(t.projection!=null||t.hfov!=null){var n=new Map().set("detail",t);n=new z("spatialvideoinfo",n)}else n=new z("nospatialvideoinfo");n.cancelable=!0,e.g.onEvent(n),e.T=t}}function xs(e){if(e.i.crossBoundaryStrategy!=="keep")return!0;var t=pe();if(t.Ib()){if(!t.Nf()){for(t=m(e.h.keys()),n=t.next();!n.done;n=t.next())if(n=e.h.get(n.value),n.type!==rt.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1){for(e=new Set,t=m(n.fullMimeTypes),n=t.next();!n.done;n=t.next())e.add(qo(n.value));return e.size>1}}}else{t=m(e.h.keys());for(var n=t.next();!n.done;n=t.next())if(n=e.h.get(n.value),n.type!==rt.Na&&(n=n.stream)&&n.fullMimeTypes&&n.fullMimeTypes.size>1)return!0}return!1}function Sm(e){e.G.Qa(),xs(e)&&(e.G.D(e.g.video,"waiting",function(){return vf(e)}),e.G.D(e.g.video,"timeupdate",function(){return vf(e)}))}function vf(e){if(xs(e)){e.K.stop();var t=e.g.Zb(),n=e.h.get("video")||e.h.get("audio");n&&(n=n.mb)&&n.g!==null&&(t=n.g-t,t<0||t>1||(e.I=n.g+.1,e.K.ka(t)))}}function Iw(e,t,n){if(t.type===he)return!1;var i=t.mb;if(!i)return!1;var r=n.ba;if(n=i.g!==r.g,e.i.crossBoundaryStrategy==="reset_to_encrypted"&&(i.encrypted||r.encrypted||(n=!1),i.encrypted&&(e.i.crossBoundaryStrategy="keep")),e.i.crossBoundaryStrategy==="RESET_ON_ENCRYPTION_CHANGE"&&i.encrypted==r.encrypted&&(n=!1),e.i.crossBoundaryStrategy==="keep"&&i.mimeType&&r.mimeType){var o=It(Kt(i.mimeType)),s=It(Kt(i.mimeType));i.mimeType==r.mimeType&&o==s&&(n=!1)}return n&&(e.J||t.bd)&&(e.J=!1,ma(e,!0).then(function(){var u=new Map().set("oldEncrypted",i.encrypted).set("newEncrypted",r.encrypted);e.g.onEvent(new z("boundarycrossed",u))})),n}function va(e,t){function n(o){if(o.fullMimeTypes&&o.fullMimeTypes.size>1&&e.h.has(o.type)){var s=e.h.get(o.type),u=Ki(e.g.Y,s.type),a=e.g.Zb();(s=da(e,s,a,u))&&s.codecs&&s.mimeType&&(o.codecs=s.codecs,o.mimeType=s.mimeType)}}t=t===void 0?!1:t;var i=new Map,r=e.o.audio;return r&&(n(r),i.set("audio",r)),(r=e.o.video)&&(n(r),i.set("video",r)),t&&e.B&&i.set(he,e.B),i}function ya(){}function yf(e,t,n,i,r){var o=r in i,s=o?n.constructor==Object&&Object.keys(i).length==0:n.constructor==Object&&Object.keys(n).length==0,u=o||s,a=!0,l;for(l in t){var c=r+"."+l,f=o?i[r]:n[l];u||l in n?t[l]===void 0?f===void 0||u?delete e[l]:e[l]=Pn(f):s?e[l]=t[l]:f.constructor==Object&&t[l]&&t[l].constructor==Object?(e[l]||(e[l]=Pn(f)),c=yf(e[l],t[l],f,i,c),a=a&&c):typeof t[l]!=typeof f||t[l]==null||typeof t[l]!="function"&&t[l].constructor!=f.constructor?(Xn("Invalid config, wrong type for "+c),a=!1):typeof n[l]=="function"&&n[l].length!=t[l].length?(ve("Unexpected number of arguments for "+c),e[l]=t[l]):e[l]=Array.isArray(e[l])?t[l].slice():t[l]:(Xn("Invalid config, unrecognized key "+c),a=!1)}return a}function Ta(e,t){for(var n={},i=n,r=0,o=0;r=e.indexOf(".",r),!(r<0);)(r==0||e[r-1]!="\\")&&(o=e.substring(o,r).replace(/\\\./g,"."),i[o]={},i=i[o],o=r+1),r+=1;return i[e.substring(o).replace(/\\\./g,".")]=t,n}function fo(e,t){return e&&t}function wm(e,t){function n(o){for(var s=m(Object.keys(o)),u=s.next();!u.done;u=s.next())if(u=u.value,!(o[u]instanceof HTMLElement))if(r(o[u])&&Object.keys(o[u]).length===0)delete o[u];else{var a=o[u];Array.isArray(a)&&a.length===0||typeof o[u]=="function"?delete o[u]:r(o[u])&&(n(o[u]),Object.keys(o[u]).length===0&&delete o[u])}}function i(o,s){return Object.keys(o).reduce(function(u,a){var l=o[a];return s.hasOwnProperty(a)?l instanceof HTMLElement&&s[a]instanceof HTMLElement?l.isEqualNode(s[a])||(u[a]=l):r(l)&&r(s[a])?(l=i(l,s[a]),(Object.keys(l).length>0||!r(l))&&(u[a]=l)):Array.isArray(l)&&Array.isArray(s[a])?rr(l,s[a])||(u[a]=l):Number.isNaN(l)&&Number.isNaN(s[a])||l!==s[a]&&(u[a]=l):u[a]=l,u},{})}function r(o){return o&&typeof o=="object"&&!Array.isArray(o)}return e=i(e,t),n(e),e}K("shaka.util.ConfigUtils",ya),ya.getDifferenceFromConfigObjects=wm,ya.convertToConfigObject=Ta,ya.mergeConfigObjects=yf,K("shaka.config.RepeatMode",{OFF:0,ALL:1,SINGLE:2});function Xt(){}function Am(e){return e=zn(e),new tt(e).Db}function Ss(e,t,n){function i(u){Ht(o).setUint32(s,u.byteLength,!0),s+=4,o.set(re(u),s),s+=u.byteLength}if(!n||!n.byteLength)throw new D(2,6,6015);var r;typeof t=="string"?r=rc(t,!0):r=t,e=zn(e),e=rc(e,!0);var o=new Uint8Array(12+e.byteLength+r.byteLength+n.byteLength),s=0;return i(e),i(r),i(n),o}function Tf(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=zn(e).split("skd://").pop(),Ss(e,n,t))}function xa(e,t){e===2&&(e=t.drmInfo)&&bo(e.keySystem)&&(t.headers["Content-Type"]="application/octet-stream")}K("shaka.drm.FairPlay",Xt),Xt.commonFairPlayResponse=function(e,t){if(e===2&&(e=t.originalRequest.drmInfo)&&bo(e.keySystem)){try{var n=Xe(t.data)}catch{return}if(e=!1,n=n.trim(),n.substr(0,5)==="<ckc>"&&n.substr(-6)==="</ckc>"&&(n=n.slice(5,-6),e=!0),!e)try{var i=JSON.parse(n);i.ckc&&(n=i.ckc,e=!0),i.CkcMessage&&(n=i.CkcMessage,e=!0),i.License&&(n=i.License,e=!0)}catch{}e&&(t.data=gn(mn(n)))}},Xt.muxFairPlayRequest=function(e,t){xa(e,t)},Xt.expressplayFairPlayRequest=function(e,t){if(e===2){var n=t.drmInfo;n&&bo(n.keySystem)&&xa(e,t)}},Xt.conaxFairPlayRequest=function(e,t){xa(e,t)},Xt.ezdrmFairPlayRequest=function(e,t){xa(e,t)},Xt.verimatrixFairPlayRequest=function(e,t){e===2&&(e=t.drmInfo)&&bo(e.keySystem)&&(e=re(t.body),e=ri(e),t.headers["Content-Type"]="application/x-www-form-urlencoded",t.body=Ln("spc="+e))},Xt.muxInitDataTransform=function(e,t,n){return Tf(e,t,n)},Xt.expressplayInitDataTransform=function(e,t,n){return Tf(e,t,n)},Xt.conaxInitDataTransform=function(e,t,n){if(t!=="skd")return e;t=n.serverCertificate,n=zn(e).split("skd://").pop().split("?").shift(),n=B.atob(n);var i=new ArrayBuffer(n.length*2);i=qp(i);for(var r=0,o=n.length;r<o;r++)i[r]=n.charCodeAt(r);return Ss(e,i,t)},Xt.ezdrmInitDataTransform=function(e,t,n){return t!=="skd"?e:(t=n.serverCertificate,n=zn(e).split(";").pop(),Ss(e,n,t))},Xt.verimatrixInitDataTransform=function(e,t,n){return Tf(e,t,n)},Xt.initDataTransform=Ss,Xt.defaultGetContentId=Am,Xt.isFairPlaySupported=function(){var e;return k(function(t){return t.g==1?(e={initDataTypes:["cenc","sinf","skd"],videoCapabilities:[{contentType:'video/mp4; codecs="avc1.42E01E"'}]},se(t,2),T(t,navigator.requestMediaKeySystemAccess("com.apple.fps",[e]),4)):t.g!=2?t.return(!0):(ue(t),t.return(!1))})};function Sa(e,t,n){for(n=n===void 0?!0:n,this.h=e,this.g=new Set([e]),t=t||[],e=m(t),t=e.next();!t.done;t=e.next())this.add(t.value,n)}Sa.prototype.add=function(e,t){var n=this.h;t=t===void 0?!0:t;var i;if(!(i=!!n.audio!=!!e.audio||!!n.video!=!!e.video||n.language!=e.language)&&(i=n.audio&&e.audio)){i=n.audio;var r=e.audio;i=!(!((!i.channelsCount||!r.channelsCount||i.channelsCount>2||r.channelsCount>2)&&i.channelsCount!=r.channelsCount||i.spatialAudio!==r.spatialAudio||t&&!Em(i,r))&&rr(i.roles,r.roles)&&i.groupId===r.groupId)}return!i&&(i=n.video&&e.video)&&(n=n.video,i=e.video,i=!((!t||Em(n,i))&&rr(n.roles,i.roles))),i?!1:(this.g.add(e),!0)},Sa.prototype.values=function(){return this.g.values()};function Em(e,t){return e.mimeType!=t.mimeType?!1:(e=e.codecs.split(",").map(function(n){return Bi(n)}),t=t.codecs.split(",").map(function(n){return Bi(n)}),rr(e,t))}K("shaka.media.AdaptationSet",Sa);function ws(){this.h=this.g=null}ws.prototype.configure=function(e){this.g=e},ws.prototype.getConfiguration=function(){return this.g},ws.prototype.create=function(e){var t;if(this.g.language){var n=Cw(e,this.g.language);n.length&&(t=n)}t||(t=e.filter(function(o){return o.primary}),t=t.length?t:e),e=Mw(t,this.g.role),e.length&&(t=e),e=kw(t,this.g.videoRole),e.length&&(t=e),this.g.videoLayout&&(e=Nw(t,this.g.videoLayout),e.length&&(t=e)),this.g.hdrLevel&&(e=Pw(t,this.g.hdrLevel),e.length&&(t=e));var i=[this.g.channelCount,this.g.preferredAudioChannelCount];if(e=i.filter(function(o,s){return o&&i.indexOf(o)===s}),e.length){for(e=m(e),n=e.next();!n.done;n=e.next())if(n=Lw(t,n.value),n.length){t=n;break}}this.g.audioLabel&&(e=Dw(t,this.g.audioLabel),e.length&&(t=e)),this.g.videoLabel&&(e=Rw(t,this.g.videoLabel),e.length&&(t=e)),e=jw(t,this.g.spatialAudio),e.length&&(t=e);var r=[this.g.audioCodec,this.g.activeAudioCodec].concat(H(this.g.preferredAudioCodecs));if(e=r.filter(function(o,s){return o&&r.indexOf(o)===s}),e.length){for(e=m(e),n=e.next();!n.done;n=e.next())if(n=Ow(t,n.value),n.length){t=n;break}}return e=pe(),e=this.g.codecSwitchingStrategy=="smooth"&&e.Ib(),this.h=new Sa(t[0],t,!e)},ws.prototype.getLastAdaptationSet=function(){return this.h};function Cw(e,t){t=Ce(t);var n=ju(t,e.map(function(i){return wc(i)}));return n?e.filter(function(i){return n==wc(i)}):[]}function Mw(e,t){return e.filter(function(n){return n.audio?t?n.audio.roles.includes(t):n.audio.roles.length==0:!1})}function kw(e,t){return e.filter(function(n){return n.video?t?n.video.roles.includes(t):n.video.roles.length==0:!1})}function Dw(e,t){return e.filter(function(n){return n.audio&&n.audio.label?n.audio.label.toLowerCase()==t.toLowerCase():!1})}function Rw(e,t){return e.filter(function(n){return n.video&&n.video.label?n.video.label.toLowerCase()==t.toLowerCase():!1})}function Lw(e,t){return e.filter(function(n){return!(n.audio&&n.audio.channelsCount&&n.audio.channelsCount>t)}).sort(function(n,i){return n.audio||i.audio?n.audio?i.audio?(i.audio.channelsCount||0)-(n.audio.channelsCount||0):1:-1:0})}function Pw(e,t){if(t=="AUTO"){var n=e.some(function(i){return!!(i.video&&i.video.hdr&&i.video.hdr=="HLG")});t=pe().sd(n)}return e.filter(function(i){return!(i.video&&i.video.hdr&&i.video.hdr!=t)})}function Nw(e,t){return e.filter(function(n){return!(n.video&&n.video.videoLayout&&n.video.videoLayout!=t)})}function jw(e,t){return e.filter(function(n){return!(n.audio&&n.audio.spatialAudio!=t)})}function Ow(e,t){return e.filter(function(n){return!(n.audio&&n.audio.codecs!=t)})}function wa(){}function po(){var e=1/0,t=pe();navigator.connection&&navigator.connection.saveData&&(e=360);var n={retryParameters:jn(),servers:{},clearKeys:{},advanced:{},delayLicenseRequestUntilPlayed:!1,persistentSessionOnlinePlayback:!1,persistentSessionsMetadata:[],initDataTransform:function(u,a,l){return B.shakaMediaKeysPolyfill==="apple"&&a=="skd"&&(a=l.serverCertificate,l=Am(u),u=Ss(u,l,a)),u},logLicenseExchange:!1,updateExpirationTime:1,preferredKeySystems:[],keySystemsMapping:{},parseInbandPsshEnabled:!1,minHdcpVersion:"",ignoreDuplicateInitData:!0,defaultAudioRobustnessForWidevine:"SW_SECURE_CRYPTO",defaultVideoRobustnessForWidevine:"SW_SECURE_DECODE"},i="reload";t.Ib()&&(i="smooth");var r={retryParameters:jn(),availabilityWindowOverride:NaN,disableAudio:!1,disableVideo:!1,disableText:!1,disableThumbnails:!1,disableIFrames:!1,defaultPresentationDelay:0,segmentRelativeVttTiming:!1,raiseFatalErrorOnManifestUpdateRequestFailure:!1,continueLoadingWhenPaused:!0,ignoreSupplementalCodecs:!1,updatePeriod:-1,ignoreDrmInfo:!1,enableAudioGroups:!0,dash:{clockSyncUri:"",disableXlinkProcessing:!0,xlinkFailGracefully:!1,ignoreMinBufferTime:!1,autoCorrectDrift:!0,initialSegmentLimit:1e3,ignoreSuggestedPresentationDelay:!1,ignoreEmptyAdaptationSet:!1,ignoreMaxSegmentDuration:!1,keySystemsByURI:{"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:94ce86fb-07ff-4f43-adb8-93d2fa968ca2":"com.apple.fps","urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c":"com.huawei.wiseplay"},manifestPreprocessor:Aa,manifestPreprocessorTXml:Ea,sequenceMode:!1,useStreamOnceInPeriodFlattening:!1,enableFastSwitching:!0},hls:{ignoreTextStreamFailures:!1,ignoreImageStreamFailures:!1,defaultAudioCodec:"mp4a.40.2",defaultVideoCodec:"avc1.42E01E",ignoreManifestProgramDateTime:!1,ignoreManifestProgramDateTimeForTypes:[],mediaPlaylistFullMimeType:'video/mp2t; codecs="avc1.42E01E, mp4a.40.2"',liveSegmentsDelay:3,sequenceMode:t.fd(),ignoreManifestTimestampsInSegmentsMode:!1,disableCodecGuessing:!1,disableClosedCaptionsDetection:!1,allowLowLatencyByteRangeOptimization:!0,allowRangeRequestsToGuessMimeType:!1},mss:{manifestPreprocessor:Aa,manifestPreprocessorTXml:Ea,sequenceMode:!1,keySystemsBySystemId:{"9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","79f0049a-4098-8642-ab92-e65be0885f95":"com.microsoft.playready"}}},o={trackSelectionCallback:function(u){return k(function(a){return a.return(u)})},downloadSizeCallback:function(u){var a;return k(function(l){return l.g==1?navigator.storage&&navigator.storage.estimate?T(l,navigator.storage.estimate(),3):l.return(!0):(a=l.h,l.return(a.usage+u<a.quota*.95))})},progressCallback:function(u,a){return fo([u,a])},usePersistentLicense:!0,numberOfParallelDownloads:5},s={drm:n,manifest:r,streaming:{retryParameters:jn(),failureCallback:function(u){return fo([u])},rebufferingGoal:0,bufferingGoal:10,bufferBehind:30,evictionGoal:1,ignoreTextStreamFailures:!1,alwaysStreamText:!1,startAtSegmentBoundary:!1,gapDetectionThreshold:.5,gapPadding:0,gapJumpTimerTime:.25,durationBackoff:1,safeSeekOffset:5,safeSeekEndOffset:0,stallEnabled:!0,stallThreshold:1,stallSkip:.1,useNativeHlsForFairPlay:!0,inaccurateManifestTolerance:2,lowLatencyMode:!0,preferNativeDash:!1,preferNativeHls:!1,updateIntervalSeconds:1,observeQualityChanges:!1,maxDisabledTime:30,segmentPrefetchLimit:1,prefetchAudioLanguages:[],disableAudioPrefetch:!1,disableTextPrefetch:!1,disableVideoPrefetch:!1,liveSync:{enabled:!1,targetLatency:.5,targetLatencyTolerance:.5,maxPlaybackRate:1.1,minPlaybackRate:.95,panicMode:!1,panicThreshold:60,dynamicTargetLatency:{enabled:!1,stabilityThreshold:60,rebufferIncrement:.5,maxAttempts:10,maxLatency:4,minLatency:1}},allowMediaSourceRecoveries:!0,minTimeBetweenRecoveries:5,vodDynamicPlaybackRate:!1,vodDynamicPlaybackRateLowBufferRate:.95,vodDynamicPlaybackRateBufferRatio:.5,preloadNextUrlWindow:30,loadTimeout:30,clearDecodingCache:!1,dontChooseCodecs:!1,shouldFixTimestampOffset:!1,avoidEvictionOnQuotaExceededError:!1,crossBoundaryStrategy:"keep",returnToEndOfLiveWindowWhenOutside:!1},networking:{forceHTTP:!1,forceHTTPS:!1,minBytesForProgressEvents:16e3},mediaSource:{codecSwitchingStrategy:i,addExtraFeaturesToSourceBuffer:function(u){return fo([u],"")},forceTransmux:!1,insertFakeEncryptionInInit:!0,correctEc3Enca:!1,modifyCueCallback:function(u,a,l){return fo([u,a,l])},dispatchAllEmsgBoxes:!1,useSourceElements:!0,durationReductionEmitsUpdateEnd:!0},offline:o,abrFactory:function(){return new Ye},adaptationSetCriteriaFactory:function(){return new(Function.prototype.bind.apply(ws,[null].concat(H(dt.apply(0,arguments)))))},abr:{enabled:!0,useNetworkInformation:!0,defaultBandwidthEstimate:1e6,switchInterval:8,bandwidthUpgradeTarget:.85,bandwidthDowngradeTarget:.95,restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:e,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},advanced:{minTotalBytes:128e3,minBytes:16e3,fastHalfLife:2,slowHalfLife:5},restrictToElementSize:!1,restrictToScreenSize:!1,ignoreDevicePixelRatio:!1,clearBufferSwitch:!1,safeMarginSwitch:0,cacheLoadThreshold:5,minTimeToSwitch:0,preferNetworkInformationBandwidth:!1,removeLatencyFromFirstPacketTime:!1},autoShowText:3,preferredAudioLanguage:"",preferredAudioLabel:"",preferredTextLanguage:"",preferredAudioRole:"",preferredVideoRole:"",preferredTextRole:"",preferredAudioChannelCount:2,preferredVideoHdrLevel:"AUTO",preferredVideoLayout:"",preferredVideoLabel:"",preferredVideoCodecs:[],preferredAudioCodecs:[],preferredTextFormats:[],preferForcedSubs:!1,preferSpatialAudio:!1,preferredDecodingAttributes:[],restrictions:{minWidth:0,maxWidth:1/0,minHeight:0,maxHeight:1/0,minPixels:0,maxPixels:1/0,minFrameRate:0,maxFrameRate:1/0,minBandwidth:0,maxBandwidth:1/0,minChannelsCount:0,maxChannelsCount:1/0},playRangeStart:0,playRangeEnd:1/0,textDisplayer:{captionsUpdatePeriod:.25,fontScaleFactor:1},textDisplayFactory:function(){return null},cmcd:{enabled:!1,sessionId:"",contentId:"",rtpSafetyFactor:5,useHeaders:!1,includeKeys:[],version:1,targets:[]},cmsd:{enabled:!0,applyMaximumSuggestedBitrate:!0,estimatedThroughputWeightRatio:.5},lcevc:{enabled:!1,dynamicPerformanceScaling:!0,logLevel:0,drawLogo:!1,poster:!0},ads:{customPlayheadTracker:!1,skipPlayDetection:!1,supportsMultipleMediaElements:!0,disableHLSInterstitial:!1,disableDASHInterstitial:!1,allowPreloadOnDomElements:!0,allowStartInMiddleOfInterstitial:!0},ignoreHardwareResolution:!1,queue:{preloadNextUrlWindow:1/0,preloadPrevItem:!0,repeatMode:0}};return o.trackSelectionCallback=function(u){return k(function(a){return a.return(Uw(u,s.preferredAudioLanguage,s.preferredVideoHdrLevel))})},t.Wa(s)}function Im(){return{streaming:{inaccurateManifestTolerance:0,segmentPrefetchLimit:2,updateIntervalSeconds:.1,maxDisabledTime:1,retryParameters:{baseDelay:100}},manifest:{dash:{autoCorrectDrift:!1},retryParameters:{baseDelay:100}},drm:{retryParameters:{baseDelay:100}}}}function Ti(e,t,n){var i={".drm.keySystemsMapping":"",".drm.servers":"",".drm.clearKeys":"",".drm.advanced":{distinctiveIdentifierRequired:!1,persistentStateRequired:!1,videoRobustness:[],audioRobustness:[],sessionType:"",serverCertificate:new Uint8Array(0),serverCertificateUri:"",individualizationServer:"",headers:{}}};return yf(e,t,n||po(),i,"")}function Uw(e,t,n){var i=n;i=="AUTO"&&(n=e.some(function(u){return!!(u.hdr&&u.hdr=="HLG")}),i=pe().sd(n));var r=e.filter(function(u){return!(u.type!="variant"||u.hdr&&u.hdr!=i)});n=[];var o=ju(t,r.map(function(u){return u.language}));o&&(n=r.filter(function(u){return Ce(u.language)==o})),n.length==0&&(n=r.filter(function(u){return u.primary})),n.length==0&&(r.map(function(u){return u.language}),n=r);var s=n.filter(function(u){return u.height&&u.height<=480});for(s.length&&(s.sort(function(u,a){return a.height-u.height}),n=s.filter(function(u){return u.height==s[0].height})),t=[],n.length&&(r=Math.floor(n.length/2),n.sort(function(u,a){return u.bandwidth-a.bandwidth}),t.push(n[r])),e=m(e),n=e.next();!n.done;n=e.next())n=n.value,n.type!=he&&n.type!="image"||t.push(n);return t}function Aa(e){return fo([e],e)}function Ea(e){return fo([e],e)}K("shaka.util.PlayerConfiguration",wa),wa.mergeConfigObjects=Ti,wa.createDefaultForLL=Im,wa.createDefault=po;function _w(){this.g=null,this.h=[]}function xf(e,t){var n=0;e.g&&e.g.state==t&&(n+=e.g.duration),e=m(e.h);for(var i=e.next();!i.done;i=e.next())i=i.value,n+=i.state==t?i.duration:0;return n}function Bw(e){function t(o){return{timestamp:o.timestamp,state:o.state,duration:o.duration}}for(var n=[],i=m(e.h),r=i.next();!r.done;r=i.next())n.push(t(r.value));return e.g&&n.push(t(e.g)),n}function bw(){this.i=this.h=null,this.g=[]}function Sf(e,t,n){e.i!=t&&(e.i=t,e.g.push({timestamp:Date.now()/1e3,id:t.id,type:"text",fromAdaptation:n,bandwidth:null}))}function Ia(){this.C=this.X=NaN,this.l="",this.j=this.xi=this.u=this.B=this.K=this.F=this.o=this.m=this.J=this.G=this.i=this.T=this.V=this.N=this.O=this.R=NaN,this.M=0,this.H=this.I=NaN,this.g=new _w,this.h=new bw}function Fw(e,t,n){e.R=t,e.O=n}function Cm(e,t,n){e.X=t,e.C=n}function Vw(e,t){e.i=isNaN(e.i)?t:Math.max(e.i,t)}function Mm(e,t){e.j=isNaN(e.j)?t:e.j+t}function Hw(e){var t=e.X,n=e.C,i=e.l,r=e.B,o=e.O,s=e.R,u=e.N,a=e.V,l=e.T,c=e.u,f=e.i,p=e.G,h=e.J,g=e.m,v=xf(e.g,"playing"),y=xf(e.g,"paused"),S=xf(e.g,"buffering"),x=e.o,w=e.F,I=e.K,L=e.xi,A=e.j,C=e.M,E=e.I,R=e.H,M=Bw(e.g),P=[];e=m(e.h.g);for(var N=e.next();!N.done;N=e.next())N=N.value,P.push({timestamp:N.timestamp,id:N.id,type:N.type,fromAdaptation:N.fromAdaptation,bandwidth:N.bandwidth});return{width:t,height:n,currentCodecs:i,streamBandwidth:r,decodedFrames:o,droppedFrames:s,corruptedFrames:u,stallsDetected:a,gapsJumped:l,estimatedBandwidth:c,completionPercent:f,loadLatency:p,manifestTimeSeconds:h,drmTimeSeconds:g,playTime:v,pauseTime:y,bufferingTime:S,licenseTime:x,liveLatency:w,maxSegmentDuration:I,manifestSizeBytes:L,bytesDownloaded:A,nonFatalErrorCount:C,manifestPeriodCount:E,manifestGapCount:R,stateHistory:M,switchHistory:P}}function xn(e,t,n,i){Le.call(this),this.N=e,this.V=t,this.Ea=i.networkingEngine,this.o=n,this.C=null,this.Aa=0,this.Ta=i.md,this.G=i.zk,this.Ua=i.Ak,this.g=i.config,this.m=this.H=this.h=null,this.oa=!1,this.I=i.Lk,this.wa=!1,this.j=null,this.ha=!1,this.u=null,this.M=new Map,this.za=!1,this.Ja=i.Kk,this.X=new Ia,this.ma=new Pe,this.B=new Pe,this.O=null,this.l=!1,this.aa=i.qj,this.T=this.i=null,this.R=!1,this.K=[],this.J=[],this.F=!0}$e(xn,Le);function As(e,t,n){(e=t?e.J:e.K)?e.push(n):n()}function Gw(e){if(e.J)for(var t=m(e.J),n=t.next();!n.done;n=t.next())n=n.value,n();e.J=null}function km(e,t){if(e.O=t,e.R=!0,e.K){t=m(e.K);for(var n=t.next();!n.done;n=t.next())n=n.value,n()}e.K=null}d=xn.prototype,d.getStartTime=function(){return this.o},d.rd=function(){return this.N},d.Lg=function(){return this.h};function Kw(e){return e.wa=!0,e.I}d.getStats=function(){return this.X};function Ww(e){return e.ha=!0,e.j}d.Wj=function(){return this.i?mr(this.i):null},d.Vj=function(){return this.T?vr(this.T):null};function Xw(e){return e.za=!0,e.M}d.start=function(){var e=this;(function(){var t;return k(function(n){switch(n.g){case 1:return T(n,Promise.resolve(),2);case 2:return se(n,3),T(n,zw(e),5);case 5:if(Xi(e),B.shakaMediaKeysPolyfill==="webkit"){n.A(6);break}return T(n,Dm(e),7);case 7:Xi(e);case 6:return T(n,qw(e),8);case 8:if(Xi(e),!e.aa){n.A(9);break}return T(n,Jw(e),10);case 10:Xi(e);case 9:if(!e.aa||!e.j){n.A(11);break}return T(n,$x(e.j),12);case 12:Xi(e);case 11:e.B.resolve(),fe(n,0);break;case 3:t=ue(n),t instanceof D&&(t.code==7001||t.code==7003)||e.B.reject(t),G(n)}})})()},d.dispatchEvent=function(e){return this.O?this.O.dispatchEvent(e):Le.prototype.dispatchEvent.call(this,e)},d.onError=function(e){e.severity===2&&(this.B.reject(e),this.destroy());var t=new Map().set("detail",e);t=new z("error",t),this.dispatchEvent(t),t.defaultPrevented&&(e.handled=!0)};function Xi(e){if(e.l)throw new D(2,7,7003)}function wf(e,t){e.dispatchEvent(new z("onstatechange",new Map().set("state",t)))}function zw(e){var t,n,i,r,o,s;return k(function(u){switch(u.g){case 1:if(wf(e,"manifest-parser"),e.m||(e.H=ih(e.N,e.V),e.m=e.H(),e.m.configure(e.g.manifest,function(){return e.F})),t=Date.now()/1e3,wf(e,"manifest"),e.h){u.A(2);break}return T(u,e.m.start(e.N,e.Ua),3);case 3:return e.h=u.h,Lm(e.h),T(u,Yw(e),2);case 2:return e.ma.resolve(),n=new z("manifestparsed",void 0),T(u,Promise.resolve(),5);case 5:if(e.dispatchEvent(n),e.h.variants.length==0)throw new D(2,4,4036);if(Lm(e.h),i=dg(e.G,e.h),!i){u.A(6);break}return r=new z("trackschanged",void 0),T(u,Promise.resolve(),7);case 7:Xi(e),e.dispatchEvent(r);case 6:o=Date.now()/1e3,s=o-t,e.X.J=s,G(u)}})}function Dm(e,t){var n,i,r,o;return k(function(s){switch(s.g){case 1:return!e.h||e.j?s.return():(wf(e,"drm-engine"),e.Aa=Date.now()/1e3,e.j=e.Ta(),e.G.g=e.j,e.j.configure(e.g.drm,function(){return e.F}),n=Bu(e.h.variants),i=!0,e.h&&e.h.presentationTimeline&&(i=e.h.presentationTimeline.W()),T(s,Zh(e.j,n,e.h.offlineSessionIds,i),2));case 2:if(Xi(e),!t){s.A(3);break}return T(s,e.j.Vb(t),4);case 4:Xi(e);case 3:return T(s,fg(e.G,e.h),5);case 5:if(r=s.h,!r){s.A(0);break}return o=new z("trackschanged",void 0),T(s,Promise.resolve(),7);case 7:e.dispatchEvent(o),G(s)}})}d.configure=function(e,t){e=Ta(e,t),Ti(this.g,e)},d.getConfiguration=function(){return Pn(this.g)};function Yw(e){return k(function(t){return e.C||(e.C=e.g.adaptationSetCriteriaFactory(),e.C.configure({language:e.g.preferredAudioLanguage,role:e.g.preferredAudioRole,videoRole:e.g.preferredVideoRole,channelCount:0,hdrLevel:e.g.preferredVideoHdrLevel,spatialAudio:e.g.preferSpatialAudio,videoLayout:e.g.preferredVideoLayout,audioLabel:e.g.preferredAudioLabel,videoLabel:e.g.preferredVideoLabel,codecSwitchingStrategy:e.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:e.g.preferredAudioCodecs,preferredAudioChannelCount:e.g.preferredAudioChannelCount})),e.i||!e.h.variants.length||e.h.variants.length!=1&&e.h.type!="HLS"?t.A(0):(e.i=Af(e),e.i?T(t,Rm(e.i),0):t.A(0))})}function qw(e){return k(function(t){return t.g==1?!e.i||e.h.variants.includes(e.i)?t.A(0):T(t,$w(e.i),3):(e.i=Af(e),e.i?T(t,Rm(e.i),0):t.A(0))})}function Jw(e){var t,n,i,r,o;return k(function(s){return!e.i&&(t=Af(e))&&(e.i=t),e.i?(n=e.h.presentationTimeline.W(),i=[],r=e.i,r.video&&i.push(Ef(e,r.video,n)),r.audio&&i.push(Ef(e,r.audio,n)),(o=Xr(e.h.textStreams,e.g.preferredTextLanguage,e.g.preferredTextRole,e.g.preferForcedSubs)[0]||null)&&_h(r.audio,o,e.g)&&(i.push(Ef(e,o,n)),e.T=o),T(s,Promise.all(i),0)):s.A(0)})}function Af(e){if(!e.u){var t=e.g.abrFactory;e.u=t(),e.u.configure(e.g.abr)}return t=Bu(e.h.variants),t=e.C.create(t),e.u.setVariants(Array.from(t.values())),e.u.chooseVariant(!0)}function Ef(e,t,n){var i,r,o,s,u;return k(function(a){return a.g==1?(i=e.g.streaming.segmentPrefetchLimit||2,r=new la(i,t,function(l,c,f){return ha(l,c,f||null,e.g.streaming.retryParameters,e.Ea,e.F)},!1),e.M.set(t.id,r),t.segmentIndex?a.A(2):T(a,t.createSegmentIndex(),2)):(o=typeof e.o=="number"?e.o:0,s=t.segmentIndex.Xb(o),u=null,s&&(u=s.current(),u||(u=s.next().value)),u||(u=Gn(t.segmentIndex)),u?n?u.ba?T(a,fm(r,u.ba),0):a.A(0):T(a,ms(r,u.startTime),0):a.A(0))})}function Rm(e){var t,n,i,r;return k(function(o){for(t=[],n=m([e.video,e.audio]),i=n.next();!i.done;i=n.next())(r=i.value)&&!r.segmentIndex&&t.push(r.createSegmentIndex());return t.length>0?T(o,Promise.all(t),0):o.A(0)})}function $w(e){var t,n,i,r;return k(function(o){for(t=[],n=m([e.video,e.audio]),i=n.next();!i.done;i=n.next())(r=i.value)&&r.segmentIndex&&r.closeSegmentIndex&&t.push(r.closeSegmentIndex());return t.length>0?T(o,Promise.all(t),0):o.A(0)})}d.ul=function(){return this.B},d.destroy=function(){var e=this,t,n,i;return k(function(r){if(r.g==1)return e.l=!0,!e.m||e.oa?r.A(2):T(r,e.m.stop(),2);if(r.g!=4)return e.u&&e.u.release(),e.I&&!e.wa&&e.I.release(),!e.j||e.ha?r.A(4):T(r,e.j.destroy(),4);if(e.M.size>0&&!e.za)for(t=m(e.M.values()),n=t.next();!n.done;n=t.next())i=n.value,Kn(i);G(r)})};function Lm(e){function t(n){return n.video&&n.audio||n.video&&n.video.codecs.includes(",")}e.variants.some(t)&&(e.variants=e.variants.filter(t))}K("shaka.media.PreloadManager",xn),xn.prototype.destroy=xn.prototype.destroy,xn.prototype.waitForFinish=xn.prototype.ul,xn.prototype.getPrefetchedTextTrack=xn.prototype.Vj,xn.prototype.getPrefetchedVariantTrack=xn.prototype.Wj;function Cr(e,t){Le.call(this);var n=this;this.i=e,this.l=t,this.g=new Map,this.m=[{kd:null,jd:ho,Uc:function(i,r){return xi(n,"enter",i,r)}},{kd:Es,jd:ho,Uc:function(i,r){return xi(n,"enter",i,r)}},{kd:Is,jd:ho,Uc:function(i,r){return xi(n,"enter",i,r)}},{kd:ho,jd:Es,Uc:function(i,r){return xi(n,"exit",i,r)}},{kd:ho,jd:Is,Uc:function(i,r){return xi(n,"exit",i,r)}},{kd:Es,jd:Is,Uc:function(i,r){r?xi(n,"skip",i,r):(xi(n,"enter",i,r),xi(n,"exit",i,r))}},{kd:Is,jd:Es,Uc:function(i,r){return xi(n,"skip",i,r)}}],this.h=new Ee,this.h.D(this.i,"regionremove",function(i){n.g.delete(i.region)})}$e(Cr,Le),Cr.prototype.release=function(){this.i=null,this.g.clear(),this.h.release(),this.h=null,Le.prototype.release.call(this)},Cr.prototype.j=function(e,t){if(!this.l||e!=0){this.l=!1;for(var n=m(this.i.h.values()),i=n.next();!i.done;i=n.next()){i=i.value;var r=this.g.get(i),o=e<i.startTime?Es:e>i.endTime?Is:ho;this.g.set(i,o);for(var s=m(this.m),u=s.next();!u.done;u=s.next())u=u.value,u.kd==r&&u.jd==o&&u.Uc(i,t)}}};function xi(e,t,n,i){t=new z(t,new Map([["region",n],["seeking",i]])),e.dispatchEvent(t)}var Es=1,ho=2,Is=3;/*
	 @license
	 Copyright 2013 Ali Al Dallal

	 Licensed under the MIT license.

	 Permission is hereby granted, free of charge, to any person obtaining a copy
	 of this software and associated documentation files (the "Software"), to deal
	 in the Software without restriction, including without limitation the rights
	 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	 copies of the Software, and to permit persons to whom the Software is
	 furnished to do so, subject to the following conditions:

	 The above copyright notice and this permission notice shall be included in
	 all copies or substantial portions of the Software.

	 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	 SOFTWARE.
	*/for(var zi={ach:"Lwo",ady:"Адыгэбзэ",af:"Afrikaans","af-NA":"Afrikaans (Namibia)","af-ZA":"Afrikaans (South Africa)",ak:"Tɕɥi",ar:"العربية","ar-AR":"العربية","ar-MA":"العربية","ar-SA":"العربية (السعودية)","ay-BO":"Aymar aru",az:"Azərbaycan dili","az-AZ":"Azərbaycan dili","be-BY":"Беларуская",bg:"Български","bg-BG":"Български",bn:"বাংলা","bn-IN":"বাংলা (ভারত)","bn-BD":"বাংলা(বাংলাদেশ)","bs-BA":"Bosanski",ca:"Català","ca-ES":"Català",cak:"Maya Kaqchikel","ck-US":"ᏣᎳᎩ (tsalagi)",cs:"Čeština","cs-CZ":"Čeština",cy:"Cymraeg","cy-GB":"Cymraeg",da:"Dansk","da-DK":"Dansk",de:"Deutsch","de-AT":"Deutsch (Österreich)","de-DE":"Deutsch (Deutschland)","de-CH":"Deutsch (Schweiz)",dsb:"Dolnoserbšćina",el:"Ελληνικά","el-GR":"Ελληνικά",en:"English","en-GB":"English (UK)","en-AU":"English (Australia)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-IN":"English (India)","en-PI":"English (Pirate)","en-UD":"English (Upside Down)","en-US":"English (US)","en-ZA":"English (South Africa)","en@pirate":"English (Pirate)",eo:"Esperanto","eo-EO":"Esperanto",es:"Español","es-AR":"Español (Argentine)","es-419":"Español (Latinoamérica)","es-CL":"Español (Chile)","es-CO":"Español (Colombia)","es-EC":"Español (Ecuador)","es-ES":"Español (España)","es-LA":"Español (Latinoamérica)","es-NI":"Español (Nicaragua)","es-MX":"Español (México)","es-US":"Español (Estados Unidos)","es-VE":"Español (Venezuela)",et:"eesti keel","et-EE":"Eesti (Estonia)",eu:"Euskara","eu-ES":"Euskara",fa:"فارسی","fa-IR":"فارسی","fb-LT":"Leet Speak",ff:"Fulah",fi:"Suomi","fi-FI":"Suomi","fo-FO":"Føroyskt",fr:"Français","fr-CA":"Français (Canada)","fr-FR":"Français (France)","fr-BE":"Français (Belgique)","fr-CH":"Français (Suisse)","fy-NL":"Frysk",ga:"Gaeilge","ga-IE":"Gaeilge (Gaelic)",gl:"Galego","gl-ES":"Galego","gn-PY":"Avañe'ẽ","gu-IN":"ગુજરાતી","gx-GR":"Ἑλληνική ἀρχαία",he:"עברית‏","he-IL":"עברית‏",hi:"हिन्दी","hi-IN":"हिन्दी",hr:"Hrvatski","hr-HR":"Hrvatski",hsb:"Hornjoserbšćina",ht:"Kreyòl",hu:"Magyar","hu-HU":"Magyar","hy-AM":"Հայերեն",id:"Bahasa Indonesia","id-ID":"Bahasa Indonesia",is:"Íslenska","is-IS":"Íslenska (Iceland)",it:"Italiano","it-IT":"Italiano",ja:"日本語","ja-JP":"日本語","jv-ID":"Basa Jawa","ka-GE":"ქართული","kk-KZ":"Қазақша",km:"ភាសាខ្មែរ","km-KH":"ភាសាខ្មែរ",kab:"Taqbaylit",kn:"ಕನ್ನಡ","kn-IN":"ಕನ್ನಡ (India)",ko:"한국어","ko-KR":"한국어 (韩国)",ku:"Kurdî","ku-TR":"Kurdî",la:"Latin","la-VA":"Latin",lb:"Lëtzebuergesch","li-NL":"Lèmbörgs",lt:"Lietuvių","lt-LT":"Lietuvių",lv:"Latviešu","lv-LV":"Latviešu",mai:"मैथिली, মৈথিলী","mg-MG":"Malagasy",mk:"Македонски","mk-MK":"Македонски (Македонски)",ml:"മലയാളം","ml-IN":"മലയാളം","mn-MN":"Монгол",mr:"मराठी","mr-IN":"मराठी",ms:"Bahasa Melayu","ms-MY":"Bahasa Melayu",mt:"Malti","mt-MT":"Malti",my:"ဗမာစကာ",nb:"Norsk (bokmål)","nb-NO":"Norsk (bokmål)",ne:"नेपाली","ne-NP":"नेपाली",nl:"Nederlands","nl-BE":"Nederlands (België)","nl-NL":"Nederlands (Nederland)","nn-NO":"Norsk (nynorsk)",no:"Norsk",oc:"Occitan","or-IN":"ଓଡ଼ିଆ",pa:"ਪੰਜਾਬੀ","pa-IN":"ਪੰਜਾਬੀ (ਭਾਰਤ ਨੂੰ)",pl:"Polski","pl-PL":"Polski","ps-AF":"پښتو",pt:"Português","pt-BR":"Português (Brasil)","pt-PT":"Português (Portugal)","qu-PE":"Qhichwa","rm-CH":"Rumantsch",ro:"Română","ro-RO":"Română",ru:"Русский","ru-RU":"Русский","sa-IN":"संस्कृतम्","se-NO":"Davvisámegiella","si-LK":"පළාත",sk:"Slovenčina","sk-SK":"Slovenčina (Slovakia)",sl:"Slovenščina","sl-SI":"Slovenščina","so-SO":"Soomaaliga",sq:"Shqip","sq-AL":"Shqip",sr:"Српски","sr-RS":"Српски (Serbia)",su:"Basa Sunda",sv:"Svenska","sv-SE":"Svenska",sw:"Kiswahili","sw-KE":"Kiswahili",ta:"தமிழ்","ta-IN":"தமிழ்",te:"తెలుగు","te-IN":"తెలుగు",tg:"забо́ни тоҷикӣ́","tg-TJ":"тоҷикӣ",th:"ภาษาไทย","th-TH":"ภาษาไทย (ประเทศไทย)",tl:"Filipino","tl-PH":"Filipino",tlh:"tlhIngan-Hol",tr:"Türkçe","tr-TR":"Türkçe","tt-RU":"татарча",uk:"Українська","uk-UA":"Українська",ur:"اردو","ur-PK":"اردو",uz:"O'zbek","uz-UZ":"O'zbek",vi:"Tiếng Việt","vi-VN":"Tiếng Việt","xh-ZA":"isiXhosa",yi:"ייִדיש","yi-DE":"ייִדיש (German)",zh:"中文","zh-HANS":"中文简体","zh-HANT":"中文繁體","zh-CN":"中文（中国）","zh-HK":"中文（香港）","zh-SG":"中文（新加坡）","zh-TW":"中文（台灣）","zu-ZA":"isiZulu"},Pm=m(Object.keys(zi)),If=Pm.next();!If.done;If=Pm.next()){var Nm=If.value;zi[Nm.toLowerCase()]=zi[Nm]}function jm(e,t){if(e.lineBreak)return`
`;if(e.nestedCues.length)return e.nestedCues.map(function(s){return jm(s,e)}).join("");if(!e.payload)return e.payload;var n=[],i=e.fontWeight>=Hr,r=e.fontStyle==Gr,o=e.textDecoration.includes(li);return i&&n.push(["b"]),r&&n.push(["i"]),o&&n.push(["u"]),r=e.color,r==""&&t&&(r=t.color),i="",(r=Om(r))&&(i+="."+r),r=e.backgroundColor,r==""&&t&&(r=t.backgroundColor),(t=Om(r))&&(i+=".bg_"+t),i&&n.push(["c",i]),n.reduceRight(function(s,u){var a=m(u);return u=a.next().value,a=a.next().value,"<"+u+(a===void 0?"":a)+">"+s+"</"+u+">"},e.payload)}function Om(e){e=e.toLowerCase();var t=e.replace(/\s/g,"").match(/^rgba?\((\d+),(\d+),(\d+),?([^,\s)]+)?/i);switch(t?e="#"+(parseInt(t[1],10)|256).toString(16).slice(1)+(parseInt(t[2],10)|256).toString(16).slice(1)+(parseInt(t[3],10)|256).toString(16).slice(1):e.startsWith("#")&&e.length>7&&(e=e.slice(0,7)),e){case"white":case"#fff":case"#ffffff":return"white";case"lime":case"#0f0":case"#00ff00":return"lime";case"cyan":case"#0ff":case"#00ffff":return"cyan";case"red":case"#f00":case"#ff0000":return"red";case"yellow":case"#ff0":case"#ffff00":return"yellow";case"magenta":case"#f0f":case"#ff00ff":return"magenta";case"blue":case"#00f":case"#0000ff":return"blue";case"black":case"#000":case"#000000":return"black"}return null}function Cf(e,t){var n=[];e=m(Um(e));for(var i=e.next();!i.done;i=e.next())if(i=i.value,i.isContainer)n.push.apply(n,H(Cf(i.nestedCues,i)));else{var r=i.clone();r.nestedCues=[],r.payload=jm(i,t),n.push(r)}return n}function Um(e){var t=[];e=m(e);for(var n=e.next(),i={};!n.done;i={mg:void 0},n=e.next())i.mg=n.value,t.some(function(r){return function(o){return Mu(r.mg,o)}}(i))||t.push(i.mg);return t}function Qw(e){function t(i){for(var r=5381,o=i.length;o;)r=r*33^i.charCodeAt(--o);return(r>>>0).toString()}if(e.startTime>=e.endTime)return null;var n=new VTTCue(e.startTime,e.endTime,e.payload);n.id=t(e.startTime.toString())+t(e.endTime.toString())+t(e.payload),n.lineAlign=e.lineAlign,n.positionAlign=e.positionAlign,e.size&&(n.size=e.size);try{n.align=e.textAlign}catch{}return e.textAlign=="center"&&n.align!="center"&&(n.align="middle"),e.writingMode=="vertical-lr"?n.vertical="lr":e.writingMode=="vertical-rl"&&(n.vertical="rl"),e.lineInterpretation==1&&(n.snapToLines=!1),e.line!=null&&(n.line=e.line),e.position!=null&&(n.position=e.position),n}function _m(e,t){var n=Cf(t),i=[];t=e.cues?Array.from(e.cues):[],n=m(n);for(var r=n.next(),o={};!r.done;o={wd:void 0},r=n.next())o.wd=r.value,!t.some(function(s){return function(u){return u.startTime==s.wd.startTime&&u.endTime==s.wd.endTime&&u.text==s.wd.payload}}(o))&&o.wd.payload&&(r=Qw(o.wd))&&i.push(r);for(t=i.slice().sort(function(s,u){return s.startTime!=u.startTime?s.startTime-u.startTime:s.endTime!=u.endTime?s.endTime-u.startTime:"line"in VTTCue.prototype?i.indexOf(u)-i.indexOf(s):i.indexOf(s)-i.indexOf(u)}),t=m(t),n=t.next();!n.done;n=t.next())e.addCue(n.value)}function Mf(e,t){var n=!1;e.mode==="disabled"&&(n=!0,e.mode="hidden");for(var i=0;i<e.cues.length;){var r=e.cues[i];t(r)?e.removeCue(r):i++}n&&(e.mode="disabled")}function at(e){var t=this;this.i=e,this.l=new Ee,this.j=null,this.h=new Map,this.g=-1,this.u=!1,this.o=null,this.C=function(){t.l.Ma(t.i,"textchanged",t.m),t.l.Ma(t.j.textTracks,"change",t.B);for(var n=m(t.h.values()),i=n.next();!i.done;i=n.next())i.value.remove();t.h.clear(),t.g=-1,t.j=null},this.m=function(){var n=new Map,i=t.i.Lc();i=m(i);for(var r=i.next();!r.done;r=i.next()){if(r=r.value,t.h.has(r.id)){var o=t.h.get(r.id);r.active||o.track.mode==="disabled"||(o.track.mode="disabled"),t.h.delete(r.id)}else{o=t.j.ownerDocument.createElement("track"),o.kind=Zw(r);var s=o,u=void 0;if(r.label)u=r.label;else if(r.language)if(r.language in zi)u=zi[r.language];else{var a=Nu(r.language);a in zi&&(u=zi[a]+" ("+r.language+")")}u||(u=r.originalTextId,r.language&&r.language!==r.originalTextId&&(u+=" ("+r.language+")")),s.label=u,r.language in zi&&(o.srclang=r.language),o.src="data:,WEBVTT",o.track.mode="disabled",t.j.appendChild(o)}n.set(r.id,o),r.active&&(t.g=r.id)}for(i=m(t.h.values()),r=i.next();!r.done;r=i.next())r.value.remove();t.g>-1&&(n.has(t.g)?(i=n.get(t.g).track,i.mode==="disabled"&&(i.mode=t.u?"showing":"hidden")):t.g=-1),t.h=n},this.B=function(){if(!t.o){var n=t.j;t.o=new ge(function(){if(t.o=null,t.j===n){var i=-1,r=!1;if(t.h.has(t.g)){var o=t.h.get(t.g);o.track.mode==="showing"?(i=t.g,r=!0):o.track.mode==="hidden"&&(i=t.g)}if(!r)for(r=m(t.h),o=r.next();!o.done;o=r.next()){var s=m(o.value);if(o=s.next().value,s=s.next().value,s.track.mode==="showing"){i=o;break}else i<0&&s.track.mode==="hidden"&&(i=o)}for(r=m(t.h),o=r.next();!o.done;o=r.next())s=m(o.value),o=s.next().value,s=s.next().value,o!==i&&s.track.mode!=="disabled"&&(s.track.mode="disabled");t.g!==i&&(t.g=i,i>-1&&t.i.qh({id:i})),t.i.xh(i>-1&&t.h.get(i).track.mode==="showing")}}).ka(0)}},this.l.D(e,"loaded",function(){return t.enableTextDisplayer()}),this.enableTextDisplayer()}d=at.prototype,d.configure=function(){},d.remove=function(e,t){if(this.i)this.h.has(this.g)&&Mf(this.h.get(this.g).track,function(n){return n.startTime<t&&n.endTime>e});else return!1;return!0},d.append=function(e){this.h.has(this.g)&&_m(this.h.get(this.g).track,e)},d.destroy=function(){return this.i&&(this.j&&this.C(),this.i=null),this.l&&(this.l.release(),this.l=null),Promise.resolve()},d.isTextVisible=function(){return this.u},d.setTextVisibility=function(e){if(this.u=e,this.h.has(this.g)){var t=this.h.get(this.g).track;t.mode!=="disabled"&&(e=e?"showing":"hidden",t.mode!==e&&(t.mode=e))}else if(this.i&&this.i.ae()===3)if(t=Array.from(this.i.bf().textTracks).filter(function(i){return["captions","subtitles","forced"].includes(i.kind)}),e){e=null,t=m(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value,n.mode==="showing"){e=null;break}else e||n.mode!=="hidden"||(e=n);e&&(e.mode="showing")}else for(e=m(t),t=e.next();!t.done;t=e.next())t=t.value,t.mode==="showing"&&(t.mode="hidden")},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){!this.j&&this.i&&this.i.ae()===2&&(this.j=this.i.bf(),this.l.ya(this.i,"unloading",this.C),this.l.D(this.i,"textchanged",this.m),this.l.D(this.j.textTracks,"change",this.B),this.m())};function Zw(e){var t=pe();return e.forced&&t.Ga()==="WEBKIT"?"forced":e.kind==="caption"||e.roles&&e.roles.some(function(n){return n.includes("transcribes-spoken-dialog")})&&e.roles.some(function(n){return n.includes("describes-music-and-sound")})?"captions":"subtitles"}K("shaka.text.NativeTextDisplayer",at),at.prototype.enableTextDisplayer=at.prototype.enableTextDisplayer,at.prototype.setTextLanguage=at.prototype.setTextLanguage,at.prototype.setTextVisibility=at.prototype.setTextVisibility,at.prototype.isTextVisible=at.prototype.isTextVisible,at.prototype.destroy=at.prototype.destroy,at.prototype.append=at.prototype.append,at.prototype.remove=at.prototype.remove,at.prototype.configure=at.prototype.configure;function Mt(e,t){for(Te("SimpleTextDisplayer","Please migrate to NativeTextDisplayer"),this.h=e,this.i=t,this.g=null,e=m(Array.from(this.h.textTracks)),t=e.next();!t.done;t=e.next())t=t.value,t.kind!=="metadata"&&t.kind!=="chapters"&&(t.mode="disabled",t.label==this.i&&(this.g=t));this.g&&(this.g.mode="hidden")}d=Mt.prototype,d.configure=function(){},d.remove=function(e,t){return this.g?(Mf(this.g,function(n){return n.startTime<t&&n.endTime>e}),!0):!1},d.append=function(e){this.g&&_m(this.g,e)},d.destroy=function(){return this.g&&(Mf(this.g,function(){return!0}),this.g.mode="disabled"),this.g=this.h=null,Promise.resolve()},d.isTextVisible=function(){return this.g?this.g.mode=="showing":!1},d.setTextVisibility=function(e){e&&!this.g&&Bm(this),this.g&&(this.g.mode=e?"showing":"hidden")},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){Bm(this)};function Bm(e){e.h&&!e.g&&(e.g=e.h.addTextTrack("subtitles",e.i),e.g.mode="hidden")}K("shaka.text.SimpleTextDisplayer",Mt),Mt.prototype.enableTextDisplayer=Mt.prototype.enableTextDisplayer,Mt.prototype.setTextLanguage=Mt.prototype.setTextLanguage,Mt.prototype.setTextVisibility=Mt.prototype.setTextVisibility,Mt.prototype.isTextVisible=Mt.prototype.isTextVisible,Mt.prototype.destroy=Mt.prototype.destroy,Mt.prototype.append=Mt.prototype.append,Mt.prototype.remove=Mt.prototype.remove,Mt.prototype.configure=Mt.prototype.configure;function kt(){}d=kt.prototype,d.configure=function(){},d.remove=function(){},d.append=function(){},d.destroy=function(){},d.isTextVisible=function(){return!1},d.setTextVisibility=function(){},d.setTextLanguage=function(){},d.enableTextDisplayer=function(){},K("shaka.text.StubTextDisplayer",kt),kt.prototype.enableTextDisplayer=kt.prototype.enableTextDisplayer,kt.prototype.setTextLanguage=kt.prototype.setTextLanguage,kt.prototype.setTextVisibility=kt.prototype.setTextVisibility,kt.prototype.isTextVisible=kt.prototype.isTextVisible,kt.prototype.destroy=kt.prototype.destroy,kt.prototype.append=kt.prototype.append,kt.prototype.remove=kt.prototype.remove,kt.prototype.configure=kt.prototype.configure;function Dt(e,t){var n=this;this.m=!1,this.h=[],this.j=e,this.o=t,this.C=this.u=null,this.g=document.createElement("div"),this.g.classList.add("shaka-text-container"),this.g.style.textAlign="center",this.g.style.display="flex",this.g.style.flexDirection="column",this.g.style.alignItems="center",this.g.style.justifyContent="flex-end",this.B=new ge(function(){n.j.paused||Yi(n)}),Cs(this),this.l=new Map,this.i=new Ee,this.i.D(document,"fullscreenchange",function(){Yi(n,!0)}),this.i.D(this.j,"seeking",function(){Yi(n,!0)}),this.i.D(this.j,"ratechange",function(){Cs(n)}),this.i.D(this.j,"resize",function(){var i=n.j,r=i.videoWidth;i=i.videoHeight,r&&i?n.u=r/i:n.u=null}),this.F=null,"ResizeObserver"in B&&(this.F=new ResizeObserver(function(){Yi(n,!0)}),this.F.observe(this.g)),this.G=new Map}d=Dt.prototype,d.configure=function(e){this.C=e,Cs(this),Yi(this,!0)},d.append=function(e){var t=[].concat(H(this.h));e=m(Um(e));for(var n=e.next(),i={};!n.done;i={ng:void 0},n=e.next())i.ng=n.value,t.some(function(r){return function(o){return Mu(o,r.ng)}}(i))||this.h.push(i.ng);this.h.length&&Cs(this),Yi(this)},d.destroy=function(){return this.g&&(this.g.parentElement&&this.o.removeChild(this.g),this.g=null,this.m=!1,this.h=[],this.B&&(this.B.stop(),this.B=null),this.l.clear(),this.i&&(this.i.release(),this.i=null),this.F&&(this.F.disconnect(),this.F=null)),Promise.resolve()},d.remove=function(e,t){if(!this.g)return!1;var n=this.h.length;return this.h=this.h.filter(function(i){return i.startTime<e||i.endTime>=t}),Yi(this,n>this.h.length),this.h.length||Cs(this),!0},d.isTextVisible=function(){return this.m},d.setTextVisibility=function(e){(this.m=e)?(this.g.parentElement||this.o.appendChild(this.g),Yi(this,!0)):this.g.parentElement&&this.o.removeChild(this.g)},d.setTextLanguage=function(e){e&&e!="und"?this.g.setAttribute("lang",e):this.g.setAttribute("lang","")},d.enableTextDisplayer=function(){};function Cs(e){e.B&&(e.h.length?e.B.Da((e.C?e.C.captionsUpdatePeriod:.25)/Math.max(1,Math.abs(e.j.playbackRate))):e.B.stop())}function eA(e,t){for(;t!=null;){if(t==e.g)return!0;t=t.parentElement}return!1}function bm(e,t,n,i,r){var o=!1,s=[],u=[];t=m(t);for(var a=t.next();!a.done;a=t.next()){a=a.value,r.push(a);var l=e.l.get(a),c=a.startTime<=i&&a.endTime>i,f=l?l.oj:null;l&&(s.push(l.og),l.$c&&s.push(l.$c),c||(o=!0,e.l.delete(a),l=null)),c&&(u.push(a),l?eA(e,f)||(o=!0):(tA(e,a,r),l=e.l.get(a),f=l.oj,o=!0)),a.nestedCues.length>0&&f&&bm(e,a.nestedCues,f,i,r),r.pop()}if(o){for(i=m(s),r=i.next();!r.done;r=i.next())r=r.value,r.parentElement&&r.parentElement.removeChild(r);for(u.sort(function(p,h){return p.startTime!=h.startTime?p.startTime-h.startTime:p.endTime-h.endTime}),u=m(u),i=u.next();!i.done;i=u.next())i=e.l.get(i.value),i.$c?(i.$c.contains(n)&&i.$c.removeChild(n),n.appendChild(i.$c),i.$c.appendChild(i.og)):n.appendChild(i.og)}}function Yi(e,t){if(e.g){var n=e.j.currentTime;if(!e.m||t!==void 0&&t){t=m(e.G.values());for(var i=t.next();!i.done;i=t.next())fs(i.value);fs(e.g),e.l.clear(),e.G.clear()}e.m&&bm(e,e.h,e.g,n,[])}}function tA(e,t,n){var i=n.length>1,r=i?"span":"div";t.lineBreak&&(r="br"),t.rubyTag&&(r=t.rubyTag),i=!i&&t.nestedCues.length>0;var o=document.createElement(r);if(r!="br"&&iA(e,o,t,n,i),n=null,t.region&&t.region.id){var s=t.region,u=e.u===4/3?2.5:1.9;if(n=s.id+"_"+s.width+"x"+s.height+(s.heightUnits==qt?"%":"px")+"-"+s.viewportAnchorX+"x"+s.viewportAnchorY+(s.viewportAnchorUnits==qt?"%":"px"),e.G.has(n))n=e.G.get(n);else{r=document.createElement("span");var a=s.heightUnits==qt?"%":"px",l=s.widthUnits==qt?"%":"px",c=s.viewportAnchorUnits==qt?"%":"px";r.id="shaka-text-region---"+n,r.classList.add("shaka-text-region"),r.style.position="absolute";var f=s.height,p=s.width;s.heightUnits===2&&(f=s.height*5.33,a="%"),s.widthUnits===2&&(p=s.width*u,l="%"),r.style.height=f+a,r.style.width=p+l,s.viewportAnchorUnits===2?(u=s.viewportAnchorY/75*100,a=s.viewportAnchorX/(e.u===4/3?160:210)*100,u-=s.regionAnchorY*f/100,a-=s.regionAnchorX*p/100,r.style.top=u+"%",r.style.left=a+"%"):(r.style.top=s.viewportAnchorY-s.regionAnchorY*f/100+c,r.style.left=s.viewportAnchorX-s.regionAnchorX*p/100+c),s.heightUnits!==0&&s.widthUnits!==0&&s.viewportAnchorUnits!==0&&(s=Math.max(0,Math.min(100-(parseInt(r.style.width.slice(0,-1),10)||0),parseInt(r.style.left.slice(0,-1),10)||0)),r.style.top=Math.max(0,Math.min(100-(parseInt(r.style.height.slice(0,-1),10)||0),parseInt(r.style.top.slice(0,-1),10)||0))+"%",r.style.left=s+"%"),r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.justifyContent=t.displayAlign=="before"?"flex-start":t.displayAlign=="center"?"center":"flex-end",e.G.set(n,r),n=r}}r=o,i&&(r=document.createElement("span"),r.classList.add("shaka-text-wrapper"),r.style.backgroundColor=t.backgroundColor,r.style.lineHeight="normal",o.appendChild(r)),e.l.set(t,{og:o,oj:r,$c:n})}function nA(e){var t=e.direction,n=e.positionAlign;return e=e.textAlign,n!==Du?n:e==="left"||e==="start"&&t===zo||e==="end"&&t==="rtl"?"line-left":e==="right"||e==="start"&&t==="rtl"||e==="end"&&t===zo?"line-right":"center"}function iA(e,t,n,i,r){var o=t.style,s=n.nestedCues.length==0,u=i.length>1;o.whiteSpace="pre-wrap";var a=n.payload.replace(/\s+$/g,function(c){return" ".repeat(c.length)});if(o.webkitTextStrokeColor=n.textStrokeColor,o.webkitTextStrokeWidth=n.textStrokeWidth,o.color=n.color,o.direction=n.direction,o.opacity=n.opacity,o.paddingLeft=kf(n.linePadding,n,e.o),o.paddingRight=kf(n.linePadding,n,e.o),o.textCombineUpright=n.textCombineUpright,o.textShadow=n.textShadow,n.backgroundImage)o.backgroundImage="url('"+n.backgroundImage+"')",o.backgroundRepeat="no-repeat",o.backgroundSize="contain",o.backgroundPosition="center",n.backgroundColor&&(o.backgroundColor=n.backgroundColor),o.width="100%",o.height="100%";else{if(n.nestedCues.length)var l=t;else l=document.createElement("span"),t.appendChild(l);n.border&&(l.style.border=n.border),r||((t=rA(i,function(c){return c.backgroundColor}))?l.style.backgroundColor=t:a&&(l.style.backgroundColor="rgba(0, 0, 0, 0.8)")),a&&(l.setAttribute("translate","no"),l.textContent=a)}u&&!i[i.length-1].isContainer?o.display="inline":(o.display="flex",o.flexDirection="column",o.alignItems="center",n.textAlign=="left"||n.textAlign=="start"?(o.width="100%",o.alignItems="flex-start"):(n.textAlign=="right"||n.textAlign=="end")&&(o.width="100%",o.alignItems="flex-end"),o.justifyContent=n.displayAlign=="before"?"flex-start":n.displayAlign=="center"?"center":"flex-end"),s||(o.margin="0"),o.fontFamily=n.fontFamily,o.fontWeight=n.fontWeight.toString(),o.fontStyle=n.fontStyle,o.letterSpacing=n.letterSpacing,i=e.C?e.C.fontScaleFactor:1,(i!==1||n.fontSize)&&(o.fontSize=kf(n.fontSize||"1em",n,e.o,i)),i=n.line,i!=null&&(s=n.lineInterpretation,s==Yo&&(s=1,u=16,e.u&&e.u<1&&(u=32),i=i<0?100+i/u*100:i/u*100),s==1&&(o.position="absolute",n.writingMode==pr?(o.width="100%",n.lineAlign==hr?o.top=i+"%":n.lineAlign=="end"&&(o.bottom=100-i+"%")):n.writingMode=="vertical-lr"?(o.height="100%",n.lineAlign==hr?o.left=i+"%":n.lineAlign=="end"&&(o.right=100-i+"%")):(o.height="100%",n.lineAlign==hr?o.right=i+"%":n.lineAlign=="end"&&(o.left=100-i+"%")))),o.lineHeight=n.lineHeight,e=nA(n),e=="line-left"?(o.cssFloat="left",n.position!==null&&(o.position="absolute",n.writingMode==pr?(o.left=n.position+"%",o.width="auto"):o.top=n.position+"%")):e=="line-right"?(o.cssFloat="right",n.position!==null&&(o.position="absolute",n.writingMode==pr?(o.right=100-n.position+"%",o.width="auto"):o.bottom=n.position+"%")):n.position!==null&&n.position!=50&&(o.position="absolute",n.writingMode==pr?(o.left=n.position+"%",o.width="auto"):o.top=n.position+"%",n.size&&(o.transform="translateX(-50%)")),o.textAlign=n.textAlign,o.textDecoration=n.textDecoration.join(" "),o.writingMode=n.writingMode,"writingMode"in document.documentElement.style&&o.writingMode==n.writingMode||(o.webkitWritingMode=n.writingMode),n.size&&(n.writingMode==pr?o.width=n.size+"%":o.height=n.size+"%")}function kf(e,t,n,i){i=i===void 0?1:i;var r=(r=new RegExp(/(\d*\.?\d+)([a-z]+|%+)/).exec(e))?{value:Number(r[1]),unit:r[2]}:null;if(!r)return e;switch(e=r.unit,i*=r.value,e){case"%":return i/100*n.clientHeight/t.cellResolution.rows+"px";case"c":return n.clientHeight*i/t.cellResolution.rows+"px";default:return i+e}}function rA(e,t){for(var n=e.length-1;n>=0;n--){var i=t(e[n]);if(i||i===0)return i}return null}K("shaka.text.UITextDisplayer",Dt),Dt.prototype.enableTextDisplayer=Dt.prototype.enableTextDisplayer,Dt.prototype.setTextLanguage=Dt.prototype.setTextLanguage,Dt.prototype.setTextVisibility=Dt.prototype.setTextVisibility,Dt.prototype.isTextVisible=Dt.prototype.isTextVisible,Dt.prototype.remove=Dt.prototype.remove,Dt.prototype.destroy=Dt.prototype.destroy,Dt.prototype.append=Dt.prototype.append,Dt.prototype.configure=Dt.prototype.configure;function oA(e,t){function n(o){for(var s=o,u=m(t),a=u.next();!a.done;a=u.next())a=a.value,a.end&&a.start<o&&(s+=a.end-a.start);return o=Math.floor(s/3600),u=Math.floor(s/60%60),a=Math.floor(s%60),s=Math.floor(s*1e3%1e3),(o<10?"0":"")+o+":"+(u<10?"0":"")+u+":"+(a<10?"0":"")+a+"."+(s<100?s<10?"00":"0":"")+s}var i=Cf(e);e=`WEBVTT

`,i=m(i);for(var r=i.next();!r.done;r=i.next())r=r.value,e+=n(r.startTime)+" --> "+n(r.endTime)+function(o){var s=[];switch(o.textAlign){case"left":s.push("align:left");break;case"right":s.push("align:right");break;case $n:s.push("align:middle");break;case"start":s.push("align:start");break;case"end":s.push("align:end")}switch(o.writingMode){case"vertical-lr":s.push("vertical:lr");break;case"vertical-rl":s.push("vertical:rl")}return s.length?" "+s.join(" "):""}(r)+`
`,e+=r.payload+`

`;return e}K("shaka.text.WebVttGenerator",function(){});function Df(e,t){this.g=t,this.j=e,this.m=new Map,this.l=void 0,this.F=!1,this.J=!0,this.u=this.I=!1,this.C=this.B=void 0,this.H=0,this.K={request:!1,response:!1,event:!1},this.o={},this.i=new Ee,this.G=[],this.h=null}Df.prototype.setMediaElement=function(e){this.h=e,cA(this)},Df.prototype.configure=function(e){this.g=e,fA(this)};function sA(e){e.m.clear(),e.F=!1,e.J=!0,e.I=!1,e.u=!1,e.B=0,e.C=0,e.H=0,e.K={request:!1,response:!1,event:!1},Fm(e),e.o={},e.h=null,e.i.Qa()}function uA(e,t){e.u=t,e.u?e.l==La?e.l=Pa:e.l==Na&&(e.l=ja):e.l==Pa?e.l=La:e.l==ja&&(e.l=Na)}function aA(e,t){if(e.g&&e.g.enabled&&(Rt(e,"ps",{dd:"d"}),e.h&&e.h.autoplay)){var n=e.h.play();n&&n.then(function(){e.H=t}).catch(function(){e.H=0})}}function lA(e,t,n){try{if(!e.g.enabled)return t;var i=Lf(e);e:{switch(n.toLowerCase()){case"audio/mp4":case"audio/webm":case"audio/ogg":case"audio/mpeg":case"audio/aac":case"audio/flac":case"audio/wav":var r=Ma;break e;case"video/webm":case"video/mp4":case"video/mpeg":case"video/mp2t":r=Da;break e;case"application/x-mpegurl":case"application/vnd.apple.mpegurl":case"application/dash+xml":case"video/vnd.mpeg.dash.mpd":case"application/vnd.ms-sstr+xml":r=zm;break e}r=void 0}i.ot=r,i.su=!0;var o=Ms(i);return Ca(t,o)}catch(s){return Li("CMCD_SRC_ERROR","Could not generate src CMCD data.",s),t}}function cA(e){e.i.D(e.h,"playing",function(){e.C||(e.C=Date.now()),Rt(e,"ps",{dd:"p"})}),e.i.D(e.h,"volumechange",function(){Rt(e,e.h.muted?"m":"um")}),e.i.D(e.h,"play",function(){e.B||(e.B=Date.now(),Rt(e,"ps",{dd:"s"}))}),e.i.D(e.h,"pause",function(){Rt(e,"ps",{dd:"a"})}),e.i.D(e.j,"buffering",function(){Rt(e,"ps",{dd:"w"})}),e.i.D(e.h,"seeking",function(){return Rt(e,"ps",{dd:"k"})}),e.i.D(document,"fullscreenchange",function(){Rt(e,document.fullscreenElement?"pe":"pc")});var t=e.h;(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.i.D(t,"webkitpresentationmodechanged",function(){t.webkitPresentationMode?Rt(e,t.webkitPresentationMode!=="inline"?"pe":"pc"):t.webkitSupportsFullscreen&&Rt(e,t.webkitDisplayingFullscreen?"pe":"pc")}),e.i.D(e.h,"enterpictureinpicture",function(){Rt(e,"pe")}),e.i.D(e.h,"leavepictureinpicture",function(){Rt(e,"pc")}),"documentPictureInPicture"in B&&e.i.D(B.documentPictureInPicture,"enter",function(n){Rt(e,"pe"),e.i.ya(n.window,"pagehide",function(){Rt(e,"pc")})}),e.i.D(document,"visibilitychange",function(){document.hidden?Rt(e,"b",{bg:!0}):Rt(e,"b")}),e.i.D(e.j,"complete",function(){Rt(e,"ps",{dd:"e"})})}function fA(e){Fm(e);var t=Vm(e);t=m(t);for(var n=t.next();!n.done;n=t.next())if(n=n.value.timeInterval,n===void 0&&(n=EA),n>=1){var i=new ge(function(){return Rt(e,IA)});i.Da(n),e.G.push(i)}}function Fm(e){if(e.G)for(var t=m(e.G),n=t.next();!n.done;n=t.next())n.value.stop();e.G=[]}function Vm(e){return(e=e.g.targets)?e.filter(function(t){return t.mode===Qm&&t.enabled}):[]}function Rf(e){return(e=e.g.targets)?e.filter(function(t){return t.mode===$m&&t.enabled===!0}):[]}function Lf(e){return e.g.sessionId||(e.g.sessionId=B.crypto.randomUUID()),{v:e.g.version,sf:e.l,sid:e.g.sessionId,cid:e.g.contentId,mtp:e.j.getBandwidthEstimate()/1e3}}function Rt(e,t,n){if(n=n===void 0?{}:n,t=Object.assign({e:t,ts:Date.now()},n),t=jf(e,t,Qm),n=e.g.targets,!(e.g.version<Uf)&&n){var i=Vm(e);n=Array.from(new Set([].concat(H(_f),H(SA)))),i=m(i);for(var r=i.next();!r.done;r=i.next()){r=r.value;var o=Pf(r.includeKeys||[],n);o.includes(qm)||o.push(qm),o=Nf(t,o);var s=r.events||[],u=o.e,a=o.sta;u&&(!wA.includes(u)||!(u!=="ps"||a&&AA.includes(a))||s&&s.length>0&&!s.includes(u))||Hm(e,o,r)}}}function go(e,t,n){if(e.g.enabled){n=jf(e,n,Jm);var i=Gm({mode:Jm,useHeaders:e.g.useHeaders,includeKeys:e.g.includeKeys||[]});e.o[i]||(e.o[i]={request:1,response:1}),n.sn=e.o[i].request++,i=e.g.includeKeys||[];var r=e.g.version==Uf?Array.from(new Set([].concat(H(_f),H(TA)))):Ym;i=Pf(i,r),n=Nf(n,i),dA(e,n,t,e.g.useHeaders)}}function Hm(e,t,n,i){var r=jn(),o=n.url;if(n.useHeaders){if(t=Xm(t),!Object.keys(t).length)return;i&&Object.assign(i.headers,t),i=ot([o],r),Object.assign(i.headers,t)}else{if(t=Ms(t),!t)return;o=Ca(o,t),i&&(i.uri=o),i=ot([o],r)}e.j.Yb().request(9,i)}function dA(e,t,n,i){if(i){if(t=Xm(t),!Object.keys(t).length)return;Object.assign(n.headers,t)}else{var r=Ms(t);if(!r)return;n.uris=n.uris.map(function(o){return Ca(o,r)})}Rf(e).length>0||!e.m.has(n)||e.m.delete(n)}function Pf(e,t){if(!e||e.length===0)return t;for(var n=m(e),i=n.next();!i.done;i=n.next())t.includes(i.value);return e=e.filter(function(r){return t.includes(r)})}function Nf(e,t){return Object.keys(e).reduce(function(n,i){return t.includes(i)&&(n[i]=e[i]),n},{})}function pA(e){if(e.type===0)return mA;if(e=e.stream){var t=e.type;if(t=="video")return e.codecs&&e.codecs.includes(",")?Da:ka;if(t=="audio")return Ma;if(t=="text")return e.mimeType==="application/mp4"?Ra:Of}}function Gm(e){var t=Object.keys(e).sort().reduce(function(n,i){return i!=="enabled"&&(n[i]=e[i]),n},{});return JSON.stringify(t)}function hA(e,t){if(t=e.j.Hc()[t],!t.length)return NaN;var n=e.h?e.h.currentTime:0;return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?(e.end-n)*1e3:NaN}function Km(e,t){if(t=e.j.Hc()[t],!t.length)return 0;var n=e.h?e.h.currentTime:0;return(e=t.find(function(i){return i.start<=n&&i.end>=n}))?(e.end-n)*1e3:0}function gA(e,t){var n=e.j.sc();if(!n.length)return NaN;e=n[0],n=m(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.type==="variant"&&i.bandwidth>e.bandwidth&&(e=i);switch(t){case ka:return e.videoBandwidth||NaN;case Ma:return e.audioBandwidth||NaN;default:return e.bandwidth}}function Wm(e,t,n){var i=t.segment,r=0;i&&(r=i.endTime-i.startTime),r={d:r*1e3,st:e.j.W()?yA:vA},r.ot=pA(t);var o=r.ot===ka||r.ot===Ma||r.ot===Da||r.ot===Ra;if(t=t.stream){var s=e.j.Ob();if(o&&(r.bl=hA(e,t.type),r.ot!==Ra)){var u=Km(e,t.type);r.dl=s?u/Math.abs(s):u}if(t.bandwidth&&(r.br=t.bandwidth/1e3),t.segmentIndex&&i){if((s=t.segmentIndex.Xb(i.endTime,!0,s<0))&&(s=s.next().value)&&s!=i){if(n&&!Pi(i.P(),s.P())){var a=s.P()[0];u=new URL(a);var l=new URL(n);if(u.origin!==l.origin)n=a;else{n=u.pathname.split("/").slice(1),a=l.pathname.split("/").slice(1,-1),l=Math.min(n.length,a.length);for(var c=0;c<l&&n[c]===a[c];c++)n.shift(),a.shift();for(;a.length;)a.shift(),n.unshift("..");n=n.join("/")+u.search+u.hash}r.nor=n}!s.startByte&&!s.endByte||i.startByte==s.startByte&&i.endByte==s.endByte||(n=s.startByte+"-",s.endByte&&(n+=s.endByte),r.nrr=n)}s=e.j.Ob()||1,n=Km(e,t.type)||500,i=(t=t.bandwidth)?t*(i.endTime-i.startTime)/1e3/(n/s/1e3)*e.g.rtpSafetyFactor:NaN,isNaN(i)||(r.rtp=i)}}return o&&r.ot!==Ra&&(r.tb=gA(e,r.ot)/1e3),r}function jf(e,t,n){Object.assign(t,Lf(e)),t.pr=e.j.Ob();var i=t.ot===ka||t.ot===Da;return e.I&&i&&(t.bs=!0,t.su=!0,e.I=!1),t.su==null&&(t.su=e.J),e.j.W()&&(i=Tv(e.j),t.ltc=i||void 0),document.hidden&&(t.bg=!0),i=e.C&&e.B?e.C-(e.H||e.B):void 0,i==null||e.K[n]||(t.msd=i,e.K[n]=!0),t}function Ms(e){function t(f){return n(f/100)*100}function n(f){return Math.round(f)}function i(f){return!Number.isNaN(f)&&f!=null&&f!==""&&f!==!1}var r=[],o={br:n,d:n,bl:t,dl:t,mtp:t,nor:function(f){return encodeURIComponent(f)},rtp:t,tb:n,ttfb:n,ttlb:n},s=Object.keys(e||{}).sort();s=m(s);for(var u=s.next();!u.done;u=s.next()){u=u.value;var a=e[u];if(i(a)&&(u!=="v"||a!==1)&&(u!="pr"||a!==1)){var l=o[u];l&&(a=l(a)),l=typeof a;var c=void 0;c=l==="string"&&u!=="ot"&&u!=="sf"&&u!=="st"?u+"="+JSON.stringify(a):l==="boolean"?u:l==="symbol"?u+"="+a.description:u+"="+a,r.push(c)}}return r.join(",")}function Xm(e){var t=Object.keys(e),n={},i=["Object","Request","Session","Status"],r=[{},{},{},{}],o={br:0,d:0,ot:0,tb:0,url:0,bl:1,dl:1,mtp:1,nor:1,nrr:1,su:1,ltc:1,ttfb:1,ttlb:1,ts:1,rc:1,cmsdd:1,cmsds:1,sn:1,cid:2,pr:2,sf:2,sid:2,st:2,v:2,msd:2,bs:3,rtp:3,bg:3};t=m(t);for(var s=t.next();!s.done;s=t.next())s=s.value,r[o[s]!=null?o[s]:1][s]=e[s];for(e=0;e<r.length;e++)(o=Ms(r[e]))&&(n["CMCD-"+i[e]]=o);return n}function Ca(e,t){return!t||e.includes("offline:")?e:(e=new tt(e),e.g.set("CMCD",t),e.toString())}var zm="m",Ma="a",ka="v",Da="av",mA="i",Of="c",Ra="tt",Uf=2,vA="v",yA="l",La="d",Pa="ld",Na="h",ja="lh";K("shaka.util.CmcdManager.StreamingFormat",{DASH:La,Tl:Pa,HLS:Na,Ul:ja,jm:"s",OTHER:"o"});var Ym="br bl bs cid d dl mtp nor nrr ot pr rtp sf sid st su tb v".split(" "),_f="br ab bl tbl bs cdn cid ltc mtp pr sf sid bg sta st ts tpb tb lb tab lab pt ec msd v sn".split(" "),TA="ab bl tbl bs cdn cid d dl ltc mtp nor ot pr rtp sf sid bg sta st su ts tpb tb lb tab lab pt ec msd v".split(" "),xA="d dl nor ot rtp rc su ttfb ttfbb ttlb url cmsdd cmsds".split(" "),SA=["e","sta"],wA="ps e t c b m um pe pc".split(" "),AA="spawkrfeqd".split(""),EA=10,qm="ts",IA="t",Jm="request",$m="response",Qm="event";function Sn(e){this.h=e,this.g=null}d=Sn.prototype,d.configure=function(e){this.h=e},d.ki=function(){return this.h.enabled&&this.h.applyMaximumSuggestedBitrate&&this.g&&this.g.has(tv)?this.g.get(tv)*1e3:null},d.ii=function(){return this.h.enabled&&this.g&&this.g.has(ev)?this.g.get(ev)*1e3:null},d.Yj=function(){return this.h.enabled&&this.g&&this.g.has(nv)?this.g.get(nv):null},d.Zj=function(){return this.h.enabled&&this.g&&this.g.has(iv)?this.g.get(iv):null},d.getBandwidthEstimate=function(e){var t=this.ii();if(!t)return e;var n=this.h.estimatedThroughputWeightRatio;return n>0&&n<=1?e*(1-n)+t*n:e};function Zm(e){return e?e.toLowerCase()==="false"?!1:/^[-0-9]/.test(e)?parseInt(e,10):e.replace(/["]+/g,""):!0}K("shaka.util.CmsdManager",Sn),Sn.prototype.getBandwidthEstimate=Sn.prototype.getBandwidthEstimate,Sn.prototype.getRoundTripTime=Sn.prototype.Zj,Sn.prototype.getResponseDelay=Sn.prototype.Yj,Sn.prototype.getEstimatedThroughput=Sn.prototype.ii,Sn.prototype.getMaxBitrate=Sn.prototype.ki;var ev="etp",tv="mb",nv="rd",iv="rtt";function rv(){this.g=null,this.h=[]}function Bf(e,t){return k(function(n){if(n.g==1)return e.g?T(n,new Promise(function(i){return e.h.push(i)}),2):n.A(2);e.g=t,G(n)})}rv.prototype.release=function(){this.h.length>0?this.h.shift()():this.g=null};function bf(e,t,n){return n=n===void 0?Number.EPSILON:n,e===t?!0:(e=Math.abs(e-t),e<=n?!0:n!==Number.EPSILON?Math.abs(e-n)<=Number.EPSILON:!1)}function U(e,t,n){t=t===void 0?null:t,Le.call(this);var i=this;this.m=Va,this.h=null,this.Be=t,this.aa=!1,this.Le=new Ee,this.Ce=new Ee,this.j=new Ee,this.fc=new Ee,this.Hd=new Ee,this.G=this.H=this.F=this.N=null,this.Me=0,this.ha=new rv,this.O=this.Ja=this.X=this.i=this.Ac=this.I=this.l=this.ye=this.T=this.Qh=this.wa=this.K=this.sb=this.Aa=this.Ae=this.R=this.Ta=this.M=this.cc=null,this.Ua=!1,this.Ge=this.o=null,this.Fe=1e9,this.Ke=[],this.zc=new Map,this.yb=[],this.ag=-1,this.g=Wn(this),this.dg=Im(),this.V=null,this.Ne=-1,this.ec=null,this.za={width:1/0,height:1/0},this.Ee=new jc(this.g,this.za,null),this.Ie=[],this.B=null,this.J=this.g.adaptationSetCriteriaFactory(),this.J.configure({language:this.g.preferredAudioLanguage,role:this.g.preferredAudioRole,videoRole:this.g.preferredVideoRole,channelCount:0,hdrLevel:this.g.preferredVideoHdrLevel,spatialAudio:this.g.preferSpatialAudio,videoLayout:this.g.preferredVideoLayout,audioLabel:this.g.preferredAudioLabel,videoLabel:this.g.preferredVideoLabel,codecSwitchingStrategy:this.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:this.g.preferredAudioCodecs,preferredAudioChannelCount:this.g.preferredAudioChannelCount}),this.Ld=this.g.preferredTextLanguage,this.Pd=this.g.preferredTextRole,this.Od=this.g.preferForcedSubs,this.De=[],n&&n(this),this.K=new Df(this,this.g.cmcd),this.wa=new Sn(this.g.cmsd),this.N=fv(this),this.ma=this.oa=this.Ea=this.C=null,this.fg=!1,this.cg=[],this.eg=new ge(function(){return k(function(r){if(r.g==1)return i.oa?T(r,i.Vb(i.ma,!0),3):r.A(0);if(r.g!=4)return T(r,i.load(i.oa),4);i.fg?i.ma.pause():i.ma.play(),i.oa=null,i.fg=!1,G(r)})}),Ha&&(this.C=Ha(),this.C.configure(this.g.ads),this.Hd.D(this.C,"ad-content-pause-requested",function(r){var o,s;return k(function(u){if(u.g==1)return i.eg.stop(),i.oa?u.A(0):(i.ma=i.h,i.fg=i.ge(),o=r.saveLivePosition||!1,s=!0,i.W()&&(s=o),T(u,i.ai(!0,s),3));i.oa=u.h,G(u)})}),this.Hd.D(this.C,"ad-content-resume-requested",function(r){if(r=r.offset||0,i.oa){var o=i.oa;o.o&&r&&(typeof o.o=="number"?o.o+=r:o.o.setTime(o.o.getTime()+r*1e3))}i.eg.ka(.1)}),this.Hd.D(this.C,"ad-content-attach-requested",function(){return k(function(r){if(r.g==1)return i.h||!i.ma?r.A(0):T(r,i.Vb(i.ma,!0),3);i.ma=null,G(r)})})),Ga&&(this.Ea=Ga(this),this.Ea.configure(this.g.queue)),this.Le.D(B,"online",function(){Xf(i),i.mh()}),this.He=new ge(function(){for(var r=Date.now()/1e3,o=!1,s=!0,u=m(i.i.variants),a=u.next();!a.done;a=u.next())a=a.value,a.disabledUntilTime>0&&a.disabledUntilTime<=r&&(a.disabledUntilTime=0,o=!0),a.disabledUntilTime>0&&(s=!1);s&&i.He.stop(),o&&Ji(i,!1,void 0,!1,!1)}),this.ib=null,e&&(Te("Player w/ mediaElement","Please migrate from initializing Player with a mediaElement; use the attach method instead."),this.Vb(e,!0)),this.u=null}$e(U,Le);function Oa(e){e.T!=null&&(th(e.T),e.T.release(),e.T=null)}function CA(e,t,n){n||t.lcevc.enabled?(Oa(e),e.T==null&&(e.T=new Fo(e.h,e.Qh,t.lcevc,n),e.H&&(e.H.C=e.T))):Oa(e)}function Oe(e,t){return new z(e,t)}d=U.prototype,d.destroy=function(){var e=this,t;return k(function(n){switch(n.g){case 1:return e.m==On?n.return():(Oa(e),t=e.detach(),e.m=On,T(n,t,2));case 2:return T(n,e.rg(),3);case 3:if(e.Le&&(e.Le.release(),e.Le=null),e.Ce&&(e.Ce.release(),e.Ce=null),e.j&&(e.j.release(),e.j=null),e.fc&&(e.fc.release(),e.fc=null),e.Hd&&(e.Hd.release(),e.Hd=null),e.Ge=null,e.g=null,e.B=null,e.Be=null,e.K=null,e.wa=null,!e.N){n.A(4);break}return T(n,e.N.destroy(),5);case 5:e.N=null;case 4:e.o&&(e.o.release(),e.o=null),e.Ea&&(e.Ea.destroy(),e.Ea=null),Le.prototype.release.call(e),G(n)}})};function ov(e,t){jv.set(e,t)}function mo(e,t){e.dispatchEvent(Oe("onstatechange",new Map().set("state",t)))}d.Vb=function(e,t){t=t===void 0?!0:t;var n=this,i,r,o;return k(function(s){switch(s.g){case 1:if(n.m==On)throw new D(2,7,7e3);if(i=n.h&&n.h==e,!n.h||n.h==e){s.A(2);break}return T(s,n.detach(),2);case 2:return T(s,Ff(n,"attach"),4);case 4:if(s.h)return s.return();if(se(s,5,6),i||(mo(n,"attach"),r=function(){var u=zf(n,!1);u&&vo(n,u)},n.Ce.D(e,"error",r),n.h=e,n.K&&n.K.setMediaElement(e)),pe(),!t||!ei()||n.H){s.A(6);break}return T(s,Vf(n),6);case 6:on(s),n.ha.release(),sn(s,0);break;case 5:return o=ue(s),T(s,n.detach(),10);case 10:throw o}})},d.rj=function(e){this.Qh=e},d.detach=function(e){e=e===void 0?!1:e;var t=this;return k(function(n){if(n.g==1){if(t.m==On)throw new D(2,7,7e3);return T(n,t.Dc(!1,e),2)}if(n.g!=3)return T(n,Ff(t,"detach"),3);if(n.h)return n.return();try{t.h&&(t.Ce.Qa(),t.h=null),mo(t,"detach"),t.C&&!e&&t.C.release()}finally{t.ha.release()}G(n)})};function Ff(e,t){var n;return k(function(i){return i.g==1?(n=++e.Me,T(i,Bf(e.ha,t),2)):n!=e.Me?(e.ha.release(),i.return(!0)):i.return(!1)})}d.Dc=function(e,t){e=e===void 0?!0:e,t=t===void 0?!1:t;var n=this,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x;return k(function(w){switch(w.g){case 1:return n.m!=On&&(n.m=Va),T(w,Ff(n,"unload"),2);case 2:return w.h?w.return():(ni(w,3),n.Ua=!1,mo(n,"unload"),Oa(n),i=n.De.map(function(I){return I()}),n.De=[],T(w,Promise.all(i),5));case 5:if(n.dispatchEvent(Oe("unloading")),n.Ae&&(n.Ae.release(),n.Ae=null),n.Aa&&(n.Aa.release(),n.Aa=null),n.sb&&(n.sb.release(),n.sb=null),n.h&&(n.j.Qa(),n.fc.Qa()),n.He.stop(),n.cc&&(n.cc.release(),n.cc=null),n.Ta&&(n.Ta.stop(),n.Ta=null),!n.I){w.A(6);break}return T(w,n.I.stop(),7);case 7:n.I=null,n.Ac=null;case 6:if(n.o&&n.o.stop(),!n.l){w.A(8);break}return T(w,n.l.destroy(),9);case 9:n.l=null;case 8:if(n.M&&(n.M.release(),n.M=null),n.G&&(n.G.release(),n.G=null),B.shakaMediaKeysPolyfill!=="webkit"||!n.F){w.A(10);break}return T(w,n.F.destroy(),11);case 11:n.F=null;case 10:if(!n.H){w.A(12);break}return T(w,n.H.destroy(),13);case 13:n.H=null;case 12:if(n.C&&!t&&n.C.onAssetUnload(),n.oa&&!t&&(n.oa.destroy(),n.oa=null),t||n.eg.stop(),n.K&&sA(n.K),n.wa&&(n.wa.g=null),!n.u){w.A(14);break}return T(w,n.u.destroy(),15);case 15:n.u=null;case 14:if(n.aa=!1,n.h){for(r=m(n.cg),o=r.next();!o.done;o=r.next())s=o.value,s.src.startsWith("blob:")&&URL.revokeObjectURL(s.src),s.remove();n.cg=[],ea(n.h)&&n.h.load()}if(!n.F){w.A(16);break}return T(w,n.F.destroy(),17);case 17:n.F=null;case 16:if(n.ib&&n.X!=n.ib.rd()&&(n.ib.l||n.ib.destroy(),n.ib=null),n.X=null,n.Ja=null,n.R=null,n.i){for(u=m(n.i.variants),a=u.next();!a.done;a=u.next())for(l=a.value,c=m([l.audio,l.video]),f=c.next();!f.done;f=c.next())(p=f.value)&&p.segmentIndex&&p.segmentIndex.release();for(h=m(n.i.textStreams),g=h.next();!g.done;g=h.next())v=g.value,v.segmentIndex&&v.segmentIndex.release()}for(n.g&&n.g.streaming.clearDecodingCache&&(bu.clear(),Ur.clear()),n.i=null,n.B=new Ia,n.Ph=null,n.ec=null,n.V=null,n.Ne=-1,n.Ke=[],y=m(n.zc.values()),S=y.next();!S.done;S=y.next())x=S.value,x.stop();n.zc.clear(),n.yb=[],n.ag=-1,n.N&&n.N.Xh(),ks(n);case 3:on(w),n.ha.release(),sn(w,4);break;case 4:if(pe(),e&&ei()&&!n.H&&n.h)return T(w,Vf(n),0);w.A(0)}})},d.rl=function(e){this.O=e},d.load=function(e,t,n){t=t===void 0?null:t;var i=this,r,o,s,u,a,l,c,f,p,h,g,v,y,S;return k(function(x){switch(x.g){case 1:if(i.m==On)throw new D(2,7,7e3);if(i.h||!i.ma){x.A(2);break}return T(x,i.Vb(i.ma,!0),3);case 3:i.ma=null;case 2:if(r=null,o="",e instanceof xn){if(e.l)throw new D(2,7,7006);r=e,o=r.rd()||""}else o=e||"";return T(x,Bf(i.ha,"load"),4);case 4:if(i.ha.release(),!i.h)throw new D(2,7,7002);if(!i.X){x.A(5);break}return i.X=o,T(x,i.Dc(!1),5);case 5:if(s=++i.Me,u=function(){return k(function(w){if(w.g==1)return i.Me==s?w.A(0):r?T(w,r.destroy(),3):w.A(3);throw new D(2,7,7e3)})},a=function(w,I){return k(function(L){switch(L.g){case 1:return ni(L,2),T(L,Bf(i.ha,I),4);case 4:return T(L,u(),5);case 5:return T(L,w(),6);case 6:return T(L,u(),7);case 7:r&&i.g&&(r.g=i.g);case 2:on(L),i.ha.release(),sn(L,0)}})},se(x,7,8),t==null&&r&&(t=r.getStartTime()),i.O=t,i.Ua=!1,i.dispatchEvent(Oe("loading")),r){n=r.V,x.A(10);break}if(n){x.A(10);break}return T(x,a(function(){return k(function(w){if(w.g==1)return T(w,lv(i,o),2);n=w.h,G(w)})},"guessMimeType_"),10);case 10:if(l=!!r,r){km(r,i),i.B=r.getStats(),x.A(13);break}return T(x,uv(i,o,t,n,!0,i.g),14);case 14:(r=x.h)?(r.F=!1,km(r,i),i.B=r.getStats(),r.start(),r.B.catch(function(){})):i.B=new Ia;case 13:return c=!r,f=Date.now()/1e3,i.B=r?r.getStats():new Ia,i.X=o,i.Ja=n||null,ks(i),p=function(){var w=i.h?i.h.buffered:null;return{start:Mg(w)||0,end:Zu(w)||0}},i.Aa=new gs(p),i.Aa.addEventListener("regionadd",function(w){Hf(i,w.region,"metadataadded")}),c?T(x,a(function(){return k(function(w){return T(w,RA(i,n),0)})},"initializeSrcEqualsDrmInner_"),25):(i.sb=new gs(p),T(x,a(function(){return k(function(w){if(w.g==1)return T(w,Promise.race([r.ma,r.B]),2);i.Ac=r.H;var I=r;I.oa=!0,i.I=I.m,i.i=r.Lg(),G(w)})},"waitForFinish"),17));case 17:if(i.H){x.A(18);break}return T(x,a(function(){return k(function(w){return T(w,Vf(i),0)})},"initializeMediaSourceEngineInner_"),18);case 18:return i.i&&i.i.textStreams.length&&(i.u.enableTextDisplayer?i.u.enableTextDisplayer():Te("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method!')),T(x,a(function(){return k(function(w){return T(w,r.B,0)})},"waitForFinish"),20);case 20:if(i.g=r.getConfiguration(),i.Ee=r.G,i.I&&i.I.setMediaElement&&i.h&&i.I.setMediaElement(i.h),i.Ae=Kw(r),i.ye=r.Ja,(h=r.C)&&(i.J=h),l&&i.h&&i.h.nodeName==="AUDIO"&&(MA(i),i.configure("manifest.disableVideo",!0)),r.j){x.A(21);break}return T(x,a(function(){return k(function(w){return T(w,Dm(r,i.h),0)})},"drmEngine_.init"),21);case 21:return i.F=Ww(r),T(x,a(function(){return k(function(w){return T(w,i.F.Vb(i.h),0)})},"drmEngine_.attach"),23);case 23:return g=i.g.abrFactory,i.o&&i.Ge==g||(i.Ge=g,i.o&&i.o.release(),i.o=g(),typeof i.o.setMediaElement!="function"&&(Te("AbrManager w/o setMediaElement","Please use an AbrManager with setMediaElement function."),i.o.setMediaElement=function(){}),typeof i.o.setCmsdManager!="function"&&(Te("AbrManager w/o setCmsdManager","Please use an AbrManager with setCmsdManager function."),i.o.setCmsdManager=function(){}),typeof i.o.trySuggestStreams!="function"&&(Te("AbrManager w/o trySuggestStreams","Please use an AbrManager with trySuggestStreams function."),i.o.trySuggestStreams=function(){}),i.o.configure(i.g.abr)),v=Xw(r),y=r.i,T(x,a(function(){return k(function(w){return T(w,DA(i,f,y,v),0)})},"loadInner_"),24);case 24:Gw(r),i.Ja&&pe().hj()&&Lu(i.Ja)&&OS(i.H,i.X,i.Ja),x.A(16);break;case 25:return T(x,a(function(){return k(function(w){return T(w,LA(i,f,n),0)})},"srcEqualsInner_"),16);case 16:i.dispatchEvent(Oe("loaded"));case 8:if(on(x),!r){x.A(27);break}return T(x,r.destroy(),27);case 27:i.ib=null,sn(x,0);break;case 7:if(S=ue(x),!S||S.code==7e3){x.A(29);break}return T(x,i.Dc(!1),29);case 29:throw S}})};function MA(e){for(var t=m(e.i.variants),n=t.next();!n.done;n=t.next())n=n.value,n.video&&(n.video.closeSegmentIndex(),n.video=null),n.bandwidth=n.audio&&n.audio.bandwidth?n.audio.bandwidth:0;e.i.variants=e.i.variants.filter(function(i){return i.audio})}d.kj=function(e,t,n){e=e===void 0?!0:e,t=t===void 0?!1:t,n=n===void 0?!1:n;var i=this,r;return k(function(o){return o.g==1?T(o,sv(i,n),2):o.g!=3?(r=o.h,T(o,i.Dc(e,t),3)):o.return(r)})},d.ai=function(e,t){e=e===void 0?!1:e,t=t===void 0?!1:t;var n=this,i;return k(function(r){return r.g==1?T(r,sv(n,t),2):r.g!=3?(i=r.h,T(r,n.detach(e),3)):r.return(i)})};function sv(e,t){t=t===void 0?!1:t;var n,i,r;return k(function(o){if(o.g==1)return n=null,e.i&&e.I&&e.Ac&&e.X&&e.g?(i=e.h.currentTime,t||(i=null),T(o,av(e,e.X,i,e.Ja,e.g,!0,!1),3)):o.A(2);if(o.g!=2){n=o.h,e.Ie.push(n),e.I&&e.I.setMediaElement&&e.I.setMediaElement(null),(r=e.l?e.l.o:null)&&(n.i=r);var s=n,u=e.I,a=e.Ac;s.h=e.i,s.m=u,s.H=a,n.C=e.J,n.start(),e.i=null,e.I=null,e.Ac=null,e.o=null,e.Ge=null}return o.return(n)})}d.preload=function(e,t,n,i){t=t===void 0?null:t;var r=this,o,s;return k(function(u){return u.g==1?(o=Wn(r),Ti(o,i||r.g,Wn(r)),T(u,uv(r,e,t,n,!1,o),2)):((s=u.h)?s.start():vo(r,new D(2,7,7005)),u.return(s))})},d.rg=function(){var e=this,t,n,i,r;return k(function(o){for(t=[],n=m(e.Ie),i=n.next();!i.done;i=n.next())r=i.value,r.l||t.push(r.destroy());return e.Ie=[],T(o,Promise.all(t),0)})};function uv(e,t,n,i,r,o){r=r===void 0?!1:r;var s,u,a;return k(function(l){return l.g==1?i?l.A(2):T(l,lv(e,t),3):(l.g!=2&&(i=l.h),kA(e,i)?l.return(null):(s=o||e.g,u=!1,r&&e.h&&e.h.nodeName==="AUDIO"&&(u=!0),a=av(e,t,n,i||null,s,!r,u),a=r?a.then(function(c){return c.F=!1,c}):a.then(function(c){return e.Ie.push(c),c}),l.return(a)))})}function av(e,t,n,i,r,o,s){o=o===void 0?!0:o,s=s===void 0?!1:s;var u,a,l,c,f,p,h,g,v,y,S,x,w,I,L;return k(function(A){return A.g==1?(u=null,a=Pn(r),s&&(a.manifest.disableVideo=!0),l=function(){return u.R&&u.l?null:u},c=function(){return l()?l().getConfiguration():e.g},e.za.width!=1/0||e.za.height!=1/0||e.g.ignoreHardwareResolution?A.A(2):(f=pe(),T(A,f.nc(),3))):(A.g!=2&&(p=A.h,e.za.width=p.width,e.za.height=p.height),h=new jc(a,e.za,null),g={networkingEngine:e.N,filter:function(C){var E,R;return k(function(M){if(M.g==1)return T(M,fg(h,C),2);if(M.g!=4)return E=M.h,E?(R=Oe("trackschanged"),T(M,Promise.resolve(),4)):M.A(0);u.dispatchEvent(R),G(M)})},makeTextStreamsForClosedCaptions:function(C){return KA(e,C)},onTimelineRegionAdded:function(C){rf(u.I,C)},onEvent:function(C){return u.dispatchEvent(C)},onError:function(C){return u.onError(C)},isLowLatencyMode:function(){return c().streaming.lowLatencyMode},updateDuration:function(){e.l&&u.R&&e.l.updateDuration()},newDrmInfo:function(C){var E=u.j,R=E?E.g:null;R&&E.B&&hg(h,R.keySystem,C)},onManifestUpdated:function(){var C=new Map().set("isLive",e.W());u.dispatchEvent(Oe("manifestupdated",C)),As(u,!1,function(){e.C&&e.C.onManifestUpdated(e.W())})},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},onMetadata:function(C,E,R,M){var P=C;(C=="com.apple.hls.interstitial"||C=="com.apple.hls.overlay")&&(P="com.apple.quicktime.HLS",C={startTime:E,endTime:R,values:M},e.C&&e.C.onHLSInterstitialMetadata(e,e.h,C)),M=m(M),C=M.next();for(var N={};!C.done;N={dh:void 0},C=M.next())N.dh=C.value,N.dh.name!="ID"&&As(u,!1,function(b){return function(){Gf(e,E,R,P,b.dh)}}(N))},disableStream:function(C){return e.disableStream(C,e.g.streaming.maxDisabledTime)},addFont:function(C,E){return e.addFont(C,E)}},v=new gs(function(){return e.Ra()}),v.addEventListener("regionadd",function(C){var E=C.region;Ls(e,"timelineregionadded",E,u),As(u,!1,function(){e.C&&(e.C.onDashTimedMetadata(E),e.C.onDASHInterstitialMetadata(e,e.h,E))})}),y=null,a.streaming.observeQualityChanges&&(y=new ua(function(){return e.Hc()}),y.addEventListener("qualitychange",function(C){Rv(e,C.quality,C.position)}),y.addEventListener("audiotrackchange",function(C){Rv(e,C.quality,C.position,!0)})),S=!0,x={wc:e.N,onError:function(C){return u.onError(C)},zf:function(C){As(u,!0,function(){e.F&&XA(e,C)})},onExpirationUpdated:function(C,E){var R=Oe("expirationupdated");u.dispatchEvent(R),(R=u.m)&&R.onExpirationUpdated&&R.onExpirationUpdated(C,E)},onEvent:function(C){u.dispatchEvent(C),C.type=="drmsessionupdate"&&S&&(S=!1,C=Date.now()/1e3-u.Aa,(e.B||u.getStats()).m=C,e.T&&th(e.T))}},w=fv(e,l),Wh(e.N,w),I=function(){return e.md(x)},L={config:a,Ak:g,Lk:v,Kk:y,md:I,zk:h,networkingEngine:w,qj:o},u=new xn(t,i,n,L),A.return(u))})}function lv(e,t){var n,i,r,o;return k(function(s){return s.g==1?(n=e.g.manifest.retryParameters,T(s,ao(t,e.N,n),2)):(i=s.h,i=="application/x-mpegurl"&&(r=pe(),r.Ga()==="WEBKIT"&&(i="application/vnd.apple.mpegurl")),i=="video/quicktime"&&(o=pe(),o.Ga()==="CHROMIUM"&&(i="video/mp4")),s.return(i))})}function kA(e,t){if(!ei(pe()))return!0;if(t){if((e.h||Ar()).canPlayType(t)=="")return!1;if(!ei(pe())||!Br.has(t.toLowerCase()))return!0;if(Lu(t))return pe().Ga()==="WEBKIT"&&(e.g.drm.servers["com.apple.fps"]||e.g.drm.servers["com.apple.fps.1_0"])?e.g.streaming.useNativeHlsForFairPlay:e.g.streaming.preferNativeHls;if(t==="application/dash+xml"||t==="video/vnd.mpeg.dash.mpd")return e.g.streaming.preferNativeDash}return!1}function Ua(e,t){var n=e.g.textDisplayFactory;e.Ph!==n||t!==void 0&&t?(t=e.u,e.u=n(),e.u.configure?e.u.configure(e.g.textDisplayer):Te("Text displayer w/ configure",'Text displayer should have a "configure" method!'),e.u.setTextLanguage||Te("Text displayer w/ setTextLanguage",'Text displayer should have a "setTextLanguage" method!'),t?(e.u.setTextVisibility(t.isTextVisible()),t.destroy().catch(function(){})):e.u.setTextVisibility(e.aa),e.H&&GS(e.H,e.u),e.Ph=n,e.l&&gw(e.l)):e.u&&e.u.configure&&e.u.configure(e.g.textDisplayer)}function Vf(e){var t,n,i;return k(function(r){if(r.g==1)return pe(),mo(e,"media-source"),e.g.mediaSource.useSourceElements&&ea(e.h),Ua(e),t=bA(e.h,e.u,{Qj:function(){return e.keySystem()},onMetadata:function(o,s,u){o=m(o);for(var a=o.next();!a.done;a=o.next())if(a=a.value,a.data&&typeof a.cueTime=="number"&&a.frames){var l=a.cueTime+s,c=u;c&&l>c&&(c=l);for(var f=m(a.frames),p=f.next();!p.done;p=f.next())Gf(e,l,c,"org.id3",p.value);e.C&&e.C.onHlsTimedMetadata(a,l)}},Fk:function(o){e.sb&&rf(e.sb,{schemeIdUri:o.schemeIdUri,startTime:o.startTime,endTime:o.endTime,id:String(o.id),emsg:o})},onEvent:function(o){return e.dispatchEvent(o)},Hk:function(){e.I&&e.I.update&&e.I.update()}},e.T,e.g.mediaSource),n=e.g.manifest,i=n.segmentRelativeVttTiming,t.Ea=i,T(r,t.M,2);e.H=t,G(r)})}function cv(e,t,n){function i(){return Kf(e)}if(e.j.D(t,"playing",i),e.j.D(t,"pause",i),e.j.D(t,"ended",i),e.j.D(t,"ratechange",function(){var o=e.h.playbackRate;o!=0&&(e.M&&(e.M.set(o),e.m==St&&e.o.playbackRateChanged(o),Sv(e,o)),o=Oe("ratechange"),e.dispatchEvent(o))}),t.remote&&(e.j.D(t.remote,"connect",function(){e.l&&t.remote.state=="connected"&&Si(e),Bt(e)}),e.j.D(t.remote,"connecting",function(){return Bt(e)}),e.j.D(t.remote,"disconnect",function(){return k(function(o){if(o.g==1)return e.l&&t.remote.state=="disconnected"?T(o,ma(e.l),3):o.A(2);o.g!=2&&Si(e),Bt(e),G(o)})})),t.audioTracks&&(e.j.D(t.audioTracks,"addtrack",function(){return Bt(e)}),e.j.D(t.audioTracks,"removetrack",function(){return Bt(e)}),e.j.D(t.audioTracks,"change",function(){return Bt(e)})),t.videoTracks&&(e.j.D(t.videoTracks,"addtrack",function(){return Bt(e)}),e.j.D(t.videoTracks,"removetrack",function(){return Bt(e)}),e.j.D(t.videoTracks,"change",function(){return Bt(e)})),(t.webkitPresentationMode||t.webkitSupportsFullscreen)&&e.j.D(t,"webkitpresentationmodechanged",function(){e.Be&&Ua(e,!0)}),t.textTracks){var r=function(){e.m===en&&e.u instanceof at&&Si(e),Bt(e)};e.j.D(t.textTracks,"addtrack",function(o){if(o.track)switch(o=o.track,o.kind){case"metadata":jA(e,o);break;case"chapters":OA(e,o);break;default:r()}}),e.j.D(t.textTracks,"removetrack",r),e.j.D(t.textTracks,"change",r)}t.preload!="none"&&e.j.ya(t,"loadedmetadata",function(){e.B.G=Date.now()/1e3-n})}function DA(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_,j;return k(function(O){switch(O.g){case 1:for(mo(e,"load"),r=e.h,e.M=new hs({cf:function(){return r.playbackRate},Tc:function(){return r.defaultPlaybackRate},wh:function(F){r.playbackRate=F},Ei:function(F){r.currentTime+=F}}),cv(e,r,t),("onchange"in B.screen)&&e.j.D(B.screen,"change",function(){if(e.J.getConfiguration){var F=e.J.getConfiguration();F.hdrLevel=="AUTO"?qi(e):e.g.preferredVideoHdrLevel=="AUTO"&&e.g.abr.enabled&&(F.hdrLevel="AUTO",e.J.configure(F),qi(e))}}),o=!1,s=m(e.i.variants),u=s.next();!u.done;u=s.next())a=u.value,(l=a.video&&a.video.dependencyStream)&&(o=nh(l));CA(e,e.g,o),e.Ld=e.g.preferredTextLanguage,e.Pd=e.g.preferredTextRole,e.Od=e.g.preferForcedSubs,Yf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.o.init(function(F,V,le){e.i&&e.l&&F!=e.l.o&&Ds(e,F,!0,V===void 0?!1:V,le===void 0?0:le)}),e.o.setMediaElement(r),e.o.setCmsdManager(e.wa),e.l=FA(e),e.l.configure(e.g.streaming),e.m=St,e.dispatchEvent(Oe("streaming")),c=n;case 2:for((p=e.l.o)||c||(c=Av(e,!0)),h=[],f=p||c,g=m([f.video,f.audio]),v=g.next();!v.done;v=g.next())(y=v.value)&&!y.segmentIndex&&(h.push(y.createSegmentIndex()),y.dependencyStream&&h.push(y.dependencyStream.createSegmentIndex()));if(!(h.length>0)){O.A(4);break}return T(O,Promise.all(h),4);case 4:if(!f||f.disabledUntilTime!=0){O.A(2);break}if(qi(e),e.I&&e.I.onInitialVariantChosen&&e.I.onInitialVariantChosen(f),e.i.isLowLatency&&(e.g.streaming.lowLatencyMode?e.configure(e.dg):ve("Low-latency live stream detected, but low-latency streaming mode is not enabled in Shaka Player. Set streaming.lowLatencyMode configuration to true, and see https://bit.ly/3clctcj for details.")),e.K&&(uA(e.K,e.i.isLowLatency&&e.g.streaming.lowLatencyMode),aA(e.K,t*1e3)),Yf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),dw(e.l,e.g.playRangeStart,e.g.playRangeEnd),e.Ua=!0,e.dispatchEvent(Oe("canupdatestarttime")),S=function(F){e.G=UA(e,F),e.cc=_A(e,F),dv(e,r,!1)},e.g.streaming.startAtSegmentBoundary||(x=e.O,x==null&&e.i.startTime&&(x=e.i.startTime),S(x)),p){O.A(7);break}if(!e.g.streaming.startAtSegmentBoundary){O.A(8);break}return w=e.i.presentationTimeline,e.O instanceof Date&&(L=w.m||w.i,A=e.O.getTime()/1e3-L,A!=null&&(I=A)),I==null&&(I=typeof e.O=="number"?e.O:e.h.currentTime),e.O==null&&e.i.startTime&&(I=e.i.startTime),C=w.$b(),E=w.Gb(),I<C?I=C:I>E&&(I=E),T(O,WA(c,I),9);case 9:R=O.h,S(R);case 8:Ds(e,c,!0,!1,0);case 7:return e.G.ready(),M=e.Lc().find(function(F){return F.active}),M||((P=Xr(e.i.textStreams,e.Ld,e.Pd,e.Od)[0]||null)&&Sf(e.B.h,P,!0),c&&(P?(_h(c.audio,P,e.g)&&(e.aa=!0),e.aa&&e.u.setTextVisibility(!0)):(e.aa=!1,e.u.setTextVisibility(!1)),kv(e)),P&&(e.g.streaming.alwaysStreamText||e.Sg())&&(ca(e.l,P),Rs(e))),T(O,e.l.start(i),10);case 10:e.g.abr.enabled&&(e.o.enable(),Dv(e)),Bt(e),e.i.variants.some(function(F){return F.primary}),((N=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.i.serviceDescription||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(b=function(){return wv(e)},e.j.D(r,"timeupdate",b)),N||(_=function(){return Fa(e)},e.j.D(r,"timeupdate",_),Fa(e),e.i.nextUrl&&(e.g.streaming.preloadNextUrlWindow>0&&(j=function(){var F;return k(function(V){if(V.g==1)return F=e.Ra().end-e.h.currentTime,isNaN(F)||!(F<=e.g.streaming.preloadNextUrlWindow)?V.A(0):(e.j.Ma(r,"timeupdate",j),T(V,e.preload(e.i.nextUrl),4));e.ib=V.h,G(V)})},e.j.D(r,"timeupdate",j)),e.j.D(r,"ended",function(){e.load(e.ib||e.i.nextUrl)}))),e.C&&e.C.onManifestUpdated(N),G(O)}})}function RA(e,t){var n,i,r;return k(function(o){return o.g==1?(n=Date.now()/1e3,i=!0,e.F=e.md({wc:e.N,onError:function(s){vo(e,s)},zf:function(){},onExpirationUpdated:function(){var s=Oe("expirationupdated");e.dispatchEvent(s)},onEvent:function(s){e.dispatchEvent(s),s.type=="drmsessionupdate"&&i&&(i=!1,e.B.m=Date.now()/1e3-n)}}),e.F.configure(e.g.drm),r=Bh([t]),e.F.O=!0,T(o,Zh(e.F,[r],[]),2)):T(o,e.F.Vb(e.h),0)})}function LA(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,g;return k(function(v){switch(v.g){case 1:if(mo(e,"src-equals"),i=e.h,e.G=new tm(i),r=!1,e.De.push(function(){r=!0}),e.dispatchEvent(Oe("canupdatestarttime")),e.O!=null&&e.G.$f(e.O),e.cc=BA(e,e.O||0),e.M=new hs({cf:function(){return i.playbackRate},Tc:function(){return i.defaultPlaybackRate},wh:function(y){i.playbackRate=y},Ei:function(y){i.currentTime+=y}}),dv(e,i,!0),i.textTracks&&(Ua(e),o=function(y){if(!(e.u instanceof at)){var S=_a(e).find(function(x){return x.mode!=="disabled"});S&&(S.mode=y?"showing":"hidden"),e.u instanceof Mt&&(S=VA(e))&&(S.mode=!y&&e.u.isTextVisible()?"showing":"hidden")}},e.j.D(i,"enterpictureinpicture",function(){return o(!0)}),e.j.D(i,"leavepictureinpicture",function(){return o(!1)}),i.remote?(e.j.D(i.remote,"connect",function(){return o(!1)}),e.j.D(i.remote,"connecting",function(){return o(!1)}),e.j.D(i.remote,"disconnect",function(){return o(!1)})):"webkitCurrentPlaybackTargetIsWireless"in i&&e.j.D(i,"webkitcurrentplaybacktargetiswirelesschanged",function(){return o(!1)}),s=i,(s.webkitPresentationMode||s.webkitSupportsFullscreen)&&e.j.D(s,"webkitpresentationmodechanged",function(){s.webkitPresentationMode?o(s.webkitPresentationMode!=="inline"):s.webkitSupportsFullscreen&&o(s.webkitDisplayingFullscreen)})),cv(e,i,t),u=lA(e.K,e.X,n),!u.includes("#t=")&&(e.g.playRangeStart>0||isFinite(e.g.playRangeEnd))&&(u+="#t=",e.g.playRangeStart>0&&(u+=e.g.playRangeStart),isFinite(e.g.playRangeEnd)&&(u+=","+e.g.playRangeEnd)),!e.H){v.A(2);break}return T(v,e.H.destroy(),3);case 3:e.H=null;case 2:return ea(i),i.src=u,a=pe(),a.Oa()=="TV"&&i.load(),i.preload!="none"&&!i.autoplay&&Lu(n)&&a.Ga()==="WEBKIT"&&i.load(),e.m=en,e.dispatchEvent(Oe("streaming")),l=function(){return new Promise(function(y){var S=new ge(y);e.j.D(i.textTracks,"change",function(){return S.ka(.5)}),S.ka(.5)})},c=new Pe,uo(i,HTMLMediaElement.HAVE_METADATA,e.j,function(){return k(function(y){if(y.g==1)return e.G.ready(),e.Ja&&Lu(e.Ja)?T(y,l(),3):(c.resolve(),y.A(0));c.resolve(),G(y)})}),uo(i,HTMLMediaElement.HAVE_CURRENT_DATA,e.j,function(){var y,S,x,w,I;return k(function(L){if(L.g==1)return T(L,l(),2);if(r)return L.return();if(PA(e),y=_a(e),y.some(function(A){return A.mode==="showing"})&&(e.aa=!0,e.u.setTextVisibility(!0)),!(e.u instanceof at))for(y.length&&(e.u.enableTextDisplayer?e.u.enableTextDisplayer():Te("Text displayer w/ enableTextDisplayer",'Text displayer should have a "enableTextDisplayer" method')),S=!1,x=m(y),w=x.next();!w.done;w=x.next())I=w.value,I.mode!=="disabled"&&(S?(I.mode="disabled",ve("Found more than one enabled text track, disabling it",I)):(yv(e,I),S=!0));NA(e),G(L)})}),i.error?c.reject(zf(e)):i.preload=="none"&&(ve('With <video preload="none">, the browser will not load anything until play() is called. We are unable to measure load latency in a meaningful way, and we cannot provide track info yet. Please do not use preload="none" with Shaka Player.'),c.resolve()),e.j.ya(i,"error",function(){c.reject(zf(e))}),T(v,Pu(e.g.streaming.loadTimeout,c),4);case 4:((f=e.W())&&(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled||e.g.streaming.liveSync.panicMode)||e.g.streaming.vodDynamicPlaybackRate)&&(p=function(){return wv(e)},e.j.D(i,"timeupdate",p)),f||(h=function(){return Fa(e)},e.j.D(i,"timeupdate",h),Fa(e)),e.C&&(e.C.onManifestUpdated(f),f&&(g=e.Ra().end,e.j.D(i,"progress",function(){var y=e.Ra().end;g!=y&&(e.C.onManifestUpdated(e.W()),g=y)}))),e.Ua=!0,G(v)}})}function PA(e){var t=e.g.preferredAudioLanguage;t!=""&&e.Ui(t,e.g.preferredAudioRole)}function NA(e){var t=e.g.preferredTextLanguage;t!=""&&e.ph(t,e.g.preferredTextRole,e.g.preferForcedSubs)}function jA(e,t){if(t.kind=="metadata"){t.mode="hidden",e.j.D(t,"cuechange",function(){if(t.activeCues)for(var i=m(t.activeCues),r=i.next();!r.done;r=i.next())r=r.value,Gf(e,r.startTime,r.endTime,r.type,r.value),e.C&&e.C.onCueMetadataChange(r.value);if(t.cues){i=[],r=m(t.cues);for(var o=r.next(),s={};!o.done;s={Fc:void 0},o=r.next())s.Fc=o.value,s.Fc.type=="com.apple.quicktime.HLS"&&s.Fc.startTime!=null&&(o=i.find(function(u){return function(a){return a.startTime==u.Fc.startTime&&a.endTime==u.Fc.endTime}}(s)),o||(o={startTime:s.Fc.startTime,endTime:s.Fc.endTime,values:[]},i.push(o)),o.values.push(s.Fc.value));for(i=m(i),r=i.next();!r.done;r=i.next())r=r.value,r.values.some(function(u){return u.key=="X-ASSET-URI"||u.key=="X-ASSET-LIST"})&&e.C&&(r.values.push({key:"CUE",description:"",data:r.startTime!=0||e.W()?"ONCE":"ONCE,PRE",mimeType:null,pictureType:null}),e.C.onHLSInterstitialMetadata(e,e.h,r))}});var n=new ge(function(){var i=HA(e);i=m(i);for(var r=i.next();!r.done;r=i.next())r.value.mode="hidden"}).Jb().ka(.5);e.De.push(function(){n.stop()})}}function Hf(e,t,n){t=new Map().set("startTime",t.startTime).set("endTime",t.endTime).set("metadataType",t.schemeIdUri).set("payload",t.payload),e.dispatchEvent(Oe(n,t))}function Gf(e,t,n,i,r){e.Aa&&(t={schemeIdUri:i,startTime:t,endTime:n||1/0,id:"",payload:r},t.id=JSON.stringify(t),rf(e.Aa,t))}function OA(e,t){if(t&&t.kind=="chapters"){t.mode="hidden";var n=new ge(function(){t.mode="hidden"}).Jb().ka(.5);e.De.push(function(){n.stop()})}}d.Pk=function(){for(var e=this.ha;e.g;)e.release()},d.md=function(e){return new zu(e)};function fv(e,t){function n(o){t()?t().dispatchEvent(o):e.dispatchEvent(o)}function i(o){t()?As(t(),!0,o):o()}t||(t=function(){return null});var r=new Ge(function(o,s,u,a,l){i(function(){e.o&&e.o.segmentDownloaded(o,s,u,a,l)})},function(o,s,u){s=new Map().set("headers",o).set("request",s).set("requestType",u),n(Oe("downloadheadersreceived",s)),i(function(){if(e.wa){var a=e.wa;if(a.h.enabled){var l=o["cmsd-static"];if(l)try{var c=new Map,f=l.split(",");for(l=0;l<f.length;l++){var p=f[l].split("=");c.set(p[0],Zm(p[1]))}}catch{}if(c=o["cmsd-dynamic"]){e:{try{var h=new Map,g=c.split(";");for(c=1;c<g.length;c++){var v=g[c].split("=");h.set(v[0],Zm(v[1]))}var y=h;break e}catch{y=null;break e}y=void 0}y&&(a.g=y)}}}})},function(o,s){o=new Map().set("request",o).set("response",s),n(Oe("downloadcompleted",o))},function(o,s,u,a){o=new Map().set("request",o).set("error",s).set("httpResponseCode",u).set("aborted",a),n(Oe("downloadfailed",o))},function(o,s,u){i(function(){if(e.K){var a=e.K,l=u;if(l=l===void 0?{}:l,a.g.enabled)if(s.method==="HEAD")go(a,s,{});else switch(o){case 0:try{if(a.g.enabled){if(l.type){e:{switch(l.type){case 4:var c=a.u?Pa:La;break e;case 3:case 2:c=a.u?ja:Na;break e;case 5:c="s";break e}c=void 0}a.l=c}go(a,s,{ot:zm,su:!a.F})}}catch(p){Li("CMCD_MANIFEST_ERROR","Could not generate manifest CMCD data.",p)}break;case yn:try{if(a.g.enabled){var f=Wm(a,l,s.uris[0]);f.ts=Date.now(),a.m.has(s)&&a.m.delete(s),a.m.set(s,f.ts),go(a,s,f)}}catch(p){Li("CMCD_SEGMENT_ERROR","Could not generate segment CMCD data.",p)}break;case 2:case 5:case 6:go(a,s,{ot:"k"});break;case 4:go(a,s,{ot:"o"})}}})},function(o,s,u,a){(o=t()?t().m:e.I)&&o.banLocation&&o.banLocation(a)},function(o,s,u){if(s.data){var a=s.data.byteLength,l=t()?t().getStats():e.B;if(l&&(Mm(l,a),o===0&&(l.xi=a)),a=e.K,u=u===void 0?{}:u,Rf(a).length!==0)switch(o){case yn:try{var c=Wm(a,u,s.uri);s.originalRequest&&s.originalRequest.timeToFirstByte!=null&&(c.ttfb=s.originalRequest.timeToFirstByte),s.timeMs!=null&&(c.ttlb=s.timeMs);var f=s.originalUri||s.uri;if(f.includes("CMCD="))try{var p=new URL(f);p.searchParams.delete("CMCD");var h=p.toString()}catch{h=f}else h=f;c.url=h,a.m.has(s.originalRequest)?(c.ts=a.m.get(s.originalRequest),a.m.delete(s.originalRequest)):c.ts||(c.ts=Date.now());var g=Rf(a);if(g.length!==0){var v=a.g.version==Uf?Array.from(new Set([].concat(H(_f),H(xA)))):Ym;c.rc=s.status||0;var y=jf(a,c,$m);s.headers&&s.headers["CMSD-Static"]&&(y.cmsds=btoa(s.headers["CMSD-Static"])),s.headers&&s.headers["CMSD-Dynamic"]&&(y.cmsdd=btoa(s.headers["CMSD-Dynamic"]));for(var S=m(g),x=S.next();!x.done;x=S.next()){var w=x.value,I=Pf(w.includeKeys||[],v),L=Gm(w);a.o[L]||(a.o[L]={request:1,response:1}),y.sn=a.o[L].response++;var A=Nf(y,I);Hm(a,A,w,s)}}}catch(C){Li("CMCD_SEGMENT_ERROR","Could not generate response segment CMCD data.",C)}}}});return r.configure(e.g.networking),r}function UA(e,t){return new rm(e.h,e.i,e.g.streaming,t,function(){e.cc&&lm(e.cc,!e.G.Nh()),e.l&&e.l.bd(),e.R&&Zn(e,"seeking")},function(n){return e.dispatchEvent(n)})}function _A(e,t){var n=e.W()||typeof t=="number"&&t>0;t=new Cr(e.Ae,n),t.addEventListener("enter",function(o){Ls(e,"timelineregionenter",o.region)}),t.addEventListener("exit",function(o){Ls(e,"timelineregionexit",o.region)}),t.addEventListener("skip",function(o){var s=o.region;o.seeking||(Ls(e,"timelineregionenter",s),Ls(e,"timelineregionexit",s))});var i=new Cr(e.Aa,n);i.addEventListener("enter",function(o){Hf(e,o.region,"metadata")}),n=new Cr(e.sb,n),n.addEventListener("enter",function(o){o=new Map().set("detail",o.region.emsg),e.dispatchEvent(Oe("emsg",o))});var r=new nf(e.h);return r.g.add(t),r.g.add(i),r.g.add(n),e.ye&&r.g.add(e.ye),r}function BA(e,t){t=new Cr(e.Aa,t instanceof Date||t>0),t.addEventListener("enter",function(i){Hf(e,i.region,"metadata")});var n=new nf(e.h);return n.g.add(t),n}function dv(e,t,n){e.R=new aS,Nc(e.R,Tr),pv(e),ks(e),e.Ta=new ge(function(){Zn(e)}),e.g.streaming.rebufferingGoal&&e.Ta.Da(.25),e.j.D(t,"waiting",function(){return Zn(e,"waiting")}),e.j.D(t,"canplaythrough",function(){return Zn(e,"canplaythrough")}),e.j.D(t,"playing",function(){return Zn(e,"playing")}),e.j.D(t,"seeked",function(){return Zn(e,"seeked")}),e.j.D(t,"timeupdate",function(){return Zn(e,"timeupdate")}),n&&(e.j.D(t,"progress",function(){return Zn(e,"progress")}),e.j.D(t,"stalled",function(){return Zn(e,"stalled")}))}function pv(e){var t=e.g.streaming.rebufferingGoal;e.R.j.set(xr,Math.min(.5,t/2)).set(Tr,t)}function Zn(e,t){if(e.g.streaming.rebufferingGoal){t=e.H?Ir(e.H):!1,t=e.ge()||t||e.G.si();var n=kg(e.h.buffered,e.h.currentTime),i=e.R,r=i.j.get(i.g);Nc(i,t||n>=r&&n>0?xr:Tr)&&ks(e)}else if(t){n=e.R,i=e.h.currentTime,r=n.h,n.h=i;var o=void 0;switch(t){case"seeking":case"waiting":n.h=-1,o=Tr;break;case"canplaythrough":case"playing":case"seeked":o=xr;break;case"timeupdate":r>=0&&i-r>.01&&(o=xr)}o!==void 0&&Nc(n,o)&&ks(e)}}function bA(e,t,n,i,r){return new Og(e,t,n,r,i)}function FA(e){return new gm(e.i,{Zb:function(){return e.G?e.G.Rd():0},getBandwidthEstimate:function(){return e.o.getBandwidthEstimate()},Ob:function(){return e.Ob()},video:e.h,Y:e.H,wc:e.N,onError:function(t){return vo(e,t)},onEvent:function(t){return e.dispatchEvent(t)},Bd:function(t,n,i,r){var o=t.startTime,s=t.endTime,u=n.type;if(u!=he){if(e.G){e.G.Gi();var a=zc(e.H,u);!e.W()&&e.h.paused&&!e.h.seeking&&a!=null&&a>0&&e.G.Rd()<a&&!bf(e.G.Rd(),a,.001)&&e.G.$f(a)}Zn(e)}i=new Map().set("start",o).set("end",s).set("contentType",u).set("isMuxed",i).set("isDependency",r),e.dispatchEvent(Oe("segmentappended",i)),e.o&&n.fastSwitching&&t.Xc&&t.je&&e.o.trySuggestStreams()},Gk:function(t,n){(n=n.yd)&&e.ye&&nw(e.ye,n,t)},Vh:function(t,n){var i=e.F;if(i.h.parseInbandPsshEnabled&&!i.H&&["audio","video"].includes(t)){t=new Dc(re(n)),n=0;for(var r=m(t.data),o=r.next();!o.done;o=r.next())n+=o.value.length;if(n==0)i=Promise.resolve();else{for(n=new Uint8Array(n),r=0,t=m(t.data),o=t.next();!o.done;o=t.next())o=o.value,n.set(o,r),r+=o.length;is(i,"cenc",n),i=i.m}}else i=Promise.resolve();return i},disableStream:function(t,n){return e.disableStream(t,n)},il:function(t,n){return!(e.g.abr.enabled&&n.fastSwitching&&t.Xc&&t.je)}})}d.configure=function(e,t){var n=this.getConfiguration();if(arguments.length==2&&typeof e=="string"&&(e=Ta(e,t)),"preferredVariantRole"in e&&(Te("preferredVariantRole configuration","Please Use preferredAudioRole instead."),e.preferredAudioRole=e.preferredVariantRole,delete e.preferredVariantRole),e.streaming&&"forceTransmuxTS"in e.streaming&&(Te("streaming.forceTransmuxTS configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmuxTS,delete e.streaming.forceTransmuxTS),e.streaming&&"forceTransmux"in e.streaming&&(Te("streaming.forceTransmux configuration","Please Use mediaSource.forceTransmux instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.mediaSource=e.streaming.forceTransmux,delete e.streaming.forceTransmux),e.streaming&&"useNativeHlsOnSafari"in e.streaming){Te("streaming.useNativeHlsOnSafari configuration","Please Use streaming.useNativeHlsForFairPlay or streaming.preferNativeHls instead.");var i=pe();e.streaming.preferNativeHls=e.streaming.useNativeHlsOnSafari&&i.Ga()==="WEBKIT",delete e.streaming.useNativeHlsOnSafari}if(e.streaming&&typeof e.streaming.liveSync=="boolean"&&(Te("streaming.liveSync","Please Use streaming.liveSync.enabled instead."),i=e.streaming.liveSync,e.streaming.liveSync={},e.streaming.liveSync.enabled=i),e.streaming&&!(e.streaming.liveSync&&"targetLatency"in e.streaming.liveSync)&&("liveSyncMinLatency"in e.streaming||"liveSyncMaxLatency"in e.streaming)){i=e.streaming.liveSyncMinLatency||0;var r=Math.abs((e.streaming.liveSyncMaxLatency||1)-i)/2;e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=i+r,e.streaming.liveSync.targetLatencyTolerance=r}if(e.streaming&&"liveSyncMaxLatency"in e.streaming&&(Te("streaming.liveSyncMaxLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMaxLatency),e.streaming&&"liveSyncMinLatency"in e.streaming&&(Te("streaming.liveSyncMinLatency","Please Use streaming.liveSync.targetLatency and streaming.liveSync.targetLatencyTolerance instead. Or, set the values in your DASH manifest"),delete e.streaming.liveSyncMinLatency),e.streaming&&"liveSyncTargetLatency"in e.streaming&&(Te("streaming.liveSyncTargetLatency","Please Use streaming.liveSync.targetLatency instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatency=e.streaming.liveSyncTargetLatency,delete e.streaming.liveSyncTargetLatency),e.streaming&&"liveSyncTargetLatencyTolerance"in e.streaming&&(Te("streaming.liveSyncTargetLatencyTolerance","Please Use streaming.liveSync.targetLatencyTolerance instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.targetLatencyTolerance=e.streaming.liveSyncTargetLatencyTolerance,delete e.streaming.liveSyncTargetLatencyTolerance),e.streaming&&"liveSyncPlaybackRate"in e.streaming&&(Te("streaming.liveSyncPlaybackRate","Please Use streaming.liveSync.maxPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.maxPlaybackRate=e.streaming.liveSyncPlaybackRate,delete e.streaming.liveSyncPlaybackRate),e.streaming&&"liveSyncMinPlaybackRate"in e.streaming&&(Te("streaming.liveSyncMinPlaybackRate","Please Use streaming.liveSync.minPlaybackRate instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.minPlaybackRate=e.streaming.liveSyncMinPlaybackRate,delete e.streaming.liveSyncMinPlaybackRate),e.streaming&&"liveSyncPanicMode"in e.streaming&&(Te("streaming.liveSyncPanicMode","Please Use streaming.liveSync.panicMode instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicMode=e.streaming.liveSyncPanicMode,delete e.streaming.liveSyncPanicMode),e.streaming&&"liveSyncPanicThreshold"in e.streaming&&(Te("streaming.liveSyncPanicThreshold","Please Use streaming.liveSync.panicThreshold instead."),e.streaming.liveSync=e.streaming.liveSync||{},e.streaming.liveSync.panicThreshold=e.streaming.liveSyncPanicThreshold,delete e.streaming.liveSyncPanicThreshold),e.mediaSource&&"sourceBufferExtraFeatures"in e.mediaSource){Te("mediaSource.sourceBufferExtraFeatures configuration","Please Use mediaSource.addExtraFeaturesToSourceBuffer() instead.");var o=e.mediaSource.sourceBufferExtraFeatures;e.mediaSource.addExtraFeaturesToSourceBuffer=function(){return o},delete e.mediaSource.sourceBufferExtraFeatures}if(e.manifest&&e.manifest.hls&&"useSafariBehaviorForLive"in e.manifest.hls&&(Te("manifest.hls.useSafariBehaviorForLive configuration","Please Use liveSync config to keep on live Edge instead."),delete e.manifest.hls.useSafariBehaviorForLive),e.streaming&&"parsePrftBox"in e.streaming&&(Te("streaming.parsePrftBox configuration","Now fired without needing a configuration."),delete e.streaming.parsePrftBox),e.manifest&&e.manifest.dash&&"enableAudioGroups"in e.manifest.dash&&(Te("manifest.dash.enableAudioGroups configuration","Please Use manifest.enableAudioGroups instead."),e.manifest.enableAudioGroups=e.manifest.dash.enableAudioGroups,delete e.manifest.dash.enableAudioGroups),e.streaming&&"dispatchAllEmsgBoxes"in e.streaming&&(Te("streaming.dispatchAllEmsgBoxes configuration","Please Use mediaSource.dispatchAllEmsgBoxes instead."),e.mediaSource=e.mediaSource||{},e.mediaSource.dispatchAllEmsgBoxes=e.streaming.dispatchAllEmsgBoxes,delete e.streaming.dispatchAllEmsgBoxes),e.streaming&&"autoLowLatencyMode"in e.streaming&&(Te("streaming.autoLowLatencyMode configuration","Please Use streaming.lowLatencyMode instead."),e.streaming.lowLatencyMode=e.streaming.autoLowLatencyMode,delete e.streaming.autoLowLatencyMode),e.manifest&&e.manifest.dash&&"ignoreSupplementalCodecs"in e.manifest.dash&&(Te("manifest.dash.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.dash.ignoreSupplementalCodecs,delete e.manifest.dash.ignoreSupplementalCodecs),e.manifest&&e.manifest.hls&&"ignoreSupplementalCodecs"in e.manifest.hls&&(Te("manifest.hls.ignoreSupplementalCodecs configuration","Please Use manifest.ignoreSupplementalCodecs instead."),e.manifest.ignoreSupplementalCodecs=e.manifest.hls.ignoreSupplementalCodecs,delete e.manifest.hls.ignoreSupplementalCodecs),e.manifest&&e.manifest.dash&&"updatePeriod"in e.manifest.dash&&(Te("manifest.dash.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.dash.updatePeriod,delete e.manifest.dash.updatePeriod),e.manifest&&e.manifest.hls&&"updatePeriod"in e.manifest.hls&&(Te("manifest.hls.updatePeriod configuration","Please Use manifest.updatePeriod instead."),e.manifest.updatePeriod=e.manifest.hls.updatePeriod,delete e.manifest.hls.updatePeriod),e.manifest&&e.manifest.dash&&"ignoreDrmInfo"in e.manifest.dash&&(Te("manifest.dash.ignoreDrmInfo configuration","Please Use manifest.ignoreDrmInfo instead."),e.manifest.ignoreDrmInfo=e.manifest.dash.ignoreDrmInfo,delete e.manifest.dash.ignoreDrmInfo),e.drm&&e.drm.advanced){i=!1;for(var s in e.drm.advanced){var u=e.drm.advanced[s];r=u.videoRobustness,u=u.audioRobustness,"videoRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].videoRobustness)&&(e.drm.advanced[s].videoRobustness=[r],i=!0),"audioRobustness"in e.drm.advanced[s]&&!Array.isArray(e.drm.advanced[s].audioRobustness)&&(e.drm.advanced[s].audioRobustness=[u],i=!0)}i&&Te("AdvancedDrmConfiguration's videoRobustness and audioRobustness","These properties are no longer strings but array of strings, please update your usage of these properties.")}return e.streaming&&"forceHTTP"in e.streaming&&(Te("streaming.forceHTTP configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTP=e.streaming.forceHTTP,delete e.streaming.forceHTTP),e.streaming&&"forceHTTPS"in e.streaming&&(Te("streaming.forceHTTPS configuration","Please Use networking.forceHTTP instead."),e.networking=e.networking||{},e.networking.forceHTTPS=e.streaming.forceHTTPS,delete e.streaming.forceHTTPS),e.streaming&&"minBytesForProgressEvents"in e.streaming&&(Te("streaming.minBytesForProgressEvents configuration","Please Use networking.minBytesForProgressEvents instead."),e.networking=e.networking||{},e.networking.minBytesForProgressEvents=e.streaming.minBytesForProgressEvents,delete e.streaming.minBytesForProgressEvents),s=Ti(this.g,e,Wn(this)),hv(this,n),s},d.zj=function(e){this.dg=e};function hv(e,t){if(e.Ee=new jc(e.g,e.za,e.F),e.I){var n=Pn(e.g.manifest);e.h&&e.h.nodeName==="AUDIO"&&(n.disableVideo=!0),e.I.configure(n)}if(e.F&&e.F.configure(e.g.drm),e.l){e.l.configure(e.g.streaming);try{e.m!=On&&pg(e.Ee,e.i)&&Bt(e)}catch(r){vo(e,r)}e.o&&qi(e),n=e.l.o,!n||n.allowedByApplication&&n.allowedByKeySystem||Ji(e)}if(e.N&&e.N.configure(e.g.networking),e.H&&(e.H.configure(e.g.mediaSource),e.H.Ea=e.g.manifest.segmentRelativeVttTiming),e.u&&Ua(e),e.o&&(e.o.configure(e.g.abr),e.g.abr.enabled?e.o.enable():e.o.disable(),Dv(e)),e.R&&pv(e),e.Ta&&(e.g.streaming.rebufferingGoal?e.Ta.Da(.25):e.Ta.stop()),e.i&&Yf(e.i.presentationTimeline,e.g.playRangeStart,e.g.playRangeEnd),e.C&&e.C.configure(e.g.ads),e.K&&e.K.configure(e.g.cmcd),e.wa&&e.wa.configure(e.g.cmsd),e.Ea&&e.Ea.configure(e.g.queue),e.m==St&&e.J.getConfiguration){n=e.J.getConfiguration();var i=!1;t.preferredVideoHdrLevel!=e.g.preferredVideoHdrLevel&&n.hdrLevel!=e.g.preferredVideoHdrLevel&&(n.hdrLevel=e.g.preferredVideoHdrLevel,i=!0),t.preferredVideoLayout!=e.g.preferredVideoLayout&&n.videoLayout!=e.g.preferredVideoLayout&&(n.videoLayout=e.g.preferredVideoLayout,i=!0),t.preferSpatialAudio!=e.g.preferSpatialAudio&&n.spatialAudio!=e.g.preferSpatialAudio&&(n.spatialAudio=e.g.preferSpatialAudio,i=!0),t.preferredVideoRole!=e.g.preferredVideoRole&&n.videoRole!=e.g.preferredVideoRole&&(n.videoRole=e.g.preferredVideoRole,i=!0),i&&(e.J.configure(n),Ji(e))}}d.getConfiguration=function(){var e=Wn(this);return Ti(e,this.g,Wn(this)),e},d.Jj=function(){return this.dg},d.li=function(){var e=Wn(this);return Ti(e,this.g,Wn(this)),wm(this.g,Wn(this))},d.gi=function(){if(this.h){var e=this.h.buffered.length;e=e?this.h.buffered.end(e-1):0;var t=this.getConfiguration().streaming.bufferingGoal;if(t=Math.min(this.h.currentTime+t,this.Ra().end),e>=t)return 1;if(!(e<=this.h.currentTime)&&e<t)return(e-this.h.currentTime)/(t-this.h.currentTime)}return 0},d.Pi=function(){var e=this.getConfiguration(),t;for(t in this.g)delete this.g[t];Ti(this.g,Wn(this),Wn(this)),hv(this,e)},d.ae=function(){return this.m},d.ji=function(){return this.i?this.i.type:null},d.bf=function(){return this.h},d.Yb=function(){return this.N},d.rd=function(){return this.X},d.ei=function(){return this.C?this.C:null},d.ni=function(){return this.Ea?this.Ea:null},d.W=function(){return this.i&&!this.xa()?this.i.presentationTimeline.W():this.h&&(this.h.src||this.xa())?this.h.duration==1/0:!1},d.Vc=function(){return this.i?this.i.presentationTimeline.Vc():!1},d.nk=function(){if(this.i&&!this.xa()){var e=this.i.variants;return e.length?!e[0].video:!1}return this.h&&(this.h.src||this.xa())?this.h.videoTracks?this.h.videoTracks.length==0:this.h.videoHeight==0:!1},d.ui=function(){if(this.i&&!this.xa()){var e=this.i.variants;return e.length?(e=e[0],e.audio||!e.video?!1:!e.video.codecs.includes(",")):!1}return this.h&&(this.h.src||this.xa())&&this.h.audioTracks?this.h.audioTracks.length==0:!1},d.Ra=function(){if(this.i&&!this.xa()){if(!this.Ua&&this.i.type=="HLS")return{start:0,end:0};var e=this.i.presentationTimeline;return{start:e.$b(),end:e.Gb()}}if(this.h&&(this.h.src||this.xa())&&(e=this.h.seekable)&&e.length){var t=this.g?this.g.playRangeStart:0;t=Math.max(e.start(0),t);var n=this.g?this.g.playRangeEnd:1/0;return e=Math.min(e.end(e.length-1),n),{start:t,end:e}}return{start:0,end:0}},d.jk=function(){this.W()&&(this.h.currentTime=this.Ra().end)},d.pk=function(){return this.Ua},d.keySystem=function(){var e=this.drmInfo();return e?e.keySystem:""},d.drmInfo=function(){return this.F?this.F.g:null},d.$d=function(){return this.F?this.F.$d():1/0},d.Kg=function(){return this.F?this.F.Kg():[]},d.$e=function(){return this.F?this.F.$e():{}},d.Rg=function(){return this.R?this.R.g==Tr:!!this.X},d.Ob=function(){return this.h?this.M?this.M.i:1:0},d.Lh=function(e){this.m==St&&this.l&&mm(this.l,e)},d.xe=function(e,t){t=t===void 0?!0:t,e==0?ve("A trick play rate of 0 is unsupported!"):(this.M.set(e),this.m==St&&(this.o.playbackRateChanged(e),this.Lh(t&&e!=1)),Sv(this,e))},d.Td=function(){var e=this.M.Tc();this.m==en&&this.M.set(e),this.m==St&&(this.M.set(e),this.o.playbackRateChanged(e),this.Lh(!1)),this.fc.Qa()},d.sc=function(){if(this.i&&!this.xa()){for(var e=this.l?this.l.o:null,t=[],n=0,i=m(this.i.variants),r=i.next();!r.done;r=i.next())if(r=r.value,ns(r)){var o=mr(r);o.active=r==e,o.active||n==1||e==null||r.video!=e.video||r.audio!=e.audio||(o.active=!0),o.active&&n++,t.push(o)}return t}if(this.h&&this.h.audioTracks){var s=Ev(this);return e=Array.from(this.h.audioTracks),e.length?e.map(function(u){return _u(u,s)}):s?[_u(null,s)]:[]}return[]},d.Lc=function(){if(this.i){if(this.xa())return[];for(var e=this.l?this.l.B:null,t=[],n=m(this.i.textStreams),i=n.next();!i.done;i=n.next()){i=i.value;var r=vr(i);r.active=i==e,t.push(r)}return t}return this.h&&this.h.src&&this.h.textTracks?_a(this).map(function(o){return Nh(o)}):[]},d.Oj=function(){var e=this.Ke;return this.i&&(e=this.i.imageStreams),e.map(function(t){return Ec(t)})},d.Cj=function(e){var t=this,n,i;return k(function(r){return r.g==1?T(r,mv(t,e),2):(n=r.h,n?(i=[],n.segmentIndex.Fb(function(o){var s=gv(o.tilesLayout||n.tilesLayout);if(s)for(var u=s.rows*s.columns,a=(o.j-o.startTime)/u,l=0;l<u;l++){var c=vv(o,n,o.startTime+l*a,s);if(!c)break;i.push(c)}}),n.closeSegmentIndex&&n.closeSegmentIndex(),r.return(i)):r.return(null))})};function gv(e){return e&&(e=/(\d+)x(\d+)/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}d.dk=function(e,t){var n=this,i,r,o,s,u,a;return k(function(l){return l.g==1?T(l,mv(n,e),2):(i=l.h,!i||(i.closeSegmentIndex&&(n.zc.has(i)||(r=new ge(function(){i.closeSegmentIndex(),n.zc.delete(i)}),n.zc.set(i,r)),o=n.zc.get(i),o.ka(5)),s=i.segmentIndex.find(t),s==null)?l.return(null):(u=i.segmentIndex.get(s),(a=gv(u.tilesLayout||i.tilesLayout))?l.return(vv(u,i,t,a)):l.return(null)))})};function mv(e,t){var n,i;return k(function(r){return r.g==1?e.m!=St&&e.m!=en||(n=e.Ke,e.i&&(n=e.i.imageStreams),i=n[0],!i)?r.return(null):(t!=null&&(i=n.find(function(o){return o.id==t})),i?i.segmentIndex?r.A(2):T(r,i.createSegmentIndex(),2):r.return(null)):r.return(i)})}function vv(e,t,n,i){var r=t.width||0,o=t.height||0,s=r/i.columns,u=o/i.rows,a=i.columns*i.rows,l=e.j-e.startTime;l=e.B||l/a;var c=e.startTime,f=0,p=0;return a>1&&(p=Math.floor((n-e.startTime)/l+1e-4),c=e.startTime+p*l,f=p%i.columns*s,p=Math.floor(p/i.columns)*u),c>=e.endTime||bf(c,e.endTime,1e-4)?null:(i=!1,(n=e.thumbnailSprite)&&(i=!0,u=n.height,f=n.positionX,p=n.positionY,s=n.width),{segment:e,imageHeight:o,imageWidth:r,height:u,positionX:f,positionY:p,startTime:c,duration:l,uris:e.P(),startByte:e.Kc(),endByte:e.Ic(),width:s,sprite:i,mimeType:e.mimeType||t.mimeType,codecs:e.codecs||t.codecs})}d.qh=function(e){function t(){var i=n.i.textStreams.find(function(r){return r.id==e.id});i&&i!=n.l.B&&(Sf(n.B.h,i,!1),ca(n.l,i),Si(n),Rs(n),n.Ld=i.language)}var n=this;this.i&&this.G&&(t(),!this.xa())||function(){if(n.h&&n.h.textTracks){var i=_a(n),r=i.find(function(u){return Uu(u)===e.id});if(r){if(n.u instanceof at){i=m(i);for(var o=i.next();!o.done;o=i.next()){o=o.value;var s=o===r?n.aa?"showing":"hidden":"disabled";o.mode!==s&&(o.mode=s)}}else i=i.find(function(u){return u.mode!=="disabled"}),i!==r&&(i&&(i.mode="disabled",n.j.Ma(i,"cuechange"),n.u.remove(0,1/0)),r&&yv(n,r));Si(n),Rs(n)}}}()};function yv(e,t){e.j.D(t,"cuechange",function(){e.u.remove(0,Math.max(0,e.h.currentTime-e.g.streaming.bufferBehind));var n={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},i=[],r=Array.from(t.activeCues||[]);r=m(r);for(var o=r.next();!o.done;o=r.next()){if(o=o.value,o.endTime===1/0||o.endTime<o.startTime)o=null;else{var s=new be(o.startTime,o.endTime,o.text);s.line=typeof o.line=="number"?o.line:null,o.lineAlign&&(s.lineAlign=o.lineAlign),s.lineInterpretation=o.snapToLines?Yo:1,s.position=typeof o.position=="number"?o.position:null,o.positionAlign&&(s.positionAlign=o.positionAlign),s.size=o.size,s.textAlign=o.align,o.vertical==="lr"?s.writingMode="vertical-lr":o.vertical==="rl"&&(s.writingMode="vertical-rl"),o.region&&(s.region.id=o.region.id,s.region.height=o.region.lines,s.region.heightUnits=2,s.region.regionAnchorX=o.region.regionAnchorX,s.region.regionAnchorY=o.region.regionAnchorY,s.region.scroll=o.region.scroll,s.region.viewportAnchorX=o.region.viewportAnchorX,s.region.viewportAnchorY=o.region.viewportAnchorY,s.region.viewportAnchorUnits=qt,s.region.width=o.region.width,s.region.widthUnits=qt),ku(s),o=s}o&&((s=e.g.mediaSource.modifyCueCallback)&&s(o,null,n),i.push(o))}e.u.append(i)}),t.mode=document.pictureInPictureElement?"showing":"hidden"}d.Jf=function(e,t,n){function i(){var o=r.i.variants.find(function(u){return u.id==e.id});if(o&&ns(o)){var s=r.l.o;r.g.abr.enabled&&(s.video!=o.video||s.audio&&o.audio&&s.audio.language==o.audio.language&&s.audio.channelsCount==o.audio.channelsCount&&s.audio.label==o.audio.label)&&ve("Changing tracks while abr manager is enabled will likely result in the selected track being overridden. Consider disabling abr before calling selectVariantTrack()."),r.xa()?Ds(r,o,!1,!1,0):Ds(r,o,!1,t||!1,n||0),r.J.configure({language:o.language,role:o.audio&&o.audio.roles&&o.audio.roles[0]||"",videoRole:o.video&&o.video.roles&&o.video.roles[0]||"",channelCount:o.audio&&o.audio.channelsCount?o.audio.channelsCount:0,hdrLevel:o.video&&o.video.hdr?o.video.hdr:"",spatialAudio:o.audio&&o.audio.spatialAudio?o.audio.spatialAudio:!1,videoLayout:o.video&&o.video.videoLayout?o.video.videoLayout:"",audioLabel:o.audio&&o.audio.label?o.audio.label:"",videoLabel:o.video&&o.video.label?o.video.label:"",codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:o.audio&&o.audio.codecs?o.audio.codecs:"",activeAudioCodec:s.audio&&s.audio.codecs?s.audio.codecs:"",activeAudioChannelCount:s.audio&&s.audio.channelsCount?s.audio.channelsCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),qi(r)}}var r=this;t=t===void 0?!1:t,n=n===void 0?0:n,!(this.i&&this.G&&(i(),!this.xa()))&&function(){if(e.originalAudioId&&r.h&&r.h.audioTracks){var o=Array.from(r.h.audioTracks);o=m(o);for(var s=o.next();!s.done;s=o.next())if(s=s.value,Uu(s)==e.id){Wf(r,s);break}}}()},d.Xk=function(e,t){function n(){var r=i.J.getConfiguration();r.audioCodec=e.codecs||"",r.audioLabel=e.label||"",r.channelCount=e.channelsCount||0,r.language=e.language,r.role=e.roles[0]||"",r.spatialAudio=e.spatialAudio;var o=i.l.o;(o=o&&o.audio)&&(r.activeAudioCodec=o.codecs||"",r.activeAudioChannelCount=o.channelsCount||0),i.J.configure(r),Ji(i,!0,t,!1,!1)}var i=this;t=t===void 0?0:t,!(this.i&&this.G&&(n(),!this.xa()))&&function(){if(i.h&&i.h.audioTracks){var r=Ce(e.language),o=Array.from(i.h.audioTracks),s=null;o=m(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var a=u.language||"und";if(u.label==e.label&&Ce(a)==r&&u.kind==e.roles[0]){s=u;break}}s&&Wf(i,s)}}()},d.getAudioTracks=function(){if(this.i&&!this.xa()){var e=this.sc();if(!e.length)return[];var t=e.find(function(o){return o.active});if(!t)return[];var n=e;if(this.m!=St||this.xa()||(n=e.filter(function(o){return o.originalVideoId===t.originalVideoId&&(o.audioCodec||fi.includes(o.audioMimeType||""))})),!n.length)return[];e=new Map,n=m(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalAudioId;r||i.audioId==null||(r=String(i.audioId)),!r&&i.codecs.includes(",")&&i.audioCodec&&(r="muxed-in-video"),r&&(r+=[i.language,i.label,i.channelsCount,i.spatialAudio,i.audioCodec||""].join("_"),e.set(r,{active:i.active,language:i.language,label:i.label,mimeType:i.audioMimeType,codecs:i.audioCodec,primary:i.primary,roles:i.audioRoles||[],accessibilityPurpose:i.accessibilityPurpose,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,originalLanguage:i.originalLanguage}))}return Array.from(e.values())}return this.h&&this.h.audioTracks?Array.from(this.h.audioTracks).map(function(o){var s=o.language;return s={active:o.enabled,language:Ce(s||"und"),label:o.label,mimeType:null,codecs:null,primary:o.kind=="main",roles:[],accessibilityPurpose:null,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,originalLanguage:s},o.kind&&(o.kind=="description"&&(s.accessibilityPurpose="visually impaired"),s.roles.push(o.kind)),o.configuration&&(o.configuration.codec&&(s.codecs=o.configuration.codec),o.configuration.sampleRate&&(s.audioSamplingRate=o.configuration.sampleRate),o.configuration.numberOfChannels&&(s.channelsCount=o.configuration.numberOfChannels)),s}):[]},d.Zk=function(e,t,n){t=t===void 0?!1:t,n=n===void 0?0:n;var i=this.sc();if(i.length){var r=i.find(function(s){return s.active});if(r){i=i.filter(function(s){return(s.videoBandwidth||s.bandwidth)==e.bandwidth&&s.width==e.width&&s.height==e.height&&s.frameRate==e.frameRate&&s.pixelAspectRatio==e.pixelAspectRatio&&s.hdr==e.hdr&&s.colorGamut==e.colorGamut&&s.videoLayout==e.videoLayout&&s.videoMimeType==e.mimeType&&s.videoCodec==e.codecs&&Pi(s.videoRoles,e.roles)&&s.videoLabel==e.label});var o;i.length==1?o=i[0]:o=i.find(function(s){return s.audioId===r.audioId}),o||(o=i.find(function(s){return s.language==r.language&&s.label===r.label&&s.channelsCount===r.channelsCount&&s.spatialAudio===r.spatialAudio&&s.audioMimeType===r.audioMimeType&&It(s.audioCodec||"")===It(r.audioCodec||"")&&Pi(s.audioRoles,r.audioRoles)})),o&&!o.active&&this.Jf(o,t,n)}}},d.getVideoTracks=function(){if(this.m==en||this.xa())return[];var e=this.sc();if(!e.length)return[];var t=e.find(function(o){return o.active});if(!t)return[];var n=e;if(this.ui()||(n=e.filter(function(o){return o.videoCodec&&o.audioGroupId===t.audioGroupId&&o.originalAudioId===t.originalAudioId?o.audioId===t.audioId?!0:o.language===t.language&&o.label===t.label&&o.channelsCount===t.channelsCount&&o.spatialAudio===t.spatialAudio&&o.audioMimeType===t.audioMimeType&&It(o.audioCodec||"")===It(t.audioCodec||"")&&Pi(o.audioRoles,t.audioRoles):!1})),!n.length)return[];e=new Map,n=m(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.originalVideoId;r||i.videoId==null||(r=String(i.videoId)),r&&e.set(r,{active:i.active,bandwidth:i.videoBandwidth||i.bandwidth,width:i.width,height:i.height,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,mimeType:i.videoMimeType,codecs:i.videoCodec,roles:i.videoRoles||[],label:i.videoLabel})}return Array.from(e.values())},d.Ej=function(){return Pv(this.sc())},d.bk=function(){return Pv(this.Lc())},d.Dj=function(){return Array.from(Lv(this.sc()))},d.$j=function(){return Array.from(Lv(this.Lc()))},d.Ui=function(e,t,n,i,r,o,s){function u(){function l(g,v){return g.video||v.video?g.video&&v.video?Math.abs((g.video.height||0)-(v.video.height||0))+Math.abs((g.video.width||0)-(v.video.width||0)):1/0:0}var c=a.l.o;a.J=a.g.adaptationSetCriteriaFactory(),a.J.configure({language:e,role:t||"",videoRole:c.video&&c.video.roles&&c.video.roles[0]||"",channelCount:n||0,hdrLevel:"",spatialAudio:o||!1,videoLayout:"",audioLabel:s||"",videoLabel:"",codecSwitchingStrategy:a.g.mediaSource.codecSwitchingStrategy,audioCodec:r||"",activeAudioCodec:c.audio&&c.audio.codecs?c.audio.codecs:"",activeAudioChannelCount:c.audio&&c.audio.channelsCount?c.audio.channelsCount:0,preferredAudioCodecs:a.g.preferredAudioCodecs,preferredAudioChannelCount:a.g.preferredAudioChannelCount});var f=a.J.create(a.i.variants),p=null;f=m(f.values());for(var h=f.next();!h.done;h=f.next())h=h.value,ns(h)&&(!p||l(p,c)>l(h,c))&&(p=h);p!=c&&(p?(c=mr(p),a.Jf(c,!0,i||0)):Ji(a))}var a=this;n=n===void 0?0:n,i=i===void 0?0:i,r=r===void 0?"":r,o=o===void 0?!1:o,s=s===void 0?"":s,!(this.i&&this.G&&(u(),!this.xa()))&&function(){if(a.h&&a.h.audioTracks){var l=Xr(a.sc(),e,t||"",!1)[0];l&&a.Jf(l)}}()},d.ph=function(e,t,n){function i(){r.Ld=e,r.Pd=t||"",r.Od=n||!1;var o=Xr(r.i.textStreams,r.Ld,r.Pd,r.Od)[0]||null;o&&o!=r.l.B&&(Sf(r.B.h,o,!1),r.g.streaming.alwaysStreamText||r.Sg())&&(ca(r.l,o),Si(r),Rs(r))}var r=this;n=n===void 0?!1:n,!(this.i&&this.G&&(i(),!this.xa()))&&function(){var o=Xr(r.Lc(),e,t||"",n||!1)[0];o&&r.qh(o)}()},d.Yk=function(e,t,n){function i(){for(var o=null,s=m(r.i.variants),u=s.next();!u.done;u=s.next())if(u=u.value,u.audio.label==e){o=u;break}o!=null&&(r.J=r.g.adaptationSetCriteriaFactory(),r.J.configure({language:o.language,role:"",videoRole:"",channelCount:0,hdrLevel:"",spatialAudio:!1,videoLayout:"",videoLabel:"",audioLabel:e,codecSwitchingStrategy:r.g.mediaSource.codecSwitchingStrategy,audioCodec:"",activeAudioCodec:"",activeAudioChannelCount:0,preferredAudioCodecs:r.g.preferredAudioCodecs,preferredAudioChannelCount:r.g.preferredAudioChannelCount}),Ji(r,t,n))}var r=this;t=t===void 0?!0:t,n=n===void 0?0:n,!(this.i&&this.G&&(i(),!this.xa()))&&function(){if(r.h&&r.h.audioTracks){var o=Array.from(r.h.audioTracks),s=null;o=m(o);for(var u=o.next();!u.done;u=o.next())u=u.value,u.label==e&&(s=u);s&&Wf(r,s)}}()},d.Sg=function(){var e=this.aa;return this.u?this.u.isTextVisible():e},d.Ij=function(){return this.yb.map(function(e){return vr(e)})},d.Gj=function(e){if(Te("getChapters","Please use an getChaptersAsync."),!this.yb.length)return[];var t=Ce(e);if(e=this.yb.filter(function(o){return Ce(o.language)==t}),!e.length)return[];var n=[],i=new Set;e=m(e);for(var r=e.next();!r.done;r=e.next())r=r.value,r.segmentIndex&&r.segmentIndex.Fb(function(o){var s=o.P()[0],u=o.startTime+"-"+o.endTime+"-"+s;o={id:u,title:s,startTime:o.startTime,endTime:o.endTime},i.has(u)||(n.push(o),i.add(u))});return n},d.Hj=function(e){var t=this,n,i,r,o,s,u,a;return k(function(l){switch(l.g){case 1:if(!t.yb.length)return l.return([]);if(n=Ce(e),i=t.yb.filter(function(c){return Ce(c.language)==n}),!i.length)return l.return([]);r=[],o=new Set,s=m(i),u=s.next();case 2:if(u.done){l.A(4);break}if(a=u.value,a.segmentIndex){l.A(5);break}return T(l,a.createSegmentIndex(),5);case 5:a.segmentIndex.Fb(function(c){var f=c.P()[0],p=c.startTime+"-"+c.endTime+"-"+f;c={id:p,title:f,startTime:c.startTime,endTime:c.endTime},o.has(p)||(r.push(c),o.add(p))}),u=s.next(),l.A(2);break;case 4:return l.return(r)}})};function _a(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind!="metadata"&&t.kind!="chapters"&&t.label!="Shaka Player TextTrack"})}function VA(e){return Array.from(e.h.textTracks).find(function(t){return t.label=="Shaka Player TextTrack"})}function HA(e){return Array.from(e.h.textTracks).filter(function(t){return t.kind=="metadata"})}d.xh=function(e){e=!!e,this.aa!=e&&(this.aa=e,this.m==St?(this.u.setTextVisibility(e),this.g.streaming.alwaysStreamText||(e?this.l.B||(e=Xr(this.i.textStreams,this.Ld,this.Pd,this.Od),e.length>0&&(ca(this.l,e[0]),Si(this),Rs(this))):hw(this.l))):this.h&&this.h.src&&this.h.textTracks&&this.u.setTextVisibility(e),kv(this))},d.Uj=function(){if(this.G)var e=this.G.Rd();else{if(this.O==null)return new Date;if(this.O instanceof Date)return this.O;e=this.O}if(this.i&&!this.xa()){var t=this.i.presentationTimeline;return new Date(((t.m||t.i)+e)*1e3)}return this.h&&this.h.getStartDate?(t=this.h.getStartDate(),isNaN(t.getTime())?null:new Date(t.getTime()+e*1e3)):null},d.mi=function(){if(this.i&&!this.xa()){var e=this.i.presentationTimeline;return e=e.m||e.i,e===null?null:new Date(e*1e3)}return this.h&&this.h.getStartDate?(e=this.h.getStartDate(),isNaN(e.getTime())?null:e):null},d.df=function(){return this.W()&&this.i?this.i.presentationTimeline.df():null},d.Hc=function(){if(this.m==St)return this.H.Hc();var e={total:[],audio:[],video:[],text:[]};return this.m==en&&(e.total=vi(this.h.buffered)),e};function Tv(e){if(!e.h||!e.h.currentTime)return null;var t=e.mi();return t?Math.floor(Date.now()-(t.getTime()+e.h.currentTime*1e3)):null}d.getBandwidthEstimate=function(){return this.o?this.o.getBandwidthEstimate():NaN},d.getStats=function(){if(this.m!=St&&this.m!=en)return{width:NaN,height:NaN,currentCodecs:"",streamBandwidth:NaN,decodedFrames:NaN,droppedFrames:NaN,corruptedFrames:NaN,stallsDetected:NaN,gapsJumped:NaN,estimatedBandwidth:NaN,completionPercent:NaN,loadLatency:NaN,manifestTimeSeconds:NaN,drmTimeSeconds:NaN,playTime:NaN,pauseTime:NaN,bufferingTime:NaN,licenseTime:NaN,liveLatency:NaN,maxSegmentDuration:NaN,manifestSizeBytes:NaN,bytesDownloaded:NaN,nonFatalErrorCount:NaN,manifestPeriodCount:NaN,manifestGapCount:NaN,switchHistory:[],stateHistory:[]};Kf(this);var e=this.h,t=e.currentTime/e.duration;if(isNaN(t)||this.W()||Vw(this.B,Math.round(100*t)),this.G&&(this.B.T=this.G.Mh(),this.B.V=this.G.Oh()),e.getVideoPlaybackQuality&&(t=e.getVideoPlaybackQuality(),Fw(this.B,Number(t.droppedVideoFrames),Number(t.totalVideoFrames)),this.B.N=Number(t.corruptedVideoFrames)),this.B.o=this.F?Yx(this.F):NaN,Cm(this.B,e.videoWidth||NaN,e.videoHeight||NaN),this.B.l="",this.W()&&(e=Tv(this),e!=null&&(this.B.F=e/1e3)),t=this.sc().find(function(r){return r.active}),e=this.Lc().find(function(r){return r.active}),t){if(t.bandwidth){var n=this.M?this.M.i:1,i=n*t.bandwidth;e&&e.bandwidth&&(i+=n*e.bandwidth),this.B.B=i}t.width&&t.height&&Cm(this.B,t.width||NaN,t.height||NaN),t=t.codecs,e&&(t+=","+(e.codecs||e.mimeType)),t&&(this.B.l=t)}return this.m!=St||this.xa()||(this.i&&(this.B.I=this.i.periodCount,this.B.H=this.i.gapCount,this.i.presentationTimeline&&(this.B.K=this.i.presentationTimeline.h)),e=this.o.getBandwidthEstimate(),this.B.u=e),this.m==en&&Mm(this.B,NaN),Hw(this.B)},d.Sd=function(e,t,n,i,r,o,s){s=s===void 0?!1:s;var u=this,a,l,c,f,p,h,g,v,y,S,x,w;return k(function(I){switch(I.g){case 1:if(u.m!=St&&u.m!=en)throw new D(1,7,7004);if(n!="subtitles"&&n!="captions"&&ve("Using a kind value different of `subtitles` or `captions` can cause unwanted issues."),i){I.A(2);break}return T(I,Ba(u,e),3);case 3:i=I.h;case 2:if(a=[],u.C&&(a=u.C.getCuePoints()),u.m!=en){I.A(4);break}return l=pe(),s&&l.Ga()==="WEBKIT"&&(n="forced"),T(I,GA(u,e,t,n,i,o||"",a),5);case 5:if(c=I.h,c.track)return Bt(u),Si(u),I.return(Nh(c.track));throw new D(1,2,2012);case 4:if(f=rt,p=u.Ra(),h=p.end-p.start,u.i&&(h=u.i.presentationTimeline.getDuration()),h==1/0)throw new D(1,4,4033);if(!a.length){I.A(6);break}return T(I,ba(u,e),7);case 7:g=I.h,v=xv(u,g,i,a),y=new Blob([v],{type:"text/vtt"}),e=Jc(y),i="text/vtt";case 6:if(S={id:u.Fe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:sa(0,h,[e]),mimeType:i||"",codecs:r||"",kind:n,encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:o||null,type:f.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!!s,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Qe(i||"",r||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},x=Qe(S.mimeType,S.codecs),w=$o(x),!w)throw new D(2,2,2014,i);return u.i.textStreams.push(S),Bt(u),Si(u),I.return(vr(S))}})},d.Pe=function(e,t){var n=this,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I;return k(function(L){switch(L.g){case 1:if(n.m!=St&&n.m!=en)throw new D(1,7,7004);if(t){L.A(2);break}return T(L,Ba(n,e),3);case 3:t=L.h;case 2:if(t!="text/vtt")throw new D(1,2,2017,e);if(i=rt,r=n.Ra(),o=r.end-r.start,n.i&&(o=n.i.presentationTimeline.getDuration()),o==1/0)throw new D(1,4,4045);return T(L,ba(n,e),4);case 4:if(s=L.h,u=Jo(t),!u)throw new D(2,2,2014,t);for(a=u(),l={periodStart:0,segmentStart:0,segmentEnd:o,vttOffset:0},c=re(s),f=a.parseMedia(c,l,e,[]),p=[],h=m(f),g=h.next(),v={};!g.done;v={Wf:void 0,nd:void 0},g=h.next())v.nd=g.value,v.Wf=null,y=function(A){return function(){return A.Wf==null&&(A.Wf=pt([e],[A.nd.payload])),A.Wf||[]}}(v),S=new Q(v.nd.startTime,v.nd.endTime,y,0,null,null,0,0,1/0),v.nd.payload.includes("#xywh")&&(x=v.nd.payload.split("#xywh=")[1].split(","),x.length===4&&S.Mf({height:parseInt(x[3],10),positionX:parseInt(x[0],10),positionY:parseInt(x[1],10),width:parseInt(x[2],10)})),p.push(S);if(w=t,!p.length){L.A(5);break}return T(L,Ba(n,p[0].P()[0]),6);case 6:w=L.h;case 5:return I={id:n.Fe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Se(p),mimeType:w||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:i.Yf,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Qe(w||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},n.m==en?n.Ke.push(I):n.i.imageStreams.push(I),Bt(n),L.return(Ec(I))}})},d.Oe=function(e,t,n){var i=this,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x;return k(function(w){switch(w.g){case 1:if(i.m!=St&&i.m!=en)throw new D(1,7,7004);if(n){w.A(2);break}return T(w,Ba(i,e),3);case 3:n=w.h;case 2:if(r=rt,o=i.Ra(),s=o.end-o.start,i.i&&(s=i.i.presentationTimeline.getDuration()),s==1/0)throw new D(1,4,4055);if(u=Jo(n),!u)throw new D(2,2,2014,n);return T(w,ba(i,e),4);case 4:for(a=w.h,l=u(),c={periodStart:0,segmentStart:0,segmentEnd:s,vttOffset:0},f=re(a),p=l.parseMedia(f,c,e,[]),h=[],g=m(p),v=g.next(),y={};!v.done;y={Xe:void 0},v=g.next())y.Xe=v.value,S=new Q(y.Xe.startTime,y.Xe.endTime,function(I){return function(){return[I.Xe.payload]}}(y),0,null,null,0,0,1/0),h.push(S);return x={id:i.Fe++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Se(h),mimeType:"text/plain",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:t,originalLanguage:t,label:null,type:r.Na,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Qe("text/plain","")]),isAudioMuxedInVideo:!1,baseOriginalId:null},i.yb.push(x),Bt(i),w.return(vr(x))}})};function Ba(e,t){var n;return k(function(i){switch(i.g){case 1:return se(i,2),T(i,ao(t,e.N,e.g.streaming.retryParameters),4);case 4:n=i.h,fe(i,3);break;case 2:ue(i);case 3:if(n)return i.return(n);throw new D(1,2,2011,t)}})}function GA(e,t,n,i,r,o,s){var u,a,l,c;return k(function(f){if(f.g==1)return r!="text/vtt"||s.length?T(f,ba(e,t),3):f.A(2);f.g!=2&&(u=f.h,a=xv(e,u,r,s),l=new Blob([a],{type:"text/vtt"}),t=Jc(l),r="text/vtt"),c=document.createElement("track");e:{var p=e.K,h=t;try{if(!p.g.enabled){var g=h;break e}var v=Lf(p);v.ot=Of,v.su=!0;var y=Ms(v);g=Ca(h,y);break e}catch(S){Li("CMCD_TEXT_TRACK_ERROR","Could not generate text track CMCD data.",S),g=h;break e}g=void 0}return c.src=g,c.label=o,c.kind=i,c.srclang=n,e.h.getAttribute("crossorigin")||e.h.setAttribute("crossorigin","anonymous"),e.h.appendChild(c),e.cg.push(c),f.return(c)})}function ba(e,t){var n,i,r,o;return k(function(s){if(s.g==1){n=yn,i=e.g.streaming.retryParameters,r=ot([t],i),r.method="GET";var u=e.K;try{u.g.enabled&&go(u,r,{ot:Of,su:!0})}catch(a){Li("CMCD_TEXT_ERROR","Could not generate text CMCD data.",a)}return T(s,e.N.request(n,r).promise,2)}return o=s.h,s.return(o.data)})}function xv(e,t,n,i){var r=Jo(n);if(r)return n=r(),e={periodStart:0,segmentStart:0,segmentEnd:e.h.duration,vttOffset:0},t=re(t),t=n.parseMedia(t,e,null,[]),oA(t,i);throw new D(2,2,2014,n)}d.hl=function(e,t){this.za.width=e,this.za.height=t},d.mh=function(e){if(this.m==St){var t=this.l;if(e=e===void 0?.1:e,t.l.g)t=!1;else if(t.F)t=!1;else{for(var n=m(t.h.values()),i=n.next();!i.done;i=n.next())i=i.value,!i.vd||i.Ia||i.ob||(i.vd=!1,Ct(t,i,e));t=!0}}else t=!1;return t},d.Lg=function(){return ve("Shaka Player's internal Manifest structure is NOT covered by semantic versioning compatibility guarantees.  It may change at any time!  Please consider filing a feature request for whatever you use getManifest() for."),this.i},d.Rj=function(){return this.Ac},d.Mj=function(){var e={video:null,audio:null,text:null};if(this.m!=St)return e;var t=this.l.o,n=this.h.currentTime;t=m([t.video,t.audio,this.l.B]);for(var i=t.next();!i.done;i=t.next())if((i=i.value)&&i.segmentIndex){var r=i.segmentIndex.find(n);r=i.segmentIndex.get(r),r={codecs:r.codecs||i.codecs,mimeType:r.mimeType||i.mimeType,bandwidth:r.bandwidth||i.bandwidth},i.type=="video"?(r.width=i.width,r.height=i.height,e.video=r):i.type=="audio"?e.audio=r:i.type==he&&(e.text=r)}return e};function Wn(e){var t=po();return t.streaming.failureCallback=function(n){if(e.W()){var i=null;n.code==1001||n.code==1002?(i=1,e.g.streaming.lowLatencyMode&&(i=.1)):n.code==1003&&(i=.1),i!=null&&(n.severity=1,e.mh(i))}},t.textDisplayFactory=function(){if(e.Be){var n=e.h;n=!(n.webkitDisplayingFullscreen||n.webkitPresentationMode&&n.webkitPresentationMode!="inline")}else n=!1;return n?new Dt(e.h,e.Be):"track"in document.createElement("track")?new at(e):new kt},t}d.$i=function(e){this.Be=e};function KA(e,t){for(var n=new Set,i=m(t.textStreams),r=i.next();!r.done;r=i.next())r=r.value,r.mimeType!="application/cea-608"&&r.mimeType!="application/cea-708"||n.add(r.originalId);for(i=m(t.variants),r=i.next();!r.done;r=i.next())if((r=r.value.video)&&r.closedCaptions){for(var o=m(r.closedCaptions.keys()),s=o.next();!s.done;s=o.next())if(s=s.value,!n.has(s)){var u=s.startsWith("CC")?"application/cea-608":"application/cea-708",a=new qe,l=r.closedCaptions.get(s);u={id:e.Fe++,originalId:s,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:a,mimeType:u,codecs:"",kind:"caption",encrypted:!1,drmInfos:[],keyIds:new Set,language:l,originalLanguage:l,label:null,type:he,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:r.roles,forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Qe(u,"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},t.textStreams.push(u),n.add(s)}}}function WA(e,t){var n,i,r,o,s;return k(function(u){return u.g==1?(n=e.audio,i=e.video,r=function(a,l){var c,f,p;return k(function(h){return h.g==1?a?a.segmentIndex?h.A(2):T(h,a.createSegmentIndex(),2):h.return(null):(f=(c=a.segmentIndex.Xb(l))?c.next().value:null,f?(p=f.startTime,h.return(p)):h.return(null))})},T(u,r(n,t),2)):u.g!=3?(o=u.h,T(u,r(i,t),3)):(s=u.h,s!=null&&o!=null?u.return(Math.max(s,o)):s!=null?u.return(s):o!=null?u.return(o):u.return(t))})}function ks(e){var t=e.Rg();if(e.B&&e.R&&e.G){if(e.g.streaming.rebufferingGoal==0){var n=e.M;n.j=!1,tf(n)}else n=e.M,n.j=t,tf(n);if(e.K&&(n=e.K,t||n.F||(n.F=!0),n.F&&t&&(n.I=!0,Rt(n,"ps",{dd:"r"})),n.J=t),Kf(e),n=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts,e.g.streaming.liveSync.dynamicTargetLatency.enabled&&t&&e.Ne<n){n=e.g.streaming.liveSync.dynamicTargetLatency.maxLatency;var i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.rebufferIncrement;e.V&&(e.V=Math.min(e.V+ ++e.Ne*r,n-i))}}t=new Map().set("buffering",t),e.dispatchEvent(Oe("buffering",t))}function Sv(e,t){e.fc.Qa(),e.fc.D(e.h,"timeupdate",function(){var n=e.h.currentTime,i=e.Ra(),r=e.W(),o=r?e.g.streaming.safeSeekOffset:0;t>0?r&&t>1&&Math.floor(n)>=Math.floor(i.end)&&e.Td():Math.floor(n)<=Math.floor(i.start+o)&&e.Td()})}function Kf(e){if(e.B&&e.R){var t=e.B.g,n="playing";e.R.g==Tr?n="buffering":e.ge()?n="ended":e.h.paused&&(n="paused");var i=n;if(t.g==null)t.g={timestamp:Date.now()/1e3,state:i,duration:0},t=!0;else{var r=Date.now()/1e3;t.g.duration=r-t.g.timestamp,t.g.state==i?t=!1:(t.h.push(t.g),t.g={timestamp:r,state:i,duration:0},t=!0)}t&&(n=new Map().set("newstate",n),e.dispatchEvent(Oe("statechanged",n)))}}function wv(e){var t=e.h.playbackRate,n=e.W();if(e.g.streaming.vodDynamicPlaybackRate&&!n){var i=e.g.streaming.vodDynamicPlaybackRateLowBufferRate,r=e.gi();r<=e.g.streaming.vodDynamicPlaybackRateBufferRatio?t!=i&&e.xe(i,!1):r==1&&t!==e.M.Tc()&&e.Td()}if(n&&(n=e.Ra(),Number.isFinite(n.end)&&!(e.h.currentTime<n.start||e.h.paused))){i=e.g.streaming.liveSync.targetLatencyTolerance,r=e.g.streaming.liveSync.dynamicTargetLatency.enabled;var o=e.g.streaming.liveSync.dynamicTargetLatency.stabilityThreshold;if(e.g.streaming.liveSync&&e.g.streaming.liveSync.enabled)var s=e.g.streaming.liveSync.targetLatency,u=s+i,a=Math.max(0,s-i),l=e.g.streaming.liveSync.maxPlaybackRate,c=e.g.streaming.liveSync.minPlaybackRate;else e.i&&e.i.serviceDescription&&(s=e.i.serviceDescription.targetLatency,e.i.serviceDescription.targetLatency!=null?u=e.i.serviceDescription.targetLatency+i:e.i.serviceDescription.maxLatency!=null&&(u=e.i.serviceDescription.maxLatency),e.i.serviceDescription.targetLatency!=null?a=Math.max(0,e.i.serviceDescription.targetLatency-i):e.i.serviceDescription.minLatency!=null&&(a=e.i.serviceDescription.minLatency),l=e.i.serviceDescription.maxPlaybackRate||e.g.streaming.liveSync.maxPlaybackRate,c=e.i.serviceDescription.minPlaybackRate||e.g.streaming.liveSync.minPlaybackRate);e.V||typeof s!="number"||(e.V=s);var f=e.g.streaming.liveSync.dynamicTargetLatency.maxAttempts;r&&e.ec&&e.V!==null&&typeof s=="number"&&e.Ne<f&&Date.now()-e.ec>o*1e3&&(o=e.g.streaming.liveSync.dynamicTargetLatency.minLatency,e.V=Math.max(e.V-(s-o)/2,o+i),e.ec=Date.now()),r&&e.V!==null&&(u=e.V+i,a=e.V-i),s=n.end-e.h.currentTime,i=0,e.m==en&&(r=e.h.buffered,r.length>0&&(i=r.end(r.length-1),i=Math.max(l,i-n.end))),n=e.g.streaming.liveSync.panicMode,r=e.g.streaming.liveSync.panicThreshold*1e3,o=Date.now()-e.R.i,n&&!c&&(c=e.g.streaming.liveSync.minPlaybackRate),n&&c&&o<=r?t!=c&&e.xe(c,!1):u!=null&&l&&s-i>u?(t!=l&&e.xe(l,!1),e.ec=null):a!=null&&c&&s-i<a?(t!=c&&e.xe(c,!1),e.ec=null):t!==e.M.Tc()&&(e.Td(),e.ec=Date.now())}}function Fa(e){if(e.h){var t=function(r,o){return(bf(r,o,.01)||o>r)&&e.ag<r?(e.ag=r,!0):!1},n=e.Ra();if(n=n.end-n.start,n=n>0?e.h.currentTime/n:0,!isNaN(n)){if(n*=100,t(0,n))var i=Oe("started");else t(25,n)?i=Oe("firstquartile"):t(50,n)?i=Oe("midpoint"):t(75,n)?i=Oe("thirdquartile"):((t(100,n)||n>100)&&(i=Oe("complete")),e.g&&e.g.playRangeEnd!=1/0&&e.ge()&&e.h.pause());i&&e.dispatchEvent(i)}}}function qi(e){try{gg(e.Ee,e.i)}catch(n){return vo(e,n),!1}var t=Bu(e.i.variants);return t=e.J.create(t),e=e.o.setVariants(Array.from(t.values())),typeof e=="boolean"?e:!0}function Av(e,t){if(t=t===void 0?!1:t,qi(e)){if(!e.g.abr.enabled){var n=e.J;if(typeof n.getLastAdaptationSet!="function"&&(Te("AdaptationSetCriteria w/o getLastAdaptationSet","Please use an AdaptationSetCriteria with getLastAdaptationSet."),n.getLastAdaptationSet=function(){return null}),(n=n.getLastAdaptationSet())&&(n=Array.from(n.values()),n.length)){var i=e.l.o;if(i&&i.video&&(n=n.find(function(r){return r.video==i.video})))return n}}return e.o.chooseVariant(t)}return null}function Ji(e,t,n,i,r){t=t===void 0?!0:t,n=n===void 0?0:n,i=i===void 0?!1:i,r=r===void 0?!0:r;var o=Av(e);o&&Ds(e,o,r,t,n,i)}function Ds(e,t,n,i,r,o){o=o===void 0?!1:o;var s=e.l.o;if(t==s)i&&vm(e.l,t,i,r,!0);else{var u=e.B.h;if(u.h!=t&&(u.h=t,u.g.push({timestamp:Date.now()/1e3,id:t.id,type:"variant",fromAdaptation:n,bandwidth:t.bandwidth})),vm(e.l,t,i,r,o,n),i=null,s&&(i=mr(s)),s=mr(t),s.active=!0,e.T&&(r=e.T,t=t.video)){switch(t.dependencyStream&&(t=t.dependencyStream),o=0,u=-1,t.mimeType){case"video/webm":o=1;break;case"video/mp4":o=2}switch(e.ji()){case"DASH":u=1;break;case"HLS":u=0}r.g&&(r.g.setLevelSwitching(t.id,!0),r.g.setContainerFormat(o),r.j||r.g.setStreamingFormat(u))}n?(n=new Map().set("oldTrack",i).set("newTrack",s),n=Oe("adaptation",n),Mr(e,n)):Iv(e,i,s),Cv(e,i,s)}}function Wf(e,t){var n=Array.from(e.h.audioTracks).find(function(r){return r.enabled});if(t.enabled=!0,n){t.id!==n.id&&(n.enabled=!1);var i=Ev(e);n=_u(n,i),t=_u(t,i),Iv(e,n,t),Cv(e,n,t)}}function Ev(e){return e.h&&e.h.videoTracks?Array.from(e.h.videoTracks).find(function(t){return t.selected}):null}function Bt(e){var t=Oe("trackschanged");Mr(e,t),Mv(e)}function Iv(e,t,n){t=new Map().set("oldTrack",t).set("newTrack",n),t=Oe("variantchanged",t),Mr(e,t)}function Cv(e,t,n){var i=!1;t&&t.audioId==n.audioId&&t.audioGroupId==n.audioGroupId||(i=!0),i&&Mv(e)}function Mv(e){var t=Oe("audiotrackschanged");Mr(e,t)}function Si(e){var t=Oe("textchanged");Mr(e,t)}function kv(e){var t=Oe("texttrackvisibility");Mr(e,t)}function Dv(e){e.g.abr.enabled||Xf(e);var t=new Map().set("newStatus",e.g.abr.enabled);Mr(e,Oe("abrstatuschanged",t))}function Rs(e){var t=e.Lc().find(function(n){return n.active});t&&e.u&&e.u.setTextLanguage&&e.u.setTextLanguage(t.language)}function Xf(e,t){if(t=t===void 0?!0:t,e.m==St){e.He.stop();for(var n=m(e.i.variants),i=n.next();!i.done;i=n.next())i.value.disabledUntilTime=0;t&&qi(e)}}d.disableStream=function(e,t){if(!this.g.abr.enabled||this.m===On||!navigator.onLine||t==0||!this.i)return!1;if(this.i.variants.some(function(u){var a=u[e.type];return a&&a.id!==e.id&&!u.disabledUntilTime?e.type=="audio"?e.language===a.language:!0:!1})){for(var n=!1,i=!1,r=m(this.i.variants),o=r.next();!o.done;o=r.next()){o=o.value;var s=o[e.type];s&&(s.id===e.id?(o.disabledUntilTime=Date.now()/1e3+t,n=!0):s.trickModeVideo&&s.trickModeVideo.id==e.id&&(i=!0))}return!n&&i?!1:(this.He.Da(1),t=this.Hc().video.reduce(function(u,a){return u+a.end-a.start},0),Ji(this,!1,t,!0,!1),!0)}return!1};function vo(e,t){var n,i,r,o,s;return k(function(u){switch(u.g){case 1:if(e.m==On)return u.return();if(t.severity===1&&e.B.M++,n=!0,!(e.Ua&&e.i&&e.l)||t.code!=3016&&t.code!=3014&&t.code!=3015&&t.code!=3024&&t.code!=3018){u.A(2);break}return i=pe(),i.Ga()==="WEBKIT"&&t.code==3016?u.return():(se(u,3),T(u,ma(e.l),5));case 5:r=u.h,n=!r,r&&(o=Oe("mediasourcerecovered"),e.dispatchEvent(o)),fe(u,2);break;case 3:ue(u),n=!0;case 2:if(!n)return u.return();t.severity===2&&Xf(e,!1),s=Oe("error",new Map().set("detail",t)),e.dispatchEvent(s),s.defaultPrevented&&(t.handled=!0),G(u)}})}d.addFont=function(e,t){return DS(e,t)};function Ls(e,t,n,i){i=i===void 0?e:i,e=new Map().set("detail",{schemeIdUri:n.schemeIdUri,value:n.value,startTime:n.startTime,endTime:n.endTime,id:n.id,timescale:n.timescale,eventElement:n.eventElement,eventNode:n.eventNode}),i.dispatchEvent(Oe(t,e))}function Rv(e,t,n,i){i=i===void 0?!1:i,t=new Map().set("mediaQuality",{bandwidth:t.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate,height:t.height,mimeType:t.mimeType,channelsCount:t.channelsCount,pixelAspectRatio:t.pixelAspectRatio,width:t.width,label:t.label,roles:t.roles,language:t.language}).set("position",n),e.dispatchEvent(Oe(i?"audiotrackchanged":"mediaqualitychanged",t))}function zf(e,t){if(t=t===void 0?!0:t,!e.h.error)return t?new D(2,3,3016):null;var n=e.h.error.code;return!t&&n==1?null:((t=e.h.error.msExtendedCode)&&(t<0&&(t+=4294967296),t=t.toString(16)),new D(2,3,3016,n,t,e.h.error.message))}function XA(e,t){var n=Oe("keystatuschanged");e.dispatchEvent(n);var i=Object.keys(t);i.length==1&&i[0]==""&&(i=["00"],t={"00":t[""]});var r=i.length==1&&i[0]=="00";if(n=!1,i.length){i=e.keySystem();for(var o=Jr(e.g.drm.clearKeys),s=function(g,v){g.allowedByKeySystem=!0,v=m(v);for(var y=v.next();!y.done;y=v.next())y=y.value,((y=t[r?"00":y])||e.F.H)&&(g.allowedByKeySystem=g.allowedByKeySystem&&!!y&&!mg.includes(y))},u=m(e.i.variants),a=u.next();!a.done;a=u.next()){a=a.value;var l=Px(a);l=m(l);for(var c=l.next();!c.done;c=l.next()){c=c.value;var f=a.allowedByKeySystem;if(c.keyIds.size)if(c.drmInfos.length&&!o.size&&e.i.type=="HLS")for(var p=m(c.drmInfos),h=p.next();!h.done;h=p.next())h=h.value,h.keySystem==i&&(h.keyIds.size?s(a,h.keyIds):s(a,c.keyIds));else s(a,c.keyIds);f!=a.allowedByKeySystem&&(n=!0)}}}n&&(Bt(e),(n=e.l.o)&&!n.allowedByKeySystem?Ji(e):qi(e))}function Yf(e,t,n){t>0&&(e.W()||e.Zi(t)),t=e.getDuration(),n<t&&(e.W()||e.Ab(n))}function Mr(e,t){k(function(n){if(n.g==1)return T(n,Promise.resolve(),2);e.m!=On&&e.dispatchEvent(t),G(n)})}function Lv(e){var t=new Set;e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value,n.language?t.add(Ce(n.language)):t.add("und");return t}function Pv(e){for(var t=new Map,n=new Map,i=0;i<e.length;i++){var r=e[i],o="und",s=[];r.language&&(o=Ce(r.language)),r.type=="variant"?s=r.audioRoles:s=r.roles,s&&s.length||(s=[""]),t.has(o)||t.set(o,new Set),s=m(s);for(var u=s.next();!u.done;u=s.next())u=u.value,t.get(o).add(u),r.label&&(n.has(o)||n.set(o,new Map),n.get(o).set(u,r.label))}var a=[];return t.forEach(function(l,c){l=m(l);for(var f=l.next();!f.done;f=l.next()){f=f.value;var p=null;n.has(c)&&n.get(c).has(f)&&(p=n.get(c).get(f)),a.push({language:c,role:f,label:p})}}),a}d.xa=function(){return this.h&&this.h.remote?this.h.remote.state!="disconnected":!1},d.ge=function(){return!this.h||this.h.ended?!0:this.Ua&&!this.W()&&this.h.currentTime>=this.Ra().end},K("shaka.Player",U),U.prototype.isEnded=U.prototype.ge,U.prototype.isRemotePlayback=U.prototype.xa,U.prototype.addFont=U.prototype.addFont,U.prototype.setVideoContainer=U.prototype.$i,U.prototype.getFetchedPlaybackInfo=U.prototype.Mj,U.prototype.getManifestParserFactory=U.prototype.Rj,U.prototype.getManifest=U.prototype.Lg,U.prototype.retryStreaming=U.prototype.mh,U.prototype.setMaxHardwareResolution=U.prototype.hl,U.prototype.addChaptersTrack=U.prototype.Oe,U.prototype.addThumbnailsTrack=U.prototype.Pe,U.prototype.addTextTrackAsync=U.prototype.Sd,U.prototype.getStats=U.prototype.getStats,U.prototype.getBufferedInfo=U.prototype.Hc,U.prototype.getSegmentAvailabilityDuration=U.prototype.df,U.prototype.getPresentationStartTimeAsDate=U.prototype.mi,U.prototype.getPlayheadTimeAsDate=U.prototype.Uj,U.prototype.setTextTrackVisibility=U.prototype.xh,U.prototype.getChaptersAsync=U.prototype.Hj,U.prototype.getChapters=U.prototype.Gj,U.prototype.getChaptersTracks=U.prototype.Ij,U.prototype.isTextTrackVisible=U.prototype.Sg,U.prototype.selectVariantsByLabel=U.prototype.Yk,U.prototype.selectTextLanguage=U.prototype.ph,U.prototype.selectAudioLanguage=U.prototype.Ui,U.prototype.getTextLanguages=U.prototype.$j,U.prototype.getAudioLanguages=U.prototype.Dj,U.prototype.getTextLanguagesAndRoles=U.prototype.bk,U.prototype.getAudioLanguagesAndRoles=U.prototype.Ej,U.prototype.getVideoTracks=U.prototype.getVideoTracks,U.prototype.selectVideoTrack=U.prototype.Zk,U.prototype.getAudioTracks=U.prototype.getAudioTracks,U.prototype.selectAudioTrack=U.prototype.Xk,U.prototype.selectVariantTrack=U.prototype.Jf,U.prototype.selectTextTrack=U.prototype.qh,U.prototype.getThumbnails=U.prototype.dk,U.prototype.getAllThumbnails=U.prototype.Cj,U.prototype.getImageTracks=U.prototype.Oj,U.prototype.getTextTracks=U.prototype.Lc,U.prototype.getVariantTracks=U.prototype.sc,U.prototype.cancelTrickPlay=U.prototype.Td,U.prototype.trickPlay=U.prototype.xe,U.prototype.useTrickPlayTrackIfAvailable=U.prototype.Lh,U.prototype.getPlaybackRate=U.prototype.Ob,U.prototype.isBuffering=U.prototype.Rg,U.prototype.getKeyStatuses=U.prototype.$e,U.prototype.getActiveSessionsMetadata=U.prototype.Kg,U.prototype.getExpiration=U.prototype.$d,U.prototype.drmInfo=U.prototype.drmInfo,U.prototype.keySystem=U.prototype.keySystem,U.prototype.isFullyLoaded=U.prototype.pk,U.prototype.goToLive=U.prototype.jk,U.prototype.seekRange=U.prototype.Ra,U.prototype.isVideoOnly=U.prototype.ui,U.prototype.isAudioOnly=U.prototype.nk,U.prototype.isInProgress=U.prototype.Vc,U.prototype.isLive=U.prototype.W,U.prototype.getQueueManager=U.prototype.ni,U.prototype.getAdManager=U.prototype.ei,U.prototype.getAssetUri=U.prototype.rd,U.prototype.getNetworkingEngine=U.prototype.Yb,U.prototype.getMediaElement=U.prototype.bf,U.prototype.getManifestType=U.prototype.ji,U.prototype.getLoadMode=U.prototype.ae,U.prototype.resetConfiguration=U.prototype.Pi,U.prototype.getBufferFullness=U.prototype.gi,U.prototype.getNonDefaultConfiguration=U.prototype.li,U.prototype.getConfigurationForLowLatency=U.prototype.Jj,U.prototype.getConfiguration=U.prototype.getConfiguration,U.prototype.configurationForLowLatency=U.prototype.zj,U.prototype.configure=U.prototype.configure,U.prototype.releaseAllMutexes=U.prototype.Pk,U.prototype.destroyAllPreloads=U.prototype.rg,U.prototype.preload=U.prototype.preload,U.prototype.detachAndSavePreload=U.prototype.ai,U.prototype.unloadAndSavePreload=U.prototype.kj,U.prototype.load=U.prototype.load,U.prototype.updateStartTime=U.prototype.rl,U.prototype.unload=U.prototype.Dc,U.prototype.detach=U.prototype.detach,U.prototype.attachCanvas=U.prototype.rj,U.prototype.attach=U.prototype.Vb,U.probeSupport=function(e){e=e===void 0?!0:e;var t,n,i,r,o,s,u;return k(function(a){switch(a.g){case 1:if(t={},!e){a.A(2);break}return T(a,Zx(),3);case 3:t=a.h;case 2:return n=fx(),i=US(),r=pe(),T(a,r.nc(),4);case 4:return o=a.h,s={manifest:n,media:i,drm:t,hardwareResolution:o},u=jv,u.forEach(function(l,c){s[c]=l()}),a.return(s)}})},U.isBrowserSupported=function(){return B.Promise||ve("A Promise implementation or polyfill is required"),!(B.Promise&&B.Uint8Array&&Array.prototype.forEach)||(navigator.userAgent||"").includes("Trident/")?!1:(pe(),ei()?!0:Ar().canPlayType("application/x-mpegurl")!="")},U.setQueueManagerFactory=function(e){Ga=e},U.setAdManagerFactory=function(e){Ha=e},U.registerSupportPlugin=ov,U.prototype.destroy=U.prototype.destroy;var On=0,Va=1,St=2,en=3;U.LoadMode={DESTROYED:On,NOT_LOADED:Va,MEDIA_SOURCE:St,SRC_EQUALS:en},U.version="v4.16.14";var Nv=["4","16"];Xp=new function(e){this.g=e,this.i=ix,this.h=rx}(new Zl(Number(Nv[0]),Number(Nv[1])));var jv=new Map,Ha=null,Ga=null;function Ov(){this.g=[],this.i=this.m=this.l=this.j=this.h=0}function zA(e){return e.g.length?e.g.reduce(function(t,n){return t+n},0)/e.g.length:0}function Z(e,t,n){var i=this;this.g=e,this.h=t,this.m=n,this.i=!1,this.j=this.h.getVolume(),this.l=new Ee,this.l.D(this.h,google.ima.AdEvent.Type.PAUSED,function(){i.i=!0}),this.l.D(this.h,google.ima.AdEvent.Type.RESUMED,function(){i.i=!1})}d=Z.prototype,d.needsSkipUI=function(){return!1},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return!0},d.isUsingAnotherMediaElement=function(){return!0},d.getDuration=function(){return this.g.getDuration()},d.getMinSuggestedDuration=function(){return this.g.getMinSuggestedDuration()},d.getRemainingTime=function(){return this.h.getRemainingTime()},d.isPaused=function(){return this.i},d.isSkippable=function(){return this.g.getSkipTimeOffset()>=0},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return this.h.getAdSkippableState()},d.skip=function(){return this.h.skip()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.resume()},d.getVolume=function(){return this.h.getVolume()},d.setVolume=function(e){return this.m.volume=e,this.h.setVolume(e)},d.isMuted=function(){return this.h.getVolume()==0},d.isLinear=function(){return this.g.isLinear()},d.resize=function(e,t){this.h.resize(e,t)},d.setMuted=function(e){(this.m.muted=e)?(this.j=this.getVolume(),this.h.setVolume(0)):this.h.setVolume(this.j)},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return this.g.getVastMediaBitrate()},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return this.g.getMediaUrl()},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},d.release=function(){this.h=this.g=null},K("shaka.ads.ClientSideAd",Z),Z.prototype.release=Z.prototype.release,Z.prototype.getPodIndex=Z.prototype.getPodIndex,Z.prototype.getTimeOffset=Z.prototype.getTimeOffset,Z.prototype.getMediaUrl=Z.prototype.getMediaUrl,Z.prototype.getAdvertiserName=Z.prototype.getAdvertiserName,Z.prototype.getCreativeAdId=Z.prototype.getCreativeAdId,Z.prototype.getAdId=Z.prototype.getAdId,Z.prototype.getVastAdId=Z.prototype.getVastAdId,Z.prototype.getVastMediaWidth=Z.prototype.getVastMediaWidth,Z.prototype.getVastMediaHeight=Z.prototype.getVastMediaHeight,Z.prototype.getVastMediaBitrate=Z.prototype.getVastMediaBitrate,Z.prototype.getDescription=Z.prototype.getDescription,Z.prototype.getTitle=Z.prototype.getTitle,Z.prototype.getPositionInSequence=Z.prototype.getPositionInSequence,Z.prototype.getSequenceLength=Z.prototype.getSequenceLength,Z.prototype.setMuted=Z.prototype.setMuted,Z.prototype.resize=Z.prototype.resize,Z.prototype.isLinear=Z.prototype.isLinear,Z.prototype.isMuted=Z.prototype.isMuted,Z.prototype.setVolume=Z.prototype.setVolume,Z.prototype.getVolume=Z.prototype.getVolume,Z.prototype.play=Z.prototype.play,Z.prototype.pause=Z.prototype.pause,Z.prototype.skip=Z.prototype.skip,Z.prototype.canSkipNow=Z.prototype.canSkipNow,Z.prototype.getTimeUntilSkippable=Z.prototype.getTimeUntilSkippable,Z.prototype.isSkippable=Z.prototype.isSkippable,Z.prototype.isPaused=Z.prototype.isPaused,Z.prototype.getRemainingTime=Z.prototype.getRemainingTime,Z.prototype.getMinSuggestedDuration=Z.prototype.getMinSuggestedDuration,Z.prototype.getDuration=Z.prototype.getDuration,Z.prototype.isUsingAnotherMediaElement=Z.prototype.isUsingAnotherMediaElement,Z.prototype.hasCustomClick=Z.prototype.hasCustomClick,Z.prototype.isClientRendering=Z.prototype.isClientRendering,Z.prototype.needsSkipUI=Z.prototype.needsSkipUI;function Ke(){}function Uv(e,t){var n=[];e=m(De(e,"Ad"));for(var i=e.next();!i.done;i=e.next())if((i=He(i.value,"InLine"))&&(i=He(i,"Creatives"))){i=m(De(i,"Creative"));for(var r=i.next();!r.done;r=i.next()){r=r.value;var o=He(r,"Linear");if(o&&YA(n,t,o),r=He(r,"NonLinearAds")){r=De(r,"NonLinear"),r=m(r);for(var s=r.next();!s.done;s=r.next())e:{o=n;var u=t,a=s.value,l=He(a,"StaticResource");if(l)s=l.attributes.creativeType;else{if(l=He(a,"HTMLResource"),!l)break e;s="text/html"}if(l=_t(l)){s==="text/html"&&(l="data:text/html;charset=UTF-8,"+encodeURIComponent(l));var c=oe(a,"width",vt)||oe(a,"expandedWidth",vt),f=oe(a,"height",vt)||oe(a,"expandedHeight",vt);if(c||f){var p=null,h=He(a,"NonLinearClickThrough");h&&(h=_t(h))&&(p=h),h=null,(a=a.attributes.minSuggestedDuration)&&(h=Vr(a)),a=0,u!=null&&(a=u),o.push({id:null,groupId:null,startTime:a,endTime:null,uri:l,mimeType:s,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:h,once:!0,pre:u==null,post:u==1/0,timelineRange:!1,loop:!1,overlay:{viewport:{x:0,y:0},topLeft:{x:0,y:0},size:{x:c||0,y:f||0}},displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:p})}}}}}}return n}function YA(e,t,n){var i=0;t!=null&&(i=t);var r=null;n.attributes.skipoffset&&(r=Vr(n.attributes.skipoffset),isNaN(r)&&(r=null));var o=He(n,"MediaFiles");if(o){var s=null;for((n=He(n,"VideoClicks"))&&(n=He(n,"ClickThrough"))&&(n=_t(n))&&(s=n),o=n=De(o,"MediaFile"),n=n.filter(function(a){return a.attributes.delivery=="streaming"}),n.length&&(o=n),o=o.sort(function(a,l){return(parseInt(l.attributes.height,10)||0)-(parseInt(a.attributes.height,10)||0)}),o=m(o),n=o.next();!n.done;n=o.next())if(n=n.value,!n.attributes.apiFramework){var u=_t(n);if(u){e.push({id:null,groupId:null,startTime:i,endTime:null,uri:u,mimeType:n.attributes.type||null,isSkippable:r!=null,skipOffset:r,skipFor:null,canJump:!1,resumeOffset:0,playoutLimit:null,once:!0,pre:t==null,post:t==1/0,timelineRange:!1,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:s});break}}}}function qA(e){var t=[];e=m(De(e,"vmap:AdBreak"));for(var n=e.next();!n.done;n=e.next()){var i=n.value,r=i.attributes.timeOffset;r&&(n=null,r=="start"?n=null:r=="end"?n=1/0:n=Vr(r),(i=He(i,"vmap:AdSource"))&&(i=He(i,"vmap:AdTagURI"))&&(i=nt(i))&&t.push({time:n,uri:i}))}return t}K("shaka.ads.Utils",Ke),Ke.ADS_LOADED="ads-loaded",Ke.AD_STARTED="ad-started",Ke.AD_FIRST_QUARTILE="ad-first-quartile",Ke.AD_MIDPOINT="ad-midpoint",Ke.AD_THIRD_QUARTILE="ad-third-quartile",Ke.AD_COMPLETE="ad-complete",Ke.AD_STOPPED="ad-stopped",Ke.AD_SKIPPED="ad-skipped",Ke.AD_VOLUME_CHANGED="ad-volume-changed",Ke.AD_MUTED="ad-muted",Ke.AD_PAUSED="ad-paused",Ke.AD_RESUMED="ad-resumed",Ke.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",Ke.CUEPOINTS_CHANGED="ad-cue-points-changed",Ke.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",Ke.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",Ke.AD_CLICKED="ad-clicked",Ke.AD_PROGRESS="ad-progress",Ke.AD_BUFFERING="ad-buffering",Ke.AD_IMPRESSION="ad-impression",Ke.AD_DURATION_CHANGED="ad-duration-changed",Ke.AD_CLOSED="ad-closed",Ke.AD_LOADED="ad-loaded",Ke.ALL_ADS_COMPLETED="all-ads-completed",Ke.AD_LINEAR_CHANGED="ad-linear-changed",Ke.AD_METADATA="ad-metadata",Ke.AD_RECOVERABLE_ERROR="ad-recoverable-error",Ke.AD_ERROR="ad-error",Ke.AD_BREAK_READY="ad-break-ready",Ke.AD_INTERACTION="ad-interaction",Ke.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",Ke.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",Ke.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested";function Ka(e,t,n,i,r){var o=this;this.u=e,this.i=t,this.G=!1,this.B=this.o=null,this.H=NaN,this.l=r,this.j=null,this.h=new Ee,google.ima.settings.setLocale(n),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),this.F=new google.ima.AdDisplayContainer(this.u,this.i),this.F.initialize(),this.m=new google.ima.AdsLoader(this.F),this.m.getSettings().setPlayerType("shaka-player"),this.m.getSettings().setPlayerVersion("v4.16.14"),this.g=null,this.C=i||new google.ima.AdsRenderingSettings,this.h.D(this.m,google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(s){JA(o,s)}),this.h.D(this.m,google.ima.AdErrorEvent.Type.AD_ERROR,function(s){_v(o,s)}),this.h.D(this.i,"ended",function(){o.m.contentComplete()}),this.h.ya(this.i,"play",function(){o.G=!0})}Ka.prototype.configure=function(e){this.o=e},Ka.prototype.stop=function(){this.g&&this.g.stop(),this.u&&fs(this.u)},Ka.prototype.release=function(){this.stop(),this.B&&this.B.disconnect(),this.h&&this.h.release(),this.g&&this.g.destroy(),this.m.destroy(),this.F.destroy()};function _v(e,t){t.getError(),t=new Map().set("originalEvent",t),e.l(new z("ad-error",t)),Wa(e,null),e.l(new z("ad-cue-points-changed",new Map().set("cuepoints",[])))}function JA(e,t){if(e.l(new z("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.H))),e.o.customPlayheadTracker){var n={currentTime:e.i.currentTime};e.g=t.getAdsManager(n,e.C),e.i.muted?e.g.setVolume(0):e.g.setVolume(e.i.volume),e.h.D(e.i,"timeupdate",function(){e.i.duration&&(n.currentTime=e.i.currentTime)}),e.h.D(e.i,"volumechange",function(){e.j&&(e.j.setVolume(e.i.volume),e.i.muted&&e.j.setMuted(!0))})}else e.g=t.getAdsManager(e.i,e.C);e.l(new z("ima-ad-manager-loaded",new Map().set("imaAdManager",e.g)));var i=e.g.getCuePoints();if(i.length){t=[],i=m(i);for(var r=i.next();!r.done;r=i.next())t.push({start:r.value,end:null});e.l(new z("ad-cue-points-changed",new Map().set("cuepoints",t)))}$A(e);try{e.g.init(e.i.offsetWidth,e.i.offsetHeight),e.h.D(e.i,"loadeddata",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),"ResizeObserver"in B?(e.B=new ResizeObserver(function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.B.observe(e.i)):e.h.D(document,"fullscreenchange",function(){e.g.resize(e.i.offsetWidth,e.i.offsetHeight)}),e.G||e.o.skipPlayDetection?e.g.start():e.h.ya(e.i,"play",function(){e.G=!0,e.g.start()})}catch{Wa(e,null)}}function $A(e){function t(n,i){n=new Map().set("originalEvent",n),e.l(new z(i,n))}e.h.D(e.g,google.ima.AdErrorEvent.Type.AD_ERROR,function(n){_v(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,function(n){Bv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.STARTED,function(n){Bv(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.FIRST_QUARTILE,function(n){t(n,"ad-first-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.MIDPOINT,function(n){t(n,"ad-midpoint")}),e.h.D(e.g,google.ima.AdEvent.Type.THIRD_QUARTILE,function(n){t(n,"ad-third-quartile")}),e.h.D(e.g,google.ima.AdEvent.Type.COMPLETE,function(n){t(n,"ad-complete")}),e.h.D(e.g,google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,function(n){Wa(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.ALL_ADS_COMPLETED,function(n){t(n,"all-ads-completed"),Wa(e,n)}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPED,function(n){t(n,"ad-skipped")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_CHANGED,function(n){t(n,"ad-volume-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.VOLUME_MUTED,function(n){t(n,"ad-muted")}),e.h.D(e.g,google.ima.AdEvent.Type.PAUSED,function(n){e.j&&(e.j.i=!0,t(n,"ad-paused"))}),e.h.D(e.g,google.ima.AdEvent.Type.RESUMED,function(n){e.j&&(e.j.i=!1,t(n,"ad-resumed"))}),e.h.D(e.g,google.ima.AdEvent.Type.SKIPPABLE_STATE_CHANGED,function(n){e.j&&t(n,"ad-skip-state-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.CLICK,function(n){t(n,"ad-clicked")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_PROGRESS,function(n){t(n,"ad-progress")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BUFFERING,function(n){t(n,"ad-buffering")}),e.h.D(e.g,google.ima.AdEvent.Type.IMPRESSION,function(n){t(n,"ad-impression")}),e.h.D(e.g,google.ima.AdEvent.Type.DURATION_CHANGE,function(n){t(n,"ad-duration-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.USER_CLOSE,function(n){t(n,"ad-closed")}),e.h.D(e.g,google.ima.AdEvent.Type.LOADED,function(n){t(n,"ad-loaded")}),e.h.D(e.g,google.ima.AdEvent.Type.LINEAR_CHANGED,function(n){t(n,"ad-linear-changed")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_METADATA,function(n){t(n,"ad-metadata")}),e.h.D(e.g,google.ima.AdEvent.Type.LOG,function(n){t(n,"ad-recoverable-error")}),e.h.D(e.g,google.ima.AdEvent.Type.AD_BREAK_READY,function(n){t(n,"ad-break-ready")}),e.h.D(e.g,google.ima.AdEvent.Type.INTERACTION,function(n){t(n,"ad-interaction")})}function Bv(e,t){var n=t.getAd();n?(e.j=new Z(n,e.g,e.i),t.type!=google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED||e.o.supportsMultipleMediaElements||e.l(new z("ad-content-pause-requested")),t=new Map().set("ad",e.j).set("sdkAdObject",n).set("originalEvent",t),e.l(new z("ad-started",t)),e.j.isLinear()&&(e.u.setAttribute("ad-active","true"),e.o.customPlayheadTracker||e.i.pause(),e.i.muted?(t=e.j,t.j=e.i.volume,t.h.setVolume(0)):e.j.setVolume(e.i.volume))):ve("The IMA SDK fired a "+t.type+" event with no associated ad. Unable to play ad!")}function Wa(e,t){t&&t.type==google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED&&!e.o.supportsMultipleMediaElements&&e.l(new z("ad-content-resume-requested")),e.l(new z("ad-stopped",new Map().set("originalEvent",t))),e.j&&e.j.isLinear()&&(e.u.removeAttribute("ad-active"),e.o.customPlayheadTracker||e.i.ended||e.i.play())}function ee(e,t,n,i,r,o){this.g=e,this.h=t,this.j=(this.i=t.isSkippable)?t.skipOffset||0:t.skipOffset,this.l=t.skipFor,this.B=n,this.o=i,this.m=r,this.u=o,this.C=t.overlay}d=ee.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return this.h.clickThroughUrl!=null},d.isUsingAnotherMediaElement=function(){return this.u},d.getDuration=function(){var e=this.g.duration;return isNaN(e)?-1:e},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){var e=this.g.duration;return isNaN(e)?-1:e-this.g.currentTime},d.isPaused=function(){return this.g.paused},d.isSkippable=function(){return this.i&&this.l!=null?this.getDuration()-this.getRemainingTime()<this.j+this.l:this.i},d.getTimeUntilSkippable=function(){if(this.isSkippable()){var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)}return Math.max(this.getRemainingTime(),0)},d.canSkipNow=function(){return this.i&&this.getTimeUntilSkippable()==0},d.skip=function(){this.canSkipNow()&&this.B()},d.pause=function(){return this.g.pause()},d.play=function(){return this.g.play()},d.getVolume=function(){return this.g.volume},d.setVolume=function(e){this.g.volume=e},d.isMuted=function(){return this.g.muted},d.isLinear=function(){return this.C==null},d.resize=function(){},d.setMuted=function(e){this.g.muted=e},d.getSequenceLength=function(){return this.o},d.getPositionInSequence=function(){return this.m},d.getTitle=function(){return""},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return""},d.getAdId=function(){return this.h.id||""},d.getCreativeAdId=function(){return""},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return this.h.uri},d.getTimeOffset=function(){return this.h.pre?0:this.h.post?-1:this.h.startTime},d.getPodIndex=function(){return 0},d.release=function(){this.g=null},K("shaka.ads.InterstitialAd",ee),ee.prototype.release=ee.prototype.release,ee.prototype.getPodIndex=ee.prototype.getPodIndex,ee.prototype.getTimeOffset=ee.prototype.getTimeOffset,ee.prototype.getMediaUrl=ee.prototype.getMediaUrl,ee.prototype.getAdvertiserName=ee.prototype.getAdvertiserName,ee.prototype.getCreativeAdId=ee.prototype.getCreativeAdId,ee.prototype.getAdId=ee.prototype.getAdId,ee.prototype.getVastAdId=ee.prototype.getVastAdId,ee.prototype.getVastMediaWidth=ee.prototype.getVastMediaWidth,ee.prototype.getVastMediaHeight=ee.prototype.getVastMediaHeight,ee.prototype.getVastMediaBitrate=ee.prototype.getVastMediaBitrate,ee.prototype.getDescription=ee.prototype.getDescription,ee.prototype.getTitle=ee.prototype.getTitle,ee.prototype.getPositionInSequence=ee.prototype.getPositionInSequence,ee.prototype.getSequenceLength=ee.prototype.getSequenceLength,ee.prototype.setMuted=ee.prototype.setMuted,ee.prototype.resize=ee.prototype.resize,ee.prototype.isLinear=ee.prototype.isLinear,ee.prototype.isMuted=ee.prototype.isMuted,ee.prototype.setVolume=ee.prototype.setVolume,ee.prototype.getVolume=ee.prototype.getVolume,ee.prototype.play=ee.prototype.play,ee.prototype.pause=ee.prototype.pause,ee.prototype.skip=ee.prototype.skip,ee.prototype.canSkipNow=ee.prototype.canSkipNow,ee.prototype.getTimeUntilSkippable=ee.prototype.getTimeUntilSkippable,ee.prototype.isSkippable=ee.prototype.isSkippable,ee.prototype.isPaused=ee.prototype.isPaused,ee.prototype.getRemainingTime=ee.prototype.getRemainingTime,ee.prototype.getMinSuggestedDuration=ee.prototype.getMinSuggestedDuration,ee.prototype.getDuration=ee.prototype.getDuration,ee.prototype.isUsingAnotherMediaElement=ee.prototype.isUsingAnotherMediaElement,ee.prototype.hasCustomClick=ee.prototype.hasCustomClick,ee.prototype.isClientRendering=ee.prototype.isClientRendering,ee.prototype.needsSkipUI=ee.prototype.needsSkipUI;function te(e,t,n){this.g=e,this.j=t,this.h=n,this.i=e.overlay==null}d=te.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!0},d.hasCustomClick=function(){return this.g.clickThroughUrl!=null},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return-1},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return-1},d.isPaused=function(){return!1},d.isSkippable=function(){return!1},d.getTimeUntilSkippable=function(){return 0},d.canSkipNow=function(){return!1},d.skip=function(){},d.pause=function(){},d.play=function(){},d.getVolume=function(){return 1},d.setVolume=function(){},d.isMuted=function(){return!1},d.isLinear=function(){return this.i},d.resize=function(){},d.setMuted=function(){},d.getSequenceLength=function(){return this.j},d.getPositionInSequence=function(){return this.h},d.getTitle=function(){return""},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.id||""},d.getCreativeAdId=function(){return""},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return this.g.uri},d.getTimeOffset=function(){return this.g.pre?0:this.g.post?-1:this.g.startTime},d.getPodIndex=function(){return 0},d.release=function(){},K("shaka.ads.InterstitialStaticAd",te),te.prototype.release=te.prototype.release,te.prototype.getPodIndex=te.prototype.getPodIndex,te.prototype.getTimeOffset=te.prototype.getTimeOffset,te.prototype.getMediaUrl=te.prototype.getMediaUrl,te.prototype.getAdvertiserName=te.prototype.getAdvertiserName,te.prototype.getCreativeAdId=te.prototype.getCreativeAdId,te.prototype.getAdId=te.prototype.getAdId,te.prototype.getVastAdId=te.prototype.getVastAdId,te.prototype.getVastMediaWidth=te.prototype.getVastMediaWidth,te.prototype.getVastMediaHeight=te.prototype.getVastMediaHeight,te.prototype.getVastMediaBitrate=te.prototype.getVastMediaBitrate,te.prototype.getDescription=te.prototype.getDescription,te.prototype.getTitle=te.prototype.getTitle,te.prototype.getPositionInSequence=te.prototype.getPositionInSequence,te.prototype.getSequenceLength=te.prototype.getSequenceLength,te.prototype.setMuted=te.prototype.setMuted,te.prototype.resize=te.prototype.resize,te.prototype.isLinear=te.prototype.isLinear,te.prototype.isMuted=te.prototype.isMuted,te.prototype.setVolume=te.prototype.setVolume,te.prototype.getVolume=te.prototype.getVolume,te.prototype.play=te.prototype.play,te.prototype.pause=te.prototype.pause,te.prototype.skip=te.prototype.skip,te.prototype.canSkipNow=te.prototype.canSkipNow,te.prototype.getTimeUntilSkippable=te.prototype.getTimeUntilSkippable,te.prototype.isSkippable=te.prototype.isSkippable,te.prototype.isPaused=te.prototype.isPaused,te.prototype.getRemainingTime=te.prototype.getRemainingTime,te.prototype.getMinSuggestedDuration=te.prototype.getMinSuggestedDuration,te.prototype.getDuration=te.prototype.getDuration,te.prototype.isUsingAnotherMediaElement=te.prototype.isUsingAnotherMediaElement,te.prototype.hasCustomClick=te.prototype.hasCustomClick,te.prototype.isClientRendering=te.prototype.isClientRendering,te.prototype.needsSkipUI=te.prototype.needsSkipUI;function bv(e,t,n,i){function r(s){return s?s.overlay?!0:o.g.ended?s.post:!o.g.paused:!1}var o=this;this.M=null,this.m=e,this.C=t,this.g=n,this.G=null,this.u=!0,this.h=this.g,this.wa=i,this.ma=new Set,this.T=new Set,this.H=new Set,this.F=new Map,this.K=new Map,this.i=new U,Qf(this),this.I=new Ee,this.j=new Ee,this.J=!1,this.aa=this.o=this.B=this.l=null,this.ha=!1,this.O=-1,this.X=function(){if(!o.J&&o.l&&!o.C.xa()){o.l=o.g.currentTime;var s=yo(o);s&&r(s)&&Xa(o,s,1,1,Date.now())}},this.V=function(){if(!(o.J||o.l||o.C.xa())){o.g.paused||(o.l=o.g.currentTime);var s=yo(o,!0);s||(s=yo(o)),s&&r(s)&&Xa(o,s,1,1,Date.now())}},this.oa=function(){if(!o.J&&o.l&&!o.C.xa()){var s=o.g.currentTime;o.B&&!o.B.pre&&!o.B.post&&s<(o.B.endTime||o.B.startTime)&&(o.B=null)}},this.R=new ge(this.X),this.N=new ge(function(){var s,u,a,l,c,f,p,h,g,v,y;return k(function(S){switch(S.g){case 1:if(!o.H.size||o.l==null){S.A(0);break}if(s=o.C.ae(),s==On||s==Va)return S.return();u=!1,a=Array.from(o.H),l=o.C.Ra(),c=m(a),f=c.next();case 3:if(f.done){S.A(5);break}if(p=f.value,p==o.B){S.A(4);break}if(h=p.endTime||p.startTime,!(l.start-h>=1)){g=p.startTime-o.l,g>0&&g<=10&&(!o.F.has(p)&&Vv(p)&&o.F.set(p,o.i.preload(p.uri,null,p.mimeType||void 0)),Gv(o,p)),S.A(4);break}if(!o.F.has(p)){S.A(7);break}return T(S,o.F.get(p),8);case 8:(v=S.h)&&v.destroy(),o.F.delete(p);case 7:Kv(o,p),y=p.id||JSON.stringify(p),o.T.has(y)&&o.T.delete(y),o.H.delete(p),qf(o),p.overlay||(u=!0);case 4:f=c.next(),S.A(3);break;case 5:u&&za(o),G(S)}})}),this.configure(this.C.getConfiguration().ads)}d=bv.prototype,d.configure=function(e){this.M=e,this.J||Jf(this)};function QA(e){if(!e.ha&&e.H.size){if(e.I.D(e.g,"playing",e.V),e.I.D(e.g,"timeupdate",e.V),e.I.D(e.g,"seeked",e.oa),e.I.D(e.g,"ended",e.X),"requestVideoFrameCallback"in e.g&&!Hv()){var t=e.g,n=function(){e.O!=-1&&(e.X(),e.O!=-1&&(e.O=t.requestVideoFrameCallback(n)))};e.O=t.requestVideoFrameCallback(n)}else e.R.Da(.025);e.N&&e.N.Da(1),e.ha=!0}}function qf(e){e.ha&&!e.H.size&&(e.I.Ma(e.g,"playing",e.V),e.I.Ma(e.g,"timeupdate",e.V),e.I.Ma(e.g,"seeked",e.oa),e.I.Ma(e.g,"ended",e.X),e.O!=-1&&(e.g.cancelVideoFrameCallback(e.O),e.O=-1),e.R&&e.R.stop(),e.N&&e.N.stop(),e.ha=!1)}function Jf(e){if(e.m&&e.M){var t=e.M.supportsMultipleMediaElements,n=e.g;(n.controls||n.webkitPresentationMode&&n.webkitPresentationMode!=="inline"||n.webkitDisplayingFullscreen)&&(t=!1),e.u==t&&(e.u=!t,e.u?(e.h=e.g,e.G&&(e.G.parentElement&&e.m.removeChild(e.G),e.G=null)):(e.G||(t=document.createElement(e.g.tagName),t.autoplay=!0,t.style.position="absolute",t.style.top="0",t.style.left="0",t.style.width="100%",t.style.height="100%",t.style.display="none",t.setAttribute("playsinline",""),e.G=t),e.h=e.G))}else e.u=!0}d.stop=function(){if(this.j&&this.j.Qa(),this.ma.clear(),this.T.clear(),this.H.clear(),this.i.rg(),this.F.size){var e=Array.from(this.F.values());e=m(e);for(var t=e.next();!t.done;t=e.next())(t=t.value)&&t.then(function(n){n&&n.destroy()})}if(this.F.clear(),this.K.size)for(e=Array.from(this.K.keys()),e=m(e),t=e.next();!t.done;t=e.next())Kv(this,t.value);this.K.clear(),this.i.detach(),this.J=!1,this.B=this.l=null,this.u=!0,this.h=this.g,this.G=null,$f(this),qf(this),this.m&&fs(this.m),this.o&&(this.o.stop(),this.o=null)},d.release=function(){this.stop(),this.I&&this.I.release(),this.j&&this.j.release(),this.R&&(this.R.stop(),this.R=null),this.N&&(this.N.stop(),this.N=null),this.i.destroy()},d.td=function(){return this.i};function ZA(e,t){var n,i,r;k(function(o){if(o.g==1){if(n=null,(i=t.values.find(function(s){return s.key=="ID"}))&&(n=i.data),n){if(e.ma.has(n))return o.return();e.ma.add(n)}return Qf(e),r=[],t&&t.values.find(function(s){return s.key=="X-OVERLAY-ID"})?(r=rE(t),o.A(2)):T(o,iE(e,t),3)}o.g!=2&&(r=o.h),r.length?Ps(e,r):ve("Unsupported HLS interstitial",t),G(o)})}function eE(e,t){var n=He(t.eventNode,"OverlayEvent"),i=n.attributes.uri,r=n.attributes.mimeType,o=n.attributes.loop=="true",s=oe(n,"z",vt);if(i&&s!=0){var u=null,a=He(n,"Background");if(a){var l=a.attributes.uri;l?u="center / contain no-repeat url('"+l+"')":u=_t(a)}a=1920,l=1080;var c=He(n,"Viewport");if(c&&(a=oe(c,"x",vt),a==null||(l=oe(c,"y",vt),l==null)))return;var f={viewport:{x:a,y:l},topLeft:{x:0,y:0},size:{x:a,y:l}},p=He(n,"Overlay");if(c&&p){var h=He(p,"TopLeft"),g=He(p,"Size");if(h&&g){if(p=oe(h,"x",vt),p==null||(h=oe(h,"y",vt),h==null))return;var v=oe(g,"x",vt);if(v==null||(g=oe(g,"y",vt),g==null))return;f.topLeft.x=p,f.topLeft.y=h,f.size.x=v,f.size.y=g}}if(p=null,n=He(n,"Squeeze"),c&&n&&(g=He(n,"TopLeft"),n=He(n,"Size"),g&&n)){if(c=oe(g,"x",vt),c==null||(p=oe(g,"y",vt),p==null)||(g=oe(n,"x",vt),g==null)||(n=oe(n,"y",vt),n==null))return;p={viewport:{x:a,y:l},topLeft:{x:c,y:p},size:{x:g,y:n}}}Ps(e,[{id:t.id,groupId:null,startTime:t.startTime,endTime:t.endTime,uri:i,mimeType:r,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:!1,pre:!1,post:!1,timelineRange:!0,loop:o,overlay:f,displayOnBackground:s==-1,currentVideo:p,background:u,clickThroughUrl:null}])}}d.addAdUrlInterstitial=function(e){var t=this,n,i,r,o,s,u,a,l,c;return k(function(f){if(f.g==1)return n={type:12},T(f,Zf(t,e,n),2);if(f.g!=3){if(i=f.h,r=Ko(i,"VAST,vmap:VMAP"),!r)throw new D(2,10,10007);if(o=[],r.tagName=="VAST")return o=Uv(r,t.l),f.A(3);if(r.tagName!="vmap:VMAP")return f.A(3);for(s=function(p){var h,g;return k(function(v){if(v.g==1)return T(v,Zf(t,p.uri,n),2);if(h=v.h,g=Ko(h,"VAST"),!g)throw new D(2,10,10007);o.push.apply(o,H(Uv(g,p.time))),G(v)})},u=[],a=m(qA(r)),l=a.next();!l.done;l=a.next())c=l.value,u.push(s(c));return u.length?T(f,Promise.all(u),3):f.A(3)}Ps(t,o),G(f)})};function Ps(e,t){var n,i,r,o,s,u,a,l;k(function(c){switch(c.g){case 1:n=!1,i=m(t),r=i.next();case 2:if(r.done){c.A(4);break}if(o=r.value,!o.uri){ve("Missing URL in interstitial",o),c.A(3);break}if(o.mimeType){c.A(5);break}return se(c,6),s=e.i.Yb(),T(c,ao(o.uri,s,e.C.getConfiguration().streaming.retryParameters),8);case 8:o.mimeType=c.h,fe(c,5);break;case 6:ue(c);case 5:if(u=o.id||JSON.stringify(o),e.T.has(u)){c.A(3);break}o.loop&&!o.overlay&&ve("Loop is only supported in overlay interstitials",o),o.overlay||(n=!0),e.T.add(u),e.H.add(o),a=!1,o.pre&&e.l==null?a=!0:o.startTime!=0||o.canJump?e.l!=null&&(l=o.startTime-e.l,l>0&&l<=10&&(a=!0)):a=!0,a&&(!e.F.has(o)&&Vv(o)&&e.F.set(o,e.i.preload(o.uri,null,o.mimeType||void 0)),Gv(e,o));case 3:r=i.next(),c.A(2);break;case 4:n&&za(e),QA(e),G(c)}})}function yo(e,t,n){t=t===void 0?!1:t,n=n===void 0?null:n;var i=0,r=null;if(e.H.size&&e.l!=null){var o=e.g.ended,s=Array.from(e.H).sort(function(f,p){return p.startTime-f.startTime}),u=s;for(u=t?s.filter(function(f){return f.pre}):o?s.filter(function(f){return f.post}):s.filter(function(f){return!f.pre&&!f.post}),s=m(u),u=s.next();!u.done;u=s.next()){u=u.value;var a=!1;if(t)a=u.pre;else if(o)a=u.post;else if(!u.pre&&!u.post){var l=e.l-Math.round(u.startTime*1e3)/1e3,c=1;e.M.allowStartInMiddleOfInterstitial&&u.endTime&&u.endTime!=1/0&&(c=u.endTime-u.startTime),(l>0||l==0&&e.l==0)&&(l<=c||!u.canJump)&&(a=!(n==null&&e.B&&!e.B.pre&&!e.B.post&&e.B.startTime>=u.startTime))}a&&(!e.B||u.startTime>=e.B.startTime)&&(i==(n||0)?r=u:r&&!u.canJump&&Math.round(u.startTime*1e3)/1e3-Math.round(r.startTime*1e3)/1e3>.001&&(r=u,i=0),i++)}}return r}function Xa(e,t,n,i,r,o){o=o===void 0?0:o,e.B=t,Jf(e),e.u||!e.m||e.h.parentElement||e.m.appendChild(e.h),i==1&&n==1&&(n=Array.from(e.H).filter(function(s){return t.pre?s.pre==t.pre:t.post?s.post==t.post:Math.abs(s.startTime-t.startTime)<.001}).length),t.once&&(o++,e.H.delete(t),qf(e),t.overlay||za(e)),t.mimeType&&(t.mimeType.startsWith("image/")||t.mimeType==="text/html")?t.overlay?tE(e,t,n,i,o):ve("Unsupported interstitial",t):e.u&&t.overlay?ve("Unsupported interstitial",t):nE(e,t,n,i,r,o)}function tE(e,t,n,i,r){function o(){e.o&&(e.o.stop(),e.o=null),e.m.removeChild(a),$f(e,t),et(e,"ad-stopped"),e.j.Qa();var p=yo(e,t.pre,i-r);p?Xa(e,p,n,++i,Date.now(),r):e.J=!1}e.J=!0;var s=t.overlay,u=t.mimeType=="text/html"?"iframe":"img",a=document.createElement(u);a.style.objectFit="contain",a.style.position="absolute",a.style.border="none",Fv(e,t);var l=new te(t,n,i);et(e,"ad-impression"),et(e,"ad-started",new Map().set("ad",l)),u=="iframe"?a.src=t.uri:(a.src=t.uri,a.onerror=function(p){et(e,"ad-error",new Map().set("originalEvent",p)),o()}),l=s.viewport;var c=s.topLeft;s=s.size,l.x==0&&l.y==0?(a.width=t.overlay.size.x,a.height=t.overlay.size.y,a.style.bottom="10%",a.style.left="0",a.style.right="0",a.style.width="100%",t.overlay.size.y||u!="iframe"||(a.style.height="auto")):(a.style.height=s.y/l.y*100+"%",a.style.left=c.x/l.x*100+"%",a.style.top=c.y/l.y*100+"%",a.style.width=s.x/l.x*100+"%"),e.m.appendChild(a);var f=Date.now();e.o&&e.o.stop(),e.o=new ge(function(){t.playoutLimit&&(Date.now()-f)/1e3>t.playoutLimit||t.endTime&&e.g.currentTime>t.endTime?(et(e,"ad-complete"),o()):e.g.currentTime<t.startTime&&(et(e,"ad-skipped"),o())}),t.playoutLimit&&!t.endTime?e.o.ka(t.playoutLimit):t.endTime&&e.o.Da(.025),e.j.D(e.g,"seeked",function(){var p=e.g.currentTime;(p<t.startTime||t.endTime&&p>t.endTime)&&(e.o&&e.o.stop(),et(e,"ad-skipped"),o())}),t.clickThroughUrl&&e.j.D(a,"click",function(){t.clickThroughUrl&&B.open(t.clickThroughUrl,"_blank")})}function nE(e,t,n,i,r,o){var s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M;k(function(P){switch(P.g){case 1:if(s=Date.now(),e.J=!0,u=!1,a=function(){if(!e.u&&!t.overlay&&t.resumeOffset==null)if(t.timelineRange&&t.endTime&&t.endTime!=1/0)e.g.currentTime!=t.endTime&&(e.g.currentTime=t.endTime);else{var N=Date.now();e.g.currentTime+=(N-r)/1e3,r=N}},l=function(N){var b,_;return k(function(j){if(j.g==1){if(a(),b=yo(e,t.pre,i-o),N&&t.groupId)for(;b&&b.groupId==t.groupId;)i++,b=yo(e,t.pre,i-o);return e.o&&(!t.groupId||b&&b.groupId!=t.groupId)&&(e.o.stop(),e.o=null),$f(e,t),b&&!b.overlay?j.A(2):(t.post&&(e.l=null,e.B=null),e.u?T(j,e.i.detach(),4):T(j,e.i.Dc(),4))}j.g!=2&&(e.u&&(_=t.resumeOffset,_==null&&(_=t.timelineRange&&t.endTime&&t.endTime!=1/0?t.endTime-(e.l||0):(Date.now()-r)/1e3),et(e,"ad-content-resume-requested",new Map().set("offset",_))),et(e,"ad-stopped"),e.j.Qa(),e.J=!1,e.u?za(e):(e.h.style.display="none",a(),e.g.ended||e.g.play())),Jf(e),b&&(et(e,"ad-stopped"),e.j.Qa(),Xa(e,b,n,++i,r,o)),G(j)})},c=function(N){return k(function(b){return u?b.return():(u=!0,et(e,"ad-error",new Map().set("originalEvent",N)),T(b,l(!1),0))})},f=function(){return k(function(N){if(N.g==1)return u?N.return():(u=!0,T(N,l(!1),2));et(e,"ad-complete"),G(N)})},e.aa=function(){return k(function(N){return u?N.return():(u=!0,et(e,"ad-skipped"),T(N,l(!0),0))})},p=new ee(e.h,t,e.aa,n,i,!e.u),e.u||(p.setMuted(e.g.muted),p.setVolume(e.g.volume)),et(e,"ad-started",new Map().set("ad",p)),(h=p.canSkipNow())&&et(e,"ad-skip-state-changed"),e.j.ya(e.i,"error",c),e.j.D(e.h,"timeupdate",function(){if(e.h.duration){var N=p.canSkipNow();h!=N&&p.getRemainingTime()>0&&p.getDuration()>0&&et(e,"ad-skip-state-changed"),h=N,!e.u&&!t.overlay&&t.resumeOffset==null&&t.timelineRange&&t.endTime&&t.endTime!=1/0&&e.g.currentTime!=t.endTime&&e.C.Ra().end>=t.endTime&&(e.g.currentTime=t.endTime)}}),e.j.ya(e.i,"firstquartile",function(){a(),et(e,"ad-first-quartile")}),e.j.ya(e.i,"midpoint",function(){a(),et(e,"ad-midpoint")}),e.j.ya(e.i,"thirdquartile",function(){a(),et(e,"ad-third-quartile")}),e.j.ya(e.i,"complete",f),e.j.D(e.h,"play",function(){et(e,"ad-resumed")}),e.j.D(e.h,"pause",function(){var N=e.i.getConfiguration();e.h.currentTime>=N.playRangeEnd?f():et(e,"ad-paused")}),e.j.D(e.h,"volumechange",function(){e.h.muted?et(e,"ad-muted"):et(e,"ad-volume-changed")}),t.clickThroughUrl&&(g=e.m||e.h,e.j.D(g,"click",function(){t.clickThroughUrl&&(p.isPaused()||p.pause(),B.open(t.clickThroughUrl,"_blank"))})),!e.u||i!=1){P.A(2);break}return et(e,"ad-content-pause-requested",new Map().set("saveLivePosition",!0)),v=new Pe,y=function(N){return k(function(b){if(b.g==1)return N.state!="detach"?b.A(0):Hv()?T(b,new Promise(function(_){return new ge(_).ka(.1)}),3):b.A(3);v.resolve(),e.j.Ma(e.C,"onstatechange",y),G(b)})},e.j.D(e.C,"onstatechange",y),T(P,v,2);case 2:return Fv(e,t),e.u||(e.h.style.display="",t.overlay?(e.h.loop=t.loop,S=t.overlay.viewport,x=t.overlay.topLeft,w=t.overlay.size,e.h.style.height=w.y/S.y*100+"%",e.h.style.left=x.x/S.x*100+"%",e.h.style.top=x.y/S.y*100+"%",e.h.style.width=w.x/S.x*100+"%"):(e.g.pause(),t.resumeOffset!=null&&t.resumeOffset!=0&&(e.g.currentTime+=t.resumeOffset),e.h.loop=!1,e.h.style.height="100%",e.h.style.left="0",e.h.style.top="0",e.h.style.width="100%")),se(P,4),Qf(e),t.startTime&&t.endTime&&t.endTime!=1/0&&t.startTime!=t.endTime&&(I=t.endTime-t.startTime,I>0&&e.i.configure("playRangeEnd",I)),t.playoutLimit&&!e.o&&(e.o=new ge(function(){e.aa()}).ka(t.playoutLimit),e.i.configure("playRangeEnd",t.playoutLimit)),T(P,e.i.Vb(e.h),6);case 6:return L=null,t.pre||t.post||!e.M.allowStartInMiddleOfInterstitial||e.l==null||(A=e.l-t.startTime,Math.abs(A)>.25&&(L=A)),e.F.has(t)?T(P,e.F.get(t),10):T(P,e.i.load(t.uri,L,t.mimeType||void 0),8);case 10:return C=P.h,e.F.delete(t),C?T(P,e.i.load(C),8):T(P,e.i.load(t.uri,L,t.mimeType||void 0),8);case 8:t.overlay&&e.g.paused?e.h.pause():e.h.play(),E=(Date.now()-s)/1e3,et(e,"ads-loaded",new Map().set("loadTime",E)),e.u&&e.g.play(),t.overlay&&(t.pre||t.post||e.C.W()&&!(t.startTime>0)||(R=function(){var N=e.g.currentTime-t.startTime;Math.abs(N-e.h.currentTime)>.1&&(e.h.currentTime=N)},e.j.ya(e.h,"playing",R),e.j.D(e.g,"seeking",R)),e.j.D(e.g,"seeked",function(){var N=e.g.currentTime;(N<t.startTime||t.endTime&&N>t.endTime)&&e.aa()})),fe(P,0);break;case 4:if(M=ue(P),!e.J)return P.return();c(M),G(P)}})}function Fv(e,t){if(t.displayOnBackground&&(e.g.style.zIndex="1"),t.currentVideo!=null){var n=t.currentVideo;e.g.style.transformOrigin="top left";var i=!0,r=[],o=n.topLeft.x/n.viewport.x*100;o>0&&o<=100&&(r.push("translateX("+o+"%)"),i=!1),o=n.topLeft.y/n.viewport.y*100,o>0&&o<=100&&(r.push("translateY("+o+"%)"),i=!1),o=n.size.x/n.viewport.x,o<1&&r.push("scaleX("+o+")"),n=n.size.y/n.viewport.y,o<1&&r.push("scaleY("+n+")"),r.length&&(e.g.style.transform=r.join(" ")),i&&(e.g.style.transition="transform 250ms")}e.m&&(t.clickThroughUrl?(e.m.setAttribute("ad-active","true"),e.m.style.pointerEvents=""):e.m.style.pointerEvents="none",t.background&&(e.m.style.background=t.background)),e.G&&(e.G.style.background=t.overlay?"":"rgb(0, 0, 0)")}function $f(e,t){(!t||t.displayOnBackground)&&(e.g.style.zIndex=""),t&&t.currentVideo==null||(e.g.style.transformOrigin="",e.g.style.transition="",e.g.style.transform=""),e.m&&(e.m.removeAttribute("ad-active"),e.m.style.pointerEvents="",!t||t.background)&&(e.m.style.background=""),e.G&&(e.G.style.background="")}function iE(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_,j,O,F,V,le,q,Re,ae,Ve,Ae,de,xe,ft;return k(function(Ue){switch(Ue.g){case 1:if(n=[],!t||(i=t.values.find(function(we){return we.key=="X-ASSET-URI"}),r=t.values.find(function(we){return we.key=="X-ASSET-LIST"}),!i&&!r))return Ue.return(n);if(o=null,(s=t.values.find(function(we){return we.key=="ID"}))&&(o=s.data),u=o==null?Math.floor(t.startTime*10)/10:t.startTime,(a=t.endTime)&&t.endTime!=1/0&&typeof t.endTime=="number"&&(a=o==null?Math.floor(t.endTime*10)/10:t.endTime),l=t.values.find(function(we){return we.key=="X-RESTRICT"}),f=c=!0,l&&l.data&&(p=l.data,c=!p.includes("SKIP"),f=!p.includes("JUMP")),h=c?0:null,(g=t.values.find(function(we){return we.key=="X-ENABLE-SKIP-AFTER"}))&&(v=g.data,h=parseFloat(v),isNaN(h)&&(h=c?0:null)),y=null,(S=t.values.find(function(we){return we.key=="X-ENABLE-SKIP-FOR"}))&&(x=S.data,y=parseFloat(x),isNaN(h)&&(y=null)),w=null,(I=t.values.find(function(we){return we.key=="X-RESUME-OFFSET"}))&&(L=I.data,w=parseFloat(L),isNaN(w)&&(w=null)),A=null,(C=t.values.find(function(we){return we.key=="X-PLAYOUT-LIMIT"}))&&(E=C.data,A=parseFloat(E),isNaN(A)&&(A=null)),P=M=R=!1,(N=t.values.find(function(we){return we.key=="CUE"}))&&(b=N.data,R=b.includes("ONCE"),M=b.includes("PRE"),P=b.includes("POST")),_=!1,(j=t.values.find(function(we){return we.key=="X-TIMELINE-OCCUPIES"}))?(O=j.data,_=O.includes("RANGE")):!I&&e.C.W()&&(_=!M&&!P),i){if(F=i.data,!F)return Ue.return(n);n.push({id:o,groupId:null,startTime:u,endTime:a,uri:F,mimeType:null,isSkippable:c,skipOffset:h,skipFor:y,canJump:f,resumeOffset:w,playoutLimit:A,once:R,pre:M,post:P,timelineRange:_,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}),Ue.A(2);break}if(!r){Ue.A(2);break}return V=r.data,V?(se(Ue,4),le={type:11},T(Ue,Zf(e,V,le),6)):Ue.return(n);case 6:for(q=Ue.h,Re=Xe(q),ae=JSON.parse(Re),(Ve=ae["SKIP-CONTROL"])&&(Ae=Ve["ENABLE-SKIP-AFTER"],typeof Ae=="number"&&(h=parseFloat(Ae),isNaN(Ae)&&(h=c?0:null)),de=Ve["ENABLE-SKIP-FOR"],typeof de=="number"&&(y=parseFloat(de),isNaN(de)&&(y=null))),xe=0;xe<ae.ASSETS.length;xe++)ft=ae.ASSETS[xe],ft.URI&&n.push({id:o+"_shaka_asset_"+xe,groupId:o,startTime:u,endTime:a,uri:ft.URI,mimeType:null,isSkippable:c,skipOffset:h,skipFor:y,canJump:f,resumeOffset:w,playoutLimit:A,once:R,pre:M,post:P,timelineRange:_,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null});fe(Ue,2);break;case 4:ue(Ue);case 2:return Ue.return(n)}})}function rE(e){var t=[];if(!e)return t;var n=e.values.find(function(y){return y.key=="X-ASSET-URI"});if(!n||(n=n.data,!n))return t;var i=null,r=e.values.find(function(y){return y.key=="X-OVERLAY-ID"});r&&(i=r.data),r=i==null?Math.floor(e.startTime*10)/10:e.startTime;var o=e.endTime;e.endTime&&e.endTime!=1/0&&typeof e.endTime=="number"&&(o=i==null?Math.floor(e.endTime*10)/10:e.endTime);var s=!1,u=!1,a=!1,l=e.values.find(function(y){return y.key=="CUE"});l&&(a=l.data,s=a.includes("ONCE"),u=a.includes("PRE"),a=a.includes("POST")),l=null;var c=e.values.find(function(y){return y.key=="X-ASSET-MIMETYPE"});c&&(l=c.data),c=!1;var f=e.values.find(function(y){return y.key=="X-LOOP"});f&&(c=f.data=="YES"),f=1;var p=e.values.find(function(y){return y.key=="X-DEPTH"});p&&(f=parseFloat(p.data),isNaN(f)&&(f=1)),p=null;var h=e.values.find(function(y){return y.key=="X-BACKGROUND"});h&&(p=h.data),h=1920;var g=1080,v=e.values.find(function(y){return y.key=="X-VIEWPORT"});if(v){if(g=v.data.split("x"),g.length!=2)return t;h=parseFloat(g[0]),g=parseFloat(g[1])}if(h={viewport:{x:h,y:g},topLeft:{x:0,y:0},size:{x:h,y:g}},g=e.values.find(function(y){return y.key=="X-OVERLAY-POSITION"})){if(g=g.data.split("x"),g.length!=2)return t;h.topLeft.x=parseFloat(g[0]),h.topLeft.y=parseFloat(g[1])}if(g=e.values.find(function(y){return y.key=="X-OVERLAY-SIZE"})){if(g=g.data.split("x"),g.length!=2)return t;h.size.x=parseFloat(g[0]),h.size.y=parseFloat(g[1])}if(g=null,(v=e.values.find(function(y){return y.key=="X-SQUEEZECURRENT"}))&&(g=parseFloat(v.data),isNaN(g)&&(g=1),g={viewport:{x:1920,y:1080},topLeft:{x:0,y:0},size:{x:1920*g,y:1080*g}},e=e.values.find(function(y){return y.key=="X-SQUEEZECURRENT-POSITION"}))){if(e=e.data.split("x"),e.length!=2)return t;g.topLeft.x=parseFloat(e[0]),g.topLeft.y=parseFloat(e[1])}return t.push({id:i,groupId:null,startTime:r,endTime:o,uri:n,mimeType:l,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:null,playoutLimit:null,once:s,pre:u,post:a,timelineRange:!0,loop:c,overlay:h,displayOnBackground:f==-1,currentVideo:g,background:p,clickThroughUrl:null}),t}function za(e){for(var t=[],n=m(e.H),i=n.next(),r={};!i.done;r={Cc:void 0},i=n.next())i=i.value,i.overlay||(r.Cc={start:i.startTime,end:null},i.pre?(r.Cc.start=0,r.Cc.end=null):i.post?(r.Cc.start=-1,r.Cc.end=null):i.timelineRange&&(r.Cc.end=i.endTime),t.find(function(o){return function(s){return o.Cc.start==s.start&&o.Cc.end==s.end}}(r))||t.push(r.Cc));et(e,"ad-cue-points-changed",new Map().set("cuepoints",t))}function Qf(e){e.i.configure(e.C.li()),e.i.configure("ads.disableHLSInterstitial",!0),e.i.configure("ads.disableDASHInterstitial",!0),e.i.configure("playRangeEnd",1/0),Wh(e.C.Yb(),e.i.Yb())}function Zf(e,t,n){var i,r,o;return k(function(s){return s.g==1?(i=ot([t],jn()),r=e.C.Yb().request(7,i,n),T(s,r.promise,2)):(o=s.h,s.return(o.data))})}function Vv(e){return(e=e.mimeType)?!e.startsWith("image/")&&e!=="text/html":!0}function Hv(){var e=pe().Oa();return e=="TV"||e=="CONSOLE"||e=="CAST"}function Gv(e,t){if(!(e.K.has(t)||e.M&&!e.M.allowPreloadOnDomElements)){var n=function(o){var s=document.createElement("link");return s.rel="preload",s.href=o,s.as="image",document.head.appendChild(s),s},i=[];if(t.background){var r=t.background.match(/url\(('|")?([^'"()]+)('|")\)?/);r&&i.push(n(r[2]))}t.mimeType&&t.mimeType.startsWith("image/")&&i.push(n(t.uri)),e.K.set(t,i)}}function Kv(e,t){if(e.K.has(t)){var n=e.K.get(t);n=m(n);for(var i=n.next();!i.done;i=n.next())i=i.value,i.parentNode.removeChild(i);e.K.delete(t)}}function et(e,t,n){e.wa(new z(t,n))}function $(e,t,n,i,r){this.h=e,this.j=Vr(this.h.skipOffset),this.g=r,this.i=t,this.l=n,this.o=i,this.m=!1}d=$.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!1},d.hasCustomClick=function(){return!1},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return this.h.durationInSeconds},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.h.startTimeInSeconds+this.h.durationInSeconds-this.g.currentTime},d.isPaused=function(){return this.g.paused},d.isSkippable=function(){return typeof this.j=="number"},d.getTimeUntilSkippable=function(){if(typeof this.j!="number")return this.getRemainingTime();var e=this.getRemainingTime()+this.j-this.getDuration();return Math.max(e,0)},d.canSkipNow=function(){return this.getTimeUntilSkippable()==0},d.skip=function(){this.m=!0,this.g.currentTime+=this.getRemainingTime()},d.pause=function(){return this.g.pause()},d.play=function(){return this.g.play()},d.getVolume=function(){return this.g.volume},d.setVolume=function(e){this.g.volume=e},d.isMuted=function(){return this.g.muted},d.isLinear=function(){return this.o},d.resize=function(){},d.setMuted=function(e){this.g.muted=e},d.getSequenceLength=function(){return this.l?this.l:1},d.getPositionInSequence=function(){return this.i?this.i:1},d.getTitle=function(){return this.h.adTitle},d.getDescription=function(){return""},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return 0},d.getVastMediaWidth=function(){return 0},d.getVastAdId=function(){return this.h.vastAdId||""},d.getAdId=function(){return this.h.adId},d.getCreativeAdId=function(){return this.h.creativeId},d.getAdvertiserName=function(){return""},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){return 0},d.getPodIndex=function(){return 0},d.release=function(){this.l=this.i=this.g=this.h=null},K("shaka.ads.MediaTailorAd",$),$.prototype.release=$.prototype.release,$.prototype.getPodIndex=$.prototype.getPodIndex,$.prototype.getTimeOffset=$.prototype.getTimeOffset,$.prototype.getMediaUrl=$.prototype.getMediaUrl,$.prototype.getAdvertiserName=$.prototype.getAdvertiserName,$.prototype.getCreativeAdId=$.prototype.getCreativeAdId,$.prototype.getAdId=$.prototype.getAdId,$.prototype.getVastAdId=$.prototype.getVastAdId,$.prototype.getVastMediaWidth=$.prototype.getVastMediaWidth,$.prototype.getVastMediaHeight=$.prototype.getVastMediaHeight,$.prototype.getVastMediaBitrate=$.prototype.getVastMediaBitrate,$.prototype.getDescription=$.prototype.getDescription,$.prototype.getTitle=$.prototype.getTitle,$.prototype.getPositionInSequence=$.prototype.getPositionInSequence,$.prototype.getSequenceLength=$.prototype.getSequenceLength,$.prototype.setMuted=$.prototype.setMuted,$.prototype.resize=$.prototype.resize,$.prototype.isLinear=$.prototype.isLinear,$.prototype.isMuted=$.prototype.isMuted,$.prototype.setVolume=$.prototype.setVolume,$.prototype.getVolume=$.prototype.getVolume,$.prototype.play=$.prototype.play,$.prototype.pause=$.prototype.pause,$.prototype.skip=$.prototype.skip,$.prototype.canSkipNow=$.prototype.canSkipNow,$.prototype.getTimeUntilSkippable=$.prototype.getTimeUntilSkippable,$.prototype.isSkippable=$.prototype.isSkippable,$.prototype.isPaused=$.prototype.isPaused,$.prototype.getRemainingTime=$.prototype.getRemainingTime,$.prototype.getMinSuggestedDuration=$.prototype.getMinSuggestedDuration,$.prototype.getDuration=$.prototype.getDuration,$.prototype.isUsingAnotherMediaElement=$.prototype.isUsingAnotherMediaElement,$.prototype.hasCustomClick=$.prototype.hasCustomClick,$.prototype.isClientRendering=$.prototype.isClientRendering,$.prototype.needsSkipUI=$.prototype.needsSkipUI;function Ns(e,t,n,i){this.C=e,this.K=t,this.h=n,this.l=null,this.R=NaN,this.i=i,this.J=!1,this.B=null,this.j=[],this.N=[],this.M=this.F=this.g=null,this.G=new Map,this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.o=new Ee}Ns.prototype.stop=function(){for(var e=m(this.m),t=e.next();!t.done;t=e.next())t=t.value,this.o.Ma(t.target,t.type,t.listener);To(this),this.m=[],this.u=[],this.H="",this.O=!0,this.I="",this.B=null,this.j=[],this.N=[],this.G.clear()},Ns.prototype.release=function(){this.stop(),this.o&&this.o.release()},Ns.prototype.onManifestUpdated=function(e){this.J=e,this.H!=""&&(sE(this,this.H,this.O),this.O=!1)},Ns.prototype.getCuePoints=function(){for(var e=[],t=m(this.j),n=t.next();!n.done;n=t.next()){n=m(n.value.ads);for(var i=n.next();!i.done;i=n.next())i=i.value,e.push({start:i.startTimeInSeconds,end:i.startTimeInSeconds+i.durationInSeconds})}return e};function oE(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,g;k(function(v){if(v.g==1)return i={type:7},r=ot([t],jn()),r.method="POST",n&&(o=JSON.stringify(n),r.body=Ln(o)),s=e.K.request(7,r,i),se(v,2),T(v,s.promise,4);if(v.g!=2){if(u=v.h,a=Xe(u.data),l=JSON.parse(a),l.manifestUrl&&l.trackingUrl)c=new tt(t),f=new tt(l.trackingUrl),e.H=c.resolve(f).toString(),p=Date.now()/1e3,h=p-e.R,e.i(new z("ads-loaded",new Map().set("loadTime",h))),g=new tt(l.manifestUrl),e.l.resolve(c.resolve(g).toString()),e.l=null;else throw Error("Insufficient data from MediaTailor.");return fe(v,0)}if(ue(v),!e.I.length)return e.l.reject("MediaTailor request returned an error and there was no backup asset uri provided."),e.l=null,v.return();e.l.resolve(e.I),e.l=null,G(v)})}function sE(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x;k(function(w){if(w.g==1)return i={type:8},r=ot([t],jn()),o=e.K.request(7,r,i),se(w,2),T(w,o.promise,4);if(w.g!=2){if(s=w.h,u=[],a=Xe(s.data),l=JSON.parse(a),l.avails.length>0){if(JSON.stringify(e.j)!=JSON.stringify(l.avails)){for(e.j=l.avails,c=m(e.j),f=c.next();!f.done;f=c.next())for(p=f.value,h=m(p.nonLinearAdsList),g=h.next();!g.done;g=h.next())for(v=g.value,y=m(v.nonLinearAdList),S=y.next();!S.done;S=y.next())x=S.value,uE(e,x);u=e.getCuePoints(),e.i(new z("ad-cue-points-changed",new Map().set("cuepoints",u)))}}else e.j.length&&e.i(new z("ad-cue-points-changed",new Map().set("cuepoints",u))),To(e),e.j=[];return n&&(e.J||u.length>0)&&aE(e),fe(w,0)}ue(w),G(w)})}function uE(e,t){var n,i,r,o,s,u,a,l;k(function(c){if(c.g==1)return!t.staticResource||(n=Wv(t),e.G.get(n))?c.return():(i={type:9},r=ot([t.staticResource],jn()),o=e.K.request(7,r,i),se(c,2),e.G.set(n,[]),T(c,o.promise,4));if(c.g!=2)return s=c.h,u=Xe(s.data),a=JSON.parse(u),l=a.apps,e.G.set(n,l),fe(c,0);ue(c),e.G.delete(n),G(c)})}function Wv(e){return[e.adId,e.adParameters,e.adSystem,e.adTitle,e.creativeAdId,e.creativeId,e.creativeSequence,e.height,e.width,e.staticResource].join("")}function aE(e){zv(e),e.J||(Xv(e),e.o.D(e.h,"seeked",function(){Xv(e)}),e.o.D(e.h,"ended",function(){To(e)})),e.o.D(e.h,"timeupdate",function(){zv(e)})}function Xv(e){var t=e.h.currentTime;if(t!=0&&e.B==null){for(var n,i,r=m(e.j),o=r.next();!o.done;o=r.next()){o=o.value;for(var s=m(o.ads),u=s.next();!u.done;u=s.next())if(u=u.value,!i)u.startTimeInSeconds<t&&(i=u,n=o);else if(u.startTimeInSeconds<t&&u.startTimeInSeconds>i.startTimeInSeconds+i.durationInSeconds){i=u,n=o;break}}n&&i&&!e.N.includes(i.adId)&&(e.B=t,e.h.currentTime=n.startTimeInSeconds)}}function zv(e){if(e.h.duration&&(e.g||e.j.length)){var t=e.h.currentTime,n=!1;if(e.g){n=!0;var i=e.F,r=i.startTimeInSeconds+.5*i.durationInSeconds,o=i.startTimeInSeconds+.75*i.durationInSeconds;t>=i.startTimeInSeconds+.25*i.durationInSeconds&&!e.u.includes("firstQuartile")?(e.u.push("firstQuartile"),bt(e,"firstQuartile")):t>=r&&!e.u.includes("midpoint")?(e.u.push("midpoint"),bt(e,"midpoint")):t>=o&&!e.u.includes("thirdQuartile")&&(e.u.push("thirdQuartile"),bt(e,"thirdQuartile")),i=e.g.getRemainingTime(),r=e.g.getDuration(),e.g.canSkipNow()&&i>0&&r>0&&bt(e,"skipStateChanged"),r>0&&(i<=0||i>r)&&To(e)}if(!e.g||!e.g.isLinear()){e:for(i=m(e.j),r=i.next();!r.done&&(r=r.value,!(e.g&&e.g.isLinear()));r=i.next())for(o=0;o<r.ads.length;o++){var s=r.ads[o],u=s.startTimeInSeconds+s.durationInSeconds;if(s.startTimeInSeconds<=t&&u>t){if(e.N.includes(s.adId)){if(e.h.ended)continue;e.h.currentTime=u;break e}To(e),e.M=r,e.g=new $(s,o+1,r.ads.length,!0,e.h),e.F=s,o===0&&bt(e,"breakStart"),Yv(e);break}}if(!e.g){for(i=m(e.j),r=i.next();!r.done&&(r=r.value,!e.g);r=i.next())for(o=0;o<r.nonLinearAdsList.length;o++)if(s=r.nonLinearAdsList[o],s.nonLinearAdList.length){u=r.startTimeInSeconds;var a=e.G.get(Wv(s.nonLinearAdList[0]));if(u<=t&&a&&a.length){To(e),u=e,a=m(a);for(var l=a.next();!l.done;l=a.next())if(l=l.value,l.data.source.length){var c=document.createElement("img");c.src=l.data.source[0].url,c.style.top=(l.placeholder.top||0)+"%",c.style.height=100-(l.placeholder.top||0)+"%",c.style.left=(l.placeholder.left||0)+"%",c.style.maxWidth=100-(l.placeholder.left||0)+"%",c.style.objectFit="contain",c.style.position="absolute",u.C.appendChild(c)}e.M=r,e.g=new $(s,o+1,r.ads.length,!1,e.h),e.F=s,o===0&&bt(e,"breakStart"),Yv(e);break}}}n&&!e.g&&(t=e.h.currentTime,e.B&&e.B>t&&(e.h.currentTime=e.B),e.B=null)}}}function To(e){if(e.g){for(;e.C.lastChild;)e.C.removeChild(e.C.firstChild);e.J||e.N.push(e.F.adId);var t=e.g.m;t!==void 0&&t?bt(e,"skip"):bt(e,"complete"),t=m(e.m);for(var n=t.next();!n.done;n=t.next())n=n.value,e.o.Ma(n.target,n.type,n.listener);e.m=[],e.u=[],t=e.g.getPositionInSequence(),n=e.g.getSequenceLength(),t===n&&bt(e,"breakEnd"),e.g=null,e.F=null,e.M=null}}function Yv(e){var t=!1;e.h.paused?t=!0:(bt(e,"impression"),bt(e,"start")),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted&&bt(e,"mute")}}),e.m.push({target:e.h,type:"volumechange",listener:function(){e.h.muted||bt(e,"unmute")}}),e.m.push({target:e.h,type:"play",listener:function(){t?(bt(e,"impression"),bt(e,"start"),t=!1):bt(e,"resume")}}),e.m.push({target:e.h,type:"pause",listener:function(){bt(e,"pause")}});for(var n=m(e.m),i=n.next();!i.done;i=n.next())i=i.value,e.o.D(i.target,i.type,i.listener)}function bt(e,t){var n=e.F.trackingEvents.find(function(o){return o.eventType==t});if(n||(n=e.M.adBreakTrackingEvents.find(function(o){return o.eventType==t})),n){var i={type:10};n=m(n.beaconUrls);for(var r=n.next();!r.done;r=n.next())(r=r.value)&&r!=""&&(r=ot([r],jn()),r.method="POST",e.K.request(7,r,i))}switch(t){case"impression":e.i(new z("ad-impression"));break;case"start":e.i(new z("ad-started",new Map().set("ad",e.g)));break;case"mute":e.i(new z("ad-muted"));break;case"unmute":e.i(new z("ad-volume-changed"));break;case"resume":e.i(new z("ad-resumed"));break;case"pause":e.i(new z("ad-paused"));break;case"firstQuartile":e.i(new z("ad-first-quartile"));break;case"midpoint":e.i(new z("ad-midpoint"));break;case"thirdQuartile":e.i(new z("ad-third-quartile"));break;case"complete":e.i(new z("ad-complete")),e.i(new z("ad-stopped"));break;case"skip":e.i(new z("ad-skipped")),e.i(new z("ad-stopped"));break;case"breakStart":e.C.setAttribute("ad-active","true");break;case"breakEnd":e.C.removeAttribute("ad-active");break;case"skipStateChanged":e.i(new z("ad-skip-state-changed"))}}function ne(e,t){this.g=e,this.i=null,this.h=t}d=ne.prototype,d.needsSkipUI=function(){return!0},d.isClientRendering=function(){return!1},d.hasCustomClick=function(){return!0},d.isUsingAnotherMediaElement=function(){return!1},d.getDuration=function(){return this.i?this.i.duration:-1},d.getMinSuggestedDuration=function(){return this.getDuration()},d.getRemainingTime=function(){return this.i?this.i.duration-this.i.currentTime:-1},d.isPaused=function(){return this.h.paused},d.isSkippable=function(){return this.g.isSkippable()},d.getTimeUntilSkippable=function(){var e=this.g.getSkipTimeOffset();return e=this.getRemainingTime()-e,Math.max(e,0)},d.canSkipNow=function(){return this.getTimeUntilSkippable()==0},d.skip=function(){this.h.currentTime+=this.getRemainingTime()},d.pause=function(){return this.h.pause()},d.play=function(){return this.h.play()},d.getVolume=function(){return this.h.volume},d.setVolume=function(e){this.h.volume=e},d.isMuted=function(){return this.h.muted},d.isLinear=function(){return!0},d.resize=function(){},d.setMuted=function(e){this.h.muted=e},d.getSequenceLength=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getTotalAds()},d.getPositionInSequence=function(){var e=this.g.getAdPodInfo();return e==null?1:e.getAdPosition()},d.getTitle=function(){return this.g.getTitle()},d.getDescription=function(){return this.g.getDescription()},d.getVastMediaBitrate=function(){return 0},d.getVastMediaHeight=function(){return this.g.getVastMediaHeight()},d.getVastMediaWidth=function(){return this.g.getVastMediaWidth()},d.getVastAdId=function(){return""},d.getAdId=function(){return this.g.getAdId()},d.getCreativeAdId=function(){return this.g.getCreativeAdId()},d.getAdvertiserName=function(){return this.g.getAdvertiserName()},d.getMediaUrl=function(){return null},d.getTimeOffset=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getTimeOffset()},d.getPodIndex=function(){var e=this.g.getAdPodInfo();return e==null?0:e.getPodIndex()},d.release=function(){this.h=this.i=this.g=null},K("shaka.ads.ServerSideAd",ne),ne.prototype.release=ne.prototype.release,ne.prototype.getPodIndex=ne.prototype.getPodIndex,ne.prototype.getTimeOffset=ne.prototype.getTimeOffset,ne.prototype.getMediaUrl=ne.prototype.getMediaUrl,ne.prototype.getAdvertiserName=ne.prototype.getAdvertiserName,ne.prototype.getCreativeAdId=ne.prototype.getCreativeAdId,ne.prototype.getAdId=ne.prototype.getAdId,ne.prototype.getVastAdId=ne.prototype.getVastAdId,ne.prototype.getVastMediaWidth=ne.prototype.getVastMediaWidth,ne.prototype.getVastMediaHeight=ne.prototype.getVastMediaHeight,ne.prototype.getVastMediaBitrate=ne.prototype.getVastMediaBitrate,ne.prototype.getDescription=ne.prototype.getDescription,ne.prototype.getTitle=ne.prototype.getTitle,ne.prototype.getPositionInSequence=ne.prototype.getPositionInSequence,ne.prototype.getSequenceLength=ne.prototype.getSequenceLength,ne.prototype.setMuted=ne.prototype.setMuted,ne.prototype.resize=ne.prototype.resize,ne.prototype.isLinear=ne.prototype.isLinear,ne.prototype.isMuted=ne.prototype.isMuted,ne.prototype.setVolume=ne.prototype.setVolume,ne.prototype.getVolume=ne.prototype.getVolume,ne.prototype.play=ne.prototype.play,ne.prototype.pause=ne.prototype.pause,ne.prototype.skip=ne.prototype.skip,ne.prototype.canSkipNow=ne.prototype.canSkipNow,ne.prototype.getTimeUntilSkippable=ne.prototype.getTimeUntilSkippable,ne.prototype.isSkippable=ne.prototype.isSkippable,ne.prototype.isPaused=ne.prototype.isPaused,ne.prototype.getRemainingTime=ne.prototype.getRemainingTime,ne.prototype.getMinSuggestedDuration=ne.prototype.getMinSuggestedDuration,ne.prototype.getDuration=ne.prototype.getDuration,ne.prototype.isUsingAnotherMediaElement=ne.prototype.isUsingAnotherMediaElement,ne.prototype.hasCustomClick=ne.prototype.hasCustomClick,ne.prototype.isClientRendering=ne.prototype.isClientRendering,ne.prototype.needsSkipUI=ne.prototype.needsSkipUI;function qv(e,t,n,i){var r=this;this.u=e,this.l=t,this.j=null,this.G=NaN,this.i=i,this.H=!1,this.B=this.m=this.o=null,this.C="",this.F=[],this.h=new Ee,e=new google.ima.dai.api.UiSettings,e.setLocale(n),this.g=new google.ima.dai.api.StreamManager(this.l,this.u,e),this.i(new z("ima-stream-manager-loaded",new Map().set("imaStreamManager",this.g))),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.LOADED,function(o){lE(r,o)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.ERROR,function(){r.C.length?r.j.resolve(r.C):r.j.reject("IMA Stream request returned an error and there was no backup asset uri provided."),r.j=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_STARTED,function(){}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.STARTED,function(o){o=o.getAd(),r.m=new ne(o,r.l),r.B&&(r.m.i=r.B),r.i(new z("ad-started",new Map().set("ad",r.m))),r.u.setAttribute("ad-active","true")}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_BREAK_ENDED,function(){r.u.removeAttribute("ad-active");var o=r.l.currentTime;r.o&&r.o>o&&(r.l.currentTime=r.o,r.o=null)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.AD_PROGRESS,function(o){r.B=o.getStreamData().adProgressData,r.m&&(r.m.i=r.B)}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.FIRST_QUARTILE,function(){r.i(new z("ad-first-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.MIDPOINT,function(){r.i(new z("ad-midpoint"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.THIRD_QUARTILE,function(){r.i(new z("ad-third-quartile"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.COMPLETE,function(){r.i(new z("ad-complete")),r.i(new z("ad-stopped")),r.u.removeAttribute("ad-active"),r.m=null}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.SKIPPED,function(){r.i(new z("ad-skipped")),r.i(new z("ad-stopped"))}),this.h.D(this.g,google.ima.dai.api.StreamEvent.Type.CUEPOINTS_CHANGED,function(o){var s=o.getStreamData();o=[],s=m(s.cuepoints);for(var u=s.next();!u.done;u=s.next())u=u.value,o.push({start:u.start,end:u.end});r.F=o,r.i(new z("ad-cue-points-changed",new Map().set("cuepoints",o)))})}d=qv.prototype,d.configure=function(){},d.stop=function(){this.C="",this.o=null,this.F=[]},d.release=function(){this.stop(),this.h&&this.h.release()},d.onCueMetadataChange=function(e){if(e.key&&e.data){var t={};t[e.key]=e.data,this.g.onTimedMetadata(t)}},d.getCuePoints=function(){return this.F};function lE(e,t){e.i(new z("ads-loaded",new Map().set("loadTime",Date.now()/1e3-e.G))),t=t.getStreamData().url,e.j.resolve(t),e.j=null,e.H||e.h.D(e.l,"seeked",function(){var n=e.l.currentTime;if(n!=0){e.g.streamTimeForContentTime(n);var i=e.g.previousCuePointForStreamTime(n);i&&!i.played&&(e.o=n,e.l.currentTime=i.start)}})}function W(){Le.call(this),this.h=this.i=this.j=this.g=null,this.m=new Ov,this.o=navigator.language,this.l=null}$e(W,Le),d=W.prototype,d.setLocale=function(e){this.o=e},d.configure=function(e){this.l=e,this.g&&this.g.configure(this.l),this.j&&this.j.configure(this.l),this.h&&this.h.configure(this.l)},d.initInterstitial=function(e,t,n){var i=this;this.g&&this.g.release(),this.g=new bv(e,t,n,function(r){return Ya(i,r)}),this.g.configure(this.l)},d.initClientSide=function(e,t,n){var i=this;if(!B.google||!google.ima||!google.ima.AdsLoader)throw new D(2,10,1e4);this.j&&this.j.release(),this.j=new Ka(e,t,this.o,n,function(r){return Ya(i,r)}),this.j.configure(this.l)},d.release=function(){this.g&&(this.g.release(),this.g=null),this.j&&(this.j.release(),this.j=null),this.i&&(this.i.release(),this.i=null),this.h&&(this.h.release(),this.h=null),Le.prototype.release.call(this)},d.onAssetUnload=function(){this.g&&this.g.stop(),this.j&&this.j.stop(),this.i&&this.i.stop(),this.h&&this.h.stop(),this.dispatchEvent(new z("ad-stopped")),this.dispatchEvent(new z("ad-content-attach-requested")),this.m=new Ov},d.requestClientSideAds=function(e){if(!this.j)throw new D(1,10,10001);var t=this.j;t.g&&t.g.destroy(),t.m&&t.m.contentComplete(),t.H=Date.now()/1e3,t.m.requestAds(e)},d.updateClientSideAdsRenderingSettings=function(e){if(!this.j)throw new D(1,10,10001);var t=this.j;t.C=e,t.g&&t.g.updateAdsRenderingSettings(t.C)},d.initMediaTailor=function(e,t,n){var i=this;this.i&&this.i.release(),this.i=new Ns(e,t,n,function(r){return Ya(i,r)})},d.requestMediaTailorStream=function(e,t,n){if(!this.i)throw new D(1,10,10005);var i=this.i;return n=n===void 0?"":n,i.l?e=Promise.reject(new D(1,10,10004)):(i.l=new Pe,oE(i,e,t),i.I=n||"",i.R=Date.now()/1e3,e=i.l),e},d.addMediaTailorTrackingUrl=function(e){if(!this.i)throw new D(1,10,10005);var t=this.i;t.H=e,t.i(new z("ads-loaded",new Map().set("loadTime",0)))},d.initServerSide=function(e,t){var n=this;if(!B.google||!google.ima||!google.ima.dai)throw new D(2,10,10002);this.h&&this.h.release(),this.h=new qv(e,t,this.o,function(i){return Ya(n,i)}),this.h.configure(this.l)},d.requestServerSideStream=function(e,t){if(t=t===void 0?"":t,!this.h)throw new D(1,10,10003);e.adTagParameters||(e.adTagParameters={});var n=e.adTagParameters;return(n.mpt||n.mpv)&&ve('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.adTagParameters.mpt="shaka-player",e.adTagParameters.mpv="v4.16.14",n=this.h,n.j?e=Promise.reject(new D(1,10,10004)):(e instanceof google.ima.dai.api.LiveStreamRequest&&(n.H=!0),n.j=new Pe,n.g.requestStream(e),n.C=t||"",n.G=Date.now()/1e3,e=n.j),e},d.replaceServerSideAdTagParameters=function(e){if(!this.h)throw new D(1,10,10003);(e.mpt||e.mpv)&&ve('You have attempted to set "mpt" and/or "mpv" parameters of the ad tag. Please note that those parameters are used for Shaka adoption tracking and will be overridden.'),e.mpt="Shaka Player",e.mpv="v4.16.14",this.h.g.replaceAdTagParameters(e)},d.getServerSideCuePoints=function(){return Te("AdManager.getServerSideCuePoints","Please use getCuePoints function."),this.getCuePoints()},d.getCuePoints=function(){var e=[];return this.h&&(e=e.concat(this.h.getCuePoints())),this.i&&(e=e.concat(this.i.getCuePoints())),e},d.getStats=function(){var e=this.m;return{loadTimes:e.g,averageLoadTime:zA(e),started:e.h,overlayAds:e.j,playedCompletely:e.l,skipped:e.m,errors:e.i}},d.onManifestUpdated=function(e){this.i&&this.i.onManifestUpdated(e)},d.onDashTimedMetadata=function(e){this.h&&e.schemeIdUri=="urn:google:dai:2018"&&this.h.g.processMetadata(e.schemeIdUri,e.eventNode?e.eventNode.attributes.messageData:null,e.startTime)},d.onHlsTimedMetadata=function(e,t){this.h&&this.h.g.processMetadata("ID3",e.data,t)},d.onCueMetadataChange=function(e){this.h&&this.h.onCueMetadataChange(e)},d.onHLSInterstitialMetadata=function(e,t,n){this.l&&this.l.disableHLSInterstitial||(this.g||this.initInterstitial(null,e,t),this.g&&ZA(this.g,n))},d.onDASHInterstitialMetadata=function(e,t,n){if(!this.l||!this.l.disableDASHInterstitial){var i=n.schemeIdUri;if(i=="urn:mpeg:dash:event:alternativeMPD:insert:2025"||i=="urn:mpeg:dash:event:alternativeMPD:replace:2025"){if(this.g||this.initInterstitial(null,e,t),this.g&&(e=this.g,t=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:replace:2025",i=n.schemeIdUri=="urn:mpeg:dash:event:alternativeMPD:insert:2025",t||i)){for(var r=n.startTime,o=n.endTime,s=null,u=0,a,l=m(n.eventNode.children),c=l.next();!c.done;c=l.next())if(c=c.value,c.tagName=="AlternativeMPD"){if(c=c.attributes.uri){a=c;break}}else if(c.tagName=="InsertPresentation"||c.tagName=="ReplacePresentation"){var f=c.attributes.url;if(f){a=Ut(f),(l=oe(c,"maxDuration",vt))&&(s=l/n.timescale),(l=oe(c,"returnOffset",vt))&&(u=l/n.timescale),t&&u&&(o=r+u);break}}a&&Ps(e,[{id:n.id,groupId:null,startTime:r,endTime:o,uri:a,mimeType:null,isSkippable:!1,skipOffset:null,skipFor:null,canJump:!0,resumeOffset:i?u:null,playoutLimit:s,once:!1,pre:!1,post:!1,timelineRange:t&&!i,loop:!1,overlay:null,displayOnBackground:!1,currentVideo:null,background:null,clickThroughUrl:null}])}}else(i=="urn:mpeg:dash:event:2012"||i=="urn:scte:dash:scte214-events")&&n.eventNode&&He(n.eventNode,"OverlayEvent")&&(this.g||this.initInterstitial(null,e,t),this.g&&eE(this.g,n))}},d.addCustomInterstitial=function(e){if(!this.g)throw new D(1,10,10006);Ps(this.g,[e])},d.addAdUrlInterstitial=function(e){if(!this.g)throw new D(1,10,10006);return this.g.addAdUrlInterstitial(e)},d.getInterstitialPlayer=function(){if(!this.g)throw new D(1,10,10006);return this.g.td()};function Ya(e,t){if(t&&t.type)switch(t.type){case"ads-loaded":e.m.g.push(t.loadTime);break;case"ad-started":e.m.h++;var n=t.ad;n&&!n.isLinear()&&e.m.j++;break;case"ad-complete":e.m.l++;break;case"ad-skipped":e.m.m++;break;case"ad-error":e.m.i++}e.dispatchEvent(t)}K("shaka.ads.AdManager",W),W.prototype.getInterstitialPlayer=W.prototype.getInterstitialPlayer,W.prototype.addAdUrlInterstitial=W.prototype.addAdUrlInterstitial,W.prototype.addCustomInterstitial=W.prototype.addCustomInterstitial,W.prototype.onDASHInterstitialMetadata=W.prototype.onDASHInterstitialMetadata,W.prototype.onHLSInterstitialMetadata=W.prototype.onHLSInterstitialMetadata,W.prototype.onCueMetadataChange=W.prototype.onCueMetadataChange,W.prototype.onHlsTimedMetadata=W.prototype.onHlsTimedMetadata,W.prototype.onDashTimedMetadata=W.prototype.onDashTimedMetadata,W.prototype.onManifestUpdated=W.prototype.onManifestUpdated,W.prototype.getStats=W.prototype.getStats,W.prototype.getCuePoints=W.prototype.getCuePoints,W.prototype.getServerSideCuePoints=W.prototype.getServerSideCuePoints,W.prototype.replaceServerSideAdTagParameters=W.prototype.replaceServerSideAdTagParameters,W.prototype.requestServerSideStream=W.prototype.requestServerSideStream,W.prototype.initServerSide=W.prototype.initServerSide,W.prototype.addMediaTailorTrackingUrl=W.prototype.addMediaTailorTrackingUrl,W.prototype.requestMediaTailorStream=W.prototype.requestMediaTailorStream,W.prototype.initMediaTailor=W.prototype.initMediaTailor,W.prototype.updateClientSideAdsRenderingSettings=W.prototype.updateClientSideAdsRenderingSettings,W.prototype.requestClientSideAds=W.prototype.requestClientSideAds,W.prototype.onAssetUnload=W.prototype.onAssetUnload,W.prototype.release=W.prototype.release,W.prototype.initClientSide=W.prototype.initClientSide,W.prototype.initInterstitial=W.prototype.initInterstitial,W.prototype.configure=W.prototype.configure,W.prototype.setLocale=W.prototype.setLocale,W.ADS_LOADED="ads-loaded",W.AD_STARTED="ad-started",W.AD_FIRST_QUARTILE="ad-first-quartile",W.AD_MIDPOINT="ad-midpoint",W.AD_THIRD_QUARTILE="ad-third-quartile",W.AD_COMPLETE="ad-complete",W.AD_STOPPED="ad-stopped",W.AD_SKIPPED="ad-skipped",W.AD_VOLUME_CHANGED="ad-volume-changed",W.AD_MUTED="ad-muted",W.AD_PAUSED="ad-paused",W.AD_RESUMED="ad-resumed",W.AD_SKIP_STATE_CHANGED="ad-skip-state-changed",W.CUEPOINTS_CHANGED="ad-cue-points-changed",W.IMA_AD_MANAGER_LOADED="ima-ad-manager-loaded",W.IMA_STREAM_MANAGER_LOADED="ima-stream-manager-loaded",W.AD_CLICKED="ad-clicked",W.AD_PROGRESS="ad-progress",W.AD_BUFFERING="ad-buffering",W.AD_IMPRESSION="ad-impression",W.AD_DURATION_CHANGED="ad-duration-changed",W.AD_CLOSED="ad-closed",W.AD_LOADED="ad-loaded",W.ALL_ADS_COMPLETED="all-ads-completed",W.AD_LINEAR_CHANGED="ad-linear-changed",W.AD_METADATA="ad-metadata",W.AD_RECOVERABLE_ERROR="ad-recoverable-error",W.AD_ERROR="ad-error",W.AD_BREAK_READY="ad-break-ready",W.AD_INTERACTION="ad-interaction",W.AD_CONTENT_PAUSE_REQUESTED="ad-content-pause-requested",W.AD_CONTENT_RESUME_REQUESTED="ad-content-resume-requested",W.AD_CONTENT_ATTACH_REQUESTED="ad-content-attach-requested",Ha=function(){return new W};function ed(e){return JSON.stringify(e,function(t,n){if(typeof n!="function"){if(t=n instanceof z,n instanceof Event||t){var i={};for(o in n){var r=n[o];r&&typeof r=="object"?o=="detail"?i[o]=r:r instanceof Event||r instanceof z?i[o]={__type__:"Event",event:ed(r)}:t&&Array.isArray(r)&&(i[o]=r):o in Event||(i[o]=r)}return i}if(n instanceof Error){var o=new Set(["name","message","stack"]);for(i in n)o.add(i);for(t=m(Object.getOwnPropertyNames(n)),i=t.next();!i.done;i=t.next())o.add(i.value);for(t={},o=m(o),i=o.next();!i.done;i=o.next())i=i.value,t[i]=n[i];n={__type__:"Error",contents:t}}else if(n instanceof TimeRanges){for(o={__type__:"TimeRanges",length:n.length,start:[],end:[]},n=m(vi(n)),t=n.next();!t.done;t=n.next())t=t.value,i=t.end,o.start.push(t.start),o.end.push(i);n=o}else n=ArrayBuffer.isView(n)&&n.BYTES_PER_ELEMENT===1?{__type__:"Uint8Array",entries:Array.from(n)}:typeof n=="number"?isNaN(n)?"NaN":isFinite(n)?n:n<0?"-Infinity":"Infinity":n;return n}})}function qa(e){return JSON.parse(e,function(t,n){if(n=="NaN")var i=NaN;else if(n=="-Infinity")i=-1/0;else if(n=="Infinity")i=1/0;else if(n&&typeof n=="object"&&n.__type__=="TimeRanges")i=cE(n);else if(n&&typeof n=="object"&&n.__type__=="Uint8Array")i=new Uint8Array(n.entries);else if(n&&typeof n=="object"&&n.__type__=="Error"){t=n.contents,n=Error(t.message);for(i in t)n[i]=t[i];i=n}else i=n&&typeof n=="object"&&n.__type__=="Event"?qa(n.event):n;return i})}function cE(e){return{length:e.length,start:function(t){return e.start[t]},end:function(t){return e.end[t]}}}var Jv="ended play playing pause pausing ratechange seeked seeking timeupdate volumechange".split(" "),fE="buffered currentTime duration ended loop muted paused playbackRate seeking videoHeight videoWidth volume".split(" "),td=["loop","playbackRate"],dE=["pause","play"],nd=new Map().set("getAssetUri",2).set("getAudioLanguages",4).set("getAudioLanguagesAndRoles",4).set("getBufferFullness",1).set("getBufferedInfo",2).set("getExpiration",2).set("getKeyStatuses",2).set("getPlaybackRate",2).set("getTextLanguages",4).set("getTextLanguagesAndRoles",4).set("isAudioOnly",10).set("isBuffering",1).set("isInProgress",1).set("isLive",10).set("isTextTrackVisible",1).set("isVideoOnly",10).set("keySystem",10).set("seekRange",1).set("getLoadMode",10).set("getManifestType",10).set("isFullyLoaded",1).set("isEnded",1).set("getBandwidthEstimate",1).set("isRemotePlayback",1),id=new Map().set("getConfiguration",4).set("getConfigurationForLowLatency",4).set("getStats",5).set("getAudioTracks",2).set("getChaptersTracks",2).set("getImageTracks",2).set("getVideoTracks",2).set("getTextTracks",2).set("getVariantTracks",2),$v=new Map().set("getPlayheadTimeAsDate",1).set("getPresentationStartTimeAsDate",20).set("getSegmentAvailabilityDuration",20),Qv=[["getConfiguration","configure","getConfigurationForLowLatency","configurationForLowLatency"]],Zv=[["isTextTrackVisible","setTextTrackVisibility"]],pE="cancelTrickPlay configure configurationForLowLatency getChapters resetConfiguration retryStreaming selectAudioLanguage selectAudioTrack selectTextLanguage selectTextTrack selectVariantTrack selectVariantsByLabel selectVideoTrack setTextTrackVisibility trickPlay updateStartTime goToLive useTrickPlayTrackIfAvailable".split(" "),hE="addChaptersTrack addTextTrackAsync addThumbnailsTrack getAllThumbnails getChaptersAsync getThumbnails attach attachCanvas detach load unload".split(" ");function rd(e,t,n,i,r,o,s){var u=this;this.H=e,this.K=s,this.l=new ge(t),this.M=n,this.u=!1,this.B=i,this.G=r,this.N=o,this.i=this.m=!1,this.J="",this.o=null,this.C=function(){return od(u)},this.F=function(a,l){switch(a=qa(l),a.type){case"event":var c=a.targetName,f=Kh(a.event);u.B(c,f);break;case"update":c=a.update;for(f in c){a=u.g[f]||{};for(var p in c[f])a[p]=c[f][p]}u.u&&(u.M(),u.u=!1);break;case"asyncComplete":if(p=a.id,f=a.error,l=a.res,a=u.h.get(p),u.h.delete(p),a)if(f){p=new D(f.severity,f.category,f.code);for(c in f)p[c]=f[c];a.reject(p)}else a.resolve(l)}},this.g={video:{},player:{}},this.I=0,this.h=new Map,this.j=null,Os.add(this)}d=rd.prototype,d.destroy=function(){return Os.delete(this),sd(this),Un&&ty(this),this.l&&(this.l.stop(),this.l=null),this.G=this.B=null,this.i=this.m=!1,this.F=this.C=this.j=this.h=this.g=this.o=null,Promise.resolve()},d.ub=function(){return this.i},d.fh=function(){return this.J},d.init=function(){if(this.H.length)if(B.chrome&&chrome.cast&&chrome.cast.isAvailable){this.m=!0,this.l.Jb();var e=new chrome.cast.SessionRequest(this.H,[],null,this.K,null);e=new chrome.cast.ApiConfig(e,function(t){for(var n=m(Os),i=n.next();!i.done;i=n.next()){i=i.value;var r=t;i.j=new Pe,i.u=!0,Ja(i,r)}},function(t){for(var n=m(Os),i=n.next();!i.done;i=n.next())i=i.value,$a=t=="available",i.l.Jb()},"origin_scoped"),chrome.cast.initialize(e,function(){},function(){}),$a&&this.l.ka(mE),(e=Un)&&e.status!=chrome.cast.SessionStatus.STOPPED?(this.j=new Pe,this.u=!0,Ja(this,e)):Un=null}else B.__onGCastApiAvailable!==ny&&(Qa=B.__onGCastApiAvailable||null,B.__onGCastApiAvailable=ny)},d.rh=function(e){this.o=e,this.i&&js(this,{type:"appData",appData:this.o})},d.cast=function(){var e=this;return k(function(t){if(!e.m)throw new D(1,8,8e3);if(!$a)throw new D(1,8,8001);if(e.i)throw new D(1,8,8002);return e.j=new Pe,chrome.cast.requestSession(function(n){return Ja(e,n)},function(n){return ey(e,n)}),T(t,e.j,0)})};function gE(e){e.i&&chrome.cast.requestSession(function(t){return Ja(e,t)},function(t){return ey(e,t)})}d.qd=function(){if(this.i){if(sd(this),Un){ty(this);try{Un.stop(function(){},function(){})}catch{}Un=null}od(this)}},d.get=function(e,t){var n=this;if(e=="video"){if(dE.includes(t))return function(){return n.Ni.apply(n,[e,t].concat(H(dt.apply(0,arguments))))}}else if(e=="player"){if($v.has(t)&&!this.get("player","isLive")())return function(){};if(pE.includes(t))return function(){return n.Ni.apply(n,[e,t].concat(H(dt.apply(0,arguments))))};if(hE.includes(t))return function(){return n.Qk.apply(n,[e,t].concat(H(dt.apply(0,arguments))))};if(nd.has(t)||id.has(t))return function(){return n.g[e][t]}}return this.g[e][t]},d.set=function(e,t,n){this.g[e][t]=n,js(this,{type:"set",targetName:e,property:t,value:n})};function Ja(e,t){var n=e.N();Un=t,t.addUpdateListener(e.C),t.addMessageListener("urn:x-cast:com.google.shaka.v2",e.F),od(e),js(e,{type:"init",initState:n,appData:e.o}),e.j.resolve()}function ey(e,t){var n=8003;switch(t.code){case"cancel":n=8004;break;case"timeout":n=8005;break;case"receiver_unavailable":n=8006}e.j.reject(new D(2,8,n,t))}d.Ni=function(e,t){js(this,{type:"call",targetName:e,methodName:t,args:dt.apply(2,arguments)})},d.Qk=function(e,t){var n=dt.apply(2,arguments),i=new Pe,r=this.I.toString();this.I++,this.h.set(r,i);try{js(this,{type:"asyncCall",targetName:e,methodName:t,args:n,id:r})}catch(o){i.reject(o)}return i};function ty(e){var t=Un;t.removeUpdateListener(e.C),t.removeMessageListener("urn:x-cast:com.google.shaka.v2",e.F)}function od(e){var t=Un?Un.status=="connected":!1;if(e.i&&!t){e.G();for(var n in e.g)e.g[n]={};sd(e)}e.i=t,e.J=t?Un.receiver.friendlyName:"",e.l.Jb()}function sd(e){if(e.h)for(var t=m(e.h.keys()),n=t.next();!n.done;n=t.next()){n=n.value;var i=e.h.get(n);e.h.delete(n),i.reject(new D(1,7,7e3))}}function js(e,t){t=ed(t);var n=Un;try{n.sendMessage("urn:x-cast:com.google.shaka.v2",t,function(){},ZT)}catch(i){throw t=new D(2,8,8005,i),n=new z("error",new Map().set("detail",t)),e.B("player",n),e.qd(),t}}var mE=.02,$a=!1,Un=null,Qa=null,Os=new Set;function ny(e){if(Qa?B.__onGCastApiAvailable=Qa:delete B.__onGCastApiAvailable,Qa=null,e)for(var t=m(Os),n=t.next();!n.done;n=t.next())n.value.init();typeof B.__onGCastApiAvailable=="function"&&B.__onGCastApiAvailable(e)}function st(e,t,n,i){i=i===void 0?!1:i,Le.call(this);var r=this;this.i=e,this.h=t,this.l=this.o=this.m=this.u=this.j=null,this.I=n,this.H=i,this.F=[],this.C=[],this.B=[],this.G=new Map,this.g=null,B.chrome&&pe().Oa()!="CAST"?(this.g=new rd(n,function(){return oy(r)},function(){return sy(r)},function(o,s){return ay(r,o,s)},function(){return uy(r)},function(){return ry(r)},i),vE(this)):(this.j=this.i,this.u=this.h)}$e(st,Le),d=st.prototype,d.destroy=function(e){return this.g&&(e!==void 0&&e)&&this.g.qd(),this.l&&(this.l.release(),this.l=null),e=[],this.h&&(e.push(this.h.destroy()),this.h=null),this.g&&(e.push(this.g.destroy()),this.g=null),this.u=this.j=this.i=null,Le.prototype.release.call(this),Promise.all(e)},d.hk=function(){return this.j},d.td=function(){return this.u},d.tj=function(){return this.g?this.g.m&&$a:!1},d.ub=function(){return this.g?this.g.ub():!1},d.fh=function(){return this.g?this.g.fh():""},d.cast=function(){var e=this;return k(function(t){return t.g==1?e.g?T(t,e.g.cast(),2):t.return():e.h?T(t,e.h.Dc(),0):t.return()})},d.rh=function(e){this.g&&this.g.rh(e)},d.jl=function(){this.g&&gE(this.g)},d.qd=function(){this.g&&this.g.qd()},d.uj=function(e,t){t=t===void 0?!1:t;var n=this;return k(function(i){if(i.g==1)return e==n.I&&t==n.H||(n.I=e,n.H=t,!n.g)?i.return():(n.g.qd(),T(i,n.g.destroy(),2));n.g=null,n.g=new rd(e,function(){return oy(n)},function(){return sy(n)},function(r,o){return ay(n,r,o)},function(){return uy(n)},function(){return ry(n)},t),n.g.init(),G(i)})};function vE(e){e.g.init(),e.l=new Ee;for(var t=m(Jv),n=t.next();!n.done;n=t.next())e.l.D(e.i,n.value,function(o){e.g.ub()||(o=Kh(o),e.m.dispatchEvent(o))});for(var i in Vu)e.l.D(e.h,Vu[i],function(o){e.g.ub()||e.o.dispatchEvent(o)});e.j={},t={};for(var r in e.i)t={ie:t.ie},t.ie=r,Object.defineProperty(e.j,t.ie,{configurable:!1,enumerable:!0,get:function(o){return function(){return TE(e,o.ie)}}(t),set:function(o){return function(s){var u=o.ie;e.g.ub()?e.g.set("video",u,s):e.i[u]=s}}(t)});e.u={},iy(e,function(o){Object.defineProperty(e.u,o,{configurable:!1,enumerable:!0,get:function(){return Za(e,o)}})}),yE(e),e.m=new Le,e.m.Je=e.j,e.o=new Le,e.o.Je=e.u,e.l.D(e.h,"unloading",function(){e.g&&e.g.ub()||ud(e)})}function yE(e){var t=new Map;iy(e,function(n,i){t.has(i)?(i=t.get(i),n.length<i.length?e.G.set(n,i):e.G.set(i,n)):t.set(i,n)})}function iy(e,t){function n(a){return a=="constructor"||typeof i[a]!="function"?!1:!r.has(a)}var i=e.h,r=new Set,o;for(o in i)n(o)&&(r.add(o),t(o,i[o]));for(e=Object.getPrototypeOf(i),o=Object.getPrototypeOf({});e&&e!=o;){for(var s=m(Object.getOwnPropertyNames(e)),u=s.next();!u.done;u=s.next())u=u.value,n(u)&&(r.add(u),t(u,i[u]));e=Object.getPrototypeOf(e)}}function ry(e){var t={video:{},player:{},playerAfterLoad:{},manifest:e.h.rd(),startTime:null,addThumbnailsTrackCalls:e.F,addTextTrackAsyncCalls:e.C,addChaptersTrackCalls:e.B};e.i.pause();for(var n=m(td),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.i[i];for(e.i.ended||(t.startTime=e.i.currentTime),n=m(Qv),i=n.next();!i.done;i=n.next()){var r=i.value;i=r[1],r=e.h[r[0]](),t.player[i]=r}for(n=m(Zv),i=n.next();!i.done;i=n.next())r=i.value,i=r[1],r=e.h[r[0]](),t.playerAfterLoad[i]=r;return t}function oy(e){var t=new z("caststatuschanged");e.dispatchEvent(t)}function sy(e){var t=new z(e.j.paused?"pause":"play");e.m.dispatchEvent(t)}function uy(e){for(var t=m(Qv),n=t.next();!n.done;n=t.next()){var i=n.value;n=i[1],i=e.g.get("player",i[0])(),e.h[n](i)}var r=e.F,o=e.C,s=e.B;ud(e);var u=e.g.get("player","getAssetUri")();i=e.g.get("video","ended"),t=Promise.resolve();var a=e.i.autoplay;n=null,i||(n=e.g.get("video","currentTime"));var l;(i=e.g.get("player","getTextTracks")())&&i.length&&(l=i.find(function(p){return p.active}));var c=e.g.get("player","isTextTrackVisible")();u&&(e.i.autoplay=!1,t=e.h.load(u,n));var f={};for(n=m(td),i=n.next();!i.done;i=n.next())i=i.value,f[i]=e.g.get("video",i);t.then(function(){if(e.i){for(var p=m(r),h=p.next();!h.done;h=p.next()){h=h.value;var g;(g=e.td()).Pe.apply(g,H(h))}for(p=m(o),g=p.next();!g.done;g=p.next()){g=g.value;var v;(v=e.td()).Sd.apply(v,H(g))}for(v=m(s),p=v.next();!p.done;p=v.next()){p=p.value;var y;(y=e.td()).Oe.apply(y,H(p))}for(y=m(td),v=y.next();!v.done;v=y.next())v=v.value,e.i[v]=f[v];for(y=m(Zv),v=y.next();!v.done;v=y.next())p=v.value,v=p[1],p=e.g.get("player",p[0])(),e.h[v](p);e.h.xh(c),l&&e.h.ph(l.language,l.roles,l.forced),e.i.autoplay=a,u&&e.i.play()}},function(p){p=new Map().set("detail",p),p=new z("error",p),e.h.dispatchEvent(p)})}function TE(e,t){if(t=="addEventListener")return function(i,r,o){return e.m.addEventListener(i,r,o)};if(t=="removeEventListener")return function(i,r,o){return e.m.removeEventListener(i,r,o)};if(e.g.ub()&&Object.keys(e.g.g.video).length==0){var n=e.i[t];if(typeof n!="function")return n}return e.g.ub()?e.g.get("video",t):(t=e.i[t],typeof t=="function"&&(t=t.bind(e.i)),t)}function Za(e,t,n){if(n=n===void 0?!1:n,e.G.has(t)&&(t=e.G.get(t)),t=="addEventListener")return function(i,r,o){return e.o.addEventListener(i,r,o)};if(t=="removeEventListener")return function(i,r,o){return e.o.removeEventListener(i,r,o)};if(t=="getMediaElement")return function(){return e.j};if(t=="getSharedConfiguration")return e.g.get("player","getConfiguration");if(t=="getNetworkingEngine")return function(){return e.h.Yb()};if(t=="getDrmEngine")return function(){return e.h.F};if(t=="getAdManager")return function(){return e.h.ei()};if(t=="getQueueManager")return function(){return e.h.ni()};if(t=="setVideoContainer")return function(i){return e.h.$i(i)};if(!n){if(t=="addThumbnailsTrack")return function(){var i=dt.apply(0,arguments);return e.F.push(i),Za(e,t,!0).apply(null,H(i))};if(t=="addTextTrackAsync")return function(){var i=dt.apply(0,arguments);return e.C.push(i),Za(e,t,!0).apply(null,H(i))};if(t=="addChaptersTrack")return function(){var i=dt.apply(0,arguments);return e.B.push(i),Za(e,t,!0).apply(null,H(i))}}if(e.g.ub()){if(t=="getManifest"||t=="drmInfo")return function(){return ve(t+"() does not work while casting!"),null};if(t=="attach"||t=="detach")return function(){return ve(t+"() does not work while casting!"),Promise.resolve()};if(t=="getChapters")return function(){return ve(t+"() does not work while casting!"),[]}}return e.g.ub()&&Object.keys(e.g.g.video).length==0&&(nd.has(t)||id.has(t))||!e.g.ub()?e.h[t].bind(e.h):e.g.get("player",t)}function ay(e,t,n){e.g.ub()&&(t=="video"?e.m.dispatchEvent(n):t=="player"&&(n.type=="unloading"&&ud(e),e.o.dispatchEvent(n)))}function ud(e){e.F=[],e.C=[],e.B=[]}K("shaka.cast.CastProxy",st),st.prototype.changeReceiverId=st.prototype.uj,st.prototype.forceDisconnect=st.prototype.qd,st.prototype.suggestDisconnect=st.prototype.jl,st.prototype.setAppData=st.prototype.rh,st.prototype.cast=st.prototype.cast,st.prototype.receiverName=st.prototype.fh,st.prototype.isCasting=st.prototype.ub,st.prototype.canCast=st.prototype.tj,st.prototype.getPlayer=st.prototype.td,st.prototype.getVideo=st.prototype.hk,st.prototype.destroy=st.prototype.destroy;function Lt(e,t,n,i){Le.call(this);var r=this;this.h=e,this.g=t,this.j=new Ee,this.I={video:e,player:t},this.G=n||function(){},this.J=i||function(o){return o},this.i=null,this.H=!1,this.o=!0,this.m=0,this.C=!1,this.B=!0,this.u=this.l=null,this.F=new ge(function(){ad(r)}),xE(this)}$e(Lt,Le),d=Lt.prototype,d.isConnected=function(){return this.H},d.qk=function(){return this.o},d.cl=function(e){this.i=e},d.yj=function(){this.i=null},d.fl=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.title=e},d.al=function(e){this.i||(this.i={metadataType:cast.receiver.media.MetadataType.GENERIC}),this.i.images=[{url:e}]},d.$k=function(e){this.i||(this.i={}),this.i.artist=e,this.i.metadataType=cast.receiver.media.MetadataType.MUSIC_TRACK},d.destroy=function(){var e=this,t,n;return k(function(i){if(i.g==1)return e.j&&(e.j.release(),e.j=null),t=[],e.g&&(t.push(e.g.destroy()),e.g=null),e.F&&(e.F.stop(),e.F=null),e.h=null,e.I=null,e.G=null,e.H=!1,e.o=!0,e.l=null,e.u=null,Le.prototype.release.call(e),T(i,Promise.all(t),2);n=cast.receiver.CastReceiverManager.getInstance(),n.stop(),G(i)})};function xE(e){var t=cast.receiver.CastReceiverManager.getInstance();t.onSenderConnected=function(){return ly(e)},t.onSenderDisconnected=function(){return ly(e)},t.onSystemVolumeChanged=function(){var r=cast.receiver.CastReceiverManager.getInstance().getSystemVolume();r&&wi(e,{type:"update",update:{video:{volume:r.level,muted:r.muted}}},e.l),wi(e,{type:"event",targetName:"video",event:{type:"volumechange"}},e.l)},e.u=t.getCastMessageBus("urn:x-cast:com.google.cast.media"),e.u.onMessage=function(r){return AE(e,r)},e.l=t.getCastMessageBus("urn:x-cast:com.google.shaka.v2"),e.l.onMessage=function(r){return wE(e,r)},t.start(),t=m(Jv);for(var n=t.next();!n.done;n=t.next())e.j.D(e.h,n.value,function(r){return cy(e,"video",r)});for(var i in Vu)e.j.D(e.g,Vu[i],function(r){return cy(e,"player",r)});e.j.D(e.h,"loadeddata",function(){e.C=!0}),e.j.D(e.g,"loading",function(){e.o=!1,xo(e)}),e.j.D(e.h,"playing",function(){e.o=!1,xo(e)}),e.j.D(e.h,"pause",function(){xo(e)}),e.j.D(e.g,"unloading",function(){e.o=!0,xo(e)}),e.j.D(e.h,"ended",function(){new ge(function(){e.h&&e.h.ended&&(e.o=!0,xo(e))}).ka(IE)})}function ly(e){e.m=0,e.B=!0,e.H=cast.receiver.CastReceiverManager.getInstance().getSenders().length!=0,xo(e)}function xo(e){var t;k(function(n){if(n.g==1)return T(n,Promise.resolve(),2);if(!e.g)return n.return();t=new z("caststatuschanged"),e.dispatchEvent(t),fy(e)||Ai(e),G(n)})}function SE(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L;k(function(A){switch(A.g){case 1:for(i in t.player)r=t.player[i],e.g[i](r);return e.G(n),o=e.h.autoplay,t.manifest?(e.h.autoplay=!1,se(A,5),T(A,e.g.load(t.manifest,t.startTime),7)):T(A,Promise.resolve(),3);case 7:if(t.addThumbnailsTrackCalls)for(s=m(t.addThumbnailsTrackCalls),u=s.next();!u.done;u=s.next())a=u.value,e.g.Pe.apply(e.g,H(a));if(t.addTextTrackAsyncCalls)for(l=m(t.addTextTrackAsyncCalls),c=l.next();!c.done;c=l.next())f=c.value,e.g.Sd.apply(e.g,H(f));if(t.addChaptersTrackCalls)for(p=m(t.addChaptersTrackCalls),h=p.next();!h.done;h=p.next())g=h.value,e.g.Oe.apply(e.g,H(g));fe(A,3);break;case 5:return v=ue(A),y=new Map().set("detail",v),S=new z("error",y),e.g&&e.g.dispatchEvent(S),A.return();case 3:if(!e.g)return A.return();for(x in t.video)w=t.video[x],e.h[x]=w;for(I in t.playerAfterLoad)L=t.playerAfterLoad[I],e.g[I](L);e.h.autoplay=o,t.manifest&&(e.h.play(),Ai(e)),G(A)}})}function cy(e,t,n){e.g&&(ad(e),wi(e,{type:"event",targetName:t,event:n},e.l))}function ad(e){e.F.ka(EE);for(var t={video:{},player:{}},n=m(fE),i=n.next();!i.done;i=n.next())i=i.value,t.video[i]=e.h[i];e.g.W()&&$v.forEach(function(r,o){e.m%r==0&&(t.player[o]=e.g[o]())}),nd.forEach(function(r,o){e.m%r==0&&(t.player[o]=e.g[o]())}),(n=cast.receiver.CastReceiverManager.getInstance().getSystemVolume())&&(t.video.volume=n.level,t.video.muted=n.muted),wi(e,{type:"update",update:t},e.l),id.forEach(function(r,o){e.m%r==0&&(r={player:{}},r.player[o]=e.g[o](),wi(e,{type:"update",update:r},e.l))}),e.C&&(e.m+=1),fy(e)}function fy(e){return e.B&&(e.h.duration||e.g.W())?(ld(e),e.B=!1,!0):!1}function ld(e,t){var n={contentId:e.g.rd(),streamType:e.g.W()?"LIVE":"BUFFERED",contentType:""};e.g.W()||(n.duration=e.h.duration),e.i&&(n.metadata=e.i),Ai(e,t===void 0?0:t,n)}function wE(e,t){var n=qa(t.data);switch(n.type){case"init":e.m=0,e.C=!1,e.B=!0,SE(e,n.initState,n.appData),ad(e);break;case"appData":e.G(n.appData);break;case"set":var i=n.targetName,r=n.property;if(n=n.value,i=="video"){if(t=cast.receiver.CastReceiverManager.getInstance(),r=="volume"){t.setSystemVolumeLevel(n);break}else if(r=="muted"){t.setSystemVolumeMuted(n);break}}e.I[i][r]=n;break;case"call":i=e.I[n.targetName],i[n.methodName].apply(i,n.args);break;case"asyncCall":i=n.targetName,r=n.methodName,i=="player"&&r=="load"&&(e.m=0,e.C=!1);var o=n.id,s=t.senderId;t=e.I[i],n=t[r].apply(t,n.args),i=="player"&&r=="load"&&(n=n.then(function(){e.B=!0})),n.then(function(u){return dy(e,s,o,null,u)},function(u){return dy(e,s,o,u,null)})}}function AE(e,t){var n=qa(t.data);switch(n.type){case"PLAY":e.h.play(),Ai(e);break;case"PAUSE":e.h.pause(),Ai(e);break;case"SEEK":t=n.currentTime;var i=n.resumeState;t!=null&&(e.h.currentTime=Number(t)),i&&i=="PLAYBACK_START"?(e.h.play(),Ai(e)):i&&i=="PLAYBACK_PAUSE"&&(e.h.pause(),Ai(e));break;case"STOP":e.g.Dc().then(function(){e.g&&Ai(e)});break;case"GET_STATUS":ld(e,Number(n.requestId));break;case"VOLUME":i=n.volume,t=i.level,i=i.muted;var r=e.h.volume,o=e.h.muted;t!=null&&(e.h.volume=Number(t)),i!=null&&(e.h.muted=i),r==e.h.volume&&o==e.h.muted||Ai(e);break;case"LOAD":e.m=0,e.C=!1,e.B=!1,t=n.media,i=n.currentTime,r=e.J(t.contentId),o=n.autoplay||!0,e.G(t.customData),o&&(e.h.autoplay=!0),e.g.load(r,i).then(function(){e.g&&ld(e)}).catch(function(s){var u="LOAD_FAILED";s.category==7&&s.code==7e3&&(u="LOAD_CANCELLED"),wi(e,{requestId:Number(n.requestId),type:u},e.u)});break;default:wi(e,{requestId:Number(n.requestId),type:"INVALID_REQUEST",reason:"INVALID_COMMAND"},e.u)}}function dy(e,t,n,i,r){e.g&&wi(e,{type:"asyncComplete",id:n,error:i,res:r},e.l,t)}function wi(e,t,n,i){e.H&&(e=ed(t),i?n.getCastChannel(i).send(e):n.broadcast(e))}function Ai(e,t,n){n=n===void 0?null:n;var i={mediaSessionId:0,playbackRate:e.h.playbackRate,playerState:e.o?CE:e.g.Rg()?kE:e.h.paused?DE:ME,currentTime:e.h.currentTime,supportedMediaCommands:63,volume:{level:e.h.volume,muted:e.h.muted}};n&&(i.media=n),wi(e,{requestId:t===void 0?0:t,type:"MEDIA_STATUS",status:[i]},e.u)}K("shaka.cast.CastReceiver",Lt),Lt.prototype.destroy=Lt.prototype.destroy,Lt.prototype.setContentArtist=Lt.prototype.$k,Lt.prototype.setContentImage=Lt.prototype.al,Lt.prototype.setContentTitle=Lt.prototype.fl,Lt.prototype.clearContentMetadata=Lt.prototype.yj,Lt.prototype.setContentMetadata=Lt.prototype.cl,Lt.prototype.isIdle=Lt.prototype.qk,Lt.prototype.isConnected=Lt.prototype.isConnected;var EE=.5,IE=5,CE="IDLE",ME="PLAYING",kE="BUFFERING",DE="PAUSED";function py(e,t,n,i,r){if(i>=r)return null;for(var o=-1,s=-1,u=0;u<n.length;u++)if(n[u].some(function(I){return I!=null&&I.g.trim()!=""})){o=u;break}for(u=n.length-1;u>=0;u--)if(n[u].some(function(I){return I!=null&&I.g.trim()!=""})){s=u;break}if(o===-1||s===-1)return null;for(var a=u=!1,l="white",c="black",f=cd(i,r,u,a,l,c);o<=s;o++){for(var p=n[o],h=-1,g=-1,v=0;v<p.length;v++)if(p[v]!=null&&p[v].g.trim()!==""){h=v;break}for(v=p.length-1;v>=0;v--)if(p[v]!=null&&p[v].g.trim()!==""){g=v;break}if(h===-1||g===-1)p=hy(i,r),e.nestedCues.push(p);else{for(;h<=g;h++)if(v=p[h]){var y=v.l,S=v.i,x=v.j,w=v.h;(y!=u||S!=a||x!=l||w!=c)&&(f.payload&&e.nestedCues.push(f),f=cd(i,r,y,S,x,w),u=y,a=S,l=x,c=w),f.payload+=v.g}else f.payload+=" ";f.payload&&e.nestedCues.push(f),o!==s&&(f=hy(i,r),e.nestedCues.push(f)),f=cd(i,r,u,a,l,c)}}return e.nestedCues.length?{cue:e,stream:t}:null}function cd(e,t,n,i,r,o){return e=new be(e,t,""),n&&e.textDecoration.push(li),i&&(e.fontStyle=Gr),e.color=r,e.backgroundColor=o,e}function hy(e,t){return e=new be(e,t,""),e.lineBreak=!0,e}function gy(e,t,n,i,r){this.g=e,this.l=t,this.i=n,this.h=i,this.j=r}function fd(e,t){this.i=[],this.g=1,this.h=0,this.F=e,this.C=t,this.j=this.m=!1,this.l="white",this.o="black",this.u=this.B=null,Us(this)}function el(e,t,n){var i="CC"+((e.F<<1|e.C)+1),r=new be(t,n,"");r.lineInterpretation=1;var o=yy.get(e.g);return o&&(r.line=o),e.u!=null&&e.B!=null&&(r.position=10+Math.min(70,e.u*10)+e.B*2.5),(t=py(r,i,e.i,t,n))&&e.g+t.cue.nestedCues.length-3>15&&(o=yy.get(e.g+3-t.cue.nestedCues.length))&&(r.line=o),t}function Us(e){Ei(e,0,15),e.g=1}function So(e,t,n){if(!(n<32||n>127)){var i="";switch(t){case 0:i=vy.has(n)?vy.get(n):String.fromCharCode(n);break;case 1:i=RE.get(n);break;case 2:e.i[e.g].pop(),i=LE.get(n);break;case 3:e.i[e.g].pop(),i=PE.get(n)}i&&e.i[e.g].push(new gy(i,e.m,e.j,e.o,e.l))}}function my(e,t,n,i){if(!(n<0||t<0))if(t>=n)for(--i;i>=0;i--)e.i[t+i]=e.i[n+i].map(function(o){return o});else for(var r=0;r<i;r++)e.i[t+r]=e.i[n+r].map(function(o){return o})}function Ei(e,t,n){for(var i=0;i<=n;i++)e.i[t+i]=[]}var vy=new Map([[39,"’"],[42,"á"],[92,"é"],[92,"é"],[94,"í"],[95,"ó"],[96,"ú"],[123,"ç"],[124,"÷"],[125,"Ñ"],[126,"ñ"],[127,"█"]]),RE=new Map([[48,"®"],[49,"°"],[50,"½"],[51,"¿"],[52,"™"],[53,"¢"],[54,"£"],[55,"♪"],[56,"à"],[57," "],[58,"è"],[59,"â"],[60,"ê"],[61,"î"],[62,"ô"],[63,"û"]]),LE=new Map([[32,"Á"],[33,"É"],[34,"Ó"],[35,"Ú"],[36,"Ü"],[37,"ü"],[38,"‘"],[39,"¡"],[40,"*"],[41,"'"],[42,"─"],[43,"©"],[44,"℠"],[45,"·"],[46,"“"],[47,"”"],[48,"À"],[49,"Â"],[50,"Ç"],[51,"È"],[52,"Ê"],[53,"Ë"],[54,"ë"],[55,"Î"],[56,"Ï"],[57,"ï"],[58,"Ô"],[59,"Ù"],[60,"ù"],[61,"Û"],[62,"«"],[63,"»"]]),PE=new Map([[32,"Ã"],[33,"ã"],[34,"Í"],[35,"Ì"],[36,"ì"],[37,"Ò"],[38,"ò"],[39,"Õ"],[40,"õ"],[41,"{"],[42,"}"],[43,"\\"],[44,"^"],[45,"_"],[46,"|"],[47,"~"],[48,"Ä"],[49,"ä"],[50,"Ö"],[51,"ö"],[52,"ß"],[53,"¥"],[54,"¤"],[55,"│"],[56,"Å"],[57,"å"],[58,"Ø"],[59,"ø"],[60,"┌"],[61,"┐"],[62,"└"],[63,"┘"]]),yy=new Map([[1,10],[2,15.33],[3,20.66],[4,26],[5,31.33],[6,36.66],[7,42],[8,47.33],[9,52.66],[10,58],[11,63.33],[12,68.66],[13,74],[14,79.33],[15,84.66]]);function tl(e,t){this.h=0,this.o=new fd(e,t),this.i=new fd(e,t),this.g=this.j=new fd(e,t),this.l=0,this.m=null}function dd(e,t,n){e.g=e.i;var i=e.g,r=null;return e.h!==3&&e.h!==4&&(r=el(i,e.l,n),n=e.i,n.g=n.h>0?n.h:0,Ei(n,0,15),n=e.j,n.g=n.h>0?n.h:0,Ei(n,0,15),i.g=15),e.h=3,i.h=t,r}function Ty(e){e.h=1,e.g=e.j,e.g.h=0}function xy(e){Li("Cea608DataChannel","CEA-608 text mode entered, but is unsupported"),e.g=e.o,e.h=4}var NE="black green blue cyan red yellow magenta black".split(" "),Sy="white green blue cyan red yellow magenta white_italics".split(" ");function pd(e,t){this.J=t,this.N=e,this.K=this.l=!1,this.m=this.o=this.H=this.M=this.I=0,this.G=2,this.i=[],this.g=this.h=this.j=0,this.F=this.B=!1,this.C="white",this.u="black",hd(this)}function hd(e){e.i=[];for(var t=0;t<16;t++)e.i.push(gd())}function gd(){for(var e=[],t=0;t<42;t++)e.push(null);return e}function $i(e,t){wy(e)&&(e.i[e.h][e.g]=new gy(t,e.F,e.B,e.u,e.C),e.g++)}function wy(e){var t=e.g<e.m&&e.g>=0;return e.h<e.o&&e.h>=0&&t}pd.prototype.isVisible=function(){return this.l};function jE(e){for(var t=0,n=1;n<16;n++,t++)e.i[t]=e.i[n];for(n=0;n<1;n++,t++)e.i[t]=gd()}function kr(e,t,n){var i=new be(e.j,t,"");i.textAlign=e.G===0?"left":e.G===1?"right":$n;var r=i.region;switch(e.J&&(r.id+="svc"+e.J),r.id+="win"+e.N,r.height=e.o,r.width=e.m,r.heightUnits=2,r.widthUnits=2,r.viewportAnchorX=e.I,r.viewportAnchorY=e.M,r.viewportAnchorUnits=e.K?qt:2,e.H){case 0:r.regionAnchorX=0,r.regionAnchorY=0;break;case 1:r.regionAnchorX=50,r.regionAnchorY=0;break;case 2:r.regionAnchorX=100,r.regionAnchorY=0;break;case 3:r.regionAnchorX=0,r.regionAnchorY=50;break;case 4:r.regionAnchorX=50,r.regionAnchorY=50;break;case 5:r.regionAnchorX=100,r.regionAnchorY=50;break;case 6:r.regionAnchorX=0,r.regionAnchorY=100;break;case 7:r.regionAnchorX=50,r.regionAnchorY=100;break;case 8:r.regionAnchorX=100,r.regionAnchorY=100}return(n=py(i,"svc"+n,e.i,e.j,t))&&(e.j=t),n}pd.prototype.display=function(){this.l=!0};function OE(){this.i=[],this.h=null,this.g=0}function UE(e,t){t.type===3?(e.g=(t.value&63)*2-1,e.h=[]):e.h&&(e.g>0&&(e.h.push(t),e.g--),e.g===0&&(e.i.push(new _s(e.h)),e.h=null,e.g=0))}function _s(e){this.g=0,this.h=e}_s.prototype.Ka=function(){return this.g<this.h.length},_s.prototype.Pa=function(){return this.g};function lt(e){if(!e.Ka())throw new D(2,2,3e3);return e.h[e.g++]}_s.prototype.skip=function(e){if(this.g+e>this.h.length)throw new D(2,2,3e3);this.g+=e},_s.prototype.Ri=function(e){if(this.g-e<0)throw new D(2,2,3e3);this.g-=e};function _E(e){this.i=e,this.h=[null,null,null,null,null,null,null,null],this.g=null}function BE(e,t){var n=lt(t),i=n.value;if(n=n.pts,i===16){var r=lt(t);i=i<<16|r.value}return i>=0&&i<=31?bE(e,t,i,n):i>=128&&i<=159?FE(e,t,i,n):(i>=4096&&i<=4127?(e=i&255,e>=8&&e<=15?t.skip(1):e>=16&&e<=23?t.skip(2):e>=24&&e<=31&&t.skip(3)):i>=4224&&i<=4255?(e=i&255,e>=128&&e<=135?t.skip(4):e>=136&&e<=143&&t.skip(5)):i>=32&&i<=127?(t=i,e.g&&(t===127?$i(e.g,"♪"):$i(e.g,String.fromCharCode(t)))):i>=160&&i<=255?e.g&&$i(e.g,String.fromCharCode(i)):i>=4128&&i<=4223?(t=i&255,e.g&&(Cy.has(t)?(t=Cy.get(t),$i(e.g,t)):$i(e.g,"_"))):i>=4256&&i<=4351&&e.g&&((i&255)!=160?$i(e.g,"_"):$i(e.g,"[CC]")),[])}function bE(e,t,n,i){if(!e.g)return[];if(n==24)return n=lt(t).value,i=lt(t).value,n=function(o){return o.map(function(s){return("0"+(s&255).toString(16)).slice(-2)}).join("")}([n,i]),$i(e.g,String.fromCharCode(parseInt(n,16))),[];t=e.g;var r=null;switch(n){case 8:!wy(t)||t.g<=0&&t.h<=0||(t.g<=0?(t.g=t.m-1,t.h--):t.g--,t.i[t.h][t.g]=null);break;case 13:t.isVisible()&&(r=kr(t,i,e.i)),t.h+1>=t.o?jE(t):t.h++,t.g=0;break;case 14:t.isVisible()&&(r=kr(t,i,e.i)),t.i[t.h]=gd(),t.g=0;break;case 12:t.isVisible()&&(r=kr(t,i,e.i)),hd(t),t.h=0,t.g=0}return r?[r]:[]}function FE(e,t,n,i){if(n>=128&&n<=135)i=n&7,e.h[i]&&(e.g=e.h[i]);else{if(n===136){n=lt(t).value,t=[],n=m(Bs(e,n));for(var r=n.next();!r.done;r=n.next()){if(r=e.h[r.value],r.isVisible()){var o=kr(r,i,e.i);o&&t.push(o)}hd(r)}return t}if(n===137)for(t=lt(t).value,t=m(Bs(e,t)),n=t.next();!n.done;n=t.next())n=e.h[n.value],n.isVisible()||(n.j=i),n.display();else{if(n===138){for(n=lt(t).value,t=null,n=m(Bs(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()&&(t=kr(r,i,e.i)),r.l=!1;return t?[t]:[]}if(n===139){for(n=lt(t).value,t=null,n=m(Bs(e,n)),r=n.next();!r.done;r=n.next())r=e.h[r.value],r.isVisible()?t=kr(r,i,e.i):r.j=i,r.l=!r.l;return t?[t]:[]}if(n===140)return t=lt(t).value,Ay(e,t,i);if(n===143)return i=Ay(e,255,i),Ey(e),i;if(n===144)t.skip(1),i=lt(t).value,e.g&&(e.g.B=(i&128)>0,e.g.F=(i&64)>0);else if(n===145)i=lt(t).value,n=lt(t).value,t.skip(1),e.g&&(t=Iy((n&48)>>4,(n&12)>>2,n&3),e.g.C=Iy((i&48)>>4,(i&12)>>2,i&3),e.g.u=t);else if(n===146)i=lt(t).value,t=lt(t).value,e.g&&(e=e.g,e.h=i&15,e.g=t&63);else if(n===151)t.skip(1),t.skip(1),i=lt(t).value,t.skip(1),e.g&&(e.g.G=i&3);else if(n>=152&&n<=159){n=(n&15)-8,r=e.h[n]!==null,r||(o=new pd(n,e.i),o.j=i,e.h[n]=o),i=lt(t).value,o=lt(t).value;var s=lt(t).value,u=lt(t).value,a=lt(t).value;t=lt(t).value,r&&!(t&7)||(t=e.h[n],t.h=0,t.g=0,t.F=!1,t.B=!1,t.C="white",t.u="black"),t=e.h[n],t.l=(i&32)>0,t.M=o&127,t.I=s,t.H=(u&240)>>4,t.K=(o&128)>0,t.o=(u&15)+1,t.m=(a&63)+1,e.g=e.h[n]}}}return[]}function Bs(e,t){for(var n=[],i=0;i<8;i++)(t&1)===1&&e.h[i]&&n.push(i),t>>=1;return n}function Ay(e,t,n){var i=[];t=m(Bs(e,t));for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=e.h[r];o.isVisible()&&(o=kr(o,n,e.i))&&i.push(o),e.h[r]=null}return i}function Ey(e){e.g=null,e.h=[null,null,null,null,null,null,null,null]}function Iy(e,t,n){var i={0:0,1:0,2:1,3:1};return e=i[e],t=i[t],n=i[n],VE[e<<2|t<<1|n]}var Cy=new Map([[32," "],[33," "],[37,"…"],[42,"Š"],[44,"Œ"],[48,"█"],[49,"‘"],[50,"’"],[51,"“"],[52,"”"],[53,"•"],[57,"™"],[58,"š"],[60,"œ"],[61,"℠"],[63,"Ÿ"],[118,"⅛"],[119,"⅜"],[120,"⅝"],[121,"⅞"],[122,"│"],[123,"┐"],[124,"└"],[125,"─"],[126,"┘"],[127,"┌"]]),VE="black blue green cyan red magenta yellow white".split(" ");function wo(){this.h=[],this.g=[],this.i=new OE,this.j=0,this.l=new Map([["CC1",new tl(0,0)],["CC2",new tl(0,1)],["CC3",new tl(1,0)],["CC4",new tl(1,1)]]),this.o=this.m=0,this.C=new Map,this.B=!0,this.u=new Set,md(this)}wo.prototype.clear=function(){this.j=0,this.h=[],this.g=[];var e=this.i;e.i=[],e.h=[],e.g=0,md(this),e=m(this.C.values());for(var t=e.next();!t.done;t=e.next())Ey(t.value)};function md(e){e.m=0,e.o=0;for(var t=m(e.l.values()),n=t.next();!n.done;n=t.next())n=n.value,n.h=0,n.g=n.j,n.m=null,Us(n.i),Us(n.j),Us(n.o);e.B=!0}wo.prototype.extract=function(e,t){if(this.B){for(var n=m(this.l.values()),i=n.next();!i.done;i=n.next())i.value.l=t;this.B=!1}if(e=new Fe(e,0),!(e.getLength()<8)&&e.Z()===181&&e.Ca()===49&&e.U()===1195456820&&e.Z()===3&&(n=e.Z(),(n&64)!==0))for(n&=31,e.skip(1),i=0;i<n;i++){var r=e.Z(),o=(r&4)>>2,s=e.Z(),u=e.Z();o&&(r&=3,r===0||r===1?this.h.push({pts:t,type:r,Cb:s,mc:u,order:this.h.length}):(this.g.push({pts:t,type:r,value:s,order:this.g.length}),this.g.push({pts:t,type:2,value:u,order:this.g.length})))}},wo.prototype.decode=function(){function e(r,o){return r.pts-o.pts||r.order-o.order}var t=[];this.h.sort(e),this.g.sort(e);for(var n=m(this.h),i=n.next();!i.done;i=n.next())(i=HE(this,i.value))&&t.push(i);for(n=m(this.g),i=n.next();!i.done;i=n.next())UE(this.i,i.value);for(n=m(this.i.i),i=n.next();!i.done;i=n.next())i=GE(this,i.value),t.push.apply(t,H(i));return this.i.i=[],this.h=[],this.g=[],t};function HE(e,t){var n=t.type;if((t.Cb&112)===16){var i=t.Cb>>3&1;n===0?e.m=i:e.o=i}if(i="CC"+((n<<1|(n?e.o:e.m))+1),n=e.l.get(i),t.Cb===255&&t.mc===255||!t.Cb&&!t.mc||!My(t.Cb)||!My(t.mc))return++e.j>=45&&md(e),null;e.j=0,t.Cb&=127,t.mc&=127;var r=t.Cb;if(r>=1&&r<=15||!t.Cb&&!t.mc)return null;if(r=null,(t.Cb&112)===16)e:{if(e.u.add(i),i=t.Cb,e=t.mc,n.m===(i<<8|e))n.m=null;else if(n.m=i<<8|e,(i&240)===16&&(e&192)===64){t=[11,11,1,2,3,4,12,13,14,15,5,6,7,8,9,10][(i&7)<<1|e>>5&1],i="white",r=!1;var o=null,s=e>95?e-96:e-64;s<=13?i=Sy[Math.floor(s/2)]:s<=15?r=!0:o=Math.floor((s-16)/2),e=(e&1)===1,n.h!==4&&(s=n.g,n.h===3&&t!==s.g&&(n=1+t-s.h,my(s,n,1+s.g-s.h,s.h),Ei(s,0,n-1),Ei(s,t+1,15-t)),s.g=t,s.m=e,s.j=r,s.l=i,s.u=o,s.o="black")}else if((i&247)===17&&(e&240)===32)n.g.m=!1,n.g.j=!1,n.g.l="white",So(n.g,0,32),i=!1,t=Sy[(e&14)>>1],t==="white_italics"&&(t="white",i=!0),n.g.m=(e&1)===1,n.g.j=i,n.g.l=t;else if((i&247)===16&&(e&240)===32||(i&247)===23&&(e&255)===45)t="black",!(i&7)&&(t=NE[(e&14)>>1]),n.g.o=t;else if((i&247)===17&&(e&240)===48)So(n.g,1,e);else if((i&246)===18&&(e&224)===32)So(n.g,i&1?3:2,e);else{if((i&246)===20&&(e&240)===32){switch(e=t.pts,i=null,t.mc){case 32:Ty(n);break;case 33:n=n.g,n.i[n.g].pop();break;case 37:i=dd(n,2,e);break;case 38:i=dd(n,3,e);break;case 39:i=dd(n,4,e);break;case 40:So(n.g,0,32);break;case 41:n.h=2,n.g=n.i,n.g.h=0,n.l=e;break;case 42:Us(n.o),xy(n);break;case 43:xy(n);break;case 44:t=n.i,i=null,n.h!==4&&(i=el(t,n.l,e)),Ei(t,0,15);break;case 45:t=n.g,n.h!==3?i=null:(i=el(t,n.l,e),r=t.g-t.h+1,my(t,r-1,r,t.h),Ei(t,0,r-1),Ei(t,t.g,15-t.g),n.l=e);break;case 46:Ei(n.j,0,15);break;case 47:t=null,n.h!==4&&(t=el(n.i,n.l,e)),i=n.j,n.j=n.i,n.i=i,Ty(n),n.l=e,i=t}r=i;break e}(i==23||i==31)&&e>=33&&e<=35&&(n.g.B=e-32)}r=null}else e=t.mc,So(n.g,0,t.Cb),So(n.g,0,e);return r}function GE(e,t){var n=[];try{for(;t.Ka();){var i=lt(t).value,r=(i&224)>>5,o=i&31;if(r===7&&o!=0&&(r=lt(t).value&63),r!=0){e.u.add("svc"+r);for(var s=e.C.getOrInsertComputed(r,function(l){return new _E(l)}),u=t.Pa();t.Pa()-u<o;){var a=BE(s,t);n.push.apply(n,H(a))}}}}catch(l){if(l instanceof D&&l.code===3e3)Li("CEA708_INVALID_DATA","Buffer read out of bounds / invalid CEA-708 Data.");else throw l}return n}function My(e){for(var t=0;e;)t^=e&1,e>>=1;return t===1}wo.prototype.getStreams=function(){return Array.from(this.u)},K("shaka.cea.CeaDecoder",wo),lr=function(){return new wo};function ky(e){for(var t=[],n=e,i=e=0;i<n.length;)e==2&&n[i]==3?(e=0,n=[].concat(H(n)),n.splice(i,1),n=new Uint8Array(n)):n[i]==0?e++:e=0,i++;for(e=n,i=0;i<e.length;){for(n=0;e[i]==255;)n+=255,i++;n+=e[i++];for(var r=0;e[i]==255;)r+=255,i++;r+=e[i++],n==4&&t.push(e.subarray(i,i+r)),i+=r}return t}function nl(){this.j=new Map,this.i=this.h=0,this.g=vd}nl.prototype.init=function(e){function t(o){o=o.name,il.has(o)&&(n.g=il.get(o))}var n=this,i=[],r=[];if(new Ne().box("moov",ce).box("mvex",ce).S("trex",function(o){var s=o.reader;s.skip(4),s.skip(4),o=s.U(),s=s.U(),n.h=o,n.i=s}).box("trak",ce).S("tkhd",function(o){var s=o.reader;o=o.version,o==1?(s.skip(8),s.skip(8)):(s.skip(4),s.skip(4));var u=s.U();o==1?s.skip(8):s.skip(4),s.skip(4),s.skip(8),s.skip(2),s.skip(2),s.skip(2),s.skip(2),s.skip(36),s.Ca(),s.Ca(),s.Ca(),s.Ca(),i.push(u)}).box("mdia",ce).S("mdhd",function(o){o=Ju(o.reader,o.version),r.push(o.timescale)}).box("minf",ce).box("stbl",ce).S("stsd",gi).box("avc1",t).box("avc3",t).box("dvav",t).box("dva1",t).box("hev1",t).box("hvc1",t).box("dvh1",t).box("dvhe",t).box("vvc1",t).box("vvi1",t).box("dvc1",t).box("dvi1",t).box("encv",$t).box("sinf",ce).box("frma",function(o){o=Oc(o.reader).codec,il.has(o)&&(n.g=il.get(o))}).parse(e,!0,!0),!i.length||!r.length||i.length!=r.length)throw new D(2,2,2010);this.g==vd&&ve("Unable to determine bitstream format for CEA parsing!"),i.forEach(function(o,s){n.j.set(o,r[s])})},nl.prototype.parse=function(e){var t=this;if(this.g==vd)return[];var n=[],i=0,r=[];return new Ne().box("moof",function(o){i=o.start,r=[],ce(o)}).box("traf",function(o){r.push({baseMediaDecodeTime:null,Xd:t.h,Yd:t.i,Ji:[],timescale:9e4}),ce(o)}).S("trun",function(o){var s=r[r.length-1];o=$u(o.reader,o.version,o.flags),s.Ji.push(o)}).S("tfhd",function(o){var s=r[r.length-1];o=Yu(o.reader,o.flags),s.Xd=o.Xd||t.h,s.Yd=o.Yd||t.i,o=o.trackId,t.j.has(o)&&(s.timescale=t.j.get(o))}).S("tfdt",function(o){var s=r[r.length-1];o=qu(o.reader,o.version),s.baseMediaDecodeTime=o.baseMediaDecodeTime}).box("mdat",function(o){for(var s=i-o.start-8,u=o.reader.Pa(),a=m(r),l=a.next();!l.done;l=a.next())l=l.value,l.baseMediaDecodeTime===null?ve("Unable to find base media decode time for CEA captions!"):(o.reader.seek(u),KE(t,o.reader,l.baseMediaDecodeTime,l.timescale,l.Xd,l.Yd,s,l.Ji,n))}).parse(e,!1,!0),n};function KE(e,t,n,i,r,o,s,u,a){var l=0,c=o,f=u.map(function(g){return g.nh});for(f=[].concat.apply([],H(f)),f.length&&(c=f[0].sampleSize||o),t.skip(s+u[0].qg);t.Ka();){s=t.U();var p=t.Z(),h=null;switch(h=!1,u=1,e.g){case bs:h=p&31,h=h==6;break;case Fs:u=2,t.skip(1),h=p>>1&63,h=h==39||h==40;break;case Vs:u=2,t.skip(1),h=p>>1&63,h=h==23||h==24;break;default:return}if(h)for(p=0,l<f.length&&(p=f[l].Gf||0),p=(n+p)/i,u=t.Tb(s-u,!1),u=m(ky(u)),h=u.next();!h.done;h=u.next())a.push({packet:h.value,pts:p});else try{t.skip(s-u)}catch{break}c-=s+4,c==0&&(n=l<f.length?n+(f[l].oh||r):n+r,l++,l<f.length?c=f[l].sampleSize||o:c=o)}}K("shaka.cea.Mp4CeaParser",nl);var vd=0,bs=1,Fs=2,Vs=3,il=new Map().set("avc1",bs).set("avc3",bs).set("dvav",bs).set("dva1",bs).set("hev1",Fs).set("hvc1",Fs).set("dvh1",Fs).set("dvhe",Fs).set("vvc1",Vs).set("vvi1",Vs).set("dvc1",Vs).set("dvi1",Vs);uc("video/mp4",function(){return new nl});function rl(){this.g=null}rl.prototype.init=function(){},rl.prototype.parse=function(e){this.g?this.g.clearData():this.g=new Be;var t=[];if(e=re(e),!io(e))return t;e=this.g.parse(e);var n=e.Zd(),i=e.ef();switch(e=[],n.video){case"avc":e.push(6);break;case"hvc":e.push(39),e.push(40)}if(!e.length)return t;for(n=m(i),i=n.next();!i.done;i=n.next())if(i=i.value,e.includes(i.type)&&i.time!=null)for(var r=m(ky(i.data)),o=r.next();!o.done;o=r.next())t.push({packet:o.value,pts:i.time});return t},K("shaka.cea.TsCeaParser",rl),uc("video/mp2t",function(){return new rl});function WE(e){var t=0,n=Ht(e),i=n.getUint32(t,!0);if(i!=e.byteLength)return[];e:{for(e=t+4+2,t=[];e<n.byteLength-1;){i=n.getUint16(e,!0),e+=2;var r=n.getUint16(e,!0);if(e+=2,r&1||r+e>n.byteLength){n=[];break e}var o=re(n,e,r);t.push({type:i,value:o}),e+=r}n=t}return n}function Dy(e){return e=mn(nt(e)),e=WE(e).filter(function(t){return t.type===XE})[0],e?(e=Ni(e.value,!0),(e=dr(e,"WRMHEADER"))?e:null):null}function ol(e){try{var t=Dy(e);if(t)e:{for(var n=m(Hn(t,"DATA")),i=n.next();!i.done;i=n.next()){var r=i.value;if(r.children)for(var o=m(r.children),s=o.next();!s.done;s=o.next()){var u=s.value;if(u.tagName=="LA_URL"){var a=nt(u);break e}}}a=""}else a="";return a}catch{return""}}var XE=1;function Ry(){this.g=new Map}Ry.prototype.release=function(){this.g.clear()};function Ly(e,t,n,i){var r=qE(e,t),o=null;e=[];var s=[];t=null;var u=new Set(r.map(function(l){return l.keyId}));u.delete(null);var a="cenc";if(u.size>1)throw new D(2,4,4010);if(!n){if(s=r.filter(function(l){return l.Id=="urn:mpeg:dash:sea:2012"}),s.length>1)throw new D(2,4,4050);s.length&&(t=$E(s[0])),(s=r.find(function(l){return l.Id=="urn:mpeg:dash:mp4protection:2011"}))&&s.encryptionScheme&&(a=s.encryptionScheme),s=r.filter(function(l){return l.Id=="urn:mpeg:dash:mp4protection:2011"?(o=l.init||o,!1):l.Id!="urn:mpeg:dash:sea:2012"}),s.length&&(e=YE(o,a,s,i,u),e.length==0&&(e=[si("",a,o)]))}if(r.length&&!t&&(n||!s.length))for(e=[],n=m(Object.values(i)),i=n.next();!i.done;i=n.next())i=i.value,i!="org.w3.clearkey"&&(i=si(i,a,o),e.push(i));if(u=Array.from(u)[0]||null)for(a=m(e),n=a.next();!n.done;n=a.next())for(n=m(n.value.initData),i=n.next();!i.done;i=n.next())i.value.keyId=u;return{Zh:u,Fm:o,drmInfos:e,hg:t,di:!0}}function zE(e,t,n,i,r){var o=Ly(e,t,i,r);if(n.di)e=n.drmInfos.length==1&&!n.drmInfos[0].keySystem,t=o.drmInfos.length==0,(n.drmInfos.length==0||e&&!t)&&(n.drmInfos=o.drmInfos),n.di=!1;else if(o.drmInfos.length>0&&(n.drmInfos=n.drmInfos.filter(function(s){return o.drmInfos.some(function(u){return u.keySystem==s.keySystem})}),n.drmInfos.length==0))throw new D(2,4,4008);return o.Zh||n.Zh}function sl(e){var t=vn(e.node,"https://dashif.org/CPS","Laurl");if(t&&(t=nt(t)))return t;if((t=vn(e.node,"urn:microsoft:playready","pro"))&&nt(t))return ol(t);if((e=vn(e.node,"urn:mpeg:cenc:2013","pssh"))&&(e=nt(e))){t=mn(e),e=8,t=Ht(t);var n=t.getUint8(e);return e+=20,n>0&&(e+=4+16*t.getUint32(e)),e=re(t,e+4),e=yu(e),e=dr("<pro>"+e+"</pro>"),ol(e)}return""}function YE(e,t,n,i,r){var o=[];n=m(n);for(var s=n.next();!s.done;s=n.next()){s=s.value;var u=i[s.Id];if(u){var a;if((a=vn(s.node,"urn:microsoft:playready","pro"))&&nt(a)){a=nt(a),a=mn(a);var l=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);a=[{initData:Xu(a,l,new Set,0),initDataType:"cenc",keyId:s.keyId}]}else a=null;if(l=null,s.Id==="urn:uuid:e2719d58-a985-b3c9-781a-b030af78d30e"){l=s;var c=r;if(c.size==0)l=null;else{var f=new Uint8Array([16,119,239,236,192,178,77,2,172,227,60,30,82,226,251,75]),p=new Uint8Array([]);l=[{initData:Xu(p,f,c,1),initDataType:"cenc",keyId:l.keyId}]}}a=si(u,t,s.init||e||a||l),(u=QE.get(u))&&(a.licenseServerUri=u(s));e:{if((s=vn(s.node,"https://dashif.org/CPS","Certurl"))&&(s=nt(s)))break e;s=""}a.serverCertificateUri=s,o.push(a)}}return o}function qE(e,t){var n=[];t=m(t);for(var i=t.next();!i.done;i=t.next())(i=JE(e,i.value))&&n.push(i);return n}function JE(e,t){var n=t.attributes.schemeIdUri,i=ui(t,"urn:mpeg:cenc:2013","default_KID"),r=ah(t,"urn:mpeg:cenc:2013","pssh").map(_t),o=t.attributes.value;if(!n)return null;if(n=n.toLowerCase(),i&&(i=i.replace(/-/g,"").toLowerCase(),i.includes(" ")))throw new D(2,4,4009);var s=[];try{s=r.map(function(u){return{initDataType:"cenc",initData:e.g.getOrInsertComputed(u,function(){return mn(u)}),keyId:null}})}catch{throw new D(2,4,4007)}return{node:t,Id:n,keyId:i,init:s.length>0?s:null,encryptionScheme:o}}function $E(e){if(!B.crypto||!B.crypto.subtle)throw ve("Web Crypto API is not available to decrypt AES-128. (Web Crypto only exists in secure origins like https)"),new D(2,4,4042);var t=vn(e.node,"urn:mpeg:dash:schema:sea:2012","SegmentEncryption");if(!t)throw new D(2,4,4051);if(t.attributes.schemeIdUri!="urn:mpeg:dash:sea:aes128-cbc:2013")throw new D(2,4,4051);if(t=vn(e.node,"urn:mpeg:dash:schema:sea:2012","CryptoPeriod"),!t)throw new D(2,4,4051);if(e=t.attributes.IV,t=Ut(t.attributes.keyUriTemplate),!e||!t)throw new D(2,4,4051);if(e=ur(e.substr(2)),e.byteLength!=16)throw new D(2,4,4048);return{xk:t,iv:e}}var QE=new Map().set("com.apple.fps",function(e){if(B.shakaMediaKeysPolyfill==="apple")throw new D(2,4,4054);return(e=vn(e.node,"https://dashif.org/CPS","Laurl"))&&(e=nt(e))?e:""}).set("com.widevine.alpha",function(e){var t=vn(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=nt(t))?t:(e=vn(e.node,"urn:microsoft","laurl"))&&Ut(e.attributes.licenseUrl)||""}).set("com.microsoft.playready",sl).set("com.microsoft.playready.recommendation",sl).set("com.microsoft.playready.software",sl).set("com.microsoft.playready.hardware",sl).set("org.w3.clearkey",function(e){var t=vn(e.node,"https://dashif.org/CPS","Laurl");return t&&(t=nt(t))?t:(e=vn(e.node,"http://dashif.org/guidelines/clearKey","Laurl"))&&e.attributes.Lic_type==="EME-1.0"&&e&&(e=nt(e))?e:""});function Hs(e,t,n,i,r,o){var s=new Map().set("RepresentationID",t).set("Number",n).set("SubNumber",i).set("Bandwidth",r).set("Time",o);return e.replace(/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g,function(u,a,l,c){if(u=="$$")return"$";var f=s.get(a);if(f==null)return u;switch(a=="RepresentationID"&&l&&(l=void 0),a=="Time"&&typeof f!="bigint"&&(Math.abs(f-Math.round(f))>=.2&&ve("Calculated $Time$ values must be close to integers"),f=Math.round(f)),c){case void 0:case"d":case"i":case"u":u=f.toString();break;case"o":u=f.toString(8);break;case"x":u=f.toString(16);break;case"X":u=f.toString(16).toUpperCase();break;default:u=f.toString()}return l=B.parseInt(l,10)||1,Array(Math.max(0,l-u.length)+1).join("0")+u})}function Py(e,t){var n=_n(e,t,"timescale"),i=1;n&&(i=Jn(n)||1),n=_n(e,t,"duration");var r=(n=Jn(n||""))?n/i:null,o=_n(e,t,"startNumber"),s=Number(_n(e,t,"presentationTimeOffset"))||0,u=yt(o||"");if((o==null||u==null)&&(u=1),o=null,t=Ao(e,t,"SegmentTimeline")){t=De(t,"S"),o=i,e=e.na.duration||1/0;for(var a=u,l=[],c=-s,f=0;f<t.length;++f){var p=t[f],h=t[f+1],g=oe(p,"t",yt),v=oe(p,"d",yt),y=oe(p,"r",vt);if(p=oe(p,"k",vt)||0,g!=null&&(g-=s),v){if(g=g??c,y=y||0,y<0)if(h){if(h=oe(h,"t",yt),h==null)break;if(g>=h)break;y=Math.ceil((h-g)/v)-1}else{if(e==1/0)break;if(g/o>=e)break;y=Math.ceil((e*o-g)/v)-1}for(l.length>0&&g!=c&&(l[l.length-1].end=g/o),h=0;h<=y;++h)c=g+v,l.push({start:g/o,Md:g,end:c/o,Kh:c,xc:p,Wk:l.length+a}),g=c}}o=l}return{timescale:i,Qf:n,fb:r,ve:u,hc:s/i||0,gd:s,timeline:o}}function Ny(e,t){return[t(e.L),t(e.qa),t(e.ua)].filter(bi)}function _n(e,t,n){t=Ny(e,t),e=null,t=m(t);for(var i=t.next();!i.done&&!(e=i.value.attributes[n]);i=t.next());return e}function Ao(e,t,n){t=Ny(e,t),e=null,t=m(t);for(var i=t.next();!i.done&&!(e=He(i.value,n));i=t.next());return e}function ZE(e,t,n,i,r,o){for(var s=ui(e,"http://www.w3.org/1999/xlink","href"),u=ui(e,"http://www.w3.org/1999/xlink","actuate")||"onRequest",a=m(Object.keys(e.attributes)),l=a.next();!l.done;l=a.next()){l=l.value;var c=l.split(":"),f=lc("http://www.w3.org/1999/xlink");c[0]==f&&delete e.attributes[l]}if(o>=5)return Fi(new D(2,4,4028));if(u!="onLoad")return Fi(new D(2,4,4027));var p=pt([i],[s]);return r.request(0,ot(p,t)).Xa(function(h){if(h=Ko(h.data,e.tagName),!h)return Fi(new D(2,4,4001,s));for(e.children=[];h.children.length;){var g=h.children.shift();e.children.push(g)}g=m(Object.keys(h.attributes));for(var v=g.next();!v.done;v=g.next())v=v.value,e.attributes[v]=h.attributes[v];return ul(e,t,n,p[0],r,o+1)})}function ul(e,t,n,i,r,o){if(o=o===void 0?0:o,ui(e,"http://www.w3.org/1999/xlink","href")){var s=ZE(e,t,n,i,r,o);return n&&(s=s.Xa(void 0,function(){return ul(e,t,n,i,r,o)})),s}s=[];for(var u=m(uh(e)),a=u.next(),l={};!a.done;l={Ud:void 0},a=u.next())l.Ud=a.value,ui(l.Ud,"http://www.w3.org/1999/xlink","href")=="urn:mpeg:dash:resolve-to-zero:2013"?e.children=e.children.filter(function(c){return function(f){return f!==c.Ud}}(l)):l.Ud.tagName!="SegmentTimeline"&&s.push(ul(l.Ud,t,n,i,r,o));return Gh(s).Xa(function(){return e})}function e2(e,t,n,i,r,o,s,u){var a,l=new Ne().S("sidx",function(c){a=t2(t,i,r,o,s,n,c,u)});if(e&&l.parse(e),a)return a;throw new D(2,3,3004)}function t2(e,t,n,i,r,o,s,u){u=u===void 0?!1:u;var a=[];s.reader.skip(4);var l=s.reader.U();if(l==0)throw new D(2,3,3005);if(s.version==0)var c=s.reader.U(),f=s.reader.U();else c=s.reader.Fd(),f=s.reader.Fd();s.reader.skip(2);var p=s.reader.Ca();for(e=(u?-s.size:e)+s.size+f,u=0;u<p;u++){var h=s.reader.U();f=(h&2147483648)>>>31,h&=2147483647;var g=s.reader.U();if(s.reader.skip(4),f==1)throw new D(2,3,3006);a.push(new Q(c/l+n,(c+g)/l+n,function(){return o},e,e+h-1,t,n,i,r)),c+=g,e+=h}return s.parser.stop(),a}function Qi(e){this.h=Ht(e),this.g=new Fe(this.h,0)}Qi.prototype.Ka=function(){return this.g.Ka()};function Ii(e){var t=jy(e);if(t.length>7)throw new D(2,3,3002);var n=0;t=m(t);for(var i=t.next();!i.done;i=t.next())n=256*n+i.value;t=jy(e);e:{i=m(n2);for(var r=i.next();!r.done;r=i.next())if(ii(t,new Uint8Array(r.value))){i=!0;break e}i=!1}if(i)t=e.h.byteLength-e.g.Pa();else{if(t.length==8&&t[1]&224)throw new D(2,3,3001);for(r=i=0;r<t.length;r++){var o=t[r];i=r==0?o&(1<<8-t.length)-1:256*i+o}t=i}return t=e.g.Pa()+t<=e.h.byteLength?t:e.h.byteLength-e.g.Pa(),i=Ht(e.h,e.g.Pa(),t),e.g.skip(t),new i2(n,i)}function jy(e){var t=e.g.Pa(),n=e.g.Z();if(n==0)throw new D(2,3,3002);return n=8-Math.floor(Math.log2(n)),e.g.skip(n-1),re(e.h,t,n)}var n2=[[255],[127,255],[63,255,255],[31,255,255,255],[15,255,255,255,255],[7,255,255,255,255,255],[3,255,255,255,255,255,255],[1,255,255,255,255,255,255,255]];function i2(e,t){this.id=e,this.g=t}function yd(e){if(e.g.byteLength>8)throw new D(2,3,3002);if(e.g.byteLength==8&&e.g.getUint8(0)&224)throw new D(2,3,3001);for(var t=0,n=0;n<e.g.byteLength;n++){var i=e.g.getUint8(n);t=256*t+i}return t}function r2(e,t,n,i,r,o,s){if(t=new Qi(t),Ii(t).id!=440786851)throw new D(2,3,3008);var u=Ii(t);if(u.id!=408125543)throw new D(2,3,3009);t=u.g.byteOffset,u=new Qi(u.g);for(var a=null;u.Ka();){var l=Ii(u);if(l.id==357149030){a=l;break}}if(!a)throw new D(2,3,3010);for(a=new Qi(a.g),l=1e6,u=null;a.Ka();){var c=Ii(a);if(c.id==2807729)l=yd(c);else if(c.id==17545)if(c.g.byteLength==4)u=c.g.getFloat32(0);else if(c.g.byteLength==8)u=c.g.getFloat64(0);else throw new D(2,3,3003)}if(u==null)throw new D(2,3,3011);if(a=l/1e9,u*=a,e=Ii(new Qi(e)),e.id!=475249515)throw new D(2,3,3007);return o2(e,t,a,u,n,i,r,o,s)}function o2(e,t,n,i,r,o,s,u,a){function l(){return r}var c=[];e=new Qi(e.g);for(var f=null,p=null;e.Ka();){var h=Ii(e);if(h.id==187){var g=s2(h);g&&(h=n*g.ql,g=t+g.Ok,f!=null&&c.push(new Q(f+s,h+s,l,p,g-1,o,s,u,a)),f=h,p=g)}}return f!=null&&c.push(new Q(f+s,i+s,l,p,null,o,s,u,a)),c}function s2(e){var t=new Qi(e.g);if(e=Ii(t),e.id!=179)throw new D(2,3,3013);if(e=yd(e),t=Ii(t),t.id!=183)throw new D(2,3,3012);t=new Qi(t.g);for(var n=0;t.Ka();){var i=Ii(t);if(i.id==241){n=yd(i);break}}return{ql:e,Ok:n}}function Oy(e,t,n){if(t=Ao(e,t,"Initialization"),!t)return null;var i=e.L.bb(),r=t.attributes.sourceURL;r&&(i=pt(i,[Ut(r)],e.Lb())),r=0;var o=null;return(t=oe(t,"range",Au))&&(r=t.start,o=t.end),n=new Wt(function(){return i},r,o,by(e),null,null,n,e.qa.encrypted),n.codecs=e.L.codecs,n.mimeType=e.L.mimeType,e.na&&!e.na.kf&&(n.g=e.na.start+e.na.duration),n}function u2(e,t,n){var i=Number(_n(e,Eo,"presentationTimeOffset"))||0,r=_n(e,Eo,"timescale"),o=1;r&&(o=Jn(r)||1);var s=i/o||0,u=Oy(e,Eo,n);a2(e,u);var a=Oi(e);return{endTime:-1,timeline:-1,Sc:function(){var l=Ao(a,Eo,"RepresentationIndex"),c=a.L.bb();return l&&(l=Ut(l.attributes.sourceURL))&&(c=pt(c,[l],a.Lb())),l=_y(a),Uy(a,t,u,c,l.start,l.end,s)},timescale:o}}function Uy(e,t,n,i,r,o,s){var u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M;return k(function(P){if(P.g==1)return u=e.presentationTimeline,a=!e.Eb||!e.na.kf,l=e.na.start,c=e.na.duration,f=e.L.mimeType.split("/")[1],p=t,h=null,g=[p(i,r,o,!1),f=="webm"?p(n.P(),n.startByte,n.endByte,!0):null],p=null,T(P,Promise.all(g),2);for(v=P.h,y=v[0],S=v[1]||null,x=null,w=l-s,I=l,L=c?l+c:1/0,A=e.L.bb(),C=A.length!=i.length||A.some(function(N,b){return N!=i[b]}),x=f=="mp4"?e2(y,r,A,n,w,I,L,C):r2(y,S,A,n,w,I,L),E=m(x),R=E.next();!R.done;R=E.next())M=R.value,M.codecs=e.L.codecs,M.mimeType=e.L.mimeType,M.bandwidth=e.bandwidth;return u.me(x),h=new Se(x),a&&h.pd(I,L,!0),P.return(h)})}function Eo(e){return e.Jd}function _y(e){var t=Ao(e,Eo,"RepresentationIndex");return e=_n(e,Eo,"indexRange"),e=Au(e||""),t&&(e=oe(t,"range",Au,e)),e}function a2(e,t){if(By(e,t),!_y(e))throw new D(2,4,4002)}function By(e,t){var n=e.L.mimeType.split("/")[1];if(e.L.contentType!=he&&n!="mp4"&&n!="webm")throw new D(2,4,4006);if(n=="webm"&&!t)throw new D(2,4,4005)}function by(e){var t=e.L;return{bandwidth:e.bandwidth,audioSamplingRate:t.audioSamplingRate,codecs:t.codecs,contentType:t.contentType,frameRate:t.frameRate||null,height:t.height||null,mimeType:t.mimeType,channelsCount:t.yf,pixelAspectRatio:t.pixelAspectRatio||null,width:t.width||null,label:e.qa.label||null,roles:e.roles||null,language:e.qa.language||null}}function l2(e,t,n){var i=Oy(e,Fy,n),r=c2(e);if(!r.fb&&!r.timeline&&r.zd.length>1)throw new D(2,4,4002);if(!r.fb&&!e.na.duration&&!r.timeline&&r.zd.length==1)throw new D(2,4,4002);if(r.timeline&&r.timeline.length==0)throw new D(2,4,4002);var o=null,s=null;e.ua.id&&e.L.id&&(s=t.get(e.ua.id+","+e.L.id))&&(o=s.segmentIndex);var u=f2(e.na.start,e.na.duration,e.L.bb,r,i,n,e.L.mimeType,e.L.codecs,e.bandwidth,e.Lb);return t=!o,o?o.ke(u,e.presentationTimeline.Hb()):o=new Se(u),e.presentationTimeline.me(u),e.Eb&&e.na.kf||o.pd(e.na.start,e.na.duration?e.na.start+e.na.duration:1/0,t),s&&(s.segmentIndex=o),{endTime:-1,timeline:-1,Sc:function(){return o&&o.getNumReferences()!=0||o.tf(u),Promise.resolve(o)},timescale:r.timescale}}function Fy(e){return e.Bc}function c2(e){var t=d2(e);e=Py(e,Fy);var n=e.ve;n==0&&(n=1);var i=0;return e.fb?i=e.fb*(n-1):e.timeline&&e.timeline.length>0&&(i=e.timeline[0].start),{fb:e.fb,startTime:i,ve:n,hc:e.hc,timescale:e.timescale,timeline:e.timeline,zd:t}}function f2(e,t,n,i,r,o,s,u,a,l){var c=i.zd.length;i.timeline&&i.timeline.length!=i.zd.length&&(c=Math.min(i.timeline.length,i.zd.length));for(var f=e-i.hc,p=t?e+t:1/0,h=[],g=i.startTime,v={},y=0;y<c;v={Sf:void 0,Hf:void 0},y++){v.Hf=i.zd[y];var S=g;g=void 0,g=i.fb!=null?S+i.fb:i.timeline?i.timeline[y].end:S+t,v.Sf=null,v=new Q(e+S,e+g,function(x){return function(){return x.Sf==null&&(x.Sf=pt(n(),[x.Hf.Dk],l())),x.Sf}}(v),v.Hf.start,v.Hf.end,r,f,e,p,[],"",null,null,mi,o),v.codecs=u,v.mimeType=s,v.bandwidth=a,h.push(v)}return h}function d2(e){return[e.L.Bc,e.qa.Bc,e.ua.Bc].filter(bi).map(function(t){return De(t,"SegmentURL")}).reduce(function(t,n){return t.length>0?t:n}).map(function(t){t.attributes.indexRange&&!e.Og&&(e.Og=!0);var n=Ut(t.attributes.media);return t=oe(t,"mediaRange",Au,{start:0,end:null}),{Dk:n,start:t.start,end:t.end}})}function Vy(e,t,n,i,r,o,s,u,a,l){a||e.L.hf||(e.L.hf=_n(e,Zi,"initialization"));var c=e.L.hf?m2(e,s):null,f=p2(e);h2(f);var p=Oi(e);if(f.fe)return By(e,c),{endTime:-1,timeline:-1,Sc:function(){var S=Hs(f.fe,p.L.originalId,null,null,p.bandwidth||null,null);return S=pt(p.L.bb(),[S]),Uy(p,t,c,S,0,null,f.hc)},timescale:f.timescale};if(f.fb)return i||e.qa.contentType==="image"||e.qa.contentType==="text"||(i=e.na.start,l=e.ua.id,n=e.na.duration,l=(l=l!=null&&o.get(l)||n)?i+l:1/0,e.presentationTimeline.Xg(f.fb),e.presentationTimeline.Hi(i,l)),{endTime:-1,timeline:-1,Sc:function(){return g2(p,f,r,c,o,s,u,e.L.If)},timescale:f.timescale};var h=null;i=i=null,e.ua.id&&e.L.id&&(i=e.ua.id+","+e.L.id,i=n.get(i))&&(h=i.segmentIndex);var g=e.na.start,v=e.na.duration?g+e.na.duration:1/0;if(h)l=h,Hy(l,f,g,v,c,e.Eb),l.Ya(e.presentationTimeline.Hb());else{if(n=0,a=-1,e.ua.id!=null&&e.L.id!=null){var y=l.get(e.ua.id);if(y)a=y.timeline;else for(l=m(l.values()),y=l.next();!y.done;y=l.next())if(y=y.value,Math.abs(f.hc-y.endTime)<=Zp&&y.hh.includes(e.L.id)){a=y.timeline;break}else y.timeline>=n&&(n=y.timeline+1)}a==-1&&(a=n),h=new Gs(e.Eb,f,e.L.originalId,e.bandwidth,e.L.bb,e.Lb,g,v,c,s,e.L.If,a)}return f.timeline&&e.qa.contentType!=="image"&&e.qa.contentType!=="text"&&e.presentationTimeline.Ii(h.h?h.h.timeline:[],g),i&&e.Eb&&(i.segmentIndex=h),i=(i=(i=f.timeline)&&i[i.length-1])?i.end+f.hc:-1,l=-1,h instanceof Gs&&(l=h.We()),{endTime:i,timeline:l,Sc:function(){return h instanceof Gs&&h.getNumReferences()==0&&Hy(h,f,g,v,c,e.Eb),Promise.resolve(h)},timescale:f.timescale}}function Zi(e){return e.Oc}function p2(e){var t=Py(e,Zi),n=_n(e,Zi,"media"),i=_n(e,Zi,"index"),r=_n(e,Zi,"k"),o=0;return r&&(o=parseInt(r,10)),{Qf:t.Qf,fb:t.fb,timescale:t.timescale,ve:t.ve,hc:t.hc,gd:t.gd,timeline:t.timeline,dc:n&&Ut(n),fe:i,mimeType:e.L.mimeType,codecs:e.L.codecs,bandwidth:e.bandwidth,Ek:o}}function h2(e){var t=e.fe?1:0;if(t+=e.timeline?1:0,t+=e.fb?1:0,t==0)throw new D(2,4,4002);if(t!=1&&(e.fe&&(e.timeline=null),e.Qf=null,e.fb=null),!e.fe&&!e.dc)throw new D(2,4,4002)}function g2(e,t,n,i,r,o,s,u){function a(N){var b=N-y,_=b*v,j=t.Qf,O=b*j;"BigInt"in B&&O>Number.MAX_SAFE_INTEGER&&(O=BigInt(b)*BigInt(j)),_+=p,b=_+v,j=Math.min(b,c());var F=[],V=t.Ek;if(V)for(var le=(j-_)/V,q={},Re=0;Re<V;q={cj:void 0},Re++){var ae=_+le*Re,Ve=ae+le;q.cj=Re,q=new Q(ae,Ve,function(Ae){return function(){var de=Hs(S,w,N,Ae.cj,x,O);return pt(I(),[de],L())}}(q),0,null,i,A,p,c(),[],"",null,null,mi,o),q.codecs=e.L.codecs,q.mimeType=e.L.mimeType,u==0?Re>0&&q.xd():Re%u!=0&&q.xd(),F.push(q)}return _=new Q(_,j,function(){if(V)return[];var Ae=Hs(S,w,N,null,x,O);return pt(I(),[Ae],L())},0,null,i,A,p,c(),F,"",null,null,mi,o,F.length>0),_.codecs=e.L.codecs,_.mimeType=e.L.mimeType,_.bandwidth=e.bandwidth,_.j=b,_}function l(){var N=[Math.max(f.Hb(),p),Math.min(f.Jc(),c())].map(function(b){return b-p});return N=[Math.ceil(N[0]/v),Math.ceil(N[1]/v)-1],e.L.pb&&N[1]++,N.map(function(b){return b+y})}function c(){var N=h!=null&&r.get(h)||g;return N?p+N:1/0}var f=e.presentationTimeline,p=e.na.start,h=e.ua.id,g=e.na.duration,v=t.fb,y=t.ve,S=t.dc,x=e.bandwidth||null,w=e.L.originalId,I=e.L.bb,L=e.Lb,A=p-t.hc,C=l();n=e.Eb?Math.max(C[0],C[1]-n+1):C[0],s=s||C[1],C=[];for(var E=n;E<=s;++E){var R=a(E);C.push(R)}var M=new Se(C);if(C=f.Jc()<c(),E=f.W(),C||E){var P=Math.max(n,s+1);n=v,e.L.pb&&(n=.1),M.Rf(n,function(){var N=f.Hb();M.Ya(N);var b=m(l());b.next(),b=b.next().value;for(var _=[];P<=b;){var j=a(P);_.push(j),P++}return N>c()&&!_.length?null:_})}return Promise.resolve(M)}function m2(e,t){var n=e.L.hf;if(n||(n=_n(e,Zi,"initialization")),!n)return null;n=Ut(n);var i=e.L.originalId,r=e.bandwidth||null,o=e.L.bb,s=e.Lb;return t=new Wt(function(){var u=Hs(n,i,null,null,r,null);return pt(o(),[u],s())},0,null,by(e),null,null,t,e.qa.encrypted),t.codecs=e.L.codecs,t.mimeType=e.L.mimeType,e.na&&!e.na.kf&&(t.g=e.na.start+e.na.duration),t}function Gs(e,t,n,i,r,o,s,u,a,l,c,f){Se.call(this,[]),this.F=e,this.h=t,this.H=n,this.C=i,this.G=r,this.J=o,this.j=s,this.l=u,this.u=a,this.B=l,this.I=c,this.K=f,Td(this)}$e(Gs,Se),d=Gs.prototype,d.getNumReferences=function(){return this.h?this.h.timeline.length:0},d.release=function(){Se.prototype.release.call(this),this.h=null},d.Ya=function(e){if(this.h){for(var t=0,n=this.h.timeline,i=0;i<n.length&&n[i].end+this.j<=e;i+=1)t+=1;t>0&&(this.h.timeline=n.slice(t),this.g.length>=t&&(this.g=this.g.slice(t)),this.i+=t,this.getNumReferences()===0&&this.release())}};function Hy(e,t,n,i,r,o){if(v2(e,r),e.F=o,e.h){if(e.h.gd!==t.gd)for(n=t.gd-e.h.gd,r=0;r<t.timeline.length;r++)o=t.timeline[r],o.Md+=n,o.Kh+=n,o.start=(o.Md+n)/t.timescale,o.end=(o.Kh+n)/t.timescale;if(e.h.dc!==t.dc&&(e.h.dc=t.dc),n=e.h.timeline,n.length){var s=n[n.length-1];t=t.timeline.filter(function(u){return u.end>s.end})}else t=t.timeline.slice();t.length>0&&e.h.timeline.push.apply(e.h.timeline,H(t)),e.l!==i&&(e.l=i)}else e.h=t,e.j=n,e.l=i;Td(e)}function v2(e,t){if(e.u!==t){e.u=t,e=m(e.g);for(var n=e.next();!n.done;n=e.next())(n=n.value)&&Ig(n,t)}}function Td(e){if(e.h&&!e.o){for(var t=[],n=m(e.h.timeline),i=n.next();!i.done;i=n.next())i=i.value,i.start>=e.l||i.end<=0||t.push(i);e.h.timeline=t,e.Ya(e.j)}}d.find=function(e){if(this.h&&this.h.timeline&&this.h.timeline.length&&e<this.h.timeline[0].start+this.j)return this.i;if(!this.h)return null;var t=this.h.timeline;if(e<this.j||e>=this.l)return null;for(var n=t.length-1,i=0;i<t.length;i++){var r=t[i],o=r.start+this.j;if(r=i<n?t[i+1].start+this.j:this.l===1/0?r.end+this.j:this.l,e>=o&&e<r)return i+this.i}return null},d.get=function(e){var t=this;if(e-=this.i,e<0||e>=this.getNumReferences()||!this.h)return null;var n=this.g[e];if(!n){n=this.h.timeline[e];var i=n.Wk,r=n.Md+this.h.gd,o=this.j-this.h.hc,s=this.j+n.end,u=s;e===this.getNumReferences()-1&&this.l!==1/0&&(u=this.F&&Math.abs(u-this.l)>.1?Math.min(u,this.l):this.l);var a=this.h.codecs,l=this.h.mimeType,c=this.h.bandwidth,f=[],p=!1;if(n.xc&&this.h&&this.h.dc&&(p=this.h.dc.includes("$SubNumber$")),p){p=(n.end-n.start)/n.xc;for(var h={},g=0;g<n.xc;h={Tf:void 0,dj:void 0},g++){var v=n.start+p*g,y=v+p;h.dj=g,h.Tf=null,h=new Q(this.j+v,this.j+y,function(S){return function(){return t.h?(S.Tf==null&&(S.Tf=Gy(t.h.dc,t.H,i,t.C,r,S.dj,t.G,t.J)),S.Tf):[]}}(h),0,null,this.u,o,this.j,this.l,[],"",null,null,mi,this.B),h.codecs=a,h.mimeType=l,h.bandwidth=c,this.I==0?g>0&&h.xd():g%this.I!=0&&h.xd(),f.push(h)}}n=new Q(this.j+n.start,u,function(){return f.length>0||!t.h?[]:Gy(t.h.dc,t.H,i,t.C,r,null,t.G,t.J)},0,null,this.u,o,this.j,this.l,f,"",null,null,mi,this.B,f.length>0),n.codecs=a,n.mimeType=l,n.j=s,n.bandwidth=c,this.g[e]=n}return n},d.Fb=function(e){Td(this);for(var t=0;t<this.getNumReferences();t++){var n=this.get(t+this.i);n&&e(n)}};function Gy(e,t,n,i,r,o,s,u){return e=Hs(e,t,n,o,i||null,r),pt(s(),[e],u()).map(function(a){return a.toString()})}d.We=function(){return this.K};function Io(e){this.o=null,this.B=e,this.H=new Yr,this.i=[],this.h=null,this.m=[],this.C=null,this.G=[],this.F=300,this.l=new Map,this.j=new Map,this.g=null,this.u="UNKNOWN"}Io.prototype.configure=function(e){this.o=e},Io.prototype.destroy=function(){return this.B=this.o=null,this.i=[],this.h=null,this.m=[],this.G=[],this.l.clear(),this.g!=null&&(this.g.stop(),this.g=null),this.H.destroy()},Io.prototype.setManifestType=function(e){this.u=e};function Ks(e,t){var n,i,r,o,s,u,a;return k(function(l){if(l.g==1)return n=pt(e.i,[y2(e,t)]),i=ot(n,e.o.retryParameters),r=e.B.networkingEngine.request(8,i),yr(e.H,r),se(l,2),T(l,r.promise,4);if(l.g!=2)return o=l.h,s=Xe(o.data),u=JSON.parse(s),u.VERSION==1&&T2(e,u,o.uri),fe(l,0);if((a=ue(l))&&a.code==7001)return l.return();e.g!=null&&(e.g.stop(),e.g=null),e.g=new ge(function(){Ks(e,t)}),e.g.ka(e.F),G(l)})}function y2(e,t){if(!e.m.length)return t;t=new tt(t);var n=e.C||e.m[0],i=Math.round(e.B.getBandwidthEstimate()),r=t.g;return e.u=="DASH"?(r.add("_DASH_pathway",n),r.add("_DASH_throughput",String(i))):e.u=="HLS"&&(r.add("_HLS_pathway",n),r.add("_HLS_throughput",String(i))),Yp(r)&&or(t,r),t.toString()}function T2(e,t,n){e.g!=null&&(e.g.stop(),e.g=null);var i=t["RELOAD-URI"]||n;e.g=new ge(function(){Ks(e,i)}),(n=t.TTL)&&(e.F=n),e.g.ka(e.F),e.m=t["PATHWAY-PRIORITY"]||[],e.G=t["PATHWAY-CLONES"]||[]}function Co(e,t,n,i){var r=e.l.get(t);r||(r=new Map),r.set(n,i),e.l.set(t,r)}Io.prototype.banLocation=function(e){this.j.set(e,Date.now()+6e4)};function Ws(e,t,n){n=n===void 0?!1:n,t=e.l.get(t)||new Map;for(var i=[],r=m(e.m),o=r.next(),s={};!o.done;s={Dd:void 0},o=r.next())if(s.Dd=o.value,o=t.get(s.Dd))i.push({bh:s.Dd,location:o});else if(o=e.G.find(function(a){return function(l){return l.Pl==a.Dd}}(s))){var u=t.get(o["BASE-ID"]);u&&(o["URI-REPLACEMENT"].pj?(u=new tt(u),pu(u,o["URI-REPLACEMENT"].pj),i.push({bh:s.Dd,location:u.toString()})):i.push({bh:s.Dd,location:u}))}for(r=Date.now(),s=m(e.j.keys()),o=s.next();!o.done;o=s.next())o=o.value,u=e.j.get(o),r>u&&e.j.delete(o);if(i=i.filter(function(a){for(var l=m(e.j.keys()),c=l.next();!c.done;c=l.next())if(c.value.includes(new tt(a.location).Db))return!1;return!0}),i.length&&(e.C=i[0].bh),i=i.map(function(a){return a.location}),!i.length&&e.h)for(r=m(e.h.split(",")),s=r.next();!s.done;s=r.next())(s=t.get(s.value))&&(e.C=e.h,i.push(s));if(!i.length)for(t=m(t.values()),r=t.next();!r.done;r=t.next())i.push(r.value);return n?i:pt(e.i,i)}function zt(){this.l=[],this.h=[],this.g=[],this.j=[],this.i=[],this.o=!1,this.m=new Set}d=zt.prototype,d.release=function(){for(var e=m(this.h.concat(this.g,this.j,this.i)),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();this.h=[],this.g=[],this.j=[],this.i=[],this.l=[],this.o=!1,this.m.clear()},d.gk=function(){return this.l},d.Mg=function(){return this.j.slice()},d.Nj=function(){return this.i},d.$h=function(e,t){if(e){if(e.type=="audio")for(var n=m(this.h),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="video")for(n=m(this.g),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e}),i.trickModeVideo&&(i.trickModeVideo.matchedStreams=i.trickModeVideo.matchedStreams.filter(function(r){return r!==e})),i.dependencyStream&&(i.dependencyStream.matchedStreams=i.dependencyStream.matchedStreams.filter(function(r){return r!==e}));else if(e.type==he)for(n=m(this.j),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});else if(e.type=="image")for(n=m(this.i),i=n.next();!i.done;i=n.next())i=i.value,i.matchedStreams=i.matchedStreams.filter(function(r){return r!==e});e.segmentIndex&&e.closeSegmentIndex(),this.m.delete(t)}};function Ky(e,t){var n=[],i=[],r=[],o=[];e=m(e);for(var s=e.next();!s.done;s=e.next()){var u=s.value;s=new Map(u.audioStreams.map(function(f){return[Ad(f),f]}));var a=new Map(u.videoStreams.map(function(f){return[wd(f),f]})),l=new Map(u.textStreams.map(function(f){return[zs(f),f]}));if(u=new Map(u.imageStreams.map(function(f){return[Ys(f),f]})),t){var c=$y(he);l.set(zs(c),c),c=$y("image"),u.set(Ys(c),c)}n.push(s),i.push(a),r.push(l),o.push(u)}return{Th:n,nj:i,ij:r,ri:o}}d.lg=function(e,t,n){n=n===void 0?!1:n;var i=this,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_,j,O,F,V,le;return k(function(q){if(q.g==1){if(r=rt,!t&&e.length==1)return o=Ky(e,!1),s=o.Th,u=o.nj,a=o.ij,l=o.ri,i.h=Array.from(s[0].values()),i.g=Array.from(u[0].values()),i.j=Array.from(a[0].values()),i.i=Array.from(l[0].values()),q.A(2);for(c=n?i.m.size:0,f=-1,p=0;p<e.length;p++)h=e[p],i.m.has(h.id)||(i.m.add(h.id),f==-1&&(f=p));return f==-1?q.return():(g=Ky(e,!0),v=g.Th,y=g.nj,S=g.ij,x=g.ri,T(q,Promise.all([er(i,i.h,v,f,Mo,tr,c),er(i,i.g,y,f,Mo,tr,c),er(i,i.j,S,f,Mo,tr,c),er(i,i.i,x,f,Mo,tr,c)]),2))}if(w=0,I=[],i.g.length&&i.h.length)for(P=m(i.h),N=P.next();!N.done;N=P.next())for(b=N.value,_=m(i.g),j=_.next();!j.done;j=_.next())O=j.value,F=$p(b.drmInfos,O.drmInfos),b.drmInfos.length&&O.drmInfos.length&&!F.length||(V=(b.bandwidth||0)+(O.bandwidth||0),b.dependencyStream&&(V+=b.dependencyStream.bandwidth||0),O.dependencyStream&&(V+=O.dependencyStream.bandwidth||0),le=w++,I.push({id:le,language:b.language,disabledUntilTime:0,primary:b.primary,audio:b,video:O,bandwidth:V,drmInfos:F,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]}));else for(L=i.g.length?i.g:i.h,A=m(L),C=A.next();!C.done;C=A.next())E=C.value,R=w++,M=E.bandwidth||0,E.dependencyStream&&(M+=E.dependencyStream.bandwidth||0),I.push({id:R,language:E.language,disabledUntilTime:0,primary:E.primary,audio:E.type==r.$?E:null,video:E.type==r.va?E:null,bandwidth:M,drmInfos:E.drmInfos,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});i.l=I,G(q)})};function Wy(e){var t,n,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_;return k(function(j){switch(j.g){case 1:if(t=rt,e.length==1)return j.return(e[0]);for(n=e.map(function(O){return new Map(O.filter(function(F){return F.type===t.$}).map(function(F){return[Ad(F),F]}))}),i=e.map(function(O){return new Map(O.filter(function(F){return F.type===t.va}).map(function(F){return[wd(F),F]}))}),r=e.map(function(O){return new Map(O.filter(function(F){return F.type===t.Na}).map(function(F){return[zs(F),F]}))}),o=e.map(function(O){return new Map(O.filter(function(F){return F.type===t.Yf}).map(function(F){return[Ys(F),F]}))}),s=m(r),u=s.next();!u.done;u=s.next())a=u.value,l=Jy(t.Na),a.set(zs(l),l);for(c=m(o),f=c.next();!f.done;f=c.next())p=f.value,h=Jy(t.Yf),p.set(Ys(h),h);return g=new zt,T(j,er(g,[],n,0,al,ll,0),2);case 2:return v=j.h,T(j,er(g,[],i,0,al,ll,0),3);case 3:return y=j.h,T(j,er(g,[],r,0,al,ll,0),4);case 4:return S=j.h,T(j,er(g,[],o,0,al,ll,0),5);case 5:if(x=j.h,w=0,y.length&&v.length)for(E=m(v),R=E.next();!R.done;R=E.next())for(M=R.value,P=m(y),N=P.next();!N.done;N=P.next())b=N.value,_=w++,b.variantIds.push(_),M.variantIds.push(_);else for(I=y.concat(v),L=m(I),A=L.next();!A.done;A=L.next())C=A.value,C.variantIds=[w++];return j.return(y.concat(v).concat(S).concat(x))}})}function er(e,t,n,i,r,o,s){var u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R;return k(function(M){switch(M.g){case 1:for(u=[],a=0;a<n.length;a++)a>=i?u.push(new Set(n[a].values())):u.push(new Set);l=m(t),c=l.next();case 2:if(c.done){M.A(4);break}return f=c.value,T(M,x2(e,f,n,i,o,u,s),5);case 5:if(p=M.h,!p)throw new D(2,4,4037);c=l.next(),M.A(2);break;case 4:for(h=m(u),g=h.next();!g.done;g=h.next())for(v=g.value,y=m(v),S=y.next();!S.done;S=y.next())x=S.value,(w=S2(e,t,x,n,r,o,u))&&t.push(w);for(I=m(u),L=I.next();!L.done;L=I.next())for(A=L.value,C=m(A),E=C.next(),R={};!E.done;R={Ah:void 0},E=C.next())if(R.Ah=E.value,!Sd(R.Ah)&&t.some(function(P){return function(N){return xd(P.Ah,N)}}(R)))throw new D(2,4,4037);return M.return(t)}})}function x2(e,t,n,i,r,o,s){return k(function(u){return u.g==1?(Yy(e,n,t,s>0),t.matchedStreams?t.segmentIndex?T(u,Xy(t,i+s),2):u.A(2):u.return(!1)):(zy(t,i,r,o,s),u.return(!0))})}function Xy(e,t){var n,i,r,o,s,u;return k(function(a){if(a.g==1){for(n=[],i=e.matchedStreams,r=t;r<i.length;r++)o=i[r],n.push(o.createSegmentIndex()),o.trickModeVideo&&!o.trickModeVideo.segmentIndex&&n.push(o.trickModeVideo.createSegmentIndex()),o.dependencyStream&&!o.dependencyStream.segmentIndex&&n.push(o.dependencyStream.createSegmentIndex());return T(a,Promise.all(n),2)}if(e.segmentIndex instanceof qe)for(s=t;s<i.length;s++)u=i[s],u.segmentIndex&&e.segmentIndex.h.push(u.segmentIndex);G(a)})}function S2(e,t,n,i,r,o,s){if(Sd(n))return null;var u=r(n);return Yy(e,i,u),u.createSegmentIndex&&(u.createSegmentIndex=function(){return k(function(a){return u.segmentIndex?a.A(0):(u.segmentIndex=new qe,T(a,Xy(u,0),0))})},u.closeSegmentIndex=function(){if(u.segmentIndex&&(u.segmentIndex.release(),u.segmentIndex=null),u.matchedStreams)for(var a=m(u.matchedStreams),l=a.next();!l.done;l=a.next()){l=l.value;var c;if(c=l.segmentIndex){e:{c=m(t);for(var f=c.next();!f.done;f=c.next())if(f=f.value,f!==u&&f.segmentIndex&&f.matchedStreams&&f.matchedStreams.includes(l)){c=!0;break e}c=!1}c=!c}c&&(l.segmentIndex.release(),l.segmentIndex=null)}}),!u.matchedStreams||!u.matchedStreams.length?null:(zy(u,0,o,s,0),u)}function zy(e,t,n,i,r){var o=e.matchedStreams;for(t+=r;t<o.length;t++){var s=o[t];n(e,s);var u=!0;if(e.type=="audio"&&gr(e.language,s.language)==0&&(u=!1),u&&((u=i[t-r])&&u.delete(s),s.fullMimeTypes))for(s=m(s.fullMimeTypes.values()),u=s.next();!u.done;u=s.next())e.fullMimeTypes.add(u.value)}}function Mo(e){var t=Object.assign({},e);return t.originalId=null,t.createSegmentIndex=function(){return Promise.resolve()},t.closeSegmentIndex=function(){},t.roles=t.roles.slice(),t.segmentIndex=null,t.emsgSchemeIdUris=[],t.keyIds=new Set(e.keyIds),t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t.trickModeVideo=null,t.dependencyStream=null,t}function al(e){var t=Object.assign({},e);return t.roles=t.roles.slice(),t.keyIds=new Set(e.keyIds),t.segments=[],t.variantIds=[],t.closedCaptions=e.closedCaptions?new Map(e.closedCaptions):null,t}function tr(e,t){function n(s,u){s||(s=[]),u=m(u);for(var a=u.next();!a.done;a=u.next())a=a.value,s.includes(a)||s.push(a);return s}e.roles=n(e.roles,t.roles),t.emsgSchemeIdUris&&(e.emsgSchemeIdUris=n(e.emsgSchemeIdUris,t.emsgSchemeIdUris));for(var i=m(t.keyIds),r=i.next();!r.done;r=i.next())e.keyIds.add(r.value);if(e.originalId==null?e.originalId=t.originalId:(i=t.originalId||"")&&!e.originalId.endsWith(i)&&(e.originalId+=","+i),i=$p(e.drmInfos,t.drmInfos),t.drmInfos.length&&e.drmInfos.length&&!i.length)throw new D(2,4,4038);if(e.drmInfos=i,e.encrypted=e.encrypted||t.encrypted,t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),i=m(t.closedCaptions),r=i.next();!r.done;r=i.next()){var o=m(r.value);r=o.next().value,o=o.next().value,e.closedCaptions.set(r,o)}e.bandwidth&&t.bandwidth&&(e.bandwidth=Math.max(e.bandwidth,t.bandwidth)),t.trickModeVideo?(e.trickModeVideo||(e.trickModeVideo=Mo(t.trickModeVideo),e.trickModeVideo.matchedStreams=[],e.trickModeVideo.createSegmentIndex=function(){if(e.trickModeVideo.segmentIndex)return Promise.resolve();for(var s=new qe,u=m(e.trickModeVideo.matchedStreams),a=u.next();!a.done;a=u.next())s.h.push(a.value.segmentIndex);return e.trickModeVideo.segmentIndex=s,Promise.resolve()}),e.trickModeVideo.matchedStreams.push(t.trickModeVideo),tr(e.trickModeVideo,t.trickModeVideo)):e.trickModeVideo&&(e.trickModeVideo.matchedStreams.push(t),tr(e.trickModeVideo,t)),t.dependencyStream?(e.dependencyStream||(e.dependencyStream=Mo(t.dependencyStream),e.dependencyStream.matchedStreams=[],e.dependencyStream.createSegmentIndex=function(){if(e.dependencyStream.segmentIndex)return Promise.resolve();for(var s=new qe,u=m(e.dependencyStream.matchedStreams),a=u.next();!a.done;a=u.next())s.h.push(a.value.segmentIndex);return e.dependencyStream.segmentIndex=s,Promise.resolve()}),e.dependencyStream.matchedStreams.push(t.dependencyStream),tr(e.dependencyStream,t.dependencyStream)):e.dependencyStream&&(e.dependencyStream.matchedStreams.push(t),tr(e.dependencyStream,t))}function ll(e,t){var n=e.roles;n||(n=[]);for(var i=m(t.roles),r=i.next();!r.done;r=i.next())r=r.value,n.includes(r)||n.push(r);for(e.roles=n,n=m(t.keyIds),i=n.next();!i.done;i=n.next())e.keyIds.add(i.value);if(e.encrypted=e.encrypted&&t.encrypted,e.segments.push.apply(e.segments,H(t.segments)),t.closedCaptions)for(e.closedCaptions||(e.closedCaptions=new Map),t=m(t.closedCaptions),n=t.next();!n.done;n=t.next())i=m(n.value),n=i.next().value,i=i.next().value,e.closedCaptions.set(n,i)}function Yy(e,t,n,i){i=i!==void 0&&i?n.matchedStreams:[],t=m(t);for(var r=t.next();!r.done;r=t.next()){if(r=w2(e,r.value,n),!r)return;i.push(r)}n.matchedStreams=i}function w2(e,t,n){var i={audio:Ad,video:wd,text:zs,image:Ys}[n.type],r=null,o=i(n);if(t.has(o))r=t.get(o);else{o={audio:function(l,c){return xd(l,c)},video:function(l,c){return xd(l,c)},text:A2,image:E2}[n.type];for(var s={audio:I2,video:C2,text:M2,image:k2}[n.type],u=m(t.values()),a=u.next();!a.done;a=u.next())a=a.value,!o(n,a)||n.fastSwitching!=a.fastSwitching||r&&!s(n,r,a)||(r=a)}return e.o&&!Sd(r)&&t.delete(i(r)),r}function qy(e,t){return e.mimeType!=t.mimeType?!1:e0(e.codecs)===e0(t.codecs)}d.Yi=function(e){this.o=e};function xd(e,t){return!(e.drmInfos&&!Jp(e.drmInfos,t.drmInfos))}function A2(e,t){return t.language?!(e.forced!==t.forced||gr(e.language,t.language)==0||t.kind!=e.kind):!0}function E2(){return!0}function I2(e,t,n){var i=Qy(e,t,n);if(i===tn)return!0;if(i===wn)return!1;i=gr(e.language,t.language);var r=gr(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length)return!0;if(r.length<i.length)return!1;if(n.roles.length!==t.roles.length)return n.roles.length<t.roles.length}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!t.primary&&n.primary?!0:t.primary&&!n.primary?!1:(i=Xs(e.channelsCount,t.channelsCount,n.channelsCount),i==tn?!0:i==wn?!1:(i=Xs(e.audioSamplingRate,t.audioSamplingRate,n.audioSamplingRate),i==tn?!0:i==wn?!1:!!(e.bandwidth&&Zy(e.bandwidth,t.bandwidth,n.bandwidth)==tn)))}function C2(e,t,n){var i=Qy(e,t,n);if(i===tn)return!0;if(i===wn)return!1;if(i=Xs(e.width*e.height,t.width*t.height,n.width*n.height),i==tn)return!0;if(i==wn)return!1;if(e.frameRate){if(i=Xs(e.frameRate,t.frameRate,n.frameRate),i==tn)return!0;if(i==wn)return!1}return!!(e.bandwidth&&Zy(e.bandwidth,t.bandwidth,n.bandwidth)==tn)}function M2(e,t,n){var i=gr(e.language,t.language),r=gr(e.language,n.language);if(r>i)return!0;if(r<i)return!1;if(!t.primary&&n.primary)return!0;if(t.primary&&!n.primary)return!1;if(t.label!==n.label){if(e.label===t.label)return!1;if(e.label===n.label)return!0}if(e.roles.length){if(i=t.roles.filter(function(o){return e.roles.includes(o)}),r=n.roles.filter(function(o){return e.roles.includes(o)}),r.length>i.length)return!0;if(r.length<i.length)return!1}else{if(!n.roles.length&&t.roles.length)return!0;if(n.roles.length&&!t.roles.length)return!1}return!(n.mimeType!=e.mimeType||n.codecs!=e.codecs||t.mimeType==e.mimeType&&t.codecs==e.codecs)}function k2(e,t,n){return Xs(e.width*e.height,t.width*t.height,n.width*n.height)==tn}function Jy(e){return{id:0,originalId:"",groupId:null,primary:!1,type:e,mimeType:"",codecs:"",language:"",originalLanguage:null,label:null,width:null,height:null,encrypted:!1,keyIds:new Set,segments:[],variantIds:[],roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1,baseOriginalId:null}}function $y(e){return{id:0,originalId:"",groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Se([]),mimeType:"",codecs:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"",originalLanguage:null,label:null,type:e,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null}}function Xs(e,t,n){if(t==e&&e!=n)return wn;if(n==e&&e!=t)return tn;if(t>e){if(n<=e||n-e<t-e)return tn;if(n-e>t-e)return wn}else{if(n>e)return wn;if(e-n<e-t)return tn;if(e-n>e-t)return wn}return Ed}function Qy(e,t,n){var i=e.mimeType===t.mimeType&&e.codecs===t.codecs,r=e.mimeType===n.mimeType&&e.codecs===n.codecs;return i&&!r?wn:!i&&r?tn:(t=qy(e,t),e=qy(e,n),t&&!e?wn:!t&&e?tn:Ed)}function Zy(e,t,n){return t=Math.abs(e-t),e=Math.abs(e-n),e<t?tn:t<e?wn:Ed}function Sd(e){switch(e.type){case he:return!e.language;case"image":return!e.tilesLayout;default:return!1}}function wd(e){return cl([e.fastSwitching,e.width,e.frameRate,e.codecs,e.mimeType,e.label,e.roles,e.closedCaptions?Array.from(e.closedCaptions.entries()):null,e.bandwidth,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function Ad(e){return cl([e.fastSwitching,e.channelsCount,e.language,e.bandwidth,e.label,e.codecs,e.mimeType,e.roles,e.audioSamplingRate,e.primary,e.dependencyStream?e.dependencyStream.baseOriginalId:null,Array.from(e.keyIds)])}function zs(e){return cl([e.language,e.label,e.codecs,e.mimeType,e.bandwidth,e.roles])}function Ys(e){return cl([e.width,e.codecs,e.mimeType])}function cl(e){return JSON.stringify(e)}function e0(e){return D2.getOrInsertComputed(e,function(){return It(e)})}K("shaka.util.PeriodCombiner",zt),zt.prototype.setUseStreamOnce=zt.prototype.Yi,zt.prototype.combinePeriods=zt.prototype.lg,zt.prototype.deleteStream=zt.prototype.$h,zt.prototype.getImageStreams=zt.prototype.Nj,zt.prototype.getTextStreams=zt.prototype.Mg,zt.prototype.getVariants=zt.prototype.gk;var tn=1,Ed=0,wn=-1,D2=new Map;function R2(e,t){var n=new DOMParser,i=L2.value()(e);e=null;try{e=n.parseFromString(i,"text/xml")}catch{return null}if(n=e.documentElement,!n||n.getElementsByTagName("parsererror").length||n.tagName!=t)return null;if(!("createNodeIterator"in document))return n;for(t=document.createNodeIterator(e,NodeFilter.SHOW_ALL);e=t.nextNode();)if(e instanceof HTMLElement||e instanceof SVGElement)return null;return n}function t0(e,t){try{var n=zn(e);return R2(n,t)}catch{return null}}var L2=new We(function(){if(typeof trustedTypes<"u"){var e=trustedTypes.createPolicy("shaka-player#xml",{createHTML:function(t){return t}});return function(t){return e.createHTML(t)}}return function(t){return t}});function qs(){var e=this;this.j=this.g=null,this.B=[],this.h=null,this.Ja=1,this.G=[],this.l={vf:"",type:"",profiles:[],vc:null,pb:0,bb:null,qe:0},this.u=new Map,this.C=new Map,this.o=new Map,this.N=new Map,this.Aa=new Map,this.m=new zt,this.J=0,this.Ea=new Pr(5),this.K=new ge(function(){if(e.I&&!e.g.continueLoadingWhenPaused&&(e.H.Ma(e.I,"timeupdate"),e.I.paused)){e.H.ya(e.I,"timeupdate",function(){return a0(e)});return}a0(e)}),this.R=new Yr,this.O=null,this.F=[],this.ha=1/0,this.wa=!1,this.i=null,this.M=0,this.T=!1,this.H=new Ee,this.I=null,this.V=!1,this.aa="",this.oa=function(){return!1},this.X=[],this.ma=new Set,this.za=new Ry}d=qs.prototype,d.configure=function(e,t){var n=this.j&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.oa=t),n&&this.h&&this.h.presentationTimeline.W()&&this.K.Jb(),this.i&&this.i.configure(this.g),this.m&&this.m.Yi(this.g.dash.useStreamOnceInPeriodFlattening)},d.start=function(e,t){var n=this,i;return k(function(r){if(r.g==1)return n.wa=t.isLowLatencyMode(),n.B=[e],n.j=t,T(r,Id(n),2);if(i=r.h,n.j&&Cd(n,i),!n.j)throw new D(2,7,7001);return r.return(n.h)})},d.stop=function(){for(var e=m(this.o.values()),t=e.next();!t.done;t=e.next())t=t.value,t.segmentIndex&&t.segmentIndex.release();return this.m&&this.m.release(),this.g=this.j=null,this.B=[],this.h=null,this.o.clear(),this.N.clear(),this.u.clear(),this.C.clear(),this.l={vf:"",type:"",profiles:[],vc:null,pb:0,bb:null,qe:0},this.m=null,this.K!=null&&(this.K.stop(),this.K=null),this.i&&this.i.destroy(),this.H&&(this.H.release(),this.H=null),this.ma.clear(),this.za.release(),this.R.destroy()},d.update=function(){var e=this,t;return k(function(n){if(n.g==1)return se(n,2),T(n,Id(e),4);if(n.g!=2)return fe(n,0);if(t=ue(n),!e.j||!t)return n.return();e.j.onError(t),G(n)})},d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(e){if(this.h&&this.h.presentationTimeline.W()){var t=e.video||e.audio;if(t&&t.segmentIndex){e=this.h.presentationTimeline.Jc();var n=t.segmentIndex.find(e);n!=null&&(t=t.segmentIndex.get(n))&&(this.J=t.endTime-e,Cd(this,0))}}},d.banLocation=function(e){this.i&&this.i.banLocation(e)},d.setMediaElement=function(e){this.I=e};function Id(e){var t,n,i,r,o,s,u,a,l,c,f;return k(function(p){return p.g==1?(t=4,n="MPD",i=X2(e),r=e.B,i.length?(r=i,n="Patch",t=6):e.B.length>1&&e.i&&(o=Ws(e.i,"Location",!0),o.length&&(r=o)),s=ot(r,e.g.retryParameters),u=Date.now(),T(p,kd(e,s,0,{type:t}),2)):p.g!=3?(a=p.h,e.j?(a.uri&&a.uri!=a.originalUri&&!e.B.includes(a.uri)&&e.B.unshift(a.uri),l=new tt(a.uri),e.aa=l.g.toString(),T(p,P2(e,a.data,a.uri,n),3)):p.return(0)):(c=Date.now(),f=(c-u)/1e3,e.Ea.sample(1,f),e.ma.clear(),p.return(f))})}function P2(e,t,n,i){var r,o,s,u,a,l,c,f,p,h;return k(function(g){if(g.g==1){if(r=t,o=e.g.dash.manifestPreprocessor,s=Aa,o!=s){if(Te("manifest.dash.manifestPreprocessor configuration","Please Use manifest.dash.manifestPreprocessorTXml instead."),u=t0(r,i),!u)throw new D(2,4,4001,n);o(u),r=Ln(u.outerHTML)}if(a=Ko(r,i),!a)throw new D(2,4,4001,n);return l=e.g.dash.manifestPreprocessorTXml,c=Ea,l!=c&&l(a),i==="Patch"?g.return(N2(e,a)):e.g.dash.disableXlinkProcessing?g.return(n0(e,a,n)):(f=e.g.dash.xlinkFailGracefully,p=ul(a,e.g.retryParameters,f,n,e.j.networkingEngine),yr(e.R,p),T(g,p.promise,2))}return h=g.h,g.return(n0(e,h,n))})}function n0(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_,j,O,F,V,le,q,Re,ae,Ve,Ae,de,xe,ft,Ue,we,Ie,wt,At,Mi,jp,Op,Wl,bT,No,FT,VT,HT;return k(function(ki){switch(ki.g){case 1:for(e.i&&e.i.l.clear(),i=[n],r=[],o=new Map,s=De(t,"Location"),u=m(s),a=u.next();!a.done;a=u.next())l=a.value,c=l.attributes.serviceLocation,(f=_t(l))&&(p=pt(i,[f])[0],c&&(e.i?Co(e.i,"Location",c,p):o.set(c,p)),r.push(p));if(e.i?(h=Ws(e.i,"Location",!0),h.length>0&&(i=e.B=h)):r.length&&(i=e.B=r),e.l.vf=t.attributes.id||"",e.l.qe=oe(t,"publishTime",ai)||0,e.G=De(t,"PatchLocation"),g=Promise.resolve(),(v=He(t,"ContentSteering"))&&e.j)for(y=v.attributes.defaultServiceLocation,e.i?(e.i.i=i,e.i.h=y):(e.i=new Io(e.j),e.i.configure(e.g),e.i.setManifestType("DASH"),e.i.i=i,e.i.h=y,(S=_t(v))&&(oe(v,"queryBeforeStart",Iu,!1)?g=Ks(e.i,S):Ks(e.i,S))),x=m(o.keys()),w=x.next();!w.done;w=x.next())I=w.value,L=o.get(I),Co(e.i,"Location",I,L);if(A=De(t,"BaseURL"),C=!1,e.i)for(E=m(A),R=E.next();!R.done;R=E.next())M=R.value,P=M.attributes.serviceLocation,N=_t(M),P&&N&&(Co(e.i,"BaseURL",P,N),C=!0);if(e.X.splice(0),C&&e.i||(b=A.map(_t),e.X.push.apply(e.X,H(pt(i,b)))),_=e.i,j=e.X,O=z2,F=O.call(qs,_,C,j),e.l.bb=F,V=0,A&&A.length&&(V=oe(A[0],"availabilityTimeOffset",Eu)||0),e.l.pb=V,e.J=oe(t,"minimumUpdatePeriod",qn,-1),le=oe(t,"availabilityStartTime",ai),q=oe(t,"timeShiftBufferDepth",qn),Re=e.g.dash.ignoreSuggestedPresentationDelay,ae=null,Re||(ae=oe(t,"suggestedPresentationDelay",qn)),Ve=e.g.dash.ignoreMaxSegmentDuration,Ae=null,Ve||(Ae=oe(t,"maxSegmentDuration",qn)),de=t.attributes.type||"static",e.h&&e.h.presentationTimeline&&(e.V=e.h.presentationTimeline.W()&&de=="static"),e.l.type=de,e.h)for(xe=e.h.presentationTimeline,ft=xe.Hb(),Ue=m(e.o.values()),we=Ue.next();!we.done;we=Ue.next())Ie=we.value,Ie.segmentIndex&&Ie.segmentIndex.Ya(ft);else wt=e.g.dash.ignoreMinBufferTime,At=0,wt||(At=oe(t,"minBufferTime",qn)||0),Mi=0,Mi=ae!=null?Math.min(ae,q||1/0):e.g.defaultPresentationDelay>0?e.g.defaultPresentationDelay:Math.min(At*1.5,q||1/0),xe=new ie(le,Mi,e.g.dash.autoCorrectDrift);return xe.cd(de=="static"),xe.W()&&!isNaN(e.g.availabilityWindowOverride)&&(q=e.g.availabilityWindowOverride),q==null&&(q=1/0),xe.Lf(q),jp=t.attributes.profiles||"",e.l.profiles=jp.split(","),Op={Eb:de!="static",presentationTimeline:xe,ua:null,na:null,qa:null,L:null,bandwidth:0,Og:!1,pb:V,vc:null,profiles:jp.split(","),roles:null,Lb:d0},T(ki,g,2);case 2:return e.M=0,Wl=s0(e,Op,F,t,!1),bT=Wl.duration,No=Wl.periods,(de!="static"||e.V)&&Wl.bi||xe.Ab(bT||1/0),e.T&&e.wa&&xe.Vi(e.ha),xe.Xg(Ae||1),e.T&&e.wa&&(FT=ae??e.g.defaultPresentationDelay,xe.sh(FT)),e.h?(e.h.periodCount=No.length,e.h.gapCount=e.M,T(ki,i0(e,No,!1),4)):T(ki,e.m.lg(No,Op.Eb),6);case 6:var ek=xe,tk=e.m.l,nk=e.m.Mg(),ik=e.m.i,rk=e.g.dash.sequenceMode,Nt=He(t,"ServiceDescription");if(Nt){var Bn=He(Nt,"Latency");if(Nt=He(Nt,"PlaybackRate"),Bn||Nt){var Dn={};Bn&&("target"in Bn.attributes&&(Dn.targetLatency=parseInt(Bn.attributes.target,10)/1e3),"max"in Bn.attributes&&(Dn.maxLatency=parseInt(Bn.attributes.max,10)/1e3),"min"in Bn.attributes&&(Dn.minLatency=parseInt(Bn.attributes.min,10)/1e3)),Nt&&("max"in Nt.attributes&&(Dn.maxPlaybackRate=parseFloat(Nt.attributes.max)),"min"in Nt.attributes&&(Dn.minPlaybackRate=parseFloat(Nt.attributes.min))),Bn=Dn}else Bn=null}else Bn=null;e:{if(Nt=De(t,"SupplementalProperty"),Nt.length){for(Nt=m(Nt),Dn=Nt.next();!Dn.done;Dn=Nt.next())if(Dn=Dn.value,Dn.attributes.schemeIdUri=="urn:mpeg:dash:chaining:2016"){Nt=Dn.attributes.value;break e}}Nt=null}if(e.h={presentationTimeline:ek,variants:tk,textStreams:nk,imageStreams:ik,offlineSessionIds:[],sequenceMode:rk,ignoreManifestTimestampsInSegmentsMode:!1,type:"DASH",serviceDescription:Bn,nextUrl:Nt,periodCount:No.length,gapCount:e.M,isLowLatency:e.T,startTime:null},!xe.lj()){ki.A(7);break}return VT=De(t,"UTCTiming"),T(ki,K2(e,F,VT),8);case 8:if(HT=ki.h,!e.j)return ki.return();xe.Wi(HT);case 7:xe.qf(),e.m&&!e.h.presentationTimeline.W()&&e.m.release();case 4:e.j.makeTextStreamsForClosedCaptions(e.h),O2(e),U2(e,No),G(ki)}})}function i0(e,t,n){var i;return k(function(r){if(r.g==1)return T(r,e.m.lg(t,!0,n),2);e.h.variants=e.m.l,i=e.m.Mg(),i.length>0&&(e.h.textStreams=i),e.h.imageStreams=e.m.i,e.j.filter(e.h),G(r)})}function N2(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N;return k(function(b){if(b.g==1){if(n=t.attributes.mpdId,i=oe(t,"originalPublishTime",ai),!n||n!==e.l.vf||i!==e.l.qe)throw e.G=[],new D(1,4,4052);for(r=[],o=[],s=new Set,u=m(uh(t)),a=u.next();!a.done;a=u.next())if(l=a.value,c=Cu(l.attributes.sel||""),f=c[c.length-1],p=_t(l)||"",f.name==="MPD")if(f.Ec==="mediaPresentationDuration"){h=_t(l)||"";var _=qn(h);if(_!=null){e.l.vc=_;for(var j=m(e.u.values()),O=j.next();!O.done;O=j.next())O.value.vc=_}}else if(f.Ec==="type"){for(e.h.presentationTimeline.cd(p=="static"),e.l.type=p,_=m(e.u.values()),j=_.next();!j.done;j=_.next())j.value.Eb=p=="dynamic";p=="static"&&(e.J=-1)}else f.Ec==="publishTime"?e.l.qe=ai(p)||0:f.Ec===null&&l.tagName==="add"&&o.push(l);else if(f.name==="PatchLocation")lh(e.G,l);else if(f.name==="Period")l.tagName==="add"?o.push(l):l.tagName==="remove"&&f.id&&j2(e,f.id);else if(f.name==="SegmentTemplate"){if(j=Cu(l.attributes.sel||""),_=j[j.length-1],_.Ec){j=r0(e,j),O=_t(l)||"";for(var F=m(j),V=F.next();!V.done;V=F.next())V=e.u.get(V.value),fh(V.L.Oc,l.tagName,_.Ec,O);_=j}else _=[];for(g=_,v=m(g),y=v.next();!y.done;y=v.next())S=y.value,s.add(S)}else if(f.name==="SegmentTimeline"||f.name==="S"){for(_=Cu(l.attributes.sel||""),_=r0(e,_),j=m(_),O=j.next();!O.done;O=j.next())O=e.u.get(O.value),O=Ao(O,Zi,"SegmentTimeline"),F=De(O,"S"),lh(F,l),O.children=F;for(x=_,w=m(x),I=w.next();!I.done;I=w.next())L=I.value,s.add(L)}for(A=m(s),C=A.next();!C.done;C=A.next())E=C.value,o0(e,E);for(R=m(o),M=R.next();!M.done;M=R.next())P=M.value,r.push.apply(r,H(s0(e,{Eb:e.l.type=="dynamic",presentationTimeline:e.h.presentationTimeline,ua:null,na:null,qa:null,L:null,bandwidth:0,Og:!1,pb:e.l.pb,profiles:e.l.profiles,vc:e.l.vc,roles:null,Lb:d0},e.l.bb,P,!0).periods));return r.length?(e.h.periodCount+=r.length,e.h.gapCount=e.M,T(b,i0(e,r,!0),2)):b.A(2)}e.l.type=="static"&&(N=e.l.vc,e.h.presentationTimeline.Ab(N||1/0)),G(b)})}function j2(e,t){e.h.periodCount--;for(var n=m(e.u.keys()),i=n.next();!i.done;i=n.next())if(i=i.value,i.startsWith(t)){var r=e.u.get(i);Ao(r,Zi,"SegmentTimeline").children=[],o0(e,i),e.u.delete(i)}e.F=e.F.filter(function(o){return o!==t})}function r0(e,t){var n="",i="",r=-1,o="";t=m(t);for(var s=t.next();!s.done;s=t.next())s=s.value,s.name==="Period"?n=s.id:s.name==="AdaptationSet"?(i=s.id,s.position!==null&&(r=s.position)):s.name==="Representation"&&(o=s.id);if(t=[],o)t.push(n+","+o);else if(i)for(r=m(e.u.values()),e=r.next();!e.done;e=r.next())e=e.value,e.ua.id===n&&e.qa.id===i&&e.L.id&&t.push(n+","+e.L.id);else if(r>-1)for(i=m(e.u.values()),e=i.next();!e.done;e=i.next())e=e.value,e.ua.id===n&&e.qa.position===r&&e.L.id&&t.push(n+","+e.L.id);return t}function o0(e,t){var n=e.u.get(t),i=e.o.get(t);i.segmentIndex&&i.segmentIndex.Ya(e.h.presentationTimeline.Hb());try{var r=Vy(n,function(o,s,u,a){return c0(e,o,s,u,a)},e.o,!0,e.g.dash.initialSegmentLimit,e.Aa,n.L.aesKey,null,!0,e.C);i.createSegmentIndex=function(){return k(function(o){if(o.g==1)return i.segmentIndex?o.A(0):T(o,r.Sc(),3);i.segmentIndex=o.h,G(o)})}}catch(o){if(t=n.L.contentType,t!=he&&t!="application"&&t!="image"||o.code!=4002)throw o}}function s0(e,t,n,i,r){var o=t.vc;o||(o=oe(i,"mediaPresentationDuration",qn),e.l.vc=o);var s=0;e.h&&e.h.presentationTimeline&&e.V&&(s=e.h.presentationTimeline.$b());var u=[],a=s;i=De(i,"Period");for(var l=0;l<i.length;l++){var c=i[l],f=i[l+1],p=oe(c,"start",qn,a),h=c.attributes.id,g=oe(c,"duration",qn);p=l==0&&p==0&&e.V?s:p;var v=null;if(f){var y=oe(f,"start",qn);y!=null&&(v=y-p+s)}else o!=null&&(v=o-p+s);if(y=Zp,v&&g&&Math.abs(v-g)>y&&v>g&&e.M++,v==null&&(v=g),!(e.O!==null&&h!==null&&p!==null&&p<e.O)||e.F.includes(h)||l+1==i.length){if(p!==null&&(e.O===null||p>e.O)&&(e.O=p),a=_2(e,t,n,{start:p,duration:v,node:c,kf:v==null||!f}),u.push(a),t.ua.id&&v&&e.Aa.set(t.ua.id,v),v==null){a=null;break}a=p+v}}if(r)for(t=m(u),n=t.next();!n.done;n=t.next())n=n.value.id,e.F.includes(n)||e.F.push(n);else e.F=u.map(function(S){return S.id});return o!=null?{periods:u,duration:o+s,bi:!1}:{periods:u,duration:a,bi:!0}}function O2(e){var t=Array.from(e.N.keys()).filter(function(u){return!e.F.includes(u)});t=m(t);for(var n=t.next();!n.done;n=t.next()){n=n.value;for(var i=!0,r=m(e.N.get(n)),o=r.next();!o.done;o=r.next()){o=o.value;var s=e.o.get(o);s&&(s.segmentIndex&&s.segmentIndex.getNumReferences()!=0?i=!1:(e.m&&e.m.$h(s,n),e.o.delete(o)))}i&&e.N.delete(n)}}function U2(e,t){t=new Set(t.map(function(r){return r.id}));for(var n=m(e.C.keys()),i=n.next();!i.done;i=n.next())i=i.value,t.has(i)||e.C.delete(i)}function _2(e,t,n,i){t.ua=Md(e,i.node,null,n),t.na=i,t.ua.pb=t.pb,t.ua.id||(t.ua.id="__shaka_period_"+i.start);var r=De(i.node,"EventStream");n=t.presentationTimeline.Hb(),r=m(r);for(var o=r.next();!o.done;o=r.next())W2(e,i.start,i.duration,o.value,n);for(n=De(i.node,"SupplementalProperty"),n=m(n),r=n.next();!r.done;r=n.next())r=r.value,r.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"&&(r=Js(e,r))&&(t.Lb=r);if(n=De(i.node,"AdaptationSet").map(function(h,g){return u0(e,t,g,h)}).filter(bi),t.Eb){r=[],o=m(n);for(var s=o.next();!s.done;s=o.next()){s=m(s.value.Sk);for(var u=s.next();!u.done;u=s.next())r.push(u.value)}if(r.length!=new Set(r).size)throw new D(2,4,4018)}for(r=new Map,o=m(n),s=o.next();!s.done;s=o.next())for(s=m(s.value.Bj),u=s.next();!u.done;u=s.next()){var a=m(u.value);u=a.next().value,a=a.next().value,r.set(u,a)}if(r.size)for(o=null,s=m(n),u=s.next();!u.done;u=s.next()){u=u.value,a=[];for(var l=m(u.streams),c=l.next(),f={};!c.done;f={Bh:void 0},c=l.next())if(f.Bh=c.value,r.has(f.Bh.originalId)){o||(o=De(i.node,"AdaptationSet").map(function(h,g){return u0(e,t,g,h)}).filter(bi)),c=m(o);for(var p=c.next();!p.done;p=c.next())(p=p.value.streams.find(function(h){return function(g){return g.originalId==h.Bh.originalId}}(f)))&&(p.dependencyStream=r.get(p.originalId),p.originalId+=p.dependencyStream.originalId,a.push(p))}a.length&&u.streams.push.apply(u.streams,H(a))}if(i=n.filter(function(h){return!h.Ih}),n=n.filter(function(h){return h.Ih}),!e.g.disableIFrames){for(n=m(n),r=n.next();!r.done;r=n.next())for(r=r.value,o=r.Ih.split(" "),s=m(i),u=s.next();!u.done;u=s.next())if(u=u.value,o.includes(u.id))for(u=m(u.streams),a=u.next();!a.done;a=u.next())Oh(a.value,r.streams)}if(n=fl(e.g.disableAudio,i,"audio"),r=fl(e.g.disableVideo,i,"video"),o=fl(e.g.disableText,i,he),i=fl(e.g.disableThumbnails,i,"image"),r.length===0&&n.length===0)throw new D(2,4,4004);return{id:t.ua.id,audioStreams:n,videoStreams:r,textStreams:o,imageStreams:i}}function fl(e,t,n){return e||!t.length?[]:t.reduce(function(i,r){return r.contentType!=n||i.push.apply(i,H(r.streams)),i},[])}function u0(e,t,n,i){function r(N){var b=N.attributes["dvb:fontFamily"];N=N.attributes["dvb:url"],b&&N&&(N=pt(t.qa.bb(),[N],t.Lb()),e.j.addFont(b,N[0]))}function o(N){switch(N){case 1:case 5:case 6:case 7:return"srgb";case 9:return"rec2020";case 11:case 12:return"p3"}}function s(N){switch(N){case 1:case 6:case 13:case 14:case 15:return"SDR";case 16:return"PQ";case 18:return"HLG"}}t.qa=Md(e,i,t.ua,null),t.qa.position=n;var u=!1;n=De(i,"Role");var a=n.map(function(N){return N.attributes.value}).filter(bi),l=void 0,c=t.qa.contentType==he;c&&(l="subtitle"),n=m(n);for(var f=n.next();!f.done;f=n.next()){f=f.value;var p=f.attributes.schemeIdUri;if(p==null||p=="urn:mpeg:dash:role:2011")switch(f=f.attributes.value,f){case"main":u=!0;break;case"caption":case"subtitle":l=f}}var h=De(i,"EssentialProperty");n=null;var g=!1;f=null,p=!1,h=m(h);for(var v=h.next();!v.done;v=h.next()){v=v.value;var y=v.attributes.schemeIdUri;if(y=="http://dashif.org/guidelines/trickmode")n=v.attributes.value;else if(y=="urn:mpeg:mpegB:cicp:TransferCharacteristics")var S=s(parseInt(v.attributes.value,10));else if(y=="urn:mpeg:mpegB:cicp:ColourPrimaries")var x=o(parseInt(v.attributes.value,10));else y!="urn:mpeg:mpegB:cicp:MatrixCoefficients"&&(y=="urn:mpeg:dash:ssr:2023"&&e.g.dash.enableFastSwitching?g=!0:y=="urn:dvb:dash:fontdownload:2014"?r(v):y=="urn:mpeg:dash:urlparam:2014"&&(f=Js(e,v))||(p=!0))}if(p)return null;var w=null;for(p=De(i,"SupplementalProperty"),p=m(p),h=p.next();!h.done;h=p.next())h=h.value,v=h.attributes.schemeIdUri,v=="http://dashif.org/guidelines/last-segment-number"?w=parseInt(h.attributes.value,10)-1:v=="urn:mpeg:mpegB:cicp:TransferCharacteristics"?S=s(parseInt(h.attributes.value,10)):v=="urn:mpeg:mpegB:cicp:ColourPrimaries"?x=o(parseInt(h.attributes.value,10)):v=="urn:dvb:dash:fontdownload:2014"?r(h):v=="urn:mpeg:dash:urlparam:2014"&&(f=Js(e,h));f&&(t.Lb=f),f=De(i,"Accessibility");var I=new Map,L;for(f=m(f),p=f.next();!p.done;p=f.next())if(h=p.value,p=h.attributes.schemeIdUri,h=h.attributes.value,p!="urn:scte:dash:cc:cea-608:2015"||e.g.disableText)if(p!="urn:scte:dash:cc:cea-708:2015"||e.g.disableText)p=="urn:mpeg:dash:role:2011"?h!=null&&(a.push(h),h=="captions"&&(l="caption")):p=="urn:tva:metadata:cs:AudioPurposeCS:2007"&&(h=="1"?L="visually impaired":h=="2"?L="hard of hearing":h=="9"&&(L="spoken subtitles"));else if(p=1,h!=null)for(h=m(h.split(";")),v=h.next();!v.done;v=h.next()){y=v.value;var A=v=void 0;y.includes("=")?(y=y.split("="),v="svc"+y[0],A=y[1].split(",")[0].split(":").pop()):(v="svc"+p,p++,A=y),I.set(v,Ce(A))}else I.set("svc1","und");else if(p=1,h!=null)for(h=h.split(";"),v=m(h),y=v.next();!y.done;y=v.next()){A=y.value;var C=y=void 0;A.includes("=")?(A=A.split("="),y=A[0].startsWith("CC")?A[0]:"CC"+A[0],C=A[1]||"und"):(y="CC"+p,h.length==2?p+=2:p++,C=A),I.set(y,Ce(C))}else I.set("CC1","und");f=De(i,"ContentProtection");var E=Ly(e.za,f,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI);t.qa.encrypted=f.length>0;var R=Ce(t.qa.language||"und"),M=t.qa.label,P=new Map;if(i=De(i,"Representation"),!e.g.ignoreSupplementalCodecs){for(f=[],p=m(i),h=p.next();!h.done;h=p.next())v=h.value,(h=ui(v,"urn:scte:dash:scte214-extensions","supplementalCodecs"))&&(v=Pn(v),v.attributes.codecs=h.split(" ").join(","),v.attributes.id&&(v.attributes.supplementalId=v.attributes.id+"_supplementalCodecs"),f.push(v));i.push.apply(i,H(f))}if(f=i.map(function(N){var b=B2(e,t,E,l,R,M,u,a,I,N,L,w);return b&&(b.hdr=b.hdr||S,b.colorGamut=b.colorGamut||x,b.fastSwitching=g,N=N.attributes.dependencyId)?(b.baseOriginalId=N,P.set(N,b),null):b}).filter(function(N){return!!N}),f.length==0&&P.size==0){if(n=t.qa.contentType=="image",e.g.dash.ignoreEmptyAdaptationSet||c||n)return null;throw new D(2,4,4003)}if(!t.qa.contentType||t.qa.contentType=="application")for(t.qa.contentType=f0(f[0].mimeType,f[0].codecs),c=m(f),p=c.next();!p.done;p=c.next())p.value.type=t.qa.contentType;for(c=t.qa.id||"__fake__"+e.Ja++,p=m(f),h=p.next();!h.done;h=p.next()){for(h=h.value,v=m(E.drmInfos),y=v.next();!y.done;y=v.next())y=y.value,y.keyIds=y.keyIds&&h.keyIds?new Set([].concat(H(y.keyIds),H(h.keyIds))):y.keyIds||h.keyIds;e.g.enableAudioGroups&&(h.groupId=c)}return i=i.map(function(N){return N.attributes.supplementalId||N.attributes.id}).filter(bi),{id:c,contentType:t.qa.contentType,language:R,Gm:u,streams:f,drmInfos:E.drmInfos,Ih:n,Sk:i,Bj:P}}function Js(e,t){if((t=vn(t,"urn:mpeg:dash:schema:urlparam:2014","UrlQueryInfo"))&&oe(t,"useMPDUrlQuery",Iu,!1)){var n=t.attributes.queryTemplate;if(n)return function(){return n=="$querypart$"?e.aa:n.split("&").map(function(i){if(i=="$querypart$")return e.aa;var r=/\$query:(.*?)\$/g.exec(i);if(r&&r.length==2){r=r[1];var o=new jr(e.aa).get(r);if(o.length)return r+"="+o[0]}return i}).join("&")}}return null}function B2(e,t,n,i,r,o,s,u,a,l,c,f){t.L=Md(e,l,t.qa,null);var p=t.L.id;if(e.ha=Math.min(e.ha,t.L.pb),e.T=e.ha>0,!G2(t.L))return null;var h=t.na.start;t.bandwidth=oe(l,"bandwidth",Jn)||0,t.roles=u;var g=De(l,"SupplementalProperty"),v=De(l,"EssentialProperty"),y=De(l,"ContentProtection");l=null;var S=v.find(function(j){return j.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"});(S||(S=g.find(function(j){return j.attributes.schemeIdUri=="urn:mpeg:dash:urlparam:2014"})))&&(l=Js(e,S)),l&&(t.Lb=l),S=t.L.contentType,l=S==he||S=="application",S=S=="image",y.length&&(t.qa.encrypted=!0);try{var x=void 0;if(n.hg){var w=t.L.bb,I=t.Lb,L=pt(w(),[n.hg.xk],I()),A=ot(L,e.g.retryParameters);x={bitsKey:128,blockCipherMode:"CBC",iv:n.hg.iv,firstMediaSequenceNumber:0,fetchKey:function(){var j,O,F;return k(function(V){if(V.g==1)return T(V,kd(e,A,6),2);if(V.g!=3){if(j=V.h,!j.data||j.data.byteLength!=16)throw new D(2,4,4049);return O={name:"AES-CBC"},F=x,T(V,B.crypto.subtle.importKey("raw",j.data,O,!0,["decrypt"]),3)}F.cryptoKey=V.h,x.fetchKey=void 0,G(V)})}}}if(t.L.aesKey=x,w=function(j,O,F,V){return c0(e,j,O,F,V)},t.L.Jd)var C=u2(t,w,x);else if(t.L.Bc)C=l2(t,e.o,x);else if(t.L.Oc)C=Vy(t,w,e.o,!!e.h,e.g.dash.initialSegmentLimit,e.Aa,x,f,!1,e.C);else{var E=t.na.duration||0,R=t.L.bb,M=t.L.mimeType,P=t.L.codecs;C={endTime:-1,timeline:-1,Sc:function(){var j=sa(h,E,R());return j.Fb(function(O){O.mimeType=M,O.codecs=P}),Promise.resolve(j)},timescale:1}}}catch(j){if((l||S)&&j.code==4002)return null;throw j}f=zE(e.za,y,n,e.g.ignoreDrmInfo,e.g.dash.keySystemsByURI),f=new Set(f?[f]:[]),y=!1,g.some(function(j){return j.attributes.schemeIdUri=="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&j.attributes.value=="JOC"})&&(y=!0),g=!1,l&&(g=u.includes("forced_subtitle")||u.includes("forced-subtitle"));var N;if(S&&((v=v.find(function(j){return["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"].includes(j.attributes.schemeIdUri)}))&&(N=v.attributes.value),!N))return null;var b;l=t.L.codecs,t.profiles.includes("http://dashif.org/guidelines/dash-if-uhd#hevc-hdr-pq10")&&(l.includes("hvc1.2.4.L153.B0")||l.includes("hev1.2.4.L153.B0"))&&(b="PQ"),v=t.L.id?t.ua.id+","+t.L.id:"",e.G.length&&p&&e.u.set(t.ua.id+","+p,F2(t)),t.L.Cf&&b2(e,t.L.Cf,C,t.presentationTimeline),C.endTime!=-1&&t.ua.id!=null&&t.L.id!=null&&((p=e.C.get(t.ua.id))?(p.endTime=C.endTime,p.hh.includes(t.L.id)||p.hh.push(t.L.id),e.C.set(t.ua.id,p)):e.C.set(t.ua.id,{endTime:C.endTime,timeline:C.timeline,hh:[t.L.id]}));var _=v&&e.o.has(v)?e.o.get(v):{id:e.Ja++,originalId:t.L.id,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){_.segmentIndex&&(_.segmentIndex.release(),_.segmentIndex=null)},segmentIndex:null,mimeType:t.L.mimeType,codecs:l,frameRate:t.L.frameRate,pixelAspectRatio:t.L.pixelAspectRatio,bandwidth:t.bandwidth,width:t.L.width,height:t.L.height,kind:i,encrypted:n.drmInfos.length>0,drmInfos:n.drmInfos,keyIds:f,language:r,originalLanguage:t.qa.language,label:o,type:t.qa.contentType,primary:s,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:t.L.emsgSchemeIdUris,roles:u,forced:g,channelsCount:t.L.yf,audioSamplingRate:t.L.audioSamplingRate,spatialAudio:y,closedCaptions:a,hdr:b,colorGamut:void 0,videoLayout:void 0,tilesLayout:N,accessibilityPurpose:c,external:!1,fastSwitching:!1,fullMimeTypes:new Set([Qe(t.L.mimeType,t.L.codecs)]),isAudioMuxedInVideo:!1,baseOriginalId:null};return _.createSegmentIndex=function(){var j;return k(function(O){if(O.g==1)return _.segmentIndex?O.A(0):(j=_,T(O,C.Sc(),3));j.segmentIndex=O.h,G(O)})},v&&t.Eb&&!e.o.has(v)&&(t=t.ua.id||"",e.o.set(v,_),e.N.getOrInsertComputed(t,function(){return[]}).push(v)),_}function b2(e,t,n,i){if(!e.ma.has(t)){e.ma.add(t);var r=oe(t,"presentationTime",yt)||0,o=He(t,"UTCTiming"),s;(s=o&&o.attributes.schemeIdUri)&&(o=o.attributes.schemeIdUri,s=!(o==="urn:mpeg:dash:utc:http-ntp:2014"||o==="urn:mpeg:dash:utc:ntp:2014"||o==="urn:mpeg:dash:utc:sntp:2014")),s?t=(oe(t,"wallClockTime",ai)||0)*1e3:(t=oe(t,"wallClockTime",yt)||0,t=Pg(t)),n=new Date(t-r/n.timescale*1e3),r=n.getTime()/1e3,isNaN(r)||(i.o||i.uh(r),i=new Map().set("detail",{wallClockTime:t,programStartDate:n}),i=new z("prft",i),e.j.onEvent(i))}}function F2(e){function t(n){return n?(n=Oi(n),n.Jd=null,n.Bc=null,n.Oc=cc(n.Oc),n.Cf=null,n):null}return e=Oi(e),e.ua=t(e.ua),e.qa=t(e.qa),e.L=t(e.L),e.na&&(e.na=Oi(e.na),e.na.node=null),e}function a0(e){var t,n;return k(function(i){switch(i.g){case 1:return t=0,se(i,2),T(i,Id(e),4);case 4:t=i.h,fe(i,3);break;case 2:if(n=ue(i),e.j){if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.j.onError(n),i.return();n.severity=1,e.j.onError(n)}case 3:if(!e.j)return i.return();e.j.onManifestUpdated(),Cd(e,t),G(i)}})}function Cd(e,t){if(!(e.J<0)){var n=e.J;e.g.updatePeriod>=0&&(n=e.g.updatePeriod),e.K.ka(Math.max(n-t,cu(e.Ea)))}}function Md(e,t,n,i){n=n||{contentType:"",mimeType:"",codecs:"",emsgSchemeIdUris:[],frameRate:void 0,pixelAspectRatio:void 0,yf:null,audioSamplingRate:null,pb:0,If:1,encrypted:!1},i=i||n.bb;var r=t.attributes.id,o=t.attributes.supplementalId,s=De(t,"BaseURL"),u,a=!1;if(e.i)for(var l=m(s),c=l.next();!c.done;c=l.next()){var f=c.value;c=f.attributes.serviceLocation,f=_t(f),c&&f&&(Co(e.i,r,c,f),a=!0)}a&&e.i||(u=s.map(_t));var p=e.i;e=t.attributes.contentType||n.contentType,l=t.attributes.mimeType||n.mimeType,c=af([t.attributes.codecs||n.codecs]).join(","),f=oe(t,"frameRate",hx)||n.frameRate;var h=t.attributes.sar||n.pixelAspectRatio,g=V2(De(t,"InbandEventStream"),n.emsgSchemeIdUris),v=De(t,"AudioChannelConfiguration");v=H2(v)||n.yf;var y=oe(t,"audioSamplingRate",yt)||n.audioSamplingRate;e||(e=f0(l,c));var S=He(t,"SegmentBase"),x=He(t,"SegmentTemplate"),w=S&&oe(S,"availabilityTimeOffset",Eu)||0,I=x&&oe(x,"availabilityTimeOffset",Eu)||0,L=s&&s.length&&oe(s[0],"availabilityTimeOffset",Eu)||0;w=n.pb+L+w+I,I=null,(L=He(t,"SegmentSequenceProperties"))&&(L=oe(L,"cadence",Jn))&&(I=L),L=t.attributes.label;var A=De(t,"Label");return A&&A.length&&(A=A[0],nt(A)&&(L=nt(A))),{bb:function(){return pt(i(),s.length?p&&a?Ws(p,r):u||[]:[])},Jd:S||n.Jd,Bc:He(t,"SegmentList")||n.Bc,Oc:x||n.Oc,Cf:He(t,"ProducerReferenceTime")||n.Cf,width:oe(t,"width",yt)||n.width,height:oe(t,"height",yt)||n.height,contentType:e,mimeType:l,codecs:c,frameRate:f,pixelAspectRatio:h,emsgSchemeIdUris:g,id:o||r,originalId:r,language:t.attributes.lang,yf:v,audioSamplingRate:y,pb:w,hf:null,If:I||n.If,label:L||null,encrypted:!1}}function V2(e,t){t=t.slice(),e=m(e);for(var n=e.next();!n.done;n=e.next())n=n.value.attributes.schemeIdUri,t.includes(n)||t.push(n);return t}function H2(e){e=m(e);for(var t=e.next();!t.done;t=e.next()){t=t.value;var n=t.attributes.schemeIdUri;if(n&&(t=t.attributes.value))switch(n){case"urn:mpeg:dash:outputChannelPositionList:2012":return t.trim().split(/ +/).length;case"urn:mpeg:dash:23003:3:audio_channel_configuration:2011":case"urn:dts:dash:audio_channel_configuration:2012":if(t=parseInt(t,10),!t)continue;return t;case"tag:dolby.com,2015:dash:audio_channel_configuration:2015":if(n=[2,1,2,2,2,2,1,2,2,1,1,1,1,2,1,1,2,2],t=parseInt(t,16),!t)continue;for(var i=0,r=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"tag:dolby.com,2014:dash:audio_channel_configuration:2011":case"urn:dolby:dash:audio_channel_configuration:2011":if(n=[1,1,1,1,1,2,2,1,1,2,2,2,1,2,1,1].reverse(),t=parseInt(t,16),!t)continue;for(r=i=0;r<n.length;r++)t&1<<r&&(i+=n[r]);if(i)return i;continue;case"urn:mpeg:mpegB:cicp:ChannelConfiguration":if(n=[0,1,2,3,4,5,6,8,2,3,4,7,8,24,8,12,10,12,14,12,14],(t=parseInt(t,10))&&t>0&&t<n.length)return n[t]}}return null}function G2(e){var t=e.Jd?1:0;return t+=e.Bc?1:0,t+=e.Oc?1:0,t==0?e.contentType==he||e.contentType=="application":(t!=1&&(e.Jd&&(e.Bc=null),e.Oc=null),!0)}function l0(e,t,n,i){var r,o,s,u,a,l,c;return k(function(f){if(f.g==1)return r=[Ut(n)],o=pt(t(),r),s=ot(o,e.g.retryParameters),s.method=i,u=e.j.networkingEngine.request(4,s,{isPreload:e.oa()}),yr(e.R,u),T(f,u.promise,2);if(a=f.h,i=="HEAD"){if(!a.headers||!a.headers.date)return f.return(0);l=a.headers.date}else l=Xe(a.data);return c=Date.parse(l),isNaN(c)?f.return(0):f.return(c-Date.now())})}function K2(e,t,n){var i,r,o,s,u,a,l,c;return k(function(f){switch(f.g){case 1:i=n.map(function(p){return{scheme:p.attributes.schemeIdUri,value:p.attributes.value}}),r=e.g.dash.clockSyncUri,!i.length&&r&&i.push({scheme:"urn:mpeg:dash:utc:http-head:2014",value:r}),o=m(i),s=o.next();case 2:if(s.done){f.A(4);break}switch(u=s.value,se(f,5),a=u.scheme,l=u.value,a){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":return f.A(7);case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":return f.A(8);case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":return c=Date.parse(l),f.return(isNaN(c)?0:c-Date.now());case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":ve("NTP UTCTiming scheme is not supported");break;default:ve("Unrecognized scheme in UTCTiming element",a)}f.A(9);break;case 7:return T(f,l0(e,t,l,"HEAD"),10);case 10:return f.return(f.h);case 8:return T(f,l0(e,t,l,"GET"),11);case 11:return f.return(f.h);case 9:fe(f,3);break;case 5:ue(f);case 3:s=o.next(),f.A(2);break;case 4:return ve("A UTCTiming element should always be given in live manifests! This content may not play on clients with bad clocks!"),f.return(0)}})}function W2(e,t,n,i,r){var o=i.attributes.schemeIdUri||"",s=i.attributes.value||"",u=oe(i,"timescale",yt)||1,a=oe(i,"presentationTimeOffset",yt)||0;i=m(De(i,"Event"));for(var l=i.next();!l.done;l=i.next()){l=l.value;var c=oe(l,"presentationTime",yt)||0,f=oe(l,"duration",yt)||0;c=Math.max((c-a)/u+t,t),f=c+f/u,n!=null&&(c=Math.min(c,t+n),f=Math.min(f,t+n)),f<r||(l={schemeIdUri:o,value:s,startTime:c,endTime:f,id:l.attributes.id||"",timescale:u,eventElement:dh(l),eventNode:cc(l)},e.j.onTimelineRegionAdded(l))}}function c0(e,t,n,i,r){var o,s,u,a;return k(function(l){return l.g==1?(o=yn,s=r?0:1,u=ys(t,n,i,e.g.retryParameters),T(l,kd(e,u,o,{type:s}),2)):(a=l.h,l.return(a.data))})}function f0(e,t){return t=Qe(e,t),$o(t)?he:e.split("/")[0]}function kd(e,t,n,i){return i||(i={}),i.isPreload=e.oa(),t=e.j.networkingEngine.request(n,t,i),yr(e.R,t),t.promise}function X2(e){var t=e.l.qe;if(!e.l.vf||!t||!e.G.length)return[];var n=Date.now()/1e3,i=e.G.filter(function(r){return r=yt(r.attributes.ttl),!r||t+r>n}).map(_t).filter(bi);return i.length?pt(e.B,i):[]}function d0(){return""}function z2(e,t,n){return function(){return e&&t?Ws(e,"BaseURL"):n.slice()}}K("shaka.dash.DashParser",qs),ar("application/dash+xml",function(){return new qs}),ar("video/vnd.mpeg.dash.mpd",function(){return new qs});function dl(){}K("shaka.dependencies",dl),dl.has=function(e){return Dd.has(e)},dl.add=function(e,t){if(!h0[e])throw Error(e+" is not supported");e==p0?Te("mux.js","mux.js is no longer used in Shaka Player."):Dd.set(e,function(){return t})};var p0="muxjs",h0={Hm:p0,ISOBoxer:"ISOBoxer"};dl.Allowed=h0;var Dd=new Map([["ISOBoxer",function(){return B.ISOBoxer}]]);function ke(){this.j=new We(function(){return["Oculus","Quest"].some(function(e){return navigator.userAgent.includes(e.toLowerCase())})?"VR":navigator.userAgent.match(/Smart( ?|_)TV/i)||navigator.userAgent.match(/Android ?TV/i)?"TV":navigator.userAgentData?navigator.userAgentData.mobile?"MOBILE":"DESKTOP":/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)?"MOBILE":navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android"?"MOBILE":"DESKTOP":navigator.userAgent.includes("Android")?"MOBILE":"DESKTOP"}),this.l=new We(function(){return navigator.vendor.includes("Apple")&&(navigator.userAgent.includes("Version/")||navigator.userAgent.includes("OS/"))?"WEBKIT":navigator.userAgent.includes("Edge/")?"EDGE":navigator.userAgent.includes("Chrome/")?"CHROMIUM":navigator.userAgent.includes("Firefox/")?"GECKO":"UNKNOWN"})}function ei(){var e=B.ManagedMediaSource||B.MediaSource;return!!(e&&e.isTypeSupported)}d=ke.prototype,d.kc=function(){return!!navigator.mediaCapabilities},d.Oa=function(){return this.j.value()},d.Ga=function(){return this.l.value()},d.Gd=function(){return!1},d.jh=function(){return!1},d.jf=function(){return!1},d.Oi=function(){return!1},d.se=function(){return!1},d.fd=function(){return!0},d.Ib=function(){var e=B.ManagedSourceBuffer||B.SourceBuffer;return!!e&&!!e.prototype&&!!e.prototype.changeType},d.we=function(){return!0},d.Ti=function(){return 0},d.nc=function(){return Promise.resolve({width:1/0,height:1/0})},d.aj=function(){return!1},d.yh=function(){return!1},d.Wa=function(e){var t=this.Oa();return(t==="TV"||t==="CONSOLE"||t==="CAST")&&(e.ads.customPlayheadTracker=!0,e.ads.skipPlayDetection=!0,e.ads.supportsMultipleMediaElements=!1),e},d.Dh=function(){return!!B.indexedDB},d.Mi=function(){return[]},d.sd=function(e){return B.matchMedia!==void 0&&B.matchMedia("(color-gamut: p3)").matches?e?"HLG":"PQ":"SDR"},d.hj=function(){return!1},d.Ci=function(){return!1},d.Ff=function(){return!1},d.Of=function(){return!0},d.Di=function(){return!1},d.gj=function(){return!0},d.ed=function(){return!1},d.Wg=function(e){return e==="com.apple.fps"},d.Nf=function(){return!0},d.toString=function(){return"Device: "+this.Nb()+" v"+this.Ba()+"; Type: "+this.Oa()};function Rd(){ke.call(this),this.g=new We(function(){var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null}),this.h=new We(function(){return/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1?"xr"in navigator?"APPLE_VR":"MOBILE":"xr"in navigator?"APPLE_VR":"DESKTOP"})}$e(Rd,ke),d=Rd.prototype,d.Ba=function(){return this.g.value()},d.Nb=function(){return"Apple Browser"},d.Oa=function(){return this.h.value()},d.Ga=function(){return"WEBKIT"},d.kc=function(){return!1},d.Gd=function(e,t){return t==="audio"},d.jf=function(){return!0},d.Oi=function(e){return e==="audio"},d.Wa=function(e){return ke.prototype.Wa.call(this,e),e.abr.minTimeToSwitch=.5,e},d.hj=function(){return!0},d.Nf=function(){return!1},(navigator.vendor||"").includes("Apple")&&(/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac"))&&(Fn=function(){return new Rd});function Ld(){if(!g0())throw Error("Not a Chromecast device!");ke.call(this),this.h=new We(function(){var e=navigator.userAgent.match(/Chrome\/(\d+)/);return e?parseInt(e[1],10):null}),this.g=new We(function(){var e=navigator.userAgentData&&navigator.userAgentData.platform||navigator.userAgent;return e=e.toLowerCase(),e.includes("android")?m0:e.includes("fuchsia")?v0:Pd})}$e(Ld,ke),d=Ld.prototype,d.Ba=function(){return this.h.value()},d.Nb=function(){return"Chromecast with "+this.g.value()},d.Oa=function(){return"CAST"},d.Ga=function(){return"CHROMIUM"},d.kc=function(){return ke.prototype.kc.call(this)&&this.g.value()!==Pd},d.Ib=function(){return ke.prototype.Ib.call(this)&&this.g.value()!==Pd},d.Ti=function(){switch(this.g.value()){case m0:return 0;case v0:return 3;default:return 1}},d.nc=function(){var e,t,n,i,r;return k(function(o){switch(o.g){case 1:if(e=B.cast&&cast.__platform__&&cast.__platform__.canDisplayType,t={width:1280,height:720},se(o,2),!(n=e)){o.A(4);break}return T(o,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=3840; height=2160'),5);case 5:n=o.h;case 4:if(n){t.width=3840,t.height=2160,o.A(6);break}if(!(i=e)){o.A(7);break}return T(o,cast.__platform__.canDisplayType('video/mp4; codecs="avc1.640028"; width=1920; height=1080'),8);case 8:i=o.h;case 7:i&&(t.width=1920,t.height=1080);case 6:fe(o,3);break;case 2:r=ue(o),Xn("Failed to check canDisplayType:",r);case 3:return o.return(t)}})},d.Wa=function(e){return ke.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},d.Dh=function(){return!1},d.ed=function(){return!0};function g0(){return navigator.userAgent.includes("CrKey")&&!navigator.userAgent.includes("VIZIO SmartCast")}var m0="Android",v0="Fuchsia",Pd="Linux";g0()&&(Fn=function(){return new Ld});function Nd(){ke.call(this);var e=this;this.i=new We(function(){var t=navigator.userAgent.match(/(Chrome|Firefox)\/(\d+)/);return t?parseInt(t[2],10):null}),this.g=new We(function(){return navigator.userAgent.match(/Edge?\//)?"Edge":navigator.userAgent.includes("Chrome")?"Chrome":navigator.userAgent.includes("Firefox")?"Firefox":"Unknown"}),this.h=new We(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="windows":navigator.platform?navigator.platform.toLowerCase().includes("win32"):!1}),this.u=new We(function(){return ke.prototype.Ib.call(e)?navigator.userAgent.match(/Edge?\//)?!e.h.value():!0:!1}),this.o=new We(function(){return navigator.userAgent.includes("sony.hbbtv.tv")}),this.m=new We(function(){return navigator.userAgentData&&navigator.userAgentData.platform?navigator.userAgentData.platform.toLowerCase()=="android":!!navigator.userAgent.includes("Android")})}$e(Nd,ke),d=Nd.prototype,d.Ba=function(){return this.i.value()},d.Nb=function(){return this.g.value()},d.Gd=function(e){return nc(e)?this.g.value()==="Edge"&&this.h.value():!1},d.jh=function(){return this.g.value()==="Edge"&&this.h.value()},d.jf=function(){return this.g.value()==="Edge"&&this.h.value()},d.Ib=function(){return this.u.value()},d.Wa=function(e){if(ke.prototype.Wa.call(this,e),this.h.value())switch(this.g.value()){case"Firefox":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation"};break;case"Chrome":e.drm.keySystemsMapping={"com.microsoft.playready":"com.microsoft.playready.recommendation.3000","com.microsoft.playready.recommendation":"com.microsoft.playready.recommendation.3000"}}return this.m.value()&&(e.drm.defaultAudioRobustnessForWidevine="",e.drm.defaultVideoRobustnessForWidevine=""),e},d.Ff=function(){return this.g.value()==="Edge"||this.o.value()},d.ed=function(){if(this.Ga()==="GECKO"){var e=this.Ba();return e!==null?e>=100:ke.prototype.ed.call(this)}return ke.prototype.ed.call(this)},d.Wg=function(e){return this.Ga()==="GECKO"?e.startsWith("com.microsoft.playready.recommendation"):ke.prototype.Wg.call(this,e)},Ql=function(){return new Nd};function jd(){ke.apply(this,arguments)}$e(jd,ke),d=jd.prototype,d.Ba=function(){return null},d.Nb=function(){return"Hisense"},d.Oa=function(){return"TV"},d.kc=function(){return!1},d.nc=function(){var e={width:1920,height:1080},t=null;if(B.Hisense_Get4KSupportState)try{t=B.Hisense_Get4KSupportState()}catch{}return t==null&&(t=navigator.userAgent.includes("UHD")),t&&(e.width=3840,e.height=2160),Promise.resolve(e)},d.Wa=function(e){return ke.prototype.Wa.call(this,e),e.streaming.stallSkip=0,e},(navigator.userAgent.includes("Hisense")||navigator.userAgent.includes("VIDAA"))&&(Fn=function(){return new jd});function Od(){ke.call(this),this.g=new We(function(){var e=navigator.userAgent.match(/PlayStation (\d+)/);return e?parseInt(e[1],10):null})}$e(Od,ke),d=Od.prototype,d.Nb=function(){return"PlayStation"},d.Oa=function(){return"CONSOLE"},d.Ga=function(){return"WEBKIT"},d.Ba=function(){return this.g.value()},d.kc=function(){return!1},d.fd=function(){return!1},d.Ib=function(){return!1},d.yh=function(){return this.Ba()===4},d.nc=function(){var e,t,n,i,r;return k(function(o){switch(o.g){case 1:return e={width:1920,height:1080},t=!1,se(o,2),T(o,B.msdk.device.getDisplayInfo(),4);case 4:n=o.h,t=n.resolution==="4K",fe(o,3);break;case 2:return ue(o),se(o,5),T(o,B.msdk.device.getDisplayInfoImmediate(),7);case 7:i=o.h,t=i.resolution==="4K",fe(o,3);break;case 5:r=ue(o),ve("PlayStation: Failed to get the display info:",r);case 3:return t&&(e.width=3840,e.height=2160),o.return(e)}})},d.Wa=function(e){return ke.prototype.Wa.call(this,e),this.Ba()===4&&e.drm.preferredKeySystems.push("com.microsoft.playready"),e.streaming.clearDecodingCache=!0,e},d.Ff=function(){return this.Ba()===4},d.Of=function(){return this.Ba()!==4},navigator.userAgent.includes("PlayStation")&&(Fn=function(){return new Od});function Ud(){ke.call(this);var e=navigator.userAgent.match(/Tizen (\d+).(\d+)/);this.g=e?parseInt(e[1],10):null,this.h=e?parseInt(e[2],10):null}$e(Ud,ke),d=Ud.prototype,d.Ba=function(){return this.g},d.Nb=function(){return"Tizen"},d.Ga=function(){return"CHROMIUM"},d.Oa=function(){return"TV"},d.Gd=function(){return!0},d.se=function(){return this.Ba()===3},d.kc=function(){return!1},d.fd=function(){var e=this.Ba();return e!==null?e>=4:ke.prototype.fd.call(this)},d.Ib=function(){return!1},d.we=function(){return this.g&&this.h?this.g===5?this.h>=5:this.g>5:ke.prototype.we.call(this)},d.nc=function(){var e=B.devicePixelRatio;e={width:B.screen.width*e>1920?3840:1920,height:B.screen.height*e>1080?2160:1080};try{if(webapis.systeminfo&&webapis.systeminfo.getMaxVideoResolution){var t=webapis.systeminfo.getMaxVideoResolution();e.width=t.width,e.height=t.height}else webapis.productinfo.is8KPanelSupported&&webapis.productinfo.is8KPanelSupported()?(e.width=7680,e.height=4320):webapis.productinfo.isUdPanelSupported&&webapis.productinfo.isUdPanelSupported()&&(e.width=3840,e.height=2160)}catch{ve("Tizen: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.Wa=function(e){return ke.prototype.Wa.call(this,e),e.drm.ignoreDuplicateInitData=this.Ba()!==2,this.Ba()===3&&(e.streaming.crossBoundaryStrategy="reset_to_encrypted"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e.streaming.gapPadding=2,e},d.Mi=function(){var e=[];return this.g!==null&&this.g<5&&e.push("opus"),e},d.sd=function(e){try{if(webapis.avinfo.isHdrTvSupport())return e?"HLG":"PQ"}catch{return ke.prototype.sd.call(this,e)}return"SDR"},d.Ci=function(){return!0},d.Di=function(){return this.Ba()===3},navigator.userAgent.includes("Tizen")&&(Fn=function(){return new Ud});function ko(){ke.apply(this,arguments)}$e(ko,ke),ko.prototype.Ba=function(){return null},ko.prototype.Nb=function(){return"Vizio"},ko.prototype.Oa=function(){return"TV"},ko.prototype.kc=function(){return!1},navigator.userAgent.includes("VIZIO SmartCast")&&(Fn=function(){return new ko});function _d(){ke.call(this),this.i=new We(function(){return navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")}),this.h=new We(function(){return navigator.userAgent.includes("SOPOpenBrowser")}),this.g=new We(function(){if(navigator.userAgent.includes("DT_STB_BCM"))return 11;var e=navigator.userAgent.match(/Version\/(\d+)/);return e||(e=navigator.userAgent.match(/OS (\d+)(?:_\d+)?/))?parseInt(e[1],10):null})}$e(_d,ke),d=_d.prototype,d.Ba=function(){return this.g.value()},d.Nb=function(){return"WebKit STB"},d.Oa=function(){return"TV"},d.Ga=function(){return"WEBKIT"},d.kc=function(){return!1},d.fd=function(){var e=this.g.value();return e!==null?e>=15:!0},d.Gd=function(){return this.h.value()},d.nc=function(){return Promise.resolve({width:B.screen.width*B.devicePixelRatio,height:B.screen.height*B.devicePixelRatio})},d.Of=function(){return!this.i.value()},d.Nf=function(){return!1},(navigator.userAgent.includes("SOPOpenBrowser")||navigator.userAgent.includes("DT_STB_BCM")||navigator.userAgent.includes("Sky_STB")||!(!(navigator.vendor||"").includes("Apple")||/(?:iPhone|iPad|iPod)/.test(navigator.userAgent)||navigator.maxTouchPoints>1||navigator.userAgentData&&navigator.userAgentData.platform&&navigator.userAgentData.platform.toLowerCase()=="macos"||navigator.platform&&navigator.platform.toLowerCase().includes("mac")))&&(Fn=function(){return new _d});function Bd(){ke.call(this);var e=this;this.h=Y2(),this.g=null;try{var t=new PalmServiceBridge;t.onservicecallback=function(n){n=JSON.parse(n),e.g=n.configs["tv.model.supportHDR"]||n.configs["tv.config.supportDolbyHDRContents"]||!1},t.call("luna://com.webos.service.config/getConfigs",JSON.stringify({configNames:["tv.model.supportHDR","tv.config.supportDolbyHDRContents"]}))}catch(n){ve("WebOS: getConfigs call failed",n)}}$e(Bd,ke),d=Bd.prototype,d.Ba=function(){return this.h},d.Nb=function(){return"WebOS"},d.Oa=function(){return"TV"},d.Ga=function(){return"CHROMIUM"},d.kc=function(){return!1},d.fd=function(){var e=this.Ba();return e!==null?e>3:ke.prototype.fd.call(this)},d.Ib=function(){return!1},d.we=function(){var e=this.Ba();return e!==null?e>3:ke.prototype.we.call(this)},d.nc=function(){var e={width:1920,height:1080};try{var t=JSON.parse(B.PalmSystem.deviceInfo);e.width=Math.max(1920,t.screenWidth),e.height=Math.max(1080,t.screenHeight)}catch{ve("WebOS: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.Wa=function(e){return ke.prototype.Wa.call(this,e),this.Ba()===3&&(e.streaming.crossBoundaryStrategy="reset"),e.streaming.shouldFixTimestampOffset=!0,e.streaming.stallSkip=0,e},d.sd=function(e){return this.g==null?(ve("WebOS: getConfigs call haven't finished"),ke.prototype.sd.call(this,e)):this.g?e?"HLG":"PQ":"SDR"};function Y2(){var e=null,t=navigator.userAgent.match(/Chrome\/(\d+)/);switch(t&&(e=parseInt(t[1],10)),e){case 38:return 3;case 53:return 4;case 68:return 5;case 79:return 6;case 87:return 22;case 94:return 23;case 108:return 24;case 120:return 25;default:return null}}if(d.gj=function(){return!1},d.ed=function(){var e=this.Ba();return e!==null?e>=6:ke.prototype.ed.call(this)},navigator.userAgent.includes("Web0S")){var q2=new Bd;Fn=function(){return q2}}function bd(){ke.call(this),this.g=navigator.userAgent.includes("Edge/");var e=navigator.userAgent.match(/Edge?\/(\d+)/);this.h=e?parseInt(e[1],10):null}$e(bd,ke),d=bd.prototype,d.Ba=function(){return this.h},d.Nb=function(){return"Xbox"},d.Oa=function(){return"CONSOLE"},d.Ga=function(){return this.g?"EDGE":"CHROMIUM"},d.Gd=function(){return!0},d.jh=function(){return!0},d.jf=function(){return!0},d.aj=function(){return this.g},d.nc=function(){var e={width:1920,height:1080},t=y0();if(t)try{var n=new t.Media.Protection.ProtectionCapabilities,i=t.Media.Protection.ProtectionCapabilityResult;t=null;do t=n.isTypeSupported('video/mp4;codecs="hvc1,mp4a";features="decode-res-x=3840,decode-res-y=2160,decode-bitrate=20000,decode-fps=30,decode-bpc=10,display-res-x=3840,display-res-y=2160,display-bpc=8"',"com.microsoft.playready.recommendation");while(t===i.maybe);t===i.probably&&(e.width=3840,e.height=2160)}catch{ve("Xbox: Error detecting screen size, default screen size 1920x1080.")}return Promise.resolve(e)},d.Wa=function(e){return ke.prototype.Wa.call(this,e),e.drm.parseInbandPsshEnabled=this.g,e.drm.preferredKeySystems.push("com.microsoft.playready"),this.g&&(e.streaming.gapPadding=.01),e},d.Ff=function(){return!0},d.Dh=function(){return!1};function y0(){var e=null;try{e=typeof Windows<"u"?Windows:chrome.webview.hostObjects.sync.Windows}catch{}return e}(navigator.userAgent.includes("Xbox One")||y0()!==null)&&(Fn=function(){return new bd});function T0(e,t,n){this.type=e,this.ea=t,this.segments=n||null}function pl(e,t,n,i){this.id=e,this.name=t,this.attributes=n,this.value=i===void 0?null:i}pl.prototype.toString=function(e){function t(r){return r.name+"="+(isNaN(Number(r.value))?'"'+r.value+'"':r.value)}var n="#"+this.name,i=this.attributes?this.attributes.filter(function(r){return e?!e.has(r.name):!0}).map(t):[];return this.value&&i.unshift(this.value),i.length>0&&(n+=":"+i.join(",")),n};function Fd(e,t){return t?e.toString():(t=new Set().add("AUDIO").add("VIDEO").add("SUBTITLES").add("PATHWAY-ID").add("GROUP-ID").add("URI"),e.toString(t))}function Do(e,t){return e.attributes.find(function(n){return n.name===t})||null}function Y(e,t,n){return(e=Do(e,t))?e.value:n||null}function je(e,t){if(e=Do(e,t),!e)throw new D(2,4,4023,t);return e.value}function x0(e,t,n){n=n===void 0?[]:n,this.ea=t,this.g=e,this.xc=n}function hl(e,t){this.name=e,this.value=t}function An(e,t){return e.filter(function(n){return n.name==t})}function S0(e,t){return e.filter(function(n){return je(n,"TYPE")==t})}function ht(e,t){e=m(e);for(var n=e.next();!n.done;n=e.next())if(n=n.value,n.name===t)return n;return null}function Ro(e,t,n){return n=n===void 0?0:n,(e=ht(e,t))?Number(e.value):n}function nr(e,t,n){return t?w0(e,[t],n):[]}function w0(e,t,n){if(!t.length)return[];var i=t;return n&&n.size&&(i=t.map(function(r){return A0(r,n)})),pt(e,i)}function A0(e,t){if(!t||!t.size)return e;e=String(e).replace(/%7B/g,"{").replace(/%7D/g,"}");var n=e.match(/{\$\w*}/g);if(n){n=m(n);for(var i=n.next();!i.done;i=n.next()){i=i.value;var r=i.slice(2,i.length-1),o=t.get(r);if(o)e=e.replace(i,o);else throw new D(2,4,4039,r)}}return e}function J2(){this.g=0}function Vd(e,t){t=Xe(t),t=t.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`).trim();var n=t.split(/\n+/m);if(!Q2.test(n[0]))throw new D(2,4,4015);t=0;for(var i=!1,r=[],o=!0,s=0;s<n.length;s++){var u=n[s],a=n[s+1];if(u.startsWith("#")&&!u.startsWith("#EXT")||o)o=!1;else{if(u=E0(e,u),i||(C0.has(u.name)?(t=1,i=!0):u.name=="EXT-X-STREAM-INF"||u.name=="EXT-X-MEDIA"?i=!0:M0.has(u.name)&&(t=1,i=!0)),M0.has(u.name)){if(t!=1)throw new D(2,4,4017);o=e,e=Array(Math.max(100,Math.floor((n.length-s)/2))),i=0,u=[];var l=[];for(a=null;s<n.length;s++){var c=n[s];c.startsWith("#EXT")?(c=E0(o,c),C0.has(c.name)?r.push(c):c.name=="EXT-X-MAP"?a=c:c.name=="EXT-X-PART"?l.push(c):c.name=="EXT-X-PRELOAD-HINT"?Y(c,"TYPE")=="PART"?l.push(c):Y(c,"TYPE")=="MAP"&&(c.name="EXT-X-MAP",a=c):u.push(c)):(!c.startsWith("#")||c.startsWith("#EXT"))&&(c=c.trim(),a&&u.push(a),u=new x0(c,u,l),i<e.length?e[i++]=u:(e.push(u),i++),u=[],l=[])}return l.length&&(a&&u.push(a),n=new x0("",u,l),i<e.length?e[i++]=n:(e.push(n),i++)),new T0(t,r,i<e.length?e.slice(0,i):e)}r.push(u),u.name=="EXT-X-STREAM-INF"&&(u.attributes.push(new hl("URI",a)),o=!0)}}return new T0(t,r)}function E0(e,t){e=e.g++;var n=t.match($2);if(!n)throw new D(2,4,4016,t);t=n[1];var i=n[2];n=[];var r;if(i){i=new br(i);var o;for(I0.lastIndex=0,(o=ji(i,I0))&&(r=o[1]),Hd.lastIndex=0,o=ji(i,Hd);o;)n.push(new hl(o[1],o[2]||o[3])),Fr(i),o=ji(i,Hd)}return new pl(e,t,n,r)}var $2=/^#(EXT[^:]*)(?::(.*))?$/,Q2=/^#EXTM3U($|[ \t\n])/m,I0=/^([^,=]+)(?:,|$)/g,Hd=/([^=]+)=(?:"([^"]*)"|([^",]*))(?:,|$)/g,C0=new Set("EXT-X-TARGETDURATION EXT-X-MEDIA-SEQUENCE EXT-X-DISCONTINUITY-SEQUENCE EXT-X-PLAYLIST-TYPE EXT-X-I-FRAMES-ONLY EXT-X-ENDLIST EXT-X-SERVER-CONTROL EXT-X-SKIP EXT-X-PART-INF EXT-X-DATERANGE".split(" ")),M0=new Set("EXTINF EXT-X-BYTERANGE EXT-X-DISCONTINUITY EXT-X-PROGRAM-DATE-TIME EXT-X-KEY EXT-X-DATERANGE EXT-X-MAP EXT-X-GAP EXT-X-TILES".split(" "));function k0(){}function D0(e,t){try{var n=gl(e);return zr({uri:e,originalUri:e,data:n.data,headers:{"content-type":n.contentType},originalRequest:t})}catch(i){return Fi(i)}}function gl(e){var t=e.split(":");if(t.length<2||t[0]!="data")throw new D(2,1,1004,e);if(t=t.slice(1).join(":").split(","),t.length<2)throw new D(2,1,1004,e);var n=t[0];e=B.decodeURIComponent(t.slice(1).join(",")),t=n.split(";"),n=t[0];var i=!1;t.length>1&&t[t.length-1]=="base64"&&(i=!0,t.pop());var r;return i?r=mn(e):r=Ln(e),{data:r,contentType:n,Jh:t}}K("shaka.net.DataUriPlugin",k0),k0.parse=D0,pi("data",D0);function ml(){var e=this;this.g=this.h=null,this.F=1,this.G=new Map,this.K=new Map,this.B=new Map,this.B.set("video",new Map),this.B.set("audio",new Map),this.B.set(he,new Map),this.B.set("image",new Map),this.ec=new Map().set("com.apple.streamingkeydelivery",function(t,n,i){return CI(e,t,n,i)}).set("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",function(t){return MI(e,t)}).set("com.microsoft.playready",function(t){var n=je(t,"METHOD");if(["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n)){var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),t=je(t,"URI"),n=gl(t.split("?")[0]),t=re(n.data);var r=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);r=Xu(t,r,new Set,0),i=si("com.microsoft.playready",i,[{initDataType:"cenc",initData:r}],void 0,n.Jh),(t=dr(["<PLAYREADY>",ri(t),"</PLAYREADY>"].join(`
`)))&&(i.licenseServerUri=ol(t)),i=Promise.resolve(i)}else i=Promise.resolve(null);return i}).set("urn:uuid:3d5e6d35-9b9a-41e8-b843-dd3c6e72c42c",function(t){return kI(e,t)}),this.ab=new Set,this.i=new Map,this.m=null,this.H="",this.Ja=new J2,this.M=-1,this.aa=1/0,this.X=this.Ac=this.Ua=!1,this.C=new ge(function(){if(e.T&&!e.g.continueLoadingWhenPaused&&(e.R.Ma(e.T,"timeupdate"),e.T.paused)){e.R.ya(e.T,"timeupdate",function(){return J0(e)});return}J0(e)}),this.oa=Al,this.l=null,this.Ta=0,this.u=1/0,this.Ea=this.wa=this.O=0,this.V=new Yr,this.I=new Map,this.J=new Map,this.zc=new Map,this.yb=new Map,this.Aa=new Map,this.cc=new Map,this.ma=new Map,this.fc=this.ha=!1,this.ib=new Pr(5),this.j=null,this.N=!0,this.R=new Ee,this.o=this.T=null,this.sb=function(){return!1},this.za=new Map}d=ml.prototype,d.configure=function(e,t){var n=this.h&&e.updatePeriod!=this.g.updatePeriod&&e.updatePeriod>=0;this.g=e,t&&(this.sb=t),this.j&&this.j.configure(this.g),n&&this.l&&this.l.presentationTimeline.W()&&this.C.Jb()},d.start=function(e,t){var n=this,i;return k(function(r){return r.g==1?(n.h=t,n.ha=t.isLowLatencyMode(),T(r,qd(n,[e]).promise,2)):r.g!=3?(i=r.h,n.H=i.uri,T(r,tI(n,i.data),3)):r.return(n.l)})},d.stop=function(){this.C&&(this.C.stop(),this.C=null);var e=[];return this.V&&(e.push(this.V.destroy()),this.V=null),this.g=this.h=null,this.ab.clear(),this.l=null,this.i.clear(),this.K.clear(),this.J.clear(),this.G.clear(),this.zc.clear(),this.yb.clear(),this.Aa.clear(),this.cc.clear(),this.ma.clear(),this.za.clear(),this.j&&this.j.destroy(),this.R&&(this.R.release(),this.R=null),Promise.all(e)},d.update=function(){var e=this,t,n,i,r,o,s,u,a,l,c;return k(function(f){if(f.g==1){if(!Ot(e))return f.return();for(t=[],n=Array.from(e.i.values()),e.u=1/0,e.l.gapCount=0,i=n.filter(function(p){return!p.stream.isAudioMuxedInVideo&&p.stream.segmentIndex}),r=m(i),o=r.next();!o.done;o=r.next())s=o.value,t.push(Z2(e,s));return T(f,Promise.all(t),2)}for(_0(e,i.map(function(p){return p.stream})),u=i.some(function(p){return p.ce==0}),i.length&&!u&&(xl(e,Al),vl(e)),u&&vl(e),a=m(i),l=a.next();!l.done;l=a.next())c=l.value,c.stream.isAudioMuxedInVideo||!c.stream.segmentIndex||Gn(c.stream.segmentIndex)||e.h.disableStream(c.stream);G(f)})};function Gd(e,t){return Ot(e)?e.B.get(t.type):t.rf}function Z2(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_,j,O,F,V,le,q,Re;return k(function(ae){switch(ae.g){case 1:if(t.stream.isAudioMuxedInVideo)return ae.return();for(n=[],i=m(t.P()),r=i.next();!r.done;r=i.next())o=r.value,s=new tt(o),u=s.g,t.Ue&&(t.Qb>=0&&u.add("_HLS_msn",String(t.Qb)),t.Rb>=0&&u.add("_HLS_part",String(t.Rb))),t.Ve&&u.add("_HLS_skip","YES"),Yp(u)&&or(s,Nr(u.toString())),n.push(s.toString());return se(ae,2),T(ae,qd(e,n,!0).promise,4);case 4:a=ae.h,fe(ae,3);break;case 2:throw l=ue(ae),e.h&&e.h.disableStream(t.stream),l;case 3:if(!t.stream.segmentIndex)return ae.return();if(c=Vd(e.Ja,a.data),c.type!=1)throw new D(2,4,4017);return f=a.uri,f==a.originalUri||t.P().includes(f)||t.Df.push(f),p=An(c.ea,"EXT-X-DEFINE"),h=Kd(e,p,f),g=t.stream,v=Gd(e,t),T(ae,V0(e,c,g.mimeType,t.P,h),5);case 5:for(y=ae.h,S=y.keyIds,x=y.drmInfos,w=y.encrypted,I=y.Rh,g.encrypted||!w||I||(g.encrypted=!0),L=function(Ve,Ae){return Ve.size===Ae.size&&[].concat(H(Ve)).every(function(de){return Ae.has(de)})},L(g.keyIds,S)||(g.keyIds=S,g.drmInfos=x,e.h.newDrmInfo(g)),A=z0(e,c,v,h,t.P,t.type),C=A.segments,(E=A.bandwidth)&&(g.bandwidth=E),R=aa(g),M=m(C),P=M.next();!P.done;P=M.next())N=P.value,N.ba&&(N.ba.yd=R);g.segmentIndex.ke(C,e.m.Hb()),C.length&&(b=Ro(c.ea,"EXT-X-MEDIA-SEQUENCE",0),j=(_=ht(c.ea,"EXT-X-SKIP"))?Number(Y(_,"SKIPPED-SEGMENTS")):0,O=b0(b,C),F=O.Qb,V=O.Rb,t.Qb=F+j,t.Rb=V,le=v.get(b),g.segmentIndex.Ya(le)),(q=Gn(g.segmentIndex))&&(t.Wc=q.startTime,Re=C[C.length-1],t.Mc=Re.endTime),ht(c.ea,"EXT-X-ENDLIST")&&(t.ce=!0),Xd(e,c),zd(e,c.ea,g.type,h,t.P),G(ae)}})}d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(){},d.banLocation=function(e){this.j&&this.j.banLocation(e)},d.setMediaElement=function(e){this.T=e};function R0(e,t,n){n=n===void 0?!1:n;for(var i=e.M==-1,r=m(t),o=r.next();!o.done;o=r.next()){o=o.value;var s=o.stream.segmentIndex,u=Gd(e,o);if(s=Gn(s)){u=m(u);for(var a=u.next();!a.done;a=u.next()){a=m(a.value);var l=a.next().value;if(a.next().value==s.startTime){i&&(e.M=Math.max(e.M,l)),o.sg=l;break}}}}if(!(e.M<0))for(t=m(t),i=t.next();!i.done;i=t.next())i=i.value,($s(e,i.type)||n)&&(r=i.stream.segmentIndex)&&(o=e.M-i.sg,o>0&&(r.g.splice(0,o),r=Gn(r))&&(r=-r.startTime,i.stream.segmentIndex.offset(r),L0(e,i,r)))}function eI(e,t){if(e.aa==1/0){t=m(t);for(var n=t.next();!n.done;n=t.next())n=Gn(n.value.stream.segmentIndex),n!=null&&n.h!=null&&(e.aa=Math.min(e.aa,n.h))}if(t=e.aa,t!=1/0){n=m(e.i.values());for(var i=n.next();!i.done;i=n.next())if(i=i.value,!$s(e,i.type)){var r=i.stream.segmentIndex;if(r!=null){var o=Gn(r);if(o)if(o.h==null)Xn("Missing EXT-X-PROGRAM-DATE-TIME for stream",i.P(),"Expect AV sync issues!");else for(L0(e,i,o.h-t-o.startTime),i=m(r),r=i.next();!r.done;r=i.next())r.value.Eh(t)}}}}function L0(e,t,n){if(!(Math.abs(n)<.001)){t.Wc+=n,t.Mc+=n,e=Gd(e,t);for(var i=m(e),r=i.next();!r.done;r=i.next()){var o=m(r.value);r=o.next().value,o=o.next().value,e.set(r,o+n)}t.P()}}function tI(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_,j,O,F,V,le,q,Re,ae,Ve,Ae,de,xe,ft,Ue;return k(function(we){switch(we.g){case 1:return n=rt,i=Vd(e.Ja,t),r=An(i.ea,"EXT-X-DEFINE"),o=[],s=[],u=[],e.m=new ie(null,0),e.m.cd(!0),a=function(){return[e.H]},l=null,c=new Map,e.l={presentationTimeline:e.m,variants:o,textStreams:s,imageStreams:u,offlineSessionIds:[],sequenceMode:e.g.hls.sequenceMode,ignoreManifestTimestampsInSegmentsMode:e.g.hls.ignoreManifestTimestampsInSegmentsMode,type:"HLS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:e.o},i.type==1?(e.N=!1,F=An(i.ea,"EXT-X-DEFINE"),c=Kd(e,F,e.H),l=n.va,V="",le=new Map,T(we,B0(e,e.F++,c,i,a,"",l,V,!0,"Media Playlist",null,le,null,!1,null,!1),7)):(iI(e,r),f=An(i.ea,"EXT-X-MEDIA"),p=An(i.ea,"EXT-X-STREAM-INF"),h=An(i.ea,"EXT-X-IMAGE-STREAM-INF"),g=An(i.ea,"EXT-X-I-FRAME-STREAM-INF"),v=An(i.ea,"EXT-X-SESSION-KEY"),y=An(i.ea,"EXT-X-SESSION-DATA"),S=An(i.ea,"EXT-X-CONTENT-STEERING"),oI(e,y),T(we,sI(e,S),4));case 4:if(!e.g.ignoreSupplementalCodecs){for(x=[],w=m(p),I=w.next(),L={};!I.done;L={ej:void 0},I=w.next())A=I.value,(C=Y(A,"SUPPLEMENTAL-CODECS"))&&(L.ej=C.split(/\s*,\s*/).map(function(Ie){return Ie.split("/")[0]}),E=A.attributes.map(function(Ie){return function(wt){var At=wt.name,Mi=wt.value;return At=="CODECS"&&(Mi=Ie.ej.join(","),wt=wt.value.split(","),wt.length>1&&(wt=Gt("audio",wt))&&(Mi+=","+wt)),new hl(At,Mi)}}(L)),x.push(new pl(A.id,A.name,E,null)));for(p.push.apply(p,H(x)),R=[],M=m(g),P=M.next(),N={};!P.done;N={fj:void 0},P=M.next())b=P.value,(_=Y(b,"SUPPLEMENTAL-CODECS"))&&(N.fj=_.split(/\s*,\s*/).map(function(Ie){return Ie.split("/")[0]}),j=b.attributes.map(function(Ie){return function(wt){var At=wt.name;return wt=wt.value,At=="CODECS"&&(wt=Ie.fj.join(",")),new hl(At,wt)}}(N)),R.push(new pl(b.id,b.name,j,null)));g.push.apply(g,H(R))}return rI(e,p),yI(e,f),O=cI(e,g),T(we,fI(e,p,v,f,a,e.G,O),5);case 5:return o=we.h,s=uI(e,f),T(we,aI(e,h,g),6);case 6:u=we.h,we.A(3);break;case 7:q=we.h,e.i.set(e.H,q),q.stream&&(Re=aa(q.stream),q.stream.segmentIndex.Fb(function(Ie){Ie.ba&&(Ie.ba.yd=Re)})),l=q.stream.type,ae=!0,(e.g.disableAudio&&q.type=="audio"||e.g.disableVideo&&q.type=="video"&&!q.stream.codecs.includes(","))&&(ae=!1),ae&&o.push({id:0,language:Ce(V||"und"),disabledUntilTime:0,primary:!0,audio:q.type=="audio"?q.stream:null,video:q.type=="video"?q.stream:null,bandwidth:q.stream.bandwidth||0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});case 3:if(!e.h)throw new D(2,7,7001);if(G0(e,i),i.type==1&&(Ot(e)&&(K0(e,i),Ve=e.u,e.C.ka(Ve)),Ae=Array.from(e.i.values()),Wd(e,Ae),vl(e),zd(e,i.ea,l,c,a)),e.l.variants=o,e.l.textStreams=s,e.l.imageStreams=u,e.l.startTime=e.o,e.X||!e.g.hls.disableCodecGuessing){we.A(8);break}for(de=[],xe=m(e.l.variants),ft=xe.next();!ft.done;ft=xe.next())Ue=ft.value,Ue.audio&&Ue.audio.codecs===""&&de.push(Ue.audio.createSegmentIndex()),Ue.video&&Ue.video.codecs===""&&de.push(Ue.video.createSegmentIndex());return T(we,Promise.all(de),8);case 8:e.h.makeTextStreamsForClosedCaptions(e.l),G(we)}})}function nI(e,t){var n,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S;return k(function(x){if(x.g==1)return n=uf(e.g.hls.mediaPlaylistFullMimeType),t.length?(i=Y0(e,t),r=i.segment,o=i.segmentIndex,s=r.P(),(u=lo(s[0]))&&(a=Jd.get(u))?x.return(uf(a)):T(x,Promise.all([P0(e,r.ba,0),P0(e,r,o)]),2)):x.return(n);if(l=x.h,c=l[1].mimeType,f=l[0].data,p=l[1].data,h="mp4 mp4a m4s m4i m4a m4f cmfa mp4v m4v cmfv fmp4".split(" "),g=["audio/mp4","video/mp4","video/iso.segment"],v=r.ba||g.includes(c),!v&&io(re(p))){var w=p,I=e.g.disableAudio,L=e.g.disableVideo,A=e.g.disableText,C=re(w),E=new Be().parse(C),R=E.Zd();C=E.Ng();var M=[],P=!1,N=!1;if(!I)switch(R.audio){case"aac":case"aac-loas":E.rb().length&&(M.push("mp4a.40.2"),P=!0);break;case"mp3":E.rb().length&&(M.push("mp4a.40.34"),P=!0);break;case"ac3":E.rb().length&&(M.push("ac-3"),P=!0);break;case"ec3":E.rb().length&&(M.push("ec-3"),P=!0);break;case"opus":E.rb().length&&(M.push("opus"),P=!0)}if(!L)switch(R.video){case"avc":C.codec?M.push(C.codec):M.push("avc1.42E01E"),N=!0;break;case"hvc":C.codec?M.push(C.codec):M.push("hvc1.1.6.L93.90"),N=!0;break;case"av1":M.push("av01.0.01M.08"),N=!0}if(M.length){if(I=P&&!N,L=new Map,N&&!A){for(A=new Vn("video/mp2t"),A.Af(w),w=m(A.Zf()),N=w.next();!N.done;N=w.next())N=N.value,L.set(N,N);A.Qd()}C={type:I?"audio":"video",mimeType:"video/mp2t",codecs:M.join(", "),language:null,height:C.height,width:C.width,channelCount:null,sampleRate:null,closedCaptions:L,ze:null,colorGamut:null,frameRate:C.frameRate,timescale:null}}else C=null;if(y=C)return x.return(y)}else if((v||h.includes(u))&&(S=uw(f,p,e.g.disableText)))return x.return(S);return c?x.return(uf(c)):x.return(n)})}function P0(e,t,n){var i,r,o,s,u,a;return k(function(l){switch(l.g){case 1:return t?(i=yn,r=ys(t.P(),t.Kc(),t.Ic(),e.g.retryParameters),o=t instanceof Q?1:0,T(l,Ci(e,r,i,{type:o}).promise,2)):l.return({mimeType:null,data:null});case 2:if(s=l.h,u=s.data,!t.aesKey){l.A(3);break}return T(l,lf(u,t.aesKey,n),4);case 4:u=l.h;case 3:return t instanceof Q?t.ue(u,!0):t.ue(u),(a=s.headers["content-type"])&&(a=a.split(";")[0].toLowerCase()),l.return({mimeType:a,data:u})}})}function vl(e){if(Ot(e)){if(e.oa==$d){for(var t=1/0,n=1/0,i=m(e.i.values()),r=i.next();!r.done;r=i.next())r=r.value,r.stream.segmentIndex&&r.stream.type!="text"&&!r.stream.isAudioMuxedInVideo&&(t=Math.min(t,r.Mc),n=Math.min(n,r.Wc));t=t-n||0,isNaN(e.g.availabilityWindowOverride)||(t=e.g.availabilityWindowOverride),e.m.Lf(t)}}else e.m.Ab(U0(e));if(!e.m.o)for(t=m(e.i.values()),n=t.next();!n.done;n=t.next())n=n.value,!n.stream.segmentIndex||n.type!="audio"&&n.type!="video"||(n=Gn(n.stream.segmentIndex))&&n.h&&e.m.uh(n.h);e.m.qf()}function iI(e,t){var n=new tt(e.H).g;t=m(t);for(var i=t.next();!i.done;i=t.next()){var r=i.value;i=Y(r,"NAME");var o=Y(r,"VALUE");r=Y(r,"QUERYPARAM"),i&&o&&e.G.getOrInsert(i,o),r&&(i=n.get(r)[0])&&!e.G.has(i)&&e.G.set(r,i)}}function Kd(e,t,n){n=new tt(n).g;var i=new Map;t=m(t);for(var r=t.next();!r.done;r=t.next()){var o=r.value,s=Y(o,"NAME"),u=Y(o,"VALUE");r=Y(o,"QUERYPARAM"),o=Y(o,"IMPORT"),s&&u&&i.getOrInsert(s,u),r&&(s=n.get(r)[0])&&!i.has(s)&&i.set(r,s),o&&(r=e.G.get(o))&&i.set(o,r)}return i}function rI(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=Y(i,"AUDIO");n=Y(i,"VIDEO");var o=Y(i,"SUBTITLES");if(i=N0(e,i),o){var s=Gt(he,i);e.J.set(o,s),Rn(i,s)}r&&(o=Gt("audio",i),o||(o=e.g.hls.defaultAudioCodec),e.J.set(r,o)),n&&(r=Gt("video",i),r||(r=e.g.hls.defaultVideoCodec),e.J.set(n,r))}}function oI(e,t){t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=Y(i,"DATA-ID");n=Y(i,"URI");var o=Y(i,"LANGUAGE");i=Y(i,"VALUE"),r=new Map().set("id",r),n&&r.set("uri",nr([e.H],n,e.G)[0]),o&&r.set("language",o),i&&r.set("value",i),n=new z("sessiondata",r),e.h&&e.h.onEvent(n)}}function sI(e,t){var n,i,r,o,s,u;return k(function(a){if(!e.h||!e.g)return a.return();for(i=m(t),r=i.next();!r.done;r=i.next())if(o=r.value,s=Y(o,"PATHWAY-ID"),u=Y(o,"SERVER-URI"),s&&u){e.j=new Io(e.h),e.j.configure(e.g),e.j.i=[e.H],e.j.setManifestType("HLS"),e.j.h=s,n=Ks(e.j,u);break}return T(a,n,0)})}function uI(e,t){var n=S0(t,"SUBTITLES"),i={};t=m(n);for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=Fd(r,!e.j);i[o]?i[o].push(r):i[o]=[r]}if(t=[],!e.g.disableText)for(var s in i)try{t.push(j0(e,i[s],new Map).stream)}catch(u){if(!e.g.hls.ignoreTextStreamFailures)throw u}for(s=m(n),n=s.next();!n.done;n=s.next())if(i=je(n.value,"GROUP-ID"),(n=e.J.get(i))&&(i=e.K.get(i)))for(i=m(i),r=i.next();!r.done;r=i.next())r=r.value,r.stream.codecs=n,r.stream.mimeType=Yd(he,n)||Tl(he),Lo(r.stream);return t.filter(function(u){return u})}function Lo(e){var t=new Set([Qe(e.mimeType,e.codecs)]);e.segmentIndex&&e.segmentIndex.Fb(function(n){n.mimeType&&t.add(Qe(n.mimeType,e.codecs))}),e.fullMimeTypes=t}function aI(e,t,n){var i,r;return k(function(o){return o.g==1?(i=t.map(function(s){var u,a;return k(function(l){if(l.g==1)return e.g.disableThumbnails?l.return(null):(se(l,2),T(l,TI(e,s),4));if(l.g!=2)return u=l.h,l.return(u.stream);if(a=ue(l),e.g.hls.ignoreImageStreamFailures)return l.return(null);throw a})}).concat(n.map(function(s){if(e.g.disableThumbnails)return null;try{var u=O0(e,s);return u.stream.type!=="image"?null:u.stream}catch(a){if(e.g.hls.ignoreImageStreamFailures)return null;throw a}})),T(o,Promise.all(i),2)):(r=o.h,o.return(r.filter(function(s){return s})))})}function lI(e,t,n){t=t.filter(function(u){var a=Y(u,"URI")||"";return u=Y(u,"TYPE"),u!="SUBTITLES"&&(a!=""||u=="AUDIO")});var i={};t=m(t);for(var r=t.next();!r.done;r=t.next()){r=r.value;var o=Fd(r,!e.j);i[o]?i[o].push(r):i[o]=[r]}for(var s in i)j0(e,i[s],n,!1)}function cI(e,t){return t.map(function(n){return n=O0(e,n),n.stream.type!=="video"?null:n.stream}).filter(function(n){return n})}function fI(e,t,n,i,r,o,s){var u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_,j,O,F,V,le,q,Re,ae,Ve,Ae;return k(function(de){switch(de.g){case 1:if(u=[],a=new Set,e.g.ignoreDrmInfo||!(n.length>0)){de.A(2);break}l=m(n),c=l.next(),f={};case 3:if(c.done){de.A(2);break}if(p=c.value,h=je(p,"METHOD"),g=Y(p,"KEYFORMAT")||"identity",v=null,h=="NONE"){de.A(4);break}if(Sl(h)){f.Ug=nr(r(),je(p,"URI"),o),y=f.Ug.sort().join(""),e.Aa.getOrInsertComputed(y,function(xe){return function(){return Ci(e,ot(xe.Ug,e.g.retryParameters),6).promise}}(f)),de.A(4);break}if(g=="identity")return T(de,$0(e,p,"",r,null,o),12);if(S=e.ec.get(g),!S){x=null,de.A(10);break}return T(de,S(p,"",null),11);case 11:x=de.h;case 10:v=x,de.A(6);break;case 12:v=de.h;case 6:if(v){if(v.keyIds)for(w=m(v.keyIds),I=w.next();!I.done;I=w.next())L=I.value,a.add(L);u.push(v)}case 4:f={Ug:void 0},c=l.next(),de.A(3);break;case 2:for(A={},C=m(t),E=C.next();!E.done;E=C.next())R=E.value,M=Fd(R,!e.j),A[M]?A[M].push(R):A[M]=[R];P=[];for(N in A)b=A[N],_=b[0],j=Y(_,"FRAME-RATE"),O=Number(je(_,"BANDWIDTH"))||Number(Y(_,"AVERAGE-BANDWIDTH")),F=Y(_,"RESOLUTION"),V=m(F?F.split("x"):[null,null]),le=V.next().value,q=V.next().value,Re=Y(_,"VIDEO-RANGE"),(ae=Y(_,"REQ-VIDEO-LAYOUT"))&&ae.includes(",")&&(Ve=ae.split(",").filter(function(xe){return xe=="CH-STEREO"||xe=="CH-MONO"}),ae=Ve[0]),ae=ae||"CH-MONO",Ae=dI(e,b,i),P.push.apply(P,H(vI(e,Ae.audio,Ae.video,O,le,q,j,Re,ae,u,a,s)));return de.return(P.filter(function(xe){return xe!=null}))}})}function dI(e,t,n){for(var i={audio:[],video:[]},r=new Map,o=[],s=!1,u=!1,a=m(t),l=a.next();!l.done;l=a.next()){var c=l.value;l=Y(c,"AUDIO");var f=Y(c,"VIDEO"),p=l||f;p&&(o.includes(p)||o.push(p),(c=Y(c,"PATHWAY-ID"))&&r.set(p,c),l?s=!0:f&&(u=!0))}o.length&&n.length&&(n=n.filter(function(g){return o.includes(je(g,"GROUP-ID"))}),lI(e,n,r)),n=(r=o.sort().join(","))&&e.K.has(r)?e.K.get(r):[],s?i.audio.push.apply(i.audio,H(n)):u&&i.video.push.apply(i.video,H(n)),u=!1;var h=t.map(function(g){return je(g,"URI")});return s=i.audio.find(function(g){return g&&g.P().find(function(v){return h.includes(v)})}),n=N0(e,t[0]),a=Gt("video",n),(l=Gt("audio",n))&&!a?(s="audio",u=i.audio.length>0&&!i.audio.some(function(g){return g.stream.isAudioMuxedInVideo})):!i.audio.length&&!i.video.length&&l&&a?(s="video",n=[[a,l].join()]):i.audio.length&&s?(s="audio",u=!0):s=i.video.length&&!i.audio.length?"audio":"video",u||(t=xI(e,t,n,s),r&&e.g.enableAudioGroups&&(t.stream.groupId=r),t.stream.type=="audio"&&s==="audio"&&i.audio.some(function(g){return g.stream.isAudioMuxedInVideo})&&(e=i.audio[0].stream,t.stream.language=e.language,t.stream.channelsCount=e.channelsCount,t.stream.label=e.label,t.stream.audioSamplingRate=e.audioSamplingRate,t.stream.originalId=e.originalId,t.stream.originalLanguage=e.originalLanguage),i[t.stream.type]=[t]),i}function N0(e,t){return t=Y(t,"CODECS")||"",e.X=t.length>0,e.X||e.g.hls.disableCodecGuessing||(t=[],e.g.disableVideo||t.push(e.g.hls.defaultVideoCodec),e.g.disableAudio||t.push(e.g.hls.defaultAudioCodec),t=t.join(",")),af(t.split(/\s*,\s*/))}function pI(e){return(e=Y(e,"CHANNELS"))?parseInt(e.split("/")[0],10):null}function hI(e){return(e=Y(e,"SAMPLE-RATE"))?parseInt(e,10):null}function gI(e){return e=Y(e,"CHANNELS"),e?(e=e.split("/"),e.length!=2?!1:e[1]==="JOC"||e[1].includes("ATMOS")):!1}function mI(e){return e=je(e,"TYPE").toLowerCase(),e=="subtitles"&&(e=he),e}function vI(e,t,n,i,r,o,s,u,a,l,c,f){for(var p=m(n),h=p.next();!h.done;h=p.next())q0(h.value.stream,r,o,s,u,a,null);for(r=e.g.disableVideo,(!n.length||r)&&(n=[null]),r&&(t=t.filter(function(S){return!S.stream.isAudioMuxedInVideo})),r=e.g.disableAudio,(!t.length||r)&&(t=[null]),r=[],t=m(t),o=t.next();!o.done;o=t.next())for(o=o.value,s=m(n),u=s.next();!u.done;u=s.next()){var g=u.value;(u=o?o.stream:null)&&(u.drmInfos=l,u.keyIds=c),(a=g?g.stream:null)&&(a.drmInfos=l,a.keyIds=c,e.g.disableIFrames||Oh(a,f)),a&&!u&&(a.bandwidth=i),!a&&u&&(u.bandwidth=i),p=o?o.stream.drmInfos:null,h=g?g.stream.drmInfos:null,g=g?g.P().sort().join(","):"";var v=o?o.P().sort().join(","):"",y=[];u&&u.codecs&&y.push(u.codecs),a&&a.codecs&&y.push(a.codecs),g=[g,v,y.sort()].join("-"),u&&a&&!Jp(p,h)||e.ab.has(g)||(u={id:e.F++,language:u?u.language:"und",disabledUntilTime:0,primary:!!u&&u.primary||!!a&&a.primary,audio:u,video:a,bandwidth:i,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},r.push(u),e.ab.add(g))}return r}function yI(e,t){t=S0(t,"CLOSED-CAPTIONS"),e.N=t.length==0,t=m(t);for(var n=t.next();!n.done;n=t.next()){var i=n.value,r=Y(i,"LANGUAGE");n=Ce(r||"und"),r||(r=Y(i,"NAME"))&&(n=r),r=je(i,"GROUP-ID"),i=je(i,"INSTREAM-ID").replace("SERVICE","svc"),e.I.get(r)||e.I.set(r,new Map),e.I.get(r).set(i,n)}}function j0(e,t,n,i){i=i===void 0?!0:i;for(var r=[],o=[],s=new Map,u=m(t),a=u.next(),l={};!a.done;l={pi:void 0},a=u.next()){a=a.value,l.pi=++e.F,l=function(v){return function(){return"shaka://hls-muxed"+v.pi}}(l);var c=i?je(a,"URI"):Y(a,"URI")||l();l=je(a,"GROUP-ID"),r.push(c),o.push(l),s.set(l,c),(a=Y(a,"PATHWAY-ID"))&&n.set(l,a)}if(i=o.sort().join(","),a=t[0],t="",u=mI(a),u==he)t=Y(a,"CODECS")||"";else for(o=m(o),l=o.next();!l.done;l=o.next())if(l=l.value,e.J.has(l)){t=e.J.get(l);break}if(o=r.sort().join(","),u=="audio"&&i&&(o+=i),e.i.has(o))return e.i.get(o);if(l=e.F++,e.j)for(s=m(s),c=s.next();!c.done;c=s.next()){var f=m(c.value);c=f.next().value,f=f.next().value,(c=n.get(c))&&Co(e.j,l,c,f)}n=Y(a,"LANGUAGE"),s=Y(a,"NAME"),c=Y(a,"DEFAULT")=="YES",f=u=="audio"?pI(a):null;var p=u=="audio"?gI(a):!1,h=Y(a,"CHARACTERISTICS"),g=Y(a,"FORCED")=="YES";return a=u=="audio"?hI(a):null,r=yl(e,l,r,t,u,n,c,s,f,null,h,g,a,p),r.stream&&e.g.enableAudioGroups&&(r.stream.groupId=i),e.K.has(i)?e.K.get(i).push(r):e.K.set(i,[r]),e.i.set(o,r),r}function TI(e,t){var n,i,r,o,s,u,a,l,c,f;return k(function(p){return p.g==1?(n=je(t,"URI"),i=Y(t,"CODECS","jpeg")||"",e.i.has(n)?p.return(e.i.get(n)):(r=Y(t,"LANGUAGE"),o=Y(t,"NAME"),s=Y(t,"CHARACTERISTICS"),u=yl(e,e.F++,[n],i,"image",r,!1,o,null,null,s,!1,null,!1),(a=Y(t,"RESOLUTION"))?T(p,u.stream.createSegmentIndex(),3):p.A(2))):(p.g!=2&&(l=Gn(u.stream.segmentIndex),(c=l.tilesLayout)&&(u.stream.width=Number(a.split("x")[0])*Number(c.split("x")[0]),u.stream.height=Number(a.split("x")[1])*Number(c.split("x")[1])),u.stream.closeSegmentIndex()),(f=Y(t,"BANDWIDTH"))&&(u.stream.bandwidth=Number(f)),e.i.set(n,u),p.return(u))})}function O0(e,t){var n="video",i=je(t,"URI"),r=Y(t,"CODECS")||"";if(r=="mjpg"&&(n="image"),e.i.has(i))return e.i.get(i);var o=Y(t,"LANGUAGE"),s=Y(t,"NAME"),u=Y(t,"CHARACTERISTICS");return n=yl(e,e.F++,[i],r,n,o,!1,s,null,null,u,!1,null,!1),r=Y(t,"RESOLUTION"),o=m(r?r.split("x"):[null,null]),r=o.next().value,o=o.next().value,n.stream.width=Number(r)||void 0,n.stream.height=Number(o)||void 0,(t=Y(t,"BANDWIDTH"))&&(n.stream.bandwidth=Number(t)),e.i.set(i,n),n}function xI(e,t,n,i){for(var r=e.F++,o=[],s=m(t),u=s.next();!u.done;u=s.next()){var a=u.value;u=je(a,"URI"),a=Y(a,"PATHWAY-ID"),e.j&&a&&Co(e.j,r,a,u),o.push(u)}if(s=o.sort().join(",")+n.sort().join(","),e.i.has(s))return e.i.get(s);u=o.join(",");e:{if(t=Y(t[0],"CLOSED-CAPTIONS"),i=="video"){if(e.g.disableText){e.N=!1,t=null;break e}if(t){if(t!="NONE"){t=e.I.get(t);break e}e.N=!1}else if(!t&&e.I.size)for(t=m(e.I.keys()),t=t.next();!t.done;t=t.next()){t=e.I.get(t.value);break e}}t=null}return n=_r(i,n),i=yl(e,r,o,n,i,null,!1,u,null,t,null,!1,null,!1),e.i.set(s,i),i}function yl(e,t,n,i,r,o,s,u,a,l,c,f,p,h){function g(I){var L,A,C,E,R,M,P,N,b,_,j,O,F,V,le,q,Re,ae,Ve,Ae;return k(function(de){switch(de.g){case 1:return L=rt,se(de,2),T(de,I.promise,4);case 4:if(A=de.h,I.aborted)return de.return();if(C=A.uri,C!=A.originalUri&&(E=S.P(),E.includes(C)||S.Df.push(C)),R=Vd(e.Ja,A.data),R.type!=1)throw new D(2,4,4017);return M=An(R.ea,"EXT-X-DEFINE"),P=Kd(e,M,C),N=!1,(!e.X&&e.g.hls.disableCodecGuessing||e.N&&r==L.va&&!e.g.hls.disableClosedCaptionsDetection)&&R.segments.length>0&&(e.N=!1,N=!0),b=!e.X&&e.g.hls.disableCodecGuessing,_=Ot(e),T(de,B0(e,0,P,R,v,i,r,o,s,u,a,l,c,f,p,h,void 0,N,b),5);case 5:if(j=de.h,I.aborted)return de.return();O=j.stream,G0(e,R),Ot(e)&&!_&&K0(e,R),S.Wc=j.Wc,S.Mc=j.Mc,S.Ve=j.Ve,S.Ue=j.Ue,S.ce=j.ce,S.rf=j.rf,S.Qb=j.Qb,S.Rb=j.Rb,y.segmentIndex=O.segmentIndex,y.encrypted=O.encrypted,y.drmInfos=O.drmInfos,y.keyIds=O.keyIds,y.mimeType=O.mimeType,y.bandwidth=y.bandwidth||O.bandwidth,y.codecs=y.codecs||O.codecs,y.closedCaptions=y.closedCaptions||O.closedCaptions,y.width=y.width||O.width,y.height=y.height||O.height,y.hdr=y.hdr||O.hdr,y.colorGamut=y.colorGamut||O.colorGamut,y.frameRate=y.frameRate||O.frameRate,y.language=="und"&&O.language!="und"&&(y.language=O.language),y.language=y.language||O.language,y.channelsCount=y.channelsCount||O.channelsCount,y.audioSamplingRate=y.audioSamplingRate||O.audioSamplingRate,Lo(y),y.drmInfos.length&&e.h.newDrmInfo(y),F=!1,(!l&&y.closedCaptions||l&&y.closedCaptions&&l.size!=y.closedCaptions.size)&&(F=!0),e.l&&F&&e.h.makeTextStreamsForClosedCaptions(e.l),r==L.Na&&(V=Gn(O.segmentIndex))&&V.ba&&(y.mimeType="application/mp4",Lo(y)),le=aa(y),y.segmentIndex.Fb(function(xe){xe.ba&&(xe.ba.yd=le)}),SI(e)&&(e.Ac?Wd(e,[S]):(e.Ac=!0,q=Array.from(e.i.values()),Re=q.filter(function(xe){return xe.stream.segmentIndex}),Wd(e,Re),vl(e),ae=e.u,ae>0&&e.C.ka(ae))),zd(e,R.ea,y.type,P,v),e.l&&(e.l.startTime=e.o),fe(de,0);break;case 2:if(Ve=ue(de),y.closeSegmentIndex(),Ve.code===7001)return de.return();if(Ae=e.h.disableStream(y),!Ae)throw Ve;G(de)}})}function v(){return e.j&&n.length>1?Ws(e.j,t):S.Df.concat(w0([e.H],n,e.G))}var y=F0(e,i,r,o,s,u,a,l,c,f,p,h);n.some(function(I){return I.startsWith("shaka://hls-muxed")})&&(y.isAudioMuxedInVideo=!0,y.mimeType="video/mp2t",Lo(y));var S={stream:y,type:r,Df:[],Wc:0,Mc:0,rf:new Map,Ve:!1,Ue:!1,ce:!1,sg:-1,Qb:-1,Rb:-1,P:v},x=null,w;return y.createSegmentIndex=function(){return x||(y.isAudioMuxedInVideo?(y.segmentIndex=new Se([]),Promise.resolve()):(w=qd(e,S.P(),!0),x=new Promise(function(I){I(g(w))})))},y.closeSegmentIndex=function(){x&&!y.segmentIndex&&w.abort(),y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null),x=null},S}function U0(e){var t=1/0;e=m(e.i.values());for(var n=e.next();!n.done;n=e.next())n=n.value,n.stream.segmentIndex&&n.stream.type!="text"&&!n.stream.isAudioMuxedInVideo&&(t=Math.min(t,n.Mc));return t}function _0(e,t){var n=[];t=m(t);for(var i=t.next();!i.done;i=t.next())i=i.value,i.segmentIndex&&i.segmentIndex.Fb(function(r){n.push(r)});e.m.me(n)}function Wd(e,t){if(!Ot(e))for(var n=U0(e),i=m(t),r=i.next();!r.done;r=i.next())r.value.stream.segmentIndex.pd(0,n);_0(e,t.map(function(o){return o.stream})),i=Array.from(e.i.values()).filter(function(o){return o.stream.segmentIndex}),n=i.some(function(o){return o.stream.type=="audio"}),r=i.some(function(o){return o.stream.type=="video"}),i=Ot(e)&&!e.Ua,n=!Ot(e)&&e.Ua&&!(n&&r),e.g.hls.ignoreManifestProgramDateTime||i||n?R0(e,t,i):(eI(e,t),e.g.hls.ignoreManifestProgramDateTimeForTypes.length>0&&R0(e,t))}function $s(e,t){return e.g.hls.ignoreManifestProgramDateTime?!0:e.g.hls.ignoreManifestProgramDateTimeForTypes.includes(t)}function SI(e){if(!e.l)return!1;var t=[],n=[];e=m(e.l.variants);for(var i=e.next();!i.done;i=e.next())i=i.value,i.video&&t.push(i.video),i.audio&&n.push(i.audio);return!(t.length>0&&!t.some(function(r){return r.segmentIndex})||n.length>0&&!n.some(function(r){return r.segmentIndex}))}function B0(e,t,n,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x){S=S===void 0?!0:S,x=x===void 0?!0:x;var w,I,L,A,C,E,R,M,P,N,b,_,j,O,F,V,le,q,Re,ae,Ve,Ae,de,xe,ft,Ue,we,Ie,wt;return k(function(At){switch(At.g){case 1:if(w=i.segments||[],I=w.every(function(Mi){return!!ht(Mi.ea,"EXT-X-GAP")}),!w.length||I)throw new D(2,4,4053);if(wI(e,i),Ot(e)&&Xd(e,i),L=Ot(e)?e.B.get(s):new Map,A=z0(e,i,L,n,r,s),C=A.segments,E=A.bandwidth,b=N=P=M=R=null,!(C.length>0&&S)){At.A(2);break}return T(At,nI(e,C),3);case 3:_=At.h,s!=_.type&&Ot(e)&&(e.B.set(_.type,e.B.get(s)),e.B.set(s,new Map)),s=_.type,u=_.language,c=_.channelCount,g=_.sampleRate,e.g.disableText||(f=_.closedCaptions),M=_.height,R=_.width,P=_.ze,N=_.colorGamut,b=_.frameRate,x&&(y=_.mimeType,o=_.codecs);case 2:if(y){At.A(4);break}return T(At,II(e,s,o,C),5);case 5:y=At.h,s!=he||o||y!="application/mp4"||!C[0]||C[0].ba||(y="text/vtt");case 4:return T(At,V0(e,i,y,r,n),6);case 6:if(j=At.h,O=j.drmInfos,F=j.keyIds,V=j.encrypted,le=j.Rh,V&&!O.length&&!le)throw new D(2,4,4026);return q=F0(e,o,s,u,a,l,c,f,p,h,g,v),q.encrypted=V&&!le,q.drmInfos=O,q.keyIds=F,q.mimeType=y,E&&(q.bandwidth=E),Lo(q),s=="video"&&(R||M||P||N)&&q0(q,R,M,b,P,null,N),Ot(e)&&Xd(e,i),Re=C[0].startTime,ae=C[C.length-1],Ve=ae.endTime,Ae=new Se(C),q.segmentIndex=Ae,xe=(de=ht(i.ea,"EXT-X-SERVER-CONTROL"))?Do(de,"CAN-SKIP-UNTIL")!=null:!1,ft=de?Do(de,"CAN-BLOCK-RELOAD")!=null:!1,Ue=Ro(i.ea,"EXT-X-MEDIA-SEQUENCE",0),we=b0(Ue,C),Ie=we.Qb,wt=we.Rb,At.return({stream:q,type:s,Df:[],P:r,Wc:Re,Mc:Ve,Ve:xe,Ue:ft,ce:!1,sg:-1,Qb:Ie,Rb:wt,rf:L})}})}function b0(e,t){e=e+t.length-1;var n=-1;if(!t.length)return e++,{Qb:e,Rb:n};t=t[t.length-1];var i=t.g;return t.g.length?(n=i.length-1,i[i.length-1].isPreload()||(e++,n=0),{Qb:e,Rb:n}):(e++,t.o&&(n=0),{Qb:e,Rb:n})}function F0(e,t,n,i,r,o,s,u,a,l,c,f){var p=Yd(n,t)||Tl(n),h=[];if(a){a=m(a.split(","));for(var g=a.next();!g.done;g=a.next())h.push(g.value)}return g=void 0,a=null,n==he?g=h.includes("public.accessibility.transcribes-spoken-dialog")&&h.includes("public.accessibility.describes-music-and-sound")?"caption":"subtitle":h.includes("public.accessibility.describes-video")&&(a="visually impaired"),h.length||g!=="subtitle"||h.push("subtitle"),g=null,n!="video"&&(g=o),e={id:e.F++,originalId:o,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:p,codecs:t,kind:n==he?"subtitle":void 0,encrypted:!1,drmInfos:[],keyIds:new Set,language:Ce(i||"und"),originalLanguage:i,label:g,type:n,primary:r,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,frameRate:void 0,pixelAspectRatio:void 0,width:void 0,height:void 0,bandwidth:void 0,roles:h,forced:l,channelsCount:s,audioSamplingRate:c,spatialAudio:f,closedCaptions:u,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,accessibilityPurpose:a,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null},Lo(e),e}function V0(e,t,n,i,r){var o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_,j,O,F;return k(function(V){switch(V.g){case 1:if(o=new Map,!e.g.ignoreDrmInfo&&t.segments){for(s=m(t.segments),u=s.next();!u.done;u=s.next())if(a=u.value,l=An(a.ea,"EXT-X-KEY"),c=null,l.length)for(c=W0(e,t,a.ea,i,r),f=m(l),p=f.next();!p.done;p=f.next())h=p.value,o.set(h,c)}v=g=!1,y=[],S=new Set,x=m(o),w=x.next();case 2:if(w.done){V.A(4);break}if(I=w.value,L=m(I),A=L.next().value,C=L.next().value,E=A,R=C,M=je(E,"METHOD"),M=="NONE"){V.A(3);break}if(g=!0,P=Y(E,"KEYFORMAT")||"identity",N=null,Sl(M)){v=!0,V.A(3);break}if(P=="identity")return T(V,$0(e,E,n,i,R,r),11);if(b=e.ec.get(P),!b){_=null,V.A(9);break}return T(V,b(E,n,R),10);case 10:_=V.h;case 9:N=_,V.A(6);break;case 11:N=V.h;case 6:if(N){if(N.keyIds)for(j=m(N.keyIds),O=j.next();!O.done;O=j.next())F=O.value,S.add(F);y.push(N)}case 3:w=x.next(),V.A(2);break;case 4:return V.return({drmInfos:y,keyIds:S,encrypted:g,Rh:v})}})}function H0(e,t,n,i,r){if(!B.crypto||!B.crypto.subtle)throw ve("Web Crypto API is not available to decrypt AES. (Web Crypto only exists in secure origins like https)"),new D(2,4,4042);var o=0,s=Y(t,"IV","");if(s){var u=ur(s.substr(2));if(u.byteLength!=16)throw new D(2,4,4048)}else o=Ro(n.ea,"EXT-X-MEDIA-SEQUENCE",0);var a=nr(i(),je(t,"URI"),r),l=a.sort().join("");return e.yb.getOrInsertComputed(t.toString()+"-"+o+"-"+l,function(){var c={bitsKey:128,blockCipherMode:"CBC",iv:u,firstMediaSequenceNumber:o};switch(je(t,"METHOD")){case"AES-256":c.bitsKey=256;break;case"AES-256-CTR":c.bitsKey=256,c.blockCipherMode="CTR"}return c.fetchKey=function(){var f,p;return k(function(h){if(h.g==1)return T(h,e.Aa.getOrInsertComputed(l,function(){return Ci(e,ot(a,e.g.retryParameters),6).promise}),2);if(h.g!=3){if(f=h.h,!f.data||f.data.byteLength!=c.bitsKey/8)throw new D(2,4,4049);return p={name:c.blockCipherMode=="CTR"?"AES-CTR":"AES-CBC",length:c.bitsKey},T(h,B.crypto.subtle.importKey("raw",f.data,p,!0,["decrypt"]),3)}c.cryptoKey=h.h,c.fetchKey=void 0,G(h)})},c})}function G0(e,t){e.o==null&&(t=ht(t.ea,"EXT-X-START"))&&(e.o=Number(je(t,"TIME-OFFSET")))}function wI(e,t){var n=ht(t.ea,"EXT-X-PLAYLIST-TYPE");t=ht(t.ea,"EXT-X-ENDLIST"),t=n&&n.value=="VOD"||t,n=n&&n.value=="EVENT"&&!t,n=!t&&!n,t?xl(e,Al):n?xl(e,$d):xl(e,NI)}function Xd(e,t){var n=1/0,i=t.segments;if(i.length)for(var r=i.length-1;r>=0;){var o=ht(i[r].ea,"EXTINF");if(o){n=Number(o.value.split(",")[0]);break}r--}if(i=ht(t.ea,"EXT-X-TARGETDURATION"),!i)throw new D(2,4,4024,"EXT-X-TARGETDURATION");i=Number(i.value),(r=ht(t.ea,"EXT-X-PART-INF"))&&(e.O=Number(je(r,"PART-TARGET"))),t=ht(t.ea,"EXT-X-SERVER-CONTROL"),e.ha&&e.O?(e.u=e.fc?e.O*5<=n?Math.min(e.O,e.u):Math.min(n,e.u):Math.min(e.O,e.u),e.Ea=t?Number(je(t,"PART-HOLD-BACK")):0):(e.u=Math.min(n,e.u),n=t?Do(t,"HOLD-BACK"):null,e.wa=n?Number(n.value):0),e.Ta=Math.max(i,e.Ta)}function K0(e,t){var n=0;if(e.g.defaultPresentationDelay)n=e.g.defaultPresentationDelay;else if(e.Ea)n=e.Ea;else if(e.wa)n=e.wa;else for(var i=t.segments.length,r=i-Math.min(i,e.g.hls.liveSegmentsDelay);r<i;r++){var o=ht(t.segments[r].ea,"EXTINF");n=o?n+Number(o.value.split(",")[0]):n+e.Ta}e.o&&e.o<0&&(n=Math.min(-e.o,n),e.o+=n),e.m.Xi(0),e.m.sh(n),e.m.cd(!1)}function W0(e,t,n,i,r){var o=ht(n,"EXT-X-MAP");if(!o)return null;var s=je(o,"URI"),u=nr(i(),s,r);return s=[u.toString(),Y(o,"BYTERANGE","")].join("-"),e.zc.getOrInsertComputed(s,function(){for(var a=void 0,l=void 0,c=!1,f=m(n),p=f.next();!p.done;p=f.next())p=p.value,p.name=="EXT-X-KEY"?(c=je(p,"METHOD"),Sl(c)&&p.id<o.id?(c=!1,a=H0(e,p,t,i,r)):c=c!="NONE"):p.name=="EXT-X-BYTERANGE"&&p.id<o.id&&(l=p);return AI(u,o,l,a,c)})}function AI(e,t,n,i,r){var o=0,s=null;return t=Y(t,"BYTERANGE"),!t&&n&&(t=n.value),t&&(o=t.split("@"),s=Number(o[0]),o=Number(o[1]),s=o+s-1,i&&(n=s+1-o,n%16&&(s+=16-n%16))),new Wt(function(){return e},o,s,null,null,null,i,r)}function EI(e,t,n,i,r,o,s,u,a,l){var c=i.ea,f=ht(c,"EXTINF"),p=0,h=0,g=null;i.xc.length&&(e.l.isLowLatency=!0);var v=null;if(!e.g.hls.ignoreManifestProgramDateTime){var y=ht(c,"EXT-X-PROGRAM-DATE-TIME");y&&y.value&&(v=ai(y.value),e.Ua=!0)}var S=mi;if(ht(c,"EXT-X-GAP")&&(e.l.gapCount++,S=2),!f){if(i.xc.length==0)throw new D(2,4,4024,"EXTINF");if(!e.ha)return null}var x=[];y=!1;var w=null,I=!1,L=!1;if(e.ha&&i.xc.length){p=t&&B.ReadableStream&&e.g.hls.allowLowLatencyByteRangeOptimization;for(var A=v,C={},E=0;E<i.xc.length;C={Uf:void 0,pe:void 0},E++){var R=i.xc[E],M=E==0?n:x[x.length-1],P=E==0?r:M.endTime,N=Number(Y(R,"DURATION"))||e.O;if(N){var b=P+N,_=0,j=null;if(R.name=="EXT-X-PRELOAD-HINT"?(_=(_=Y(R,"BYTERANGE-START"))?Number(_):0,(M=Y(R,"BYTERANGE-LENGTH"))?j=_+Number(M)-1:_&&(j=Number.MAX_SAFE_INTEGER)):(_=Y(R,"BYTERANGE"),j=m(X0(M,_)),_=j.next().value,j=j.next().value),C.pe=Y(R,"URI"),C.pe){M=mi,Y(R,"GAP")=="YES"&&(e.l.gapCount++,M=2,I=!0),C.Uf=null;var O=function(V){return function(){return V.Uf==null&&(V.Uf=nr(u(),V.pe,o)),V.Uf}}(C);p&&_>=0&&j!=null&&(w=O,y=!0),P=new Q(P,b,O,_,j,t,0,0,1/0,[],"",null,A,M,l),R.name=="EXT-X-PRELOAD-HINT"&&(P.Vg(),L=!0),Y(R,"INDEPENDENT")!="YES"&&E>0&&P.xd(),R=a,R||(x.length&&x[0].mimeType?R=x[0].mimeType:C.pe&&(C=lo(C.pe),R=wl.get(s).get(C)||null)),R&&(P.mimeType=R,Z0.has(R)&&(P.ba=null)),x.push(P),A&&(A+=N)}}}}if(f){if(f=Number(f.value.split(",")[0]),f==0)return null;p=r+f}else if(x.length)p=x[x.length-1].endTime;else return null;y&&(I||x[0].startByte!=0?(y=!1,w=null):x=[]),(f=ht(c,"EXT-X-BYTERANGE"))?(g=m(X0(n,f.value)),h=g.next().value,g=g.next().value):x.length&&(h=x[0].startByte,g=x[x.length-1].endByte),n="",f=null,s=="image"&&(n="1x1",s=ht(c,"EXT-X-TILES"))&&(n=je(s,"LAYOUT"),(s=Y(s,"DURATION"))&&(f=Number(s)));var F=null;return t=new Q(r,p,function(){return w?w():(F==null&&(F=nr(u(),i.g,o)),F||[])},h,g,t,0,0,1/0,x,n,f,v,S,l,x.length>0&&!!i.g),a&&(t.mimeType=a,Z0.has(a)&&(t.ba=null)),y&&(e.fc=!0,t.zi(),L&&t.Vg()),t}function X0(e,t){var n=0,i=null;return t&&(n=t.split("@"),t=Number(n[0]),n=n[1]?Number(n[1]):e.endByte+1,i=n+t-1),[n,i]}function zd(e,t,n,i,r){if(n=="video"||n=="audio"){var o=e.m.m;if(o&&!$s(e,n))for(t=An(t,"EXT-X-DATERANGE"),t=t.filter(function(M){return Do(M,"START-DATE")!=null}).sort(function(M,P){return M=je(M,"START-DATE"),P=je(P,"START-DATE"),M<P?-1:M>P?1:0}),n=0;n<t.length;n++){var s=t[n];try{var u=je(s,"START-DATE"),a=ai(u);if(!isNaN(a)){var l=Math.max(0,a-o),c=null,f=Y(s,"END-DATE");if(f){var p=ai(f);if(!isNaN(p)&&(c=p-o,c<0))continue}if(c==null){var h=Y(s,"DURATION")||Y(s,"PLANNED-DURATION");if(h){var g=parseFloat(h);if(isNaN(g)||(c=l+g),a-o+g<0)continue}}var v=Y(s,"CLASS")||"com.apple.quicktime.HLS",y=Y(s,"END-ON-NEXT")=="YES";if(c==null&&y){for(var S=n+1;S<t.length;S++){var x=Y(t[S],"CLASS")||"com.apple.quicktime.HLS";if(v==x){var w=je(t[S],"START-DATE"),I=ai(w);if(!isNaN(I)&&I&&I>a){c=Math.max(0,I-o);break}}}if(c==null)continue}S=["CLASS","START-DATE","END-DATE","DURATION","END-ON-NEXT"];for(var L=[],A=m(s.attributes),C=A.next();!C.done;C=A.next()){var E=C.value;if(!S.includes(E.name)){var R=A0(E.value,i);(E.name=="X-ASSET-URI"||E.name=="X-ASSET-LIST")&&(R=nr(r(),E.value,i)[0]),L.push({key:E.name,description:"",data:R,mimeType:null,pictureType:null})}}L.length>1&&e.h.onMetadata(v,l,c,L)}}catch{}}}}function z0(e,t,n,i,r,o){function s(M){if(M=lo(M),!M)return null;var P=wl.get(o).get(M);return P||(P=Jd.get(M)),P}var u=t.segments,a=null,l=null,c=null,f=null,p=void 0,h=Ro(t.ea,"EXT-X-DISCONTINUITY-SEQUENCE",-1),g=Ro(t.ea,"EXT-X-MEDIA-SEQUENCE",0),v=ht(t.ea,"EXT-X-SKIP"),y=v?Number(Y(v,"SKIPPED-SEGMENTS")):0,S=g+y,x=0;Ot(e)&&n.has(S)&&(x=n.get(S)),x===0&&e.oa==$d&&n.size>0&&!n.has(S)&&e.m.i!=null&&(x=e.m.Hb());var w=[],I=null;v=[];for(var L=0;L<u.length;L++){var A=u[L];(S=ht(A.ea,"EXT-X-MAP"))&&S.id!==l&&(a=W0(e,t,A.ea,r,i),l=S.id),S=A.g;var C="";S&&(C=lo(S)),C!==f&&(c=s(S),f=C),C=L==0?x:I.endTime,S=g+y+L,ht(A.ea,"EXT-X-DISCONTINUITY")&&(h++,I&&I.ba&&(I.ba.g=C));for(var E=m(A.ea),R=E.next();!R.done;R=E.next())R=R.value,R.name=="EXT-X-KEY"&&(Sl(je(R,"METHOD"))?p=H0(e,R,t,r,i):p=void 0);if(n.set(S,C),C=EI(e,a,I,A,C,i,o,r,c,p)){if((I=Ro(A.ea,"EXT-X-BITRATE"))?(v.push({bitrate:I,duration:C.endTime-C.startTime}),C.bandwidth=I):C.endByte?(A=Uc(C))&&(I=C.endTime-C.startTime,A=A*8/I/1e3,v.push({bitrate:A,duration:I}),C.bandwidth=A):v.length&&(I=v.pop(),I.duration+=C.endTime-C.startTime,v.push(I),C.bandwidth=I.bitrate),C.bandwidth)for(I=m(C.g),A=I.next();!A.done;A=I.next())A.value.bandwidth=C.bandwidth;I=C,C.i=h,$s(e,o)&&e.M!=null&&S<e.M||w.push(C)}}if(t=void 0,v.length&&(t=v.reduce(function(M,P){return M+P.duration},0),t=Math.round(v.reduce(function(M,P){return M+P.bitrate*P.duration},0)/t*1e3)),v=w.some(function(M){return M.h!=null})){for(n={},i=0;i<w.length;n={Ze:void 0,Ye:void 0,Re:void 0,Zc:void 0,Qe:void 0},i++)if(n.Zc=w[i],n.Zc.h==null)for(n.Ye=0,n.Ze=i,r=function(M){return function(){var P=w[M.Ze];if(P){if(P.h!=null)return P.h+M.Ye;M.Ye-=P.endTime-P.startTime,M.Ze+=1}return null}}(n),n.Qe=0,n.Re=i,u=function(M){return function(){var P=w[M.Re];if(P){if(P!=M.Zc&&(M.Qe+=P.endTime-P.startTime),P.h!=null)return P.h+M.Qe;--M.Re}return null}}(n);n.Zc.h==null;)n.Zc.h=u(),n.Zc.h==null&&(n.Zc.h=r())}if(v)for(n=m(w),i=n.next();!i.done;i=n.next())for(r=i.value,i=r.h,r=m(r.g),u=r.next();!u.done;u=r.next())u=u.value,u.h=i,i+=u.endTime-u.startTime;if(n=e.aa,v&&n!=1/0&&!$s(e,o))for(e=m(w),v=e.next();!v.done;v=e.next())v.value.Eh(n);return{segments:w,bandwidth:t}}function Yd(e,t){if(e==he){if(t=="vtt"||t=="wvtt")return"text/vtt";if(t&&t!=="")return"application/mp4"}return e!="image"||t&&t!="jpeg"?e=="audio"&&t=="mp4a.40.34"?"audio/mpeg":t=="mjpg"?"application/mp4":null:"image/jpeg"}function Tl(e){return e==he?"text/vtt":wl.get(e).get("mp4")}function Y0(e,t){e=Ot(e)?Math.trunc((t.length-1)/2):0;for(var n=t[e];n.bc()==2&&e+1<t.length;)e++,n=t[e];return{segment:n,segmentIndex:e}}function II(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,g,v,y;return k(function(S){switch(S.g){case 1:return r=yn,o=Y0(e,i),s=o.segment,s.status==2?S.return(Tl(t)):(a=s.P(),(l=lo(a[0]))&&(c=wl.get(t),(f=c.get(l))||(f=Jd.get(l)))?S.return(f):(u=Yd(t,n))?S.return(u):(h=1,g=ot(a,e.g.retryParameters),se(S,2),g.method="HEAD",T(S,Ci(e,g,r,{type:h}).promise,4)));case 4:v=S.h,p=v.headers["content-type"],fe(S,3);break;case 2:if(y=ue(S),!y||y.code!=1002&&y.code!=1001){S.A(3);break}return g.method="GET",e.g.hls.allowRangeRequestsToGuessMimeType&&(g.headers.Range="bytes=0-0"),T(S,Ci(e,g,r,{type:h}).promise,6);case 6:v=S.h,p=v.headers["content-type"];case 3:if(!p){S.A(7);break}if(u=p.toLowerCase().split(";")[0],u!="application/octet-stream"){S.A(8);break}if(v.data.byteLength){S.A(9);break}return g.method="GET",T(S,Ci(e,g,r,{type:h}).promise,10);case 10:v=S.h;case 9:io(re(v.data))&&(u="video/mp2t");case 8:if(u!="application/octet-stream")return S.return(u);case 7:return S.return(Tl(t))}})}function q0(e,t,n,i,r,o,s){e&&(e.width=Number(t)||void 0,e.height=Number(n)||void 0,e.frameRate=Number(i)||void 0,e.hdr=r||void 0,e.videoLayout=o||void 0,e.colorGamut=s||void 0)}function qd(e,t,n){return Ci(e,ot(t,e.g.retryParameters),0,{type:n?2:3})}function J0(e){var t,n,i,r,o,s;return k(function(u){switch(u.g){case 1:return e.h?(se(u,2),t=Date.now(),T(u,e.update(),4)):u.return();case 4:n=Date.now(),Ot(e)&&(i=(n-t)/1e3,e.ib.sample(1,i),r=e.g.updatePeriod>0?e.g.updatePeriod:e.u,o=Math.max(0,r-cu(e.ib)),e.C.ka(o)),fe(u,3);break;case 2:if(s=ue(u),!e.h)return u.return();if(e.g.raiseFatalErrorOnManifestUpdateRequestFailure)return e.h.onError(s),u.return();s.severity=1,e.h.onError(s),e.C.ka(.1);case 3:if(!e.h)return u.return();e.h.onManifestUpdated(),G(u)}})}function Ot(e){return e.oa!=Al}function xl(e,t){e.oa=t,e.m&&e.m.cd(!Ot(e)),Ot(e)||e.C.stop()}function Ci(e,t,n,i){if(!e.V)throw new D(2,7,7001);return i||(i={}),i.isPreload=e.sb(),t=e.h.networkingEngine.request(n,t,i),yr(e.V,t),t}function Sl(e){return e=="AES-128"||e=="AES-256"||e=="AES-256-CTR"}function CI(e,t,n,i){var r,o,s,u,a,l;return k(function(c){if(c.g==1){if(n=="video/mp2t")throw new D(2,4,4040);if(B.shakaMediaKeysPolyfill==="apple")throw new D(2,4,4041);if(r=je(t,"METHOD"),o=["SAMPLE-AES","SAMPLE-AES-CTR"],!o.includes(r))return c.return(null);s="cenc",r=="SAMPLE-AES"&&(s="cbcs"),u=je(t,"URI"),a=si("com.apple.fps",s,null,u);var f=new tt(u).Db.replace(/-/g,"").toLowerCase();return(l=f.length===32&&/^[0-9a-f]+$/.test(f)?f:null)||!i?c.A(2):T(c,Q0(e,i),3)}return c.g!=2&&(l=c.h),l&&a.keyIds.add(l),c.return(a)})}function MI(e,t){var n=je(t,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n))return Promise.resolve(null);var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),n=je(t,"URI");var r=gl(n.split("?")[0]);return e=e.za.getOrInsertComputed(n.split("?")[0],function(){return re(r.data)}),i=si("com.widevine.alpha",i,[{initDataType:"cenc",initData:e}],void 0,r.Jh),(t=Y(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),Promise.resolve(i)}function kI(e,t){var n=je(t,"METHOD");if(!["SAMPLE-AES","SAMPLE-AES-CTR"].includes(n))return Promise.resolve(null);var i="cenc";n=="SAMPLE-AES"&&(i="cbcs"),n=je(t,"URI");var r=gl(n.split("?")[0]);return e=e.za.getOrInsertComputed(n.split("?")[0],function(){return re(r.data)}),i=si("com.huawei.wiseplay",i,[{initDataType:"cenc",initData:e}],void 0,r.Jh),(t=Y(t,"KEYID"))&&i.keyIds.add(t.toLowerCase().substr(2)),Promise.resolve(i)}function $0(e,t,n,i,r,o){var s,u,a,l,c,f,p,h,g,v;return k(function(y){switch(y.g){case 1:if(n=="video/mp2t")throw new D(2,4,4040);if(B.shakaMediaKeysPolyfill==="apple")throw new D(2,4,4041);if(s=je(t,"METHOD"),u=["SAMPLE-AES","SAMPLE-AES-CTR"],!u.includes(s))return y.return(null);if(a=nr(i(),je(t,"URI"),o),a[0].startsWith("data:text/plain;base64,")){l=oi(mn(a[0].split("data:text/plain;base64,").pop())),y.A(2);break}return c=a.sort().join(""),T(y,e.cc.getOrInsertComputed(c,function(){return Ci(e,ot(a,e.g.retryParameters),6).promise}),3);case 3:f=y.h,l=oi(f.data);case 2:if(p="00000000000000000000000000000000",!r){y.A(4);break}return T(y,Q0(e,r),5);case 5:(h=y.h)&&(p=h);case 4:return g=new Map,g.set(p,l),v="cenc",s=="SAMPLE-AES"&&(v="cbcs"),y.return(Qp(g,v))}})}function Q0(e,t){var n,i,r,o;return k(function(s){return s.g==1?(n=null,e.ma.has(t)?(n=e.ma.get(t),s.A(2)):(i=ys(t.P(),t.Kc(),t.Ic(),e.g.retryParameters),r=yn,T(s,Ci(e,i,r,{type:0}).promise,3))):(s.g!=2&&(o=s.h,t.ue(o.data),n=lw(o.data),e.ma.set(t,n)),s.return(n))})}K("shaka.hls.HlsParser",ml);var Jd=new Map().set("aac","audio/aac").set("ac3","audio/ac3").set("ec3","audio/ec3").set("mp3","audio/mpeg"),DI=new Map().set("mp4","audio/mp4").set("mp4a","audio/mp4").set("m4s","audio/mp4").set("m4i","audio/mp4").set("m4a","audio/mp4").set("m4f","audio/mp4").set("cmfa","audio/mp4").set("ts","video/mp2t").set("tsa","video/mp2t"),RI=new Map().set("mp4","video/mp4").set("mp4v","video/mp4").set("m4s","video/mp4").set("m4i","video/mp4").set("m4v","video/mp4").set("m4f","video/mp4").set("cmfv","video/mp4").set("ts","video/mp2t").set("tsv","video/mp2t"),LI=new Map().set("mp4","application/mp4").set("m4s","application/mp4").set("m4i","application/mp4").set("m4f","application/mp4").set("cmft","application/mp4").set("vtt","text/vtt").set("webvtt","text/vtt").set("ttml","application/ttml+xml"),PI=new Map().set("jpg","image/jpeg").set("png","image/png").set("svg","image/svg+xml").set("webp","image/webp").set("avif","image/avif"),wl=new Map().set("audio",DI).set("video",RI).set("text",LI).set("image",PI),Z0=new Set(["video/mp2t"].concat(H(fi))),Al="VOD",NI="EVENT",$d="LIVE";ar("application/x-mpegurl",function(){return new ml}),ar("application/vnd.apple.mpegurl",function(){return new ml});function El(e){return ol(e)}var jI=new Map().set("com.microsoft.playready",El).set("com.microsoft.playready.recommendation",El).set("com.microsoft.playready.software",El).set("com.microsoft.playready.hardware",El);function Qd(){var e=this;this.h=this.g=null,this.l=[],this.j=null,this.u=1,this.i=null,this.F=new Pr(5),this.o=new ge(function(){OI(e)}),this.C=new Yr,this.m=new Map,this.B=function(){return!1}}d=Qd.prototype,d.configure=function(e,t){this.g=e,t&&(this.B=t)},d.start=function(e,t){var n=this;return k(function(i){if(i.g==1)return n.l=[e],n.h=t,T(i,Zd(n),2);if(!n.h)throw new D(2,7,7001);return i.return(n.j)})};function OI(e){var t;k(function(n){switch(n.g){case 1:return se(n,2),T(n,Zd(e),4);case 4:fe(n,3);break;case 2:t=ue(n),e.h&&(t.severity=1,e.h.onError(t));case 3:if(!e.h)return n.return();G(n)}})}d.stop=function(){return this.g=this.h=null,this.l=[],this.j=null,this.o!=null&&(this.o.stop(),this.o=null),this.m.clear(),this.C.destroy()},d.update=function(){var e=this,t;return k(function(n){if(n.g==1)return se(n,2),T(n,Zd(e),4);if(n.g!=2)return fe(n,0);if(t=ue(n),!e.h||!t)return n.return();e.h.onError(t),G(n)})},d.onExpirationUpdated=function(){},d.onInitialVariantChosen=function(){},d.banLocation=function(){},d.setMediaElement=function(){};function Zd(e){var t,n,i,r,o,s,u;return k(function(a){if(a.g==1)return t=ot(e.l,e.g.retryParameters),n=e.h.networkingEngine,i=Date.now(),r=n.request(0,t,{type:5,isPreload:e.B()}),yr(e.C,r),T(a,r.promise,2);if(o=a.h,!e.h)return a.return();o.uri&&!e.l.includes(o.uri)&&e.l.unshift(o.uri);var l=o.uri,c=o.data,f=e.g.mss.manifestPreprocessor;if(f!=Aa){if(Te("manifest.mss.manifestPreprocessor configuration","Please Use manifest.mss.manifestPreprocessorTXml instead."),c=t0(c,"SmoothStreamingMedia"),!c)throw new D(2,4,4046,l);f(c),c=Ln(c.outerHTML)}var p=Ko(c,"SmoothStreamingMedia");if(!p)throw new D(2,4,4046,l);if(l=e.g.mss.manifestPreprocessorTXml,l!=Ea&&l(p),e.i||(e.i=new ie(null,0)),l=oe(p,"IsLive",Iu,!1))throw new D(2,4,4047);e.i.cd(!l),f=oe(p,"TimeScale",yt,1e7),c=oe(p,"DVRWindowLength",yt),l&&(c===0||isNaN(c))&&(c=1/0);var h=oe(p,"CanSeek",Iu,!1);c===0&&h&&(c=1/0),h=null,c&&c>0&&(h=c/f),l&&!isNaN(e.g.availabilityWindowOverride)&&(h=e.g.availabilityWindowOverride),h==null&&(h=1/0),e.i.Lf(h),c=oe(p,"Duration",yt,1/0),l||e.i.Ab(c/f),l={variants:[],textStreams:[],timescale:f,duration:c/f};var g;for(h=De(p,"Protection"),f=e.g.mss.keySystemsBySystemId,c=[],h=m(h),g=h.next();!g.done;g=h.next())c=c.concat(De(g.value,"ProtectionHeader"));if(c.length){for(h=[],g=0;g<c.length;g++){var v=c[g],y=v.attributes.SystemID.toLowerCase(),S=f[y];if(S){var x;e:{if(x=Dy(v)){x=m(Hn(x,"DATA"));for(var w=x.next();!w.done;w=x.next())if(w=He(w.value,"KID")){x=mn(nt(w)),x=new Uint8Array([x[3],x[2],x[1],x[0],x[5],x[4],x[7],x[6]].concat(H(x.slice(8)))),x=oi(x);break e}}x=null}w=mn(nt(v)),y=ur(y.replace(/-/g,"")),y=[{initData:Xu(w,y,new Set,0),initDataType:"cenc",keyId:x}],y=si(S,"cenc",y),x&&y.keyIds.add(x),(S=jI.get(S))&&(y.licenseServerUri=S(v)),h.push(y)}}f=h}else f=[];for(g=f,h=[],f=[],c=[],p=De(p,"StreamIndex"),p=m(p),v=p.next();!v.done;v=p.next()){v=v.value,S=De(v,"QualityLevel"),y=l.timescale,x=l.duration,w=De(v,"c");for(var I=[],L=0,A=0;A<w.length;++A){var C=w[A],E=w[A+1],R=oe(C,"t",yt),M=oe(C,"d",yt);if(C=oe(C,"r",vt),!M)break;if(R=R??L,(C=C||0)&&C--,C<0)if(E){if(E=oe(E,"t",yt),E==null)break;if(R>=E)break;C=Math.ceil((E-R)/M)-1}else{if(x==1/0)break;if(R/y>=x)break;C=Math.ceil((x*y-R)/M)-1}for(E=0;E<=C;++E)L=R+M,I.push({start:R/y,end:L/y,Md:R}),R=L}for(y=I,S=m(S),x=S.next();!x.done;x=S.next())(x=UI(e,v,x.value,y,g,l))&&(x.type!="audio"||e.g.disableAudio?x.type!="video"||e.g.disableVideo?x.type!=he||e.g.disableText||c.push(x):f.push(x):h.push(x))}for(p=[],h=m(h.length>0?h:[null]),g=h.next();!g.done;g=h.next())for(g=g.value,v=m(f.length>0?f:[null]),I=v.next();!I.done;I=v.next())S=p,y=S.push,x=e,w=g,I=I.value,A=0,w&&w.bandwidth&&w.bandwidth>0&&(A+=w.bandwidth),I&&I.bandwidth&&I.bandwidth>0&&(A+=I.bandwidth),x={id:x.u++,language:w?w.language:"und",disabledUntilTime:0,primary:!!w&&w.primary||!!I&&I.primary,audio:w,video:I,bandwidth:A,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]},y.call(S,x);l.variants=p,l.textStreams=c,e.j?(e.j.variants=l.variants,e.j.textStreams=l.textStreams,e.h.filter(e.j)):(e.j={presentationTimeline:e.i,variants:l.variants,textStreams:l.textStreams,imageStreams:[],offlineSessionIds:[],sequenceMode:e.g.mss.sequenceMode,ignoreManifestTimestampsInSegmentsMode:!1,type:"MSS",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null},e.i.qf()),Promise.resolve(),s=Date.now(),u=(s-i)/1e3,e.F.sample(1,u),G(a)})}function UI(e,t,n,i,r,o){var s=t.attributes.Type;if(s!=="audio"&&s!=="video"&&s!=="text")return ve("Ignoring unrecognized type:",s),null;var u=t.attributes.Language,a=e.u++,l=oe(n,"Bitrate",Jn),c=oe(n,"MaxWidth",Jn),f=oe(n,"MaxHeight",Jn),p=oe(n,"Channels",Jn),h=oe(n,"SamplingRate",Jn),g=o.duration;i.length&&(g=i[i.length-1].end-i[0].start);var v=e.i.getDuration();e.i.Ab(Math.min(g,v)),(v=t.attributes.Name)&&(v+=n.attributes.Index),v||(v=String(a));var y={id:a,originalId:v,groupId:null,createSegmentIndex:function(){return Promise.resolve()},closeSegmentIndex:function(){return Promise.resolve()},segmentIndex:null,mimeType:"",codecs:"",frameRate:void 0,pixelAspectRatio:void 0,bandwidth:l||0,width:c||void 0,height:f||void 0,kind:"",encrypted:r.length>0,drmInfos:r,keyIds:new Set,language:Ce(u||"und"),originalLanguage:u,label:"",type:"",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:[],roles:[],forced:!1,channelsCount:p,audioSamplingRate:h,spatialAudio:!1,closedCaptions:null,hdr:void 0,colorGamut:void 0,videoLayout:void 0,tilesLayout:void 0,matchedStreams:[],mssPrivateData:{duration:g,timescale:o.timescale,codecPrivateData:null},accessibilityPurpose:null,external:!1,fastSwitching:!1,fullMimeTypes:new Set,isAudioMuxedInVideo:!1,baseOriginalId:null};if((r=t.attributes.Subtype)&&((r=HI.get(r))&&y.roles.push(r),r==="main"&&(y.primary=!0)),r=n.attributes.FourCC,(r===null||r==="")&&(r=t.attributes.FourCC),!r){if(s==="audio")r="AAC";else if(s==="video")return ve('FourCC is not defined whereas it is required for a QualityLevel element for a StreamIndex of type "video"'),null}if(!VI.includes(r.toUpperCase()))return ve("Codec not supported:",r),null;switch(n=_I(n,s,r,y),y.mssPrivateData.codecPrivateData=n,s){case"audio":if(!n)return ve("Quality unsupported without CodecPrivateData",s),null;y.type="audio",y.mimeType="mss/audio/mp4",y.codecs=BI(r,n);break;case"video":if(!n)return ve("Quality unsupported without CodecPrivateData",s),null;y.type="video",y.mimeType="mss/video/mp4",y.codecs=bI(n);break;case"text":y.type=he,y.mimeType="application/mp4",(r==="TTML"||r==="DFXP")&&(y.codecs="stpp")}return y.fullMimeTypes.add(Qe(y.mimeType,y.codecs)),y.createSegmentIndex=function(){if(y.segmentIndex)return Promise.resolve();if(e.m.has(y.id))var S=e.m.get(y.id);else S=[],y.type=="video"&&(S=y.mssPrivateData.codecPrivateData.split("00000001").slice(1)),S={id:y.id,type:y.type,codecs:y.codecs,encrypted:y.encrypted,timescale:y.mssPrivateData.timescale,duration:y.mssPrivateData.duration,Bb:S,Fa:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:null,stream:y},S=Zr(new Qr([S])),e.m.set(y.id,S);return S=FI(e,new Wt(function(){return[]},0,null,aa(y),y.mssPrivateData.timescale,S,null,y.encrypted),y,t,i),y.segmentIndex=new Se(S),Promise.resolve()},y.closeSegmentIndex=function(){y.segmentIndex&&(y.segmentIndex.release(),y.segmentIndex=null)},y}function _I(e,t,n,i){if(e=e.attributes.CodecPrivateData)return e;if(t!=="audio")return null;t=i.channelsCount||2,e=i.audioSamplingRate||44100;var r={96e3:0,88200:1,64e3:2,48e3:3,44100:4,32e3:5,24e3:6,22050:7,16e3:8,12e3:9,11025:10,8e3:11,7350:12};return i=r[e],n==="AACH"?(n=new Uint8Array(4),e=r[e*2],n[0]=40|i>>1,n[1]=i<<7|t<<3|e>>1,n[2]=e<<7|8,n[3]=0,t=new Uint16Array(2),t[0]=(n[0]<<8)+n[1],t[1]=(n[2]<<8)+n[3],t[0].toString(16)+t[1].toString(16)):(n=new Uint8Array(2),n[0]=16|i>>1,n[1]=i<<7|t<<3,t=new Uint16Array(1),t[0]=(n[0]<<8)+n[1],t[0].toString(16))}function BI(e,t){var n=0;return e==="AACH"&&(n=5),t?n===0&&(n=(parseInt(t.substr(0,2),16)&248)>>3):(n=2,e==="AACH"&&(n=5)),"mp4a.40."+n}function bI(e){var t=/00000001[0-9]7/.exec(e);return t.length&&e?"avc1."+e.substr(e.indexOf(t[0])+10,6):""}function FI(e,t,n,i,r){var o=i.attributes.Url.replace("{bitrate}",String(n.bandwidth));i=[],r=m(r);for(var s=r.next(),u={};!s.done;u={Pf:void 0},s=r.next())u.Pf=s.value,i.push(new Q(u.Pf.start,u.Pf.end,function(a){return function(){return pt(e.l,[o.replace("{start time}",String(a.Pf.Md))])}}(u),0,null,t,0,0,n.mssPrivateData.duration));return i}K("shaka.mss.MssParser",Qd);var VI="AAC AACL AACH AACP AVC1 H264 TTML DFXP".split(" "),HI=new Map().set("CAPT","main").set("SUBT","alternate").set("DESC","main");ar("application/vnd.ms-sstr+xml",function(){return new Qd});function e1(e,t,n,i,r,o,s){if(n>=200&&n<=299&&n!=202||n==304)return{uri:r||i,originalUri:i,data:t,status:n,headers:e,fromCache:!!e["x-shaka-from-cache"],originalRequest:o};o=null;try{o=zn(t)}catch{}throw new D(n==401||n==403?2:1,1,1001,i,n,o,e,s,r||i)}function ep(){}function Il(e,t,n,i,r,o){var s=new YI;try{Jr(t.headers).forEach(function(c,f){s.append(f,c)})}catch(c){return Fi(new D(1,1,1002,e,c,n))}var u=new XI,a={Wh:!1,jj:!1};if(e=GI(e,t,n,{body:t.body||void 0,headers:s,method:t.method,signal:u.signal,credentials:t.allowCrossSiteCredentials?"include":void 0},a,i,r,t.streamDataCallback,o.minBytesForProgressEvents||0),e=new Ze(e,function(){return a.Wh=!0,u.abort(),Promise.resolve()}),t=t.retryParameters.timeout){var l=new ge(function(){a.jj=!0,u.abort()});l.ka(t/1e3),e.finally(function(){l.stop()})}return e}function GI(e,t,n,i,r,o,s,u,a){var l,c,f,p,h,g,v,y,S,x,w,I,L,A,C;return k(function(E){switch(E.g){case 1:return l=WI,c=zI,p=new ArrayBuffer(0),g=h=0,v={},y=Date.now(),se(E,2),T(E,l(e,i),4);case 4:if(f=E.h,v=KI(f.headers),s(v),i.method=="HEAD"){E.A(5);break}return x=(S=f.headers.get("Content-Length"))?parseInt(S,10):0,f.body?(w=f.clone().body.getReader(),I=function(R){function M(){var P,N,b,_;return k(function(j){switch(j.g){case 1:return se(j,2),T(j,w.read(),4);case 4:P=j.h,fe(j,3);break;case 2:return ue(j),j.return();case 3:if(P.done){j.A(5);break}if(h+=P.value.byteLength,!u){j.A(5);break}return T(j,u(P.value),5);case 5:N=Date.now(),b=h-g,(N-y>100&&b>=a||P.done)&&(_=P.done?0:x-h,o(N-y,b,_),g=h,y=N),P.done?R.close():(R.enqueue(P.value),M()),G(j)}})}M()},new c({start:I}),T(E,f.arrayBuffer(),8)):T(E,f.arrayBuffer(),9);case 8:p=E.h,E.A(5);break;case 9:p=E.h,L=Date.now(),o(L-y,p.byteLength,0);case 5:t.headers.Range&&(A=t.headers.Range.replace("bytes=","").split("-").filter(function(R){return R}).map(function(R){return parseInt(R,10)}),A.length==2&&p.byteLength!=A[1]-A[0]+1&&ve("Payload length does not match range requested bytes",t,f)),fe(E,3);break;case 2:throw C=ue(E),r.Wh?new D(1,1,7001,e,n):r.jj?new D(1,1,1003,e,n):new D(1,1,1002,e,C,n);case 3:return E.return(e1(v,p,f.status,e,f.url,t,n))}})}function KI(e){var t={};return e.forEach(function(n,i){t[i.trim()]=n}),t}function t1(){if(B.ReadableStream)try{new ReadableStream({})}catch{return!1}else return!1;if(B.Response){if(!new Response("").body)return!1}else return!1;return!(!B.fetch||"polyfill"in B.fetch||!B.AbortController)}K("shaka.net.HttpFetchPlugin",ep),ep.isSupported=t1,ep.parse=Il;var WI=B.fetch,XI=B.AbortController,zI=B.ReadableStream,YI=B.Headers;t1()&&(pi("http",Il,2,!0),pi("https",Il,2,!0),pi("blob",Il,2,!0));function n1(){}function Cl(e,t,n,i,r,o){var s=new qI,u=Date.now(),a=0,l=new Promise(function(c,f){s.open(t.method,e,!0),s.responseType="arraybuffer",s.timeout=t.retryParameters.timeout,s.withCredentials=t.allowCrossSiteCredentials;var p={};s.onabort=function(){f(new D(1,1,7001,e,n))},s.onreadystatechange=function(){if(s.readyState===XMLHttpRequest.HEADERS_RECEIVED){var g=s.getAllResponseHeaders().trim().split(`\r
`),v={};g=m(g);for(var y=g.next();!y.done;y=g.next())y=y.value.split(": "),v[y[0].toLowerCase()]=y.slice(1).join(": ");p=v,r(p)}},s.onload=function(g){var v=s.response;try{i(Date.now()-u,g.loaded-a,0);var y=e1(p,v,s.status,e,s.responseURL,t,n);c(y)}catch(S){f(S)}},s.onerror=function(g){f(new D(1,1,1002,e,g,n))},s.ontimeout=function(){f(new D(1,1,1003,e,n))},s.onprogress=function(g){var v=Date.now(),y=o.minBytesForProgressEvents||0,S=g.loaded-a;(v-u>100&&S>=y||g.lengthComputable&&g.loaded==g.total)&&(i(v-u,S,s.readyState==4?0:g.total-g.loaded),a=g.loaded,u=v)};for(var h in t.headers)try{s.setRequestHeader(h.toLowerCase(),t.headers[h])}catch(g){throw new D(1,1,1002,e,g,n)}s.send(t.body)});return new Ze(l,function(){return s.abort(),Promise.resolve()})}K("shaka.net.HttpXHRPlugin",n1),n1.parse=Cl;var qI=B.XMLHttpRequest;pi("http",Cl,1,!0),pi("https",Cl,1,!0),pi("blob",Cl,1,!0);function i1(e,t,n,i,r){this.g=e,this.i=t,this.groupId=n,this.h=i,this.j=r}function tp(e){var t=e.ac(!1);return t?ri(t):e.P().map(function(n){return"{"+encodeURI(n.split("#xywh=")[0])+"}"}).join("")+":"+e.startByte+":"+e.endByte}function JI(e,t){return ys(e.g.P(),e.g.startByte,e.g.endByte,t.streaming.retryParameters)}function r1(){this.g=this.j=this.i=0,this.h=new Map,this.l=0}function o1(e,t){e.i+=t;var n=e.l;return e.l++,e.h.set(n,t),n}r1.prototype.close=function(e,t){if(this.h.has(e)){var n=this.h.get(e);this.h.delete(e),this.j+=n,this.g+=t}};function s1(e){return e.i==0?0:e.j/e.i}function np(e){var t=this;this.u=e,this.i=new Map,this.h=new qr(function(){return ip(t).catch(function(){})}),this.j=[],this.o=function(){},this.m=function(){},this.g=new r1,this.l=!1}np.prototype.destroy=function(){return this.h.destroy()};function $I(e,t,n){e.o=t,e.m=n}function ip(e){e.l=!0;var t=e.j.map(function(n){return n()});return e.j=[],Promise.all(t)}np.prototype.queue=function(e,t,n,i,r){var o=this;_e(this.h);var s=(this.i.get(e)||Promise.resolve()).then(function(){var u,a,l,c,f,p,h;return k(function(g){if(g.g==1)return T(g,eC(o,t),2);if(u=g.h,o.h.g)throw new D(2,9,7001);if(i)for(c in a=re(u),l=new Dc(a),l.data)f=Number(c),p=l.data[f],h=l.g[f],o.m(p,h);return o.g.close(n,u.byteLength),o.o(s1(o.g),o.g.g),g.return(r(u))})});return this.i.set(e,s),s};function QI(e,t,n,i,r,o){_e(e.h);var s=(e.i.get(t)||Promise.resolve()).then(function(){if(e.h.g)throw new D(2,9,7001);if(r){var u=re(n);u=new Dc(u);for(var a in u.data){var l=Number(a);e.m(u.data[l],u.g[l])}}return e.g.close(i,n.byteLength),e.o(s1(e.g),e.g.g),o(n)});e.i.set(t,s)}function ZI(e){return k(function(t){return t.g==1?T(t,Promise.all(e.i.values()),2):t.return(e.g.g)})}function eC(e,t){var n,i,r,o;return k(function(s){return s.g==1?(n=yn,i=e.u.request(n,t),r=function(){return i.abort()},e.j.push(r),T(s,i.promise,2)):(o=s.h,Rn(e.j,r),s.return(o.data))})}function Ml(e,t){var n=this;this.i=e,this.h=e.objectStore(t),this.g=new Pe,e.onabort=function(i){i.preventDefault(),n.g.reject()},e.onerror=function(i){i.preventDefault(),n.g.reject()},e.oncomplete=function(){n.g.resolve()}}Ml.prototype.abort=function(){var e=this;return k(function(t){if(t.g==1){try{e.i.abort()}catch{}return se(t,2),T(t,e.g,4)}if(t.g!=2)return fe(t,0);ue(t),G(t)})};function rp(e,t){return new Promise(function(n,i){var r=e.h.openCursor();r.onerror=i,r.onsuccess=function(){var o;return k(function(s){if(s.g==1)return r.result==null?(n(),s.return()):(o=r.result,T(s,t(o.key,o.value,o),2));o.continue(),G(s)})}})}Ml.prototype.store=function(){return this.h},Ml.prototype.promise=function(){return this.g};function op(e){this.h=e,this.g=[]}op.prototype.destroy=function(){return Promise.all(this.g.map(function(e){return e.abort()}))};function Dr(e,t){return kl(e,t,"readwrite")}function kl(e,t,n){n=e.h.transaction([t],n);var i=new Ml(n,t);return e.g.push(i),i.promise().then(function(){Rn(e.g,i)},function(){Rn(e.g,i)}),i}function Rr(e,t,n){this.h=new op(e),this.i=t,this.g=n}d=Rr.prototype,d.destroy=function(){return this.h.destroy()},d.hasFixedKeySpace=function(){return!0},d.addSegments=function(){return u1(this.i)},d.removeSegments=function(e,t){return a1(this,this.i,e,t)},d.getSegments=function(e){var t=this,n;return k(function(i){return i.g==1?T(i,l1(t,t.i,e),2):(n=i.h,i.return(n.map(function(r){return t.Yh(r)})))})},d.addManifests=function(){return u1(this.g)},d.updateManifest=function(){return Promise.reject(new D(2,9,9016,"Cannot modify values in "+this.g))};function tC(e,t,n){e=Dr(e.h,e.g);var i=e.store();return i.get(t).onsuccess=function(){i.put(n,t)},e.promise()}d.updateManifestExpiration=function(e,t){var n=Dr(this.h,this.g),i=n.store();return i.get(e).onsuccess=function(r){(r=r.target.result)&&(r.expiration=t,i.put(r,e))},n.promise()},d.removeManifests=function(e,t){return a1(this,this.g,e,t)},d.getManifests=function(e){var t=this,n;return k(function(i){return i.g==1?T(i,l1(t,t.g,e),2):(n=i.h,i.return(Promise.all(n.map(function(r){return t.Vd(r)}))))})},d.getAllManifests=function(){var e=this,t,n;return k(function(i){return i.g==1?(t=kl(e.h,e.g,"readonly"),n=new Map,T(i,rp(t,function(r,o){var s;return k(function(u){if(u.g==1)return T(u,e.Vd(o),2);s=u.h,n.set(r,s),G(u)})}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},d.Yh=function(e){return e},d.Vd=function(e){return Promise.resolve(e)};function u1(e){return Promise.reject(new D(2,9,9011,"Cannot add new value to "+e))}d.add=function(e,t){var n=this,i,r,o,s,u,a,l;return k(function(c){if(c.g==1){for(i=Dr(n.h,e),r=i.store(),o=[],s=m(t),u=s.next(),a={};!u.done;a={ih:void 0},u=s.next())l=u.value,a.ih=r.add(l),a.ih.onsuccess=function(f){return function(){o.push(f.ih.result)}}(a);return T(c,i.promise(),2)}return c.return(o)})};function a1(e,t,n,i){e=Dr(e.h,t),t=e.store(),n=m(n);for(var r=n.next(),o={};!r.done;o={Tg:void 0},r=n.next())o.Tg=r.value,t.delete(o.Tg).onsuccess=function(s){return function(){return i(s.Tg)}}(o);return e.promise()}function l1(e,t,n){var i,r,o,s,u,a,l;return k(function(c){if(c.g==1){for(i=kl(e.h,t,"readonly"),r=i.store(),o={},s=[],u=m(n),a=u.next(),l={};!a.done;l={Ef:void 0,lf:void 0},a=u.next())l.lf=a.value,l.Ef=r.get(l.lf),l.Ef.onsuccess=function(f){return function(){f.Ef.result==null&&s.push(f.lf),o[f.lf]=f.Ef.result}}(l);return T(c,i.promise(),2)}if(s.length)throw new D(2,9,9012,"Could not find values for "+s);return c.return(n.map(function(f){return o[f]}))})}function Qs(e){this.g=new op(e)}Qs.prototype.destroy=function(){return this.g.destroy()},Qs.prototype.getAll=function(){var e=this,t,n;return k(function(i){return i.g==1?(t=kl(e.g,"session-ids","readonly"),n=[],T(i,rp(t,function(r,o){n.push(o)}),2)):i.g!=3?T(i,t.promise(),3):i.return(n)})},Qs.prototype.add=function(e){var t=Dr(this.g,"session-ids"),n=t.store();e=m(e);for(var i=e.next();!i.done;i=e.next())n.add(i.value);return t.promise()},Qs.prototype.remove=function(e){var t=this,n;return k(function(i){return i.g==1?(n=Dr(t.g,"session-ids"),T(i,rp(n,function(r,o,s){e.includes(o.sessionId)&&s.delete()}),2)):T(i,n.promise(),0)})};function Yt(){this.g=new Map}Yt.prototype.destroy=function(){for(var e=[],t=m(this.g.values()),n=t.next();!n.done;n=t.next())e.push(n.value.destroy());return this.g.clear(),Promise.all(e)},Yt.prototype.init=function(){var e=this;Zs.forEach(function(r,o){(r=r())&&e.g.set(o,r)});for(var t=[],n=m(this.g.values()),i=n.next();!i.done;i=n.next())t.push(i.value.init());return Promise.all(t)};function c1(e){var t=null;if(e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){r.hasFixedKeySpace()||t||(t={path:{Pb:i,cb:o},cb:r})})}),t)return t;throw new D(2,9,9013,"Could not find a cell that supports add-operations")}function nC(e,t){e.g.forEach(function(n,i){n.getCells().forEach(function(r,o){t({Pb:i,cb:o},r)})})}function Dl(e,t,n){if(e=e.g.get(t),!e)throw new D(2,9,9013,"Could not find mechanism with name "+t);if(t=e.getCells().get(n),!t)throw new D(2,9,9013,"Could not find cell with name "+n);return t}function iC(e,t){e.g.forEach(function(n){t(n.getEmeSessionCell())})}function rC(e){var t=Array.from(e.g.keys());if(!t.length)throw new D(2,9,9e3,"No supported storage mechanisms found");return e.g.get(t[0]).getEmeSessionCell()}function oC(e){var t,n,i;return k(function(r){return r.g==1?(t=Array.from(e.g.values()),n=t.length>0,n||(i=Zs,i.forEach(function(o){(o=o())&&t.push(o)})),T(r,Promise.all(t.map(function(o){return o.erase()})),2)):n?r.A(0):T(r,Promise.all(t.map(function(o){return o.destroy()})),0)})}function f1(e,t){Zs.set(e,t)}K("shaka.offline.StorageMuxer",Yt),Yt.unregister=function(e){Zs.delete(e)},Yt.register=f1,Yt.prototype.destroy=Yt.prototype.destroy;var Zs=new Map;function eu(){Rr.apply(this,arguments)}$e(eu,Rr),eu.prototype.updateManifestExpiration=function(e,t){var n=this,i,r,o;return k(function(s){return i=Dr(n.h,n.g),r=i.store(),o=new Pe,r.get(e).onsuccess=function(u){(u=u.target.result)?(u.expiration=t,r.put(u),o.resolve()):o.reject(new D(2,9,9012,"Could not find values for "+e))},T(s,Promise.all([i.promise(),o]),0)})},eu.prototype.Vd=function(e){var t,n,i,r,o,s;return k(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n)i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime,o=sC(e.periods[n],r),t.push(o);return T(u,Wy(t),2)}return s=u.h,u.return({creationTime:0,originalManifestUri:e.originalManifestUri,duration:e.duration,size:e.size,expiration:e.expiration==null?1/0:e.expiration,streams:s,sessionIds:e.sessionIds,drmInfo:e.drmInfo,appMetadata:e.appMetadata,sequenceMode:!1})})};function sC(e,t){aC(e);for(var n=m(e.streams),i=n.next();!i.done;i=n.next());return e.streams.map(function(r){return uC(r,e.startTime,t)})}function uC(e,t,n){var i=e.initSegmentUri?d1(e.initSegmentUri):null,r=t+e.presentationTimeOffset,o=t+n;return{id:e.id,originalId:null,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:void 0,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,initSegmentKey:i,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(s){var u=d1(s.uri);return{startTime:t+s.startTime,endTime:t+s.endTime,dataKey:u,initSegmentKey:i,appendWindowStart:t,appendWindowEnd:o,timestampOffset:r,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}eu.prototype.Yh=function(e){return{data:e.data}};function d1(e){var t;if((t=/^offline:[0-9]+\/[0-9]+\/([0-9]+)$/.exec(e))||(t=/^offline:segment\/([0-9]+)$/.exec(e)))return Number(t[1]);throw new D(2,9,9004,"Could not parse uri "+e)}function aC(e){var t=e.streams.filter(function(u){return u.contentType=="audio"});if(e=e.streams.filter(function(u){return u.contentType=="video"}),!t.every(function(u){return u.variantIds})||!e.every(function(u){return u.variantIds})){for(var n=m(t),i=n.next();!i.done;i=n.next())i.value.variantIds=[];for(n=m(e),i=n.next();!i.done;i=n.next())i.value.variantIds=[];if(n=0,e.length&&!t.length){i=n++;for(var r=m(e),o=r.next();!o.done;o=r.next())o.value.variantIds.push(i)}if(!e.length&&t.length)for(i=n++,r=m(t),o=r.next();!o.done;o=r.next())o.value.variantIds.push(i);if(e.length&&t.length)for(t=m(t),i=t.next();!i.done;i=t.next())for(i=i.value,r=m(e),o=r.next();!o.done;o=r.next()){o=o.value;var s=n++;i.variantIds.push(s),o.variantIds.push(s)}}}function Rl(){Rr.apply(this,arguments)}$e(Rl,Rr),Rl.prototype.Vd=function(e){var t,n,i,r,o,s;return k(function(u){if(u.g==1){for(t=[],n=0;n<e.periods.length;++n){i=n==e.periods.length-1?e.duration:e.periods[n+1].startTime,r=i-e.periods[n].startTime;for(var a=e.periods[n],l=[],c=m(a.streams),f=c.next();!f.done;f=c.next())f=f.value,f.variantIds.length!=0&&l.push(lC(f,a.startTime,a.startTime+r));o=l,t.push(o)}return T(u,Wy(t),2)}return s=u.h,u.return({appMetadata:e.appMetadata,creationTime:0,drmInfo:e.drmInfo,duration:e.duration,expiration:e.expiration==null?1/0:e.expiration,originalManifestUri:e.originalManifestUri,sessionIds:e.sessionIds,size:e.size,streams:s,sequenceMode:!1})})};function lC(e,t,n){return{id:e.id,originalId:e.originalId,groupId:null,primary:e.primary,type:e.contentType,mimeType:e.mimeType,codecs:e.codecs,frameRate:e.frameRate,pixelAspectRatio:e.pixelAspectRatio,hdr:void 0,colorGamut:void 0,videoLayout:void 0,kind:e.kind,language:e.language,originalLanguage:e.language||null,label:e.label,width:e.width,height:e.height,encrypted:e.encrypted,keyIds:new Set([e.keyId]),segments:e.segments.map(function(i){return{startTime:t+i.startTime,endTime:t+i.endTime,initSegmentKey:e.initSegmentKey,appendWindowStart:t,appendWindowEnd:n,timestampOffset:t-e.presentationTimeOffset,dataKey:i.dataKey,tilesLayout:"",mimeType:null,codecs:null,thumbnailSprite:null}}),variantIds:e.variantIds,roles:[],forced:!1,audioSamplingRate:null,channelsCount:null,spatialAudio:!1,closedCaptions:null,tilesLayout:void 0,external:!1,fastSwitching:!1,isAudioMuxedInVideo:!1}}function sp(){Rr.apply(this,arguments)}$e(sp,Rr),d=sp.prototype,d.hasFixedKeySpace=function(){return!1},d.addSegments=function(e){return this.add(this.i,e)},d.addManifests=function(e){return this.add(this.g,e)},d.updateManifest=function(e,t){return tC(this,e,t)},d.Vd=function(e){return e.expiration==null&&(e.expiration=1/0),Promise.resolve(e)};function p1(){this.m=this.j=this.i=this.h=this.g=this.l=null}d=p1.prototype,d.init=function(){var e=this,t=new Pe,n=!1,i=new ge(function(){n=!0,t.reject(new D(2,9,9017))});typeof Ll=="number"&&Ll>0&&i.ka(Ll);var r=B.indexedDB.open("shaka_offline_db",5);return r.onsuccess=function(){if(!n){i.stop();var o=r.result;e.l=o;var s=o.objectStoreNames;s=s.contains("manifest")&&s.contains("segment")?new eu(o,"segment","manifest"):null,e.g=s,s=o.objectStoreNames,s=s.contains("manifest-v2")&&s.contains("segment-v2")?new Rl(o,"segment-v2","manifest-v2"):null,e.h=s,s=o.objectStoreNames,s=s.contains("manifest-v3")&&s.contains("segment-v3")?new Rl(o,"segment-v3","manifest-v3"):null,e.i=s,s=o.objectStoreNames,s=s.contains("manifest-v5")&&s.contains("segment-v5")?new sp(o,"segment-v5","manifest-v5"):null,e.j=s,o=o.objectStoreNames.contains("session-ids")?new Qs(o):null,e.m=o,t.resolve()}},r.onupgradeneeded=function(){for(var o=r.result,s=m(["segment-v5","manifest-v5","session-ids"]),u=s.next();!u.done;u=s.next())u=u.value,o.objectStoreNames.contains(u)||o.createObjectStore(u,{autoIncrement:!0})},r.onerror=function(o){n||(i.stop(),t.reject(new D(2,9,9001,r.error)),o.preventDefault())},t},d.destroy=function(){var e=this;return k(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return T(t,e.j.destroy(),8);case 8:if(!e.m){t.A(10);break}return T(t,e.m.destroy(),10);case 10:e.l&&e.l.close(),G(t)}})},d.getCells=function(){var e=new Map;return this.g&&e.set("v1",this.g),this.h&&e.set("v2",this.h),this.i&&e.set("v3",this.i),this.j&&e.set("v5",this.j),e},d.getEmeSessionCell=function(){return this.m},d.erase=function(){var e=this;return k(function(t){switch(t.g){case 1:if(!e.g){t.A(2);break}return T(t,e.g.destroy(),2);case 2:if(!e.h){t.A(4);break}return T(t,e.h.destroy(),4);case 4:if(!e.i){t.A(6);break}return T(t,e.i.destroy(),6);case 6:if(!e.j){t.A(8);break}return T(t,e.j.destroy(),8);case 8:return e.l&&e.l.close(),T(t,cC(),10);case 10:return e.l=null,e.g=null,e.h=null,e.i=null,e.j=null,T(t,e.init(),0)}})};function cC(){var e=new Pe,t=B.indexedDB.deleteDatabase("shaka_offline_db");return t.onblocked=function(){},t.onsuccess=function(){e.resolve()},t.onerror=function(n){e.reject(new D(2,9,9001,t.error)),n.preventDefault()},e}var Ll=5;K("shaka.offline.indexeddb.StorageMechanismOpenTimeout",Ll),f1("idb",function(){return pe().Dh()?new p1:null});function ti(e,t,n,i){this.g=e,this.i=t,this.h=n,this.l=i,this.j=["offline:",e,"/",t,"/",n,"/",i].join("")}ti.prototype.Pb=function(){return this.i},ti.prototype.cb=function(){return this.h},ti.prototype.key=function(){return this.l},ti.prototype.toString=function(){return this.j};function up(e){if(e=/^offline:([a-z]+)\/([^/]+)\/([^/]+)\/([0-9]+)$/.exec(e),e==null)return null;var t=e[1];if(t!="manifest"&&t!="segment")return null;var n=e[2];if(!n)return null;var i=e[3];return i&&t!=null?new ti(t,n,i,Number(e[4])):null}function h1(e,t){this.h=e,this.g=t}function g1(e,t){var n=new ie(null,0);n.Ab(t.duration);var i=t.streams.filter(function(l){return l.type=="audio"}),r=t.streams.filter(function(l){return l.type=="video"});i=fC(e,i,r,n),r=t.streams.filter(function(l){return l.type==he}).map(function(l){return Pl(e,l,n)});var o=t.streams.filter(function(l){return l.type=="image"}).map(function(l){return Pl(e,l,n)}),s=t.drmInfo?[t.drmInfo]:[];if(t.drmInfo)for(var u=m(i.values()),a=u.next();!a.done;a=u.next())a=a.value,a.audio&&a.audio.encrypted&&(a.audio.drmInfos=s),a.video&&a.video.encrypted&&(a.video.drmInfos=s);return{presentationTimeline:n,offlineSessionIds:t.sessionIds,variants:Array.from(i.values()),textStreams:r,imageStreams:o,sequenceMode:t.sequenceMode||!1,ignoreManifestTimestampsInSegmentsMode:!1,type:t.type||"UNKNOWN",serviceDescription:null,nextUrl:null,periodCount:1,gapCount:0,isLowLatency:!1,startTime:null}}function fC(e,t,n,i){for(var r=new Set,o=m(t),s=o.next();!s.done;s=o.next()){s=m(s.value.variantIds);for(var u=s.next();!u.done;u=s.next())r.add(u.value)}for(o=m(n),s=o.next();!s.done;s=o.next())for(s=m(s.value.variantIds),u=s.next();!u.done;u=s.next())r.add(u.value);for(o=new Map,r=m(r),s=r.next();!s.done;s=r.next())s=s.value,o.set(s,{id:s,language:"",disabledUntilTime:0,primary:!1,audio:null,video:null,bandwidth:0,allowedByApplication:!0,allowedByKeySystem:!0,decodingInfos:[]});for(t=m(t),r=t.next();!r.done;r=t.next())for(s=r.value,r=Pl(e,s,i),s=m(s.variantIds),u=s.next();!u.done;u=s.next())u=o.get(u.value),u.language=r.language,u.primary=u.primary||r.primary,u.audio=r;for(n=m(n),t=n.next();!t.done;t=n.next())for(r=t.value,t=Pl(e,r,i),r=m(r.variantIds),s=r.next();!s.done;s=r.next())s=o.get(s.value),s.primary=s.primary||t.primary,s.video=t;return o}function Pl(e,t,n){var i=t.segments.map(function(r){return dC(e,r,t)});return n.me(i),{id:t.id,originalId:t.originalId,groupId:t.groupId,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Se(i),mimeType:t.mimeType,codecs:t.codecs,width:t.width||void 0,height:t.height||void 0,frameRate:t.frameRate,pixelAspectRatio:t.pixelAspectRatio,hdr:t.hdr,colorGamut:t.colorGamut,videoLayout:t.videoLayout,kind:t.kind,encrypted:t.encrypted,drmInfos:[],keyIds:t.keyIds,language:t.language,originalLanguage:t.originalLanguage||null,label:t.label,type:t.type,primary:t.primary,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:t.roles,forced:t.forced,channelsCount:t.channelsCount,audioSamplingRate:t.audioSamplingRate,spatialAudio:t.spatialAudio,closedCaptions:t.closedCaptions,tilesLayout:t.tilesLayout,mssPrivateData:t.mssPrivateData,accessibilityPurpose:null,external:t.external,fastSwitching:t.fastSwitching,fullMimeTypes:new Set([Qe(t.mimeType,t.codecs)]),isAudioMuxedInVideo:t.isAudioMuxedInVideo||!1,baseOriginalId:null}}function dC(e,t,n){var i=new ti("segment",e.h,e.g,t.dataKey);return e=new Q(t.startTime,t.endTime,function(){return[i.toString()]},0,null,t.initSegmentKey!=null?pC(e,t.initSegmentKey):null,t.timestampOffset,t.appendWindowStart,t.appendWindowEnd,[],t.tilesLayout||""),e.mimeType=t.mimeType||n.mimeType||"",e.codecs=t.codecs||n.codecs||"",t.thumbnailSprite&&e.Mf(t.thumbnailSprite),e}function pC(e,t){var n=new ti("segment",e.h,e.g,t);return new Wt(function(){return[n.toString()]},0,null)}function m1(){this.g=null}d=m1.prototype,d.configure=function(){},d.start=function(e,t){var n=this,i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:if(i=up(e),n.g=i,i==null||i.g!="manifest")throw new D(2,1,9004,e);return r=new Yt,ni(c,2),T(c,r.init(),4);case 4:return T(c,Dl(r,i.Pb(),i.cb()),5);case 5:return o=c.h,T(c,o.getManifests([i.key()]),6);case 6:return s=c.h,u=s[0],a=new h1(i.Pb(),i.cb()),l=g1(a,u),t.makeTextStreamsForClosedCaptions(l),c.return(l);case 2:return on(c),T(c,r.destroy(),7);case 7:sn(c,0)}})},d.stop=function(){return Promise.resolve()},d.update=function(){},d.onExpirationUpdated=function(e,t){var n=this,i,r,o,s,u,a,l;return k(function(c){switch(c.g){case 1:return i=n.g,r=new Yt,se(c,2,3),T(c,r.init(),5);case 5:return T(c,Dl(r,i.Pb(),i.cb()),6);case 6:return o=c.h,T(c,o.getManifests([i.key()]),7);case 7:if(s=c.h,u=s[0],a=u.sessionIds.includes(e),l=u.expiration==null||u.expiration>t,!a||!l){c.A(3);break}return T(c,o.updateManifestExpiration(i.key(),t),3);case 3:return on(c),T(c,r.destroy(),10);case 10:sn(c,0);break;case 2:ue(c),c.A(3)}})},d.onInitialVariantChosen=function(){},d.banLocation=function(){},d.setMediaElement=function(){},ar("application/x-offline-manifest",function(){return new m1});function v1(){}function y1(e,t){var n=up(e);return n&&n.g=="manifest"?(e={uri:e,originalUri:e,data:new ArrayBuffer(0),headers:{"content-type":"application/x-offline-manifest"},originalRequest:t},e=zr(e)):e=n&&n.g=="segment"?hC(n.key(),n,t):Fi(new D(2,1,9004,e)),e}function hC(e,t,n){var i=new Yt;return zr(void 0).Xa(function(){return i.init()}).Xa(function(){return Dl(i,t.Pb(),t.cb())}).Xa(function(r){return r.getSegments([t.key()])}).Xa(function(r){return{uri:t,data:r[0].data,headers:{},originalRequest:n}}).finally(function(){return i.destroy()})}K("shaka.offline.OfflineScheme",v1),v1.plugin=y1,pi("offline",y1);function T1(e,t,n){var i,r,o,s,u,a;return k(function(l){switch(l.g){case 1:i=[];for(var c=[],f=m(n),p=f.next();!p.done;p=f.next()){p=p.value;for(var h=!1,g=m(c),v=g.next();!v.done;v=g.next())if(v=v.value,mC(v.info,p)){v.sessionIds.push(p.sessionId),h=!0;break}h||c.push({info:p,sessionIds:[p.sessionId]})}r=m(c),o=r.next();case 2:if(o.done){l.A(4);break}return s=o.value,u=gC(e,t,s),T(l,u,5);case 5:a=l.h,i=i.concat(a),o=r.next(),l.A(2);break;case 4:return l.return(i)}})}function gC(e,t,n){var i,r;return k(function(o){switch(o.g){case 1:return i=new zu({wc:t,onError:function(){},zf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),se(o,2),i.configure(e),T(o,Kx(i,n.info.keySystem,n.info.licenseUri,n.info.serverCertificate,n.info.audioCapabilities,n.info.videoCapabilities),4);case 4:fe(o,3);break;case 2:return ue(o),T(o,i.destroy(),5);case 5:return o.return([]);case 3:return r=[],T(o,Promise.all(n.sessionIds.map(function(s){return k(function(u){if(u.g==1)return se(u,2),T(u,zx(i,s),4);if(u.g!=2)return r.push(s),fe(u,0);ue(u),G(u)})})),6);case 6:return T(o,i.destroy(),7);case 7:return o.return(r)}})}function mC(e,t){function n(i,r){return i.robustness==r.robustness&&i.contentType==r.contentType}return e.keySystem==t.keySystem&&e.licenseUri==t.licenseUri&&rr(e.audioCapabilities,t.audioCapabilities,n)&&rr(e.videoCapabilities,t.videoCapabilities,n)}function vC(e,t,n){var i=t.presentationTimeline.getDuration();return t=x1(t),{offlineUri:null,originalManifestUri:e,duration:i,size:0,expiration:1/0,tracks:t,appMetadata:n,isIncomplete:!1}}function ap(e,t){var n=g1(new h1(e.Pb(),e.cb()),t),i=t.appMetadata||{};return n=x1(n),{offlineUri:e.toString(),originalManifestUri:t.originalManifestUri,duration:t.duration,size:t.size,expiration:t.expiration,tracks:n,appMetadata:i,isIncomplete:t.isIncomplete||!1}}function x1(e){var t=[],n=Bu(e.variants);n=m(n);for(var i=n.next();!i.done;i=n.next())t.push(mr(i.value));for(e=m(e.textStreams),n=e.next();!n.done;n=e.next())t.push(vr(n.value));return t}function yC(){this.g=new Map}function TC(e,t){var n=t.audio,i=t.video;if(n&&!i&&e.g.set(n.id,n.bandwidth||t.bandwidth),!n&&i&&e.g.set(i.id,i.bandwidth||t.bandwidth),n&&i){var r=n.bandwidth||393216,o=i.bandwidth||t.bandwidth-r;o<=0&&(o=t.bandwidth),e.g.set(n.id,r),e.g.set(i.id,o)}}function xC(e,t){e.g.set(t.id,t.bandwidth||2048)}function S1(e,t){return e=e.g.get(t),e==null&&(e=0),e}function mt(e){var t=this;if(e&&e.constructor!=U)throw new D(2,9,9008);this.g=this.h=null,e?(this.h=e.g,this.g=e.Yb()):(this.h=po(),this.g=new Ge,this.g.configure(this.h.networking)),this.i=[],this.l=[];var n=!e;this.j=new qr(function(){var i,r,o,s,u;return k(function(a){switch(a.g){case 1:return T(a,Promise.all(t.l.map(function(l){return ip(l)})),2);case 2:for(i=function(){},r=[],o=m(t.i),s=o.next();!s.done;s=o.next())u=s.value,r.push(u.then(i,i));return T(a,Promise.all(r),3);case 3:if(!n){a.A(4);break}return T(a,t.g.destroy(),4);case 4:t.h=null,t.g=null,G(a)}})}),this.m=1e9}function lp(){if(ei(pe()))e:{for(var e=m(Zs.values()),t=e.next();!t.done;t=e.next())if(t=t.value,t=t()){t.destroy(),e=!0;break e}e=!1}else e=!1;return e}d=mt.prototype,d.destroy=function(){return this.j.destroy()},d.configure=function(e,t){return arguments.length==2&&typeof e=="string"&&(e=Ta(e,t)),Ti(this.h,e)},d.getConfiguration=function(){var e=po();return Ti(e,this.h,po()),e},d.Yb=function(){return this.g},d.store=function(e,t,n,i,r){var o=this,s=this.getConfiguration(),u=new np(this.g);return this.l.push(u),t=SC(this,e,t||{},i||[],r||[],function(){var a;return k(function(l){return l.g==1?n?l.A(2):T(l,ao(e,o.g,s.manifest.retryParameters),3):(l.g!=2&&(n=l.h),a=ih(e,n||null),l.return(a()))})},s,u),t=new Ze(t,function(){return ip(u)}),t.finally(function(){Rn(o.l,u)}),_C(this,t)};function SC(e,t,n,i,r,o,s,u){var a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_,j;return k(function(O){switch(O.g){case 1:return Nl(),l=a=null,c=new Yt,h=p=f=null,se(O,2,3),T(O,o(),5);case 5:return a=O.h,T(O,RC(e,t,a,s),6);case 6:if(g=O.h,un(e),v=!g.presentationTimeline.W()&&!g.presentationTimeline.Vc(),!v)throw new D(2,9,9005,t);y=m(i),S=y.next();case 7:if(S.done){O.A(9);break}return x=S.value,T(O,LC(e,x,g),10);case 10:w=O.h,g.imageStreams.push(w),un(e),S=y.next(),O.A(7);break;case 9:I=m(r),L=I.next();case 11:return L.done?(cg(s.drm.clearKeys,g.variants),E=g.variants.some(function(F){if(F.audio){for(var V=m(F.audio.drmInfos),le=V.next();!le.done;le=V.next())if(le.value.licenseServerUri.startsWith("data:"))return!0}if(F.video){for(F=m(F.video.drmInfos),V=F.next();!V.done;V=F.next())if(V.value.licenseServerUri.startsWith("data:"))return!0}return!1}),R=s.offline.usePersistentLicense,E&&(R=!1),T(O,e.md(g,function(F){h=h||F},s,R),15)):(A=L.value,T(O,PC(e,g,A.uri,A.language,A.kind,A.mime,A.codecs),14));case 14:C=O.h,g.textStreams.push(C),un(e),L=I.next(),O.A(11);break;case 15:if(l=O.h,un(e),h)throw h;return T(O,AC(g,l,s,R),16);case 16:return T(O,c.init(),17);case 17:return un(e),T(O,c1(c),18);case 18:return f=O.h,un(e),M=EC(l,g,t,n,s,u,R),P=M.yk,N=M.Hh,T(O,f.cb.addManifests([P]),19);case 19:if(b=O.h,un(e),p=b[0],un(e),h)throw h;return T(O,wC(e,N,p,P,u,s,f.cb,g,l,R),20);case 20:return un(e),I1(g,P,l,R),T(O,f.cb.updateManifest(p,P),21);case 21:return un(e),_=new ti("manifest",f.path.Pb,f.path.cb,p),O.return(ap(_,P));case 3:return on(O),T(O,c.destroy(),22);case 22:if(!a){O.A(23);break}return T(O,a.stop(),23);case 23:if(!l){O.A(25);break}return T(O,l.destroy(),25);case 25:sn(O,0);break;case 2:if(j=ue(O),p==null){O.A(27);break}return T(O,w1(p),27);case 27:throw h||j}})}function wC(e,t,n,i,r,o,s,u,a,l){var c,f,p,h,g,v,y,S,x,w,I;return k(function(L){switch(L.g){case 1:if(c={},f=0,p=function(){if(e.j.g||r.l)throw new D(2,9,7001)},h=function(A,C){var E,R,M,P,N,b,_,j,O;return k(function(F){if(F.g==1){for(E=m(A),R=E.next(),M={};!R.done;M={qc:void 0},R=E.next())M.qc=R.value,p(),P=JI(M.qc,o),N=M.qc.i,b=M.qc.h,_=function(V){return function(le){var q,Re,ae,Ve;return k(function(Ae){switch(Ae.g){case 1:if(q=V.qc.g,Re=q.ac(!1),!q.aesKey||Re){Ae.A(2);break}return T(Ae,lf(le,q.aesKey,V.qc.j),3);case 3:le=Ae.h;case 2:return ae=tp(q),T(Ae,s.addSegments([{data:le}]),4);case 4:Ve=Ae.h,p(),c[ae]=Ve[0],f+=le.byteLength,G(Ae)}})}}(M),j=M.qc.g,(O=j.ac(!1))?QI(r,M.qc.groupId,O,N,b,_):r.queue(M.qc.groupId,P,N,b,_);return T(F,ZI(r),2)}return p(),!C||r.l?F.A(0):(I1(u,i,a,l),T(F,s.updateManifest(n,i),0))})},g=!1,se(L,2),!cp(u)||!g||E1(u)){L.A(4);break}return T(L,h(t.filter(function(A){return A.h}),!0),5);case 5:return p(),t=t.filter(function(A){return!A.h}),v=c,y=f,c={},f=0,T(L,A1(s,n,i,v,y,function(){return un(e)}),6);case 6:p();case 4:if(g){L.A(7);break}return T(L,h(t,!1),8);case 8:return p(),S=c,x=f,c={},f=0,T(L,A1(s,n,i,S,x,function(){return p()}),9);case 9:p();case 7:fe(L,0);break;case 2:return w=ue(L),I=Object.values(c),T(L,s.removeSegments(I,function(){}),10);case 10:throw w}})}function w1(e){var t,n,i,r;return k(function(o){switch(o.g){case 1:return t=new Yt,T(o,t.init(),2);case 2:return T(o,c1(t),3);case 3:return n=o.h,i=new ti("manifest",n.path.Pb,n.path.cb,e),T(o,t.destroy(),4);case 4:return r=new mt,T(o,r.remove(i.toString()),0)}})}function A1(e,t,n,i,r,o){var s,u,a,l,c,f,p,h,g,v,y;return k(function(S){switch(S.g){case 1:for(s=!1,se(S,2),u=!0,a=m(n.streams),l=a.next();!l.done;l=a.next())for(c=l.value,f=m(c.segments),p=f.next();!p.done;p=f.next())h=p.value,g=h.pendingSegmentRefId?i[h.pendingSegmentRefId]:null,g!=null&&(h.dataKey=g,h.pendingSegmentRefId=void 0),g=h.pendingInitSegmentRefId?i[h.pendingInitSegmentRefId]:null,g!=null&&(h.initSegmentKey=g,h.pendingInitSegmentRefId=void 0),h.pendingSegmentRefId&&(u=!1),h.pendingInitSegmentRefId&&(u=!1);return n.size+=r,u&&(n.isIncomplete=!1),T(S,e.updateManifest(t,n),4);case 4:s=!0,o(),fe(S,0);break;case 2:return v=ue(S),T(S,w1(t),5);case 5:if(s){S.A(6);break}return y=Object.values(i),T(S,e.removeSegments(y,function(){}),6);case 6:throw v}})}function AC(e,t,n,i){var r,o,s,u,a,l,c,f,p,h,g,v,y,S,x,w,I,L,A,C,E,R,M,P,N,b,_,j,O,F;return k(function(V){switch(V.g){case 1:return r={width:1/0,height:1/0},Ex(e,n.restrictions,r),T(V,Dh(t,e,i,n.drm.preferredKeySystems,n.drm.keySystemsMapping),2);case 2:for(o=[],s=n.preferredDecodingAttributes,u=n.preferredVideoCodecs,a=n.preferredAudioCodecs,l=n.preferredTextFormats,kh(e,u,a,s,l),c=m(e.variants),f=c.next();!f.done;f=c.next())p=f.value,o.push(mr(p));for(h=m(e.textStreams),g=h.next();!g.done;g=h.next())v=g.value,o.push(vr(v));for(y=m(e.imageStreams),S=y.next();!S.done;S=y.next())x=S.value,o.push(Ec(x));return T(V,n.offline.trackSelectionCallback(o),3);case 3:for(w=V.h,I=e.presentationTimeline.getDuration(),L=0,A=m(w),C=A.next();!C.done;C=A.next())E=C.value,R=E.bandwidth*I/8,L+=R;return se(V,4),T(V,n.offline.downloadSizeCallback(L),6);case 6:if(M=V.h,!M)throw new D(2,9,9014);fe(V,5);break;case 4:throw P=ue(V),P instanceof D?P:new D(2,9,9015);case 5:for(N=new Set,b=new Set,_=new Set,j=m(w),O=j.next();!O.done;O=j.next())F=O.value,F.type=="variant"&&N.add(F.id),F.type=="text"&&b.add(F.id),F.type=="image"&&_.add(F.id);e.variants=e.variants.filter(function(le){return N.has(le.id)}),e.textStreams=e.textStreams.filter(function(le){return b.has(le.id)}),e.imageStreams=e.imageStreams.filter(function(le){return _.has(le.id)}),FC(e),G(V)}})}function EC(e,t,n,i,r,o,s){var u=vC(n,t,i),a=r.offline.progressCallback;$I(o,function(g,v){u.size=v,a(u,g)},function(g,v){l&&s&&c==v&&is(e,"cenc",g)});var l=cp(t)&&!E1(t),c=null;l&&(c=VC.get(e.g.keySystem));for(var f=new yC,p=m(t.textStreams),h=p.next();!h.done;h=p.next())f.g.set(h.value.id,52);for(p=m(t.imageStreams),h=p.next();!h.done;h=p.next())xC(f,h.value);for(p=m(t.variants),h=p.next();!h.done;h=p.next())TC(f,h.value);return o=jC(o,f,t,r),r=o.streams,o=o.Hh,(f=e.g)&&s&&(f.initData=[]),{yk:{creationTime:Date.now(),originalManifestUri:n,duration:t.presentationTimeline.getDuration(),size:0,expiration:e.$d(),streams:r,sessionIds:s?ig(e):[],drmInfo:f,appMetadata:i,isIncomplete:!0,sequenceMode:t.sequenceMode,type:t.type},Hh:o}}function cp(e){return e.variants.some(function(t){var n=t.audio&&t.audio.encrypted;return t.video&&t.video.encrypted||n})}function E1(e){return e.variants.some(function(t){return(t.video?t.video.drmInfos:[]).concat(t.audio?t.audio.drmInfos:[]).some(function(n){return n.initData&&n.initData.length})})}function I1(e,t,n,i){if(t.expiration=n.$d(),n=ig(n),t.sessionIds=i?n:[],cp(e)&&i&&!n.length)throw new D(2,9,9007)}d.remove=function(e){return fp(this,IC(this,e))};function IC(e,t){var n,i,r,o,s,u;return k(function(a){switch(a.g){case 1:if(Nl(),n=up(t),n==null||n.g!="manifest")throw new D(2,9,9004,t);return i=n,r=new Yt,ni(a,2),T(a,r.init(),4);case 4:return T(a,Dl(r,i.Pb(),i.cb()),5);case 5:return o=a.h,T(a,o.getManifests([i.key()]),6);case 6:return s=a.h,u=s[0],T(a,Promise.all([CC(e,u,r),MC(o,i,u)]),2);case 2:return on(a),T(a,r.destroy(),8);case 8:sn(a,0)}})}function C1(e,t){for(var n=[],i=m(e.streams),r=i.next();!r.done;r=i.next())r=r.value,t&&r.type=="video"?n.push({contentType:Qe(r.mimeType,r.codecs),robustness:e.drmInfo.videoRobustness}):t||r.type!="audio"||n.push({contentType:Qe(r.mimeType,r.codecs),robustness:e.drmInfo.audioRobustness});return n}function CC(e,t,n){return k(function(i){return T(i,bC(e.g,e.h.drm,n,t),0)})}function MC(e,t,n){function i(){}var r=BC(n);return ap(t,n),Promise.all([e.removeSegments(r,i),e.removeManifests([t.key()],i)])}d.Rk=function(){return fp(this,kC(this))};function kC(e){var t,n,i,r,o,s,u,a,l,c;return k(function(f){switch(f.g){case 1:return Nl(),t=e.g,n=e.h.drm,i=new Yt,r=!1,ni(f,2),T(f,i.init(),4);case 4:o=[],iC(i,function(p){return o.push(p)}),s=m(o),u=s.next();case 5:if(u.done){f.A(2);break}return a=u.value,T(f,a.getAll(),8);case 8:return l=f.h,T(f,T1(n,t,l),9);case 9:return c=f.h,T(f,a.remove(c),10);case 10:c.length!=l.length&&(r=!0),u=s.next(),f.A(5);break;case 2:return on(f),T(f,i.destroy(),11);case 11:sn(f,3);break;case 3:return f.return(!r)}})}d.list=function(){return fp(this,DC())};function DC(){var e,t,n;return k(function(i){switch(i.g){case 1:return Nl(),e=[],t=new Yt,ni(i,2),T(i,t.init(),4);case 4:return n=Promise.resolve(),nC(t,function(r,o){n=n.then(function(){var s;return k(function(u){if(u.g==1)return T(u,o.getAllManifests(),2);s=u.h,s.forEach(function(a,l){a=ap(new ti("manifest",r.Pb,r.cb,l),a),e.push(a)}),G(u)})})}),T(i,n,2);case 2:return on(i),T(i,t.destroy(),6);case 6:sn(i,3);break;case 3:return i.return(e)}})}function RC(e,t,n,i){var r,o,s,u,a;return k(function(l){if(l.g==1)return r=null,o=e.g,s={networkingEngine:o,filter:function(){return Promise.resolve()},makeTextStreamsForClosedCaptions:function(){},onTimelineRegionAdded:function(){},onEvent:function(){},onError:function(c){r=c},isLowLatencyMode:function(){return!1},updateDuration:function(){},newDrmInfo:function(){},onManifestUpdated:function(){},getBandwidthEstimate:function(){return i.abr.defaultBandwidthEstimate},onMetadata:function(){},disableStream:function(){},addFont:function(){}},n.configure(i.manifest),un(e),T(l,n.start(t,s),2);if(l.g!=3)return u=l.h,un(e),a=k1(u),T(l,Promise.all(Mc(a,function(c){return c.createSegmentIndex()})),3);if(un(e),r)throw r;return l.return(u)})}function LC(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,g,v,y,S;return k(function(x){switch(x.g){case 1:return T(x,M1(e,t),2);case 2:if(i=x.h,i!="text/vtt")throw new D(1,2,2017,t);return T(x,NC(t,e.g,e.h.streaming.retryParameters),3);case 3:if(r=x.h,o=Jo(i),!o)throw new D(2,2,2014,i);for(s=o(),u={periodStart:0,segmentStart:0,segmentEnd:n.presentationTimeline.getDuration(),vttOffset:0},a=re(r),l=s.parseMedia(a,u,t,[]),c=[],f=m(l),p=f.next(),h={};!p.done;h={Vf:void 0,od:void 0},p=f.next())h.od=p.value,h.Vf=null,g=function(w){return function(){return w.Vf==null&&(w.Vf=pt([t],[w.od.payload])),w.Vf||[]}}(h),v=new Q(h.od.startTime,h.od.endTime,g,0,null,null,0,0,1/0),h.od.payload.includes("#xywh")&&(y=h.od.payload.split("#xywh=")[1].split(","),y.length===4&&v.Mf({height:parseInt(y[3],10),positionX:parseInt(y[0],10),positionY:parseInt(y[1],10),width:parseInt(y[2],10)})),c.push(v);if(S=i,!c.length){x.A(4);break}return T(x,ao(c[0].P()[0],e.g,e.h.manifest.retryParameters),5);case 5:S=x.h;case 4:return x.return({id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:new Se(c),mimeType:S||"",codecs:"",kind:"",encrypted:!1,drmInfos:[],keyIds:new Set,language:"und",originalLanguage:null,label:null,type:"image",primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,tilesLayout:"1x1",accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Qe(S||"","")]),isAudioMuxedInVideo:!1,baseOriginalId:null})}})}function PC(e,t,n,i,r,o,s){var u,a,l;return k(function(c){if(c.g==1)return o?c.A(2):T(c,M1(e,n),3);if(c.g!=2&&(o=c.h),u={id:e.m++,originalId:null,groupId:null,createSegmentIndex:function(){return Promise.resolve()},segmentIndex:sa(0,t.presentationTimeline.getDuration(),[n]),mimeType:o||"",codecs:s||"",kind:r,encrypted:!1,drmInfos:[],keyIds:new Set,language:i,originalLanguage:i,label:null,type:he,primary:!1,trickModeVideo:null,dependencyStream:null,emsgSchemeIdUris:null,roles:[],forced:!1,channelsCount:null,audioSamplingRate:null,spatialAudio:!1,closedCaptions:null,accessibilityPurpose:null,external:!0,fastSwitching:!1,fullMimeTypes:new Set([Qe(o||"",s||"")]),isAudioMuxedInVideo:!1,baseOriginalId:null},a=Qe(u.mimeType,u.codecs),l=$o(a),!l)throw new D(2,2,2014,o);return c.return(u)})}function M1(e,t){var n;return k(function(i){switch(i.g){case 1:return se(i,2),T(i,ao(t,e.g,e.h.streaming.retryParameters),4);case 4:n=i.h,fe(i,3);break;case 2:ue(i);case 3:if(n)return i.return(n);throw new D(1,2,2011,t)}})}function NC(e,t,n){var i,r,o;return k(function(s){return s.g==1?(i=yn,r=ot([e],n),r.method="GET",T(s,t.request(i,r).promise,2)):(o=s.h,s.return(o.data))})}d.md=function(e,t,n,i){var r=this,o;return k(function(s){return s.g==1?(o=new zu({wc:r.g,onError:t,zf:function(){},onExpirationUpdated:function(){},onEvent:function(){}}),o.configure(n.drm),T(s,Gx(o,e.variants,i),2)):s.g!=3?T(s,ng(o),3):s.return(o)})};function jC(e,t,n,i){var r=new Map,o=k1(n),s=new Map;o=m(o);for(var u=o.next();!u.done;u=o.next()){u=u.value;var a=OC(e,t,n,u,i,r);s.set(u.id,a)}for(e=m(n.variants),t=e.next();!t.done;t=e.next())t=t.value,t.audio&&s.get(t.audio.id).variantIds.push(t.id),t.video&&s.get(t.video.id).variantIds.push(t.id);return{streams:Array.from(s.values()),Hh:Array.from(r.values())}}function OC(e,t,n,i,r,o){var s={id:i.id,originalId:i.originalId,groupId:i.groupId,primary:i.primary,type:i.type,mimeType:i.mimeType,codecs:i.codecs,frameRate:i.frameRate,pixelAspectRatio:i.pixelAspectRatio,hdr:i.hdr,colorGamut:i.colorGamut,videoLayout:i.videoLayout,kind:i.kind,language:i.language,originalLanguage:i.originalLanguage,label:i.label,width:i.width||null,height:i.height||null,encrypted:i.encrypted,keyIds:i.keyIds,segments:[],variantIds:[],roles:i.roles,forced:i.forced,channelsCount:i.channelsCount,audioSamplingRate:i.audioSamplingRate,spatialAudio:i.spatialAudio,closedCaptions:i.closedCaptions,tilesLayout:i.tilesLayout,mssPrivateData:i.mssPrivateData,external:i.external,fastSwitching:i.fastSwitching,isAudioMuxedInVideo:i.isAudioMuxedInVideo},u=r.offline.numberOfParallelDownloads,a=u===0?i.id:0;return UC(i,n.presentationTimeline.Hb(),function(l,c){var f=tp(l),p=void 0;if(!o.has(f)){var h=l.endTime-l.startTime;h=S1(t,i.id)*h,h=o1(e.g,h),o.set(f,new i1(l,h,a,!1,c))}l.ba&&(p=tp(l.ba),o.has(p)||(h=S1(t,i.id)*.5,h=o1(e.g,h),o.set(p,new i1(l.ba,h,a,!0,c)))),s.segments.push({pendingInitSegmentRefId:p,initSegmentKey:p?0:null,startTime:l.startTime,endTime:l.endTime,appendWindowStart:l.appendWindowStart,appendWindowEnd:l.appendWindowEnd,timestampOffset:l.timestampOffset,tilesLayout:l.tilesLayout,pendingSegmentRefId:f,dataKey:0,mimeType:l.mimeType,codecs:l.codecs,thumbnailSprite:l.thumbnailSprite}),u!==0&&(a=(a+1)%u)}),s}function UC(e,t,n){if(t=e.segmentIndex.find(t),t!=null)for(var i=e.segmentIndex.get(t);i;)n(i,t),i=e.segmentIndex.get(++t)}function un(e){if(e.j.g)throw new D(2,9,7001)}function Nl(){if(!lp())throw new D(2,9,9e3)}function fp(e,t){return k(function(n){return n.g==1?(e.i.push(t),ni(n,2),T(n,t,4)):n.g!=2?n.return(n.h):(on(n),Rn(e.i,t),sn(n,0))})}function _C(e,t){var n=t.promise;return e.i.push(n),t.finally(function(){Rn(e.i,n)})}function BC(e){var t=new Set;e=m(e.streams);for(var n=e.next();!n.done;n=e.next()){n=m(n.value.segments);for(var i=n.next();!i.done;i=n.next())i=i.value,i.initSegmentKey!=null&&t.add(i.initSegmentKey),t.add(i.dataKey)}return Array.from(t)}function bC(e,t,n,i){var r,o,s;return k(function(u){return u.g==1?i.drmInfo?(r=rC(n),o=i.sessionIds.map(function(a){return{sessionId:a,keySystem:i.drmInfo.keySystem,licenseUri:i.drmInfo.licenseServerUri,serverCertificate:i.drmInfo.serverCertificate,audioCapabilities:C1(i,!1),videoCapabilities:C1(i,!0)}}),T(u,T1(t,e,o),2)):u.return():u.g!=3?(s=u.h,T(u,r.remove(s),3)):T(u,r.add(o.filter(function(a){return!s.includes(a.sessionId)})),0)})}function k1(e){for(var t=new Set,n=m(e.variants),i=n.next();!i.done;i=n.next())i=i.value,i.audio&&t.add(i.audio),i.video&&t.add(i.video);for(n=m(e.textStreams),i=n.next();!i.done;i=n.next())t.add(i.value);for(e=m(e.imageStreams),n=e.next();!n.done;n=e.next())t.add(n.value);return t}function FC(e){e.variants.map(function(o){return o.video});var t=new Set(e.variants.map(function(o){return o.audio}));e=e.textStreams;for(var n=m(t),i=n.next();!i.done;i=n.next()){i=m(t);for(var r=i.next();!r.done;r=i.next());}for(t=m(e),n=t.next();!n.done;n=t.next())for(n=m(e),i=n.next();!i.done;i=n.next());}K("shaka.offline.Storage",mt),mt.deleteAll=function(){var e;return k(function(t){return t.g==1?(e=new Yt,ni(t,2),T(t,oC(e),2)):t.g!=5?(on(t),T(t,e.destroy(),5)):sn(t,0)})},mt.prototype.list=mt.prototype.list,mt.prototype.removeEmeSessions=mt.prototype.Rk,mt.prototype.remove=mt.prototype.remove,mt.prototype.store=mt.prototype.store,mt.prototype.getNetworkingEngine=mt.prototype.Yb,mt.prototype.getConfiguration=mt.prototype.getConfiguration,mt.prototype.configure=mt.prototype.configure,mt.prototype.destroy=mt.prototype.destroy,mt.support=lp;var VC=new Map().set("org.w3.clearkey","1077efecc0b24d02ace33c1e52e2fb4b").set("com.widevine.alpha","edef8ba979d64acea3c827dcd51d21ed").set("com.microsoft.playready","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.recommendation","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.software","9a04f07998404286ab92e65be0885f95").set("com.microsoft.playready.hardware","9a04f07998404286ab92e65be0885f95").set("com.huawei.wiseplay","3d5e6d359b9a41e8b843dd3c6e72c42c");ov("offline",lp);function Ft(){}function nn(e,t){for(e={priority:t||0,callback:e},t=0;t<tu.length;t++)if(tu[t].priority<e.priority){tu.splice(t,0,e);return}tu.push(e)}K("shaka.polyfill",Ft),Ft.register=nn,Ft.installAll=function(){for(var e=m(tu),t=e.next();!t.done;t=e.next()){t=t.value;try{t.callback()}catch(n){ve("Error installing polyfill!",n)}}};var tu=[];function jl(e,t,n){this.g=e,this.i=t||null,this.h=n||null,this.keySystem=e.keySystem}jl.prototype.getConfiguration=function(){var e=this.g.getConfiguration();if(e.videoCapabilities)for(var t=m(e.videoCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.i;if(e.audioCapabilities)for(t=m(e.audioCapabilities),n=t.next();!n.done;n=t.next())n.value.encryptionScheme=this.h;return e},jl.prototype.createMediaKeys=function(){return this.g.createMediaKeys()};function D1(e){return e.startsWith("com.apple")?"cbcs":e.startsWith("com.widevine")||e.startsWith("com.microsoft")||e.startsWith("com.chromecast")||e.startsWith("org.w3")||e.startsWith("com.huawei")?"cenc":(ve("EmeEncryptionSchemePolyfill: Unknown key system:",e,"Please contribute!"),null)}function R1(e){if(!e)return!1;e=e.getConfiguration();var t=e.audioCapabilities&&e.audioCapabilities[0];return!!((e=e.videoCapabilities&&e.videoCapabilities[0]||t)&&e.encryptionScheme!==void 0)}function dp(e,t){return!!(!e||e==t||(e=="cbcs"||e=="cbcs-1-9")&&pe().ed())}function L1(){}var nu;function P1(){pe().Of()&&!nu&&!navigator.emeEncryptionSchemePolyfilled&&navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration&&(nu=navigator.requestMediaKeySystemAccess,navigator.requestMediaKeySystemAccess=HC,navigator.emeEncryptionSchemePolyfilled=!0)}function HC(e,t){var n=this,i;return k(function(r){return r.g==1?T(r,nu.call(n,e,t),2):(i=r.h,R1(i)?(navigator.requestMediaKeySystemAccess=nu,r.return(i)):(navigator.requestMediaKeySystemAccess=N1,r.return(N1.call(n,e,t))))})}function N1(e,t){var n=this,i,r,o,s,u,a,l,c,f,p,h,g;return k(function(v){if(v.g==1){for(i=D1(e),r=[],o=m(t),s=o.next();!s.done;s=o.next())u=s.value,a=j1(u.videoCapabilities,i),l=j1(u.audioCapabilities,i),u.videoCapabilities&&u.videoCapabilities.length&&!a.length||u.audioCapabilities&&u.audioCapabilities.length&&!l.length||(c=Object.assign({},u),c.videoCapabilities=a,c.audioCapabilities=l,r.push(c));if(!r.length)throw f=Error("Unsupported keySystem or supportedConfigurations."),f.name="NotSupportedError",f.code=DOMException.NOT_SUPPORTED_ERR,f;return T(v,nu.call(n,e,r),2)}return p=v.h,g=h=null,r[0]&&(r[0].videoCapabilities&&(h=r[0].videoCapabilities[0].encryptionScheme),r[0].audioCapabilities&&(g=r[0].audioCapabilities[0].encryptionScheme)),v.return(new jl(p,h,g))})}function j1(e,t){return e&&e.filter(function(n){return dp(n.encryptionScheme,t)})}Ft.EmeEncryptionScheme=L1,L1.install=P1,nn(P1);function O1(){}function U1(){"getOrInsert"in Map.prototype||(Map.prototype.getOrInsert=_1),"getOrInsertComputed"in Map.prototype||(Map.prototype.getOrInsertComputed=B1),"getOrInsert"in WeakMap.prototype||(WeakMap.prototype.getOrInsert=_1),"getOrInsertComputed"in WeakMap.prototype||(WeakMap.prototype.getOrInsertComputed=B1)}function _1(e,t){return this.has(e)||this.set(e,t),this.get(e)}function B1(e,t){return this.has(e)||this.set(e,t(e)),this.get(e)}Ft.Map=O1,O1.install=U1,nn(U1);function b1(){}var iu;function F1(){pe().Of()&&!iu&&!navigator.mediaCapabilitiesEncryptionSchemePolyfilled&&navigator.mediaCapabilities&&(iu=navigator.mediaCapabilities.decodingInfo,navigator.mediaCapabilities.decodingInfo=GC,navigator.mediaCapabilitiesEncryptionSchemePolyfilled=!0)}function GC(e){var t=this,n,i;return k(function(r){switch(r.g){case 1:return T(r,iu.call(t,e),2);case 2:if(n=r.h,!n.supported||!e.keySystemConfiguration)return r.return(n);if(i=n.keySystemAccess,R1(i))return navigator.mediaCapabilities.decodingInfo=iu,r.return(n);if(navigator.mediaCapabilities.decodingInfo=V1,i){r.A(3);break}return T(r,H1(e),4);case 4:return n.keySystemAccess=r.h,r.return(n);case 3:return r.return(V1.call(t,e))}})}function V1(e){var t=this,n,i,r,o,s,u,a;return k(function(l){switch(l.g){case 1:return i=n=null,!e.keySystemConfiguration||(r=e.keySystemConfiguration,o=r.keySystem,i=r.audio&&r.audio.encryptionScheme,n=r.video&&r.video.encryptionScheme,s=D1(o),u={powerEfficient:!1,smooth:!1,supported:!1,keySystemAccess:null,configuration:e},dp(i,s)&&dp(n,s))?T(l,iu.call(t,e),2):l.return(u);case 2:if(a=l.h,a.keySystemAccess){a.keySystemAccess=new jl(a.keySystemAccess,n,i),l.A(3);break}if(!e.keySystemConfiguration){l.A(3);break}return T(l,H1(e),5);case 5:a.keySystemAccess=l.h;case 3:return l.return(a)}})}function H1(e){var t,n;return k(function(i){if(i.g==1){var r=e.keySystemConfiguration,o=[],s=[];return r.audio&&o.push({robustness:r.audio.robustness||"",contentType:e.audio.contentType,encryptionScheme:r.audio.encryptionScheme}),r.video&&s.push({robustness:r.video.robustness||"",contentType:e.video.contentType,encryptionScheme:r.video.encryptionScheme}),r={initDataTypes:r.initDataType?[r.initDataType]:[],distinctiveIdentifier:r.distinctiveIdentifier,persistentState:r.persistentState,sessionTypes:r.sessionTypes},o.length&&(r.audioCapabilities=o),s.length&&(r.videoCapabilities=s),t=r,T(i,navigator.requestMediaKeySystemAccess(e.keySystemConfiguration.keySystem,[t]),2)}return n=i.h,i.return(n)})}Ft.MCapEncryptionScheme=b1,b1.install=F1,nn(F1,-2);function Ol(){}function G1(){pe().kc()||(navigator.mediaCapabilities||(navigator.mediaCapabilities={}),Ol.originalMcap=navigator.mediaCapabilities,navigator.mediaCapabilities.decodingInfo=KC)}function KC(e){var t,n,i,r,o,s,u,a,l,c,f;return k(function(p){switch(p.g){case 1:if(t={supported:!1,powerEfficient:!0,smooth:!0,keySystemAccess:null,configuration:e},pe(),n=e.video,i=e.audio,e.type!="media-source"){if(e.type=="file"){if(n&&(r=n.contentType,o=Ar().canPlayType(r)!="",!o)||i&&(s=i.contentType,u=Ar().canPlayType(s)!="",!u))return p.return(t)}else return p.return(t);p.A(2);break}if(!ei())return p.return(t);if(!n){p.A(3);break}return T(p,WC(n),4);case 4:if(a=p.h,!a)return p.return(t);case 3:if(i){var h=pe().Oa(),g=i.contentType;if(h==="CAST"&&i.spatialRendering&&(g+="; spatialRendering=true"),l=jt(g),!l)return p.return(t)}case 2:return e.keySystemConfiguration?(c=e.keySystemConfiguration,T(p,XC(n,i,c),6)):(t.supported=!0,p.return(t));case 6:(f=p.h)&&(t.supported=!0,t.keySystemAccess=f);case 5:return p.return(t)}})}function WC(e){var t,n,i;return k(function(r){return r.g==1?(t=pe(),n=t.Oa(),n!=="CAST"?r.A(2):T(r,zC(e),3)):r.g!=2?(i=r.h,r.return(i)):r.return(jt(e.contentType))})}function XC(e,t,n){var i,r,o,s,u,a,l,c,f,p,h,g;return k(function(v){switch(v.g){case 1:i=[],r=[],o=[],n.audio&&(s={robustness:n.audio.robustness||"",contentType:t.contentType},pe().Ci()&&t.contentType.includes('codecs="ac-3"')&&(s.contentType='audio/mp4; codecs="ec-3"'),n.audio.encryptionScheme&&(s.encryptionScheme=n.audio.encryptionScheme,o.push(n.audio.encryptionScheme)),i.push(s)),n.video&&(u={robustness:n.video.robustness||"",contentType:e.contentType},n.video.encryptionScheme&&(u.encryptionScheme=n.video.encryptionScheme,o.push(n.video.encryptionScheme)),r.push(u)),a={initDataTypes:[n.initDataType],distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes},i.length&&(a.audioCapabilities=i),r.length&&(a.videoCapabilities=r),l=e?e.contentType:"",c=t?t.contentType:"",f=Jt(l)+";"+Bi(l),p=Jt(c)+";"+Bi(c),h=n.keySystem,g=null,se(v,2);var y=ic(f,p,h,o);if(Ur.has(y)){y=ic(f,p,h,o),g=Ur.get(y)||null,v.A(4);break}return T(v,navigator.requestMediaKeySystemAccess(n.keySystem,[a]),5);case 5:y=g=v.h;var S=ic(f,p,h,o);Ur.set(S,y);case 4:fe(v,3);break;case 2:ue(v);case 3:return v.return(g)}})}function zC(e){var t,n,i,r,o;return k(function(s){if(s.g==1){if(!(B.cast&&cast.__platform__&&cast.__platform__.canDisplayType))return s.return(jt(e.contentType));switch(t=e.contentType,e.width&&e.height&&e.width>1280&&e.height>720&&(t+="; width="+e.width+"; height="+e.height),e.framerate&&(n=Math.round(e.framerate),n<24||n>30)&&(t+="; framerate="+e.framerate),i=e.transferFunction||"",i){case"":case"srgb":break;case"pq":t+="; eotf=smpte2084";break;case"hlg":t+="; eotf=arib-std-b67";break;default:return s.return(!1)}return r=!1,o=YC,o.has(t)?(r=o.get(t),s.A(2)):T(s,cast.__platform__.canDisplayType(t),3)}return s.g!=2&&(r=s.h,o.set(t,r)),s.return(r)})}Ft.MediaCapabilities=Ol,Ol.install=G1,Ol.originalMcap=null;var YC=new Map;nn(G1,-1);function K1(){}function W1(){var e=pe(),t=e.Ga()==="WEBKIT"?e.Ba():null;for((B.MediaSource||B.ManagedMediaSource)&&t&&B.MediaSource&&(t<=12?(X1(),qC()):t<=15&&X1()),e=m(e.Mi()),t=e.next();!t.done;t=e.next())$C(t.value);(B.MediaSource||B.ManagedMediaSource)&&JC(),B.MediaSource&&MediaSource.isTypeSupported('video/webm; codecs="vp9"')&&!MediaSource.isTypeSupported('video/webm; codecs="vp09.00.10.08"')&&QC()}function X1(){var e=MediaSource.prototype.addSourceBuffer;MediaSource.prototype.addSourceBuffer=function(){var t=e.apply(this,dt.apply(0,arguments));return t.abort=function(){},t}}function qC(){var e=SourceBuffer.prototype.remove;SourceBuffer.prototype.remove=function(t,n){return e.call(this,t,n-.001)}}function JC(){if(B.MediaSource){var e=MediaSource.isTypeSupported.bind(MediaSource);MediaSource.isTypeSupported=function(n){return qo(n)!="mp2t"&&e(n)}}if(B.ManagedMediaSource){var t=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);B.ManagedMediaSource.isTypeSupported=function(n){return qo(n)!="mp2t"&&t(n)}}}function $C(e){var t=MediaSource.isTypeSupported.bind(MediaSource);if(MediaSource.isTypeSupported=function(i){return Bi(i)!=e&&t(i)},B.ManagedMediaSource){var n=ManagedMediaSource.isTypeSupported.bind(ManagedMediaSource);B.ManagedMediaSource.isTypeSupported=function(i){return Bi(i)!=e&&n(i)}}}function QC(){var e=MediaSource.isTypeSupported;pe().gj()&&(MediaSource.isTypeSupported=function(t){var n=t.split(/ *; */),i=n.findIndex(function(s){return s.startsWith("codecs=")});if(i<0)return e(t);var r=n[i].replace("codecs=","").replace(/"/g,"").split(/\s*,\s*/),o=r.findIndex(function(s){return s.startsWith("vp09")});return o>=0&&(r[o]="vp9",n[i]='codecs="'+r.join(",")+'"',t=n.join("; ")),e(t)})}Ft.MediaSource=K1,K1.install=W1,nn(W1);function pp(){}var hp,gp,mp,vp,yp,Tp;function z1(e){B.HTMLVideoElement&&B.WebKitMediaKeys&&B.shakaMediaKeysPolyfill!=Sp&&(e!==void 0&&e&&(hp=!0,gp=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"mediaKeys"),mp=HTMLMediaElement.prototype.setMediaKeys,vp=B.MediaKeys,yp=B.MediaKeySystemAccess,Tp=navigator.requestMediaKeySystemAccess),delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=eM,B.MediaKeys=ru,B.MediaKeySystemAccess=Ul,navigator.requestMediaKeySystemAccess=ZC,B.shakaMediaKeysPolyfill=Sp,bu.clear(),Ur.clear())}function ZC(e,t){try{var n=new Ul(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function eM(e){var t=this.mediaKeys;return t&&t!=e&&Y1(t,null),delete this.mediaKeys,(this.mediaKeys=e)?Y1(e,this):Promise.resolve()}function tM(e){if(e=re(e.initData),Ht(e).getUint32(0,!0)+4!=e.byteLength)throw new RangeError("Malformed FairPlay init data");e=Ni(e.subarray(4),!0),e=Ln(e);var t=new Event("encrypted");t.initDataType="skd",t.initData=gn(e),this.dispatchEvent(t)}Ft.PatchedMediaKeysApple=pp,pp.uninstall=function(){B.shakaMediaKeysPolyfill==Sp&&hp&&(hp=!1,Object.defineProperty(HTMLMediaElement.prototype,"mediaKeys",gp),HTMLMediaElement.prototype.setMediaKeys=mp,B.MediaKeys=vp,B.MediaKeySystemAccess=yp,navigator.requestMediaKeySystemAccess=Tp,gp=Tp=mp=yp=vp=null,B.shakaMediaKeysPolyfill="",bu.clear(),Ur.clear())},pp.install=z1;function Ul(e,t){if(this.keySystem=e,e.startsWith("com.apple.fps"))for(e=m(t),t=e.next();!t.done;t=e.next()){var n=t.value;if(n.persistentState=="required")t=null;else{t={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:n.initDataTypes,sessionTypes:["temporary"],label:n.label};var i=!1,r=!1;if(n.audioCapabilities)for(var o=m(n.audioCapabilities),s=o.next();!s.done;s=o.next())s=s.value,s.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,s.contentType.split(";")[0])&&(t.audioCapabilities.push(s),r=!0));if(n.videoCapabilities)for(n=m(n.videoCapabilities),o=n.next();!o.done;o=n.next())o=o.value,o.contentType&&(i=!0,WebKitMediaKeys.isTypeSupported(this.keySystem,o.contentType.split(";")[0])&&(t.videoCapabilities.push(o),r=!0));i||(r=WebKitMediaKeys.isTypeSupported(this.keySystem,"video/mp4")),t=r?t:null}if(t){this.g=t;return}}throw e=Error("Unsupported keySystem"),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Ul.prototype.createMediaKeys=function(){var e=new ru(this.keySystem);return Promise.resolve(e)},Ul.prototype.getConfiguration=function(){return this.g};function ru(e){this.h=new WebKitMediaKeys(e),this.g=new Ee}ru.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary")throw new TypeError("Session type "+e+" is unsupported on this platform.");return new xp(this.h)},ru.prototype.setServerCertificate=function(){return Promise.resolve(!1)};function Y1(e,t){if(e.g.Qa(),!t)return Promise.resolve();e.g.D(t,"webkitneedkey",tM);try{return uo(t,HTMLMediaElement.HAVE_METADATA,e.g,function(){t.webkitSetMediaKeys(e.h)}),Promise.resolve()}catch(n){return Promise.reject(n)}}ru.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function xp(e){Le.call(this),this.i=null,this.l=e,this.g=this.h=null,this.j=new Ee,this.sessionId="",this.expiration=NaN,this.closed=new Pe,this.keyStatuses=new q1,this.onkeystatuseschange=null}$e(xp,Le),d=xp.prototype,d.generateRequest=function(e,t){var n=this;this.h=new Pe;try{var i=this.l.createSession("video/mp4",re(t));this.i=i,this.sessionId=i.sessionId||"",this.j.D(this.i,"webkitkeymessage",function(r){n.h&&(n.h.resolve(),n.h=null),r=new Map().set("messageType",n.keyStatuses.bc()==null?"license-request":"license-renewal").set("message",gn(r.message)),r=new z("message",r),n.dispatchEvent(r)}),this.j.D(i,"webkitkeyadded",function(){n.g&&(_l(n,"usable"),n.g.resolve(),n.g=null)}),this.j.D(i,"webkitkeyerror",function(){var r=Error("EME PatchedMediaKeysApple key error");if(r.errorCode=n.i.error,n.h!=null)n.h.reject(r),n.h=null;else if(n.g!=null)n.g.reject(r),n.g=null;else switch(n.i.error.code){case WebKitMediaKeyError.MEDIA_KEYERR_OUTPUT:case WebKitMediaKeyError.MEDIA_KEYERR_HARDWARECHANGE:_l(n,"output-not-allowed");break;default:_l(n,"internal-error")}}),_l(this,"status-pending")}catch(r){this.h.reject(r)}return this.h},d.load=function(){return Promise.reject(Error("MediaKeySession.load not yet supported"))},d.update=function(e){this.g=new Pe;try{this.i.update(re(e))}catch(t){this.g.reject(t)}return this.g},d.close=function(){try{this.i.close(),this.closed.resolve(),this.j.Qa()}catch(e){this.closed.reject(e)}return this.closed},d.remove=function(){return Promise.reject(Error("MediaKeySession.remove is only applicable for persistent licenses, which are not supported on this platform"))};function _l(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new z("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}function q1(){this.size=0,this.g=void 0}d=q1.prototype,d.bc=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,mu.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var t=mu.value();return!!(this.g&&ii(e,t))},d.entries=function(){},d.keys=function(){},d.values=function(){};var Sp="apple";nn(function(){B.HTMLVideoElement&&B.WebKitMediaKeys&&(navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration||z1())});function J1(){}function $1(){if(B.MediaKeys){var e=pe();MediaKeys.prototype.setServerCertificate&&e.we()||(MediaKeys.prototype.setServerCertificate=nM)}}function nM(){return Promise.resolve(!1)}Ft.PatchedMediaKeysCert=J1,J1.install=$1,nn($1);function Q1(){}function Z1(){if(!(!B.HTMLVideoElement||navigator.requestMediaKeySystemAccess&&MediaKeySystemAccess.prototype.getConfiguration)){if(HTMLMediaElement.prototype.webkitGenerateKeyRequest)Cp="webkit";else if(!HTMLMediaElement.prototype.generateKeyRequest)return;navigator.requestMediaKeySystemAccess=iM,delete HTMLMediaElement.prototype.mediaKeys,HTMLMediaElement.prototype.mediaKeys=null,HTMLMediaElement.prototype.setMediaKeys=rM,B.MediaKeys=ou,B.MediaKeySystemAccess=Bl,B.shakaMediaKeysPolyfill=oM}}function wp(e){var t=Cp;return t?t+e.charAt(0).toUpperCase()+e.slice(1):e}function iM(e,t){try{var n=new Bl(e,t);return Promise.resolve(n)}catch(i){return Promise.reject(i)}}function rM(e){var t=this.mediaKeys;return t&&t!=e&&eT(t,null),delete this.mediaKeys,(this.mediaKeys=e)&&eT(e,this),Promise.resolve()}Ft.PatchedMediaKeysWebkit=Q1,Q1.install=Z1;function Bl(e,t){this.g=this.keySystem=e;var n=!1;e=="org.w3.clearkey"&&(this.g="webkit-org.w3.clearkey",n=!1);var i=!1,r=document.getElementsByTagName("video");r=r.length?r[0]:document.createElement("video"),t=m(t);for(var o=t.next();!o.done;o=t.next()){o=o.value;var s={audioCapabilities:[],videoCapabilities:[],persistentState:"optional",distinctiveIdentifier:"optional",initDataTypes:o.initDataTypes,sessionTypes:["temporary"],label:o.label},u=!1;if(o.audioCapabilities)for(var a=m(o.audioCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType.split(";")[0],this.g)&&(s.audioCapabilities.push(l),i=!0));if(o.videoCapabilities)for(a=m(o.videoCapabilities),l=a.next();!l.done;l=a.next())l=l.value,l.contentType&&(u=!0,r.canPlayType(l.contentType,this.g)&&(s.videoCapabilities.push(l),i=!0));if(u||(i=r.canPlayType("video/mp4",this.g)||r.canPlayType("video/webm",this.g)),o.persistentState=="required"&&(n?(s.persistentState="required",s.sessionTypes=["persistent-license"]):i=!1),i){this.h=s;return}}throw n="Unsupported keySystem",(e=="org.w3.clearkey"||e=="com.widevine.alpha")&&(n="None of the requested configurations were supported."),e=Error(n),e.name="NotSupportedError",e.code=DOMException.NOT_SUPPORTED_ERR,e}Bl.prototype.createMediaKeys=function(){var e=new ou(this.g);return Promise.resolve(e)},Bl.prototype.getConfiguration=function(){return this.h};function ou(e){this.l=e,this.h=null,this.g=new Ee,this.i=[],this.j=new Map}function eT(e,t){e.h=t,e.g.Qa();var n=Cp;t&&(e.g.D(t,n+"needkey",function(i){var r=new CustomEvent("encrypted");r.initDataType="cenc",r.initData=gn(i.initData),e.h.dispatchEvent(r)}),e.g.D(t,n+"keymessage",function(i){var r=Ap(e,i.sessionId);r&&(i=new Map().set("messageType",r.keyStatuses.bc()==null?"licenserequest":"licenserenewal").set("message",i.message),i=new z("message",i),r.h&&(r.h.resolve(),r.h=null),r.dispatchEvent(i))}),e.g.D(t,n+"keyadded",function(i){(i=Ap(e,i.sessionId))&&i.ready()}),e.g.D(t,n+"keyerror",function(i){var r=Ap(e,i.sessionId);if(r){var o=Error("EME v0.1b key error"),s=i.errorCode;s.systemCode=i.systemCode,o.errorCode=s,!i.sessionId&&r.h?(i.systemCode==45&&(o.message="Unsupported session type."),r.h.reject(o),r.h=null):i.sessionId&&r.g?(r.g.reject(o),r.g=null):(o=i.systemCode,i.errorCode.code==MediaKeyError.MEDIA_KEYERR_OUTPUT?bl(r,"output-restricted"):o==1?bl(r,"expired"):bl(r,"internal-error"))}}))}ou.prototype.createSession=function(e){if(e=e||"temporary",e!="temporary"&&e!="persistent-license")throw new TypeError("Session type "+e+" is unsupported on this platform.");var t=this.h||document.createElement("video");return t.src||(t.src="about:blank"),e=new Ep(t,this.l,e),this.i.push(e),e},ou.prototype.setServerCertificate=function(){return Promise.resolve(!1)},ou.prototype.getStatusForPolicy=function(){return Promise.resolve("usable")};function Ap(e,t){var n=e.j.get(t);return n||((n=e.i.shift())?(n.sessionId=t,e.j.set(t,n),n):null)}function Ep(e,t,n){Le.call(this),this.j=e,this.m=!1,this.g=this.h=null,this.i=t,this.l=n,this.sessionId="",this.expiration=NaN,this.closed=new Pe,this.keyStatuses=new nT,this.onkeystatuseschange=null}$e(Ep,Le),d=Ep.prototype,d.ready=function(){bl(this,"usable"),this.g&&this.g.resolve(),this.g=null};function tT(e,t,n){if(e.m)return Promise.reject(Error("The session is already initialized."));e.m=!0;try{if(e.l=="persistent-license")if(n)var i=re(Ln("LOAD_SESSION|"+n));else{var r=Ln("PERSISTENT|");i=it(r,t)}else i=re(t)}catch(s){return Promise.reject(s)}e.h=new Pe;var o=wp("generateKeyRequest");try{e.j[o](e.i,i)}catch(s){if(s.name!="InvalidStateError")return e.h=null,Promise.reject(s);new ge(function(){try{e.j[o](e.i,i)}catch(u){e.h.reject(u),e.h=null}}).ka(.01)}return e.h}function Ip(e,t,n){if(e.g)e.g.then(function(){return Ip(e,t,n)}).catch(function(){return Ip(e,t,n)});else{if(e.g=t,e.i=="webkit-org.w3.clearkey"){var i=Xe(n),r=JSON.parse(i);r.keys[0].kty!="oct"&&(e.g.reject(Error("Response is not a valid JSON Web Key Set.")),e.g=null),i=mn(r.keys[0].k),r=mn(r.keys[0].kid)}else i=re(n),r=null;var o=wp("addKey");try{e.j[o](e.i,i,r,e.sessionId)}catch(s){e.g.reject(s),e.g=null}}}function bl(e,t){var n=e.keyStatuses;n.size=t==null?0:1,n.g=t,t=new z("keystatuseschange"),e.dispatchEvent(t),e.onkeystatuseschange&&e.onkeystatuseschange(t)}d.generateRequest=function(e,t){return tT(this,t,null)},d.load=function(e){return this.l=="persistent-license"?tT(this,null,e):Promise.reject(Error("Not a persistent session."))},d.update=function(e){var t=new Pe;return Ip(this,t,e),t},d.close=function(){if(this.l!="persistent-license"){if(!this.sessionId)return this.closed.reject(Error("The session is not callable.")),this.closed;var e=wp("cancelKeyRequest");try{this.j[e](this.i,this.sessionId)}catch{}}return this.closed.resolve(),this.closed},d.remove=function(){return this.l!="persistent-license"?Promise.reject(Error("Not a persistent session.")):this.close()};function nT(){this.size=0,this.g=void 0}d=nT.prototype,d.bc=function(){return this.g},d.forEach=function(e){this.g&&e(this.g,mu.value())},d.get=function(e){if(this.has(e))return this.g},d.has=function(e){var t=mu.value();return!!(this.g&&ii(e,t))},d.entries=function(){},d.keys=function(){},d.values=function(){};var Cp="",oM="webkit";nn(Z1);function iT(){}function rT(){B.crypto&&("randomUUID"in B.crypto||(B.crypto.randomUUID=sM))}function sM(){var e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.substr(t.lastIndexOf("/")+1)}Ft.RandomUUID=iT,iT.install=rT,nn(rT);function oT(){}function sT(){var e=Symbol.prototype;"description"in e||Object.defineProperty(e,"description",{get:uM})}function uM(){var e=/\((.*)\)/.exec(this.toString());return e?e[1]:void 0}Ft.Symbol=oT,oT.install=sT,nn(sT);function uT(){}function aT(){for(var e=m([Uint8Array,Uint8ClampedArray,Uint16Array,Uint32Array,Int8Array,Int16Array,Int32Array,Float32Array,Float64Array]),t=e.next();!t.done;t=e.next())t=t.value,t.prototype.indexOf||(t.prototype.indexOf=aM),t.prototype.lastIndexOf||(t.prototype.lastIndexOf=lM),t.prototype.includes||(t.prototype.includes=cM)}function aM(e,t){return Array.prototype.indexOf.call(this,e,t)}function lM(e,t){return Array.prototype.lastIndexOf.call(this,e,t)}function cM(e,t){return this.indexOf(e,t)!==-1}Ft.TypedArray=uT,uT.install=aT,nn(aT);function lT(){}function cT(){if(B.HTMLMediaElement){var e=HTMLMediaElement.prototype.play;HTMLMediaElement.prototype.play=function(){var t=e.apply(this);return t&&t.catch(function(){}),t}}}Ft.VideoPlayPromise=lT,lT.install=cT,nn(cT);function fT(){}function dT(){if(B.HTMLVideoElement){var e=HTMLVideoElement.prototype;!e.getVideoPlaybackQuality&&("webkitDroppedFrameCount"in e||typeof Ar().webkitDroppedFrameCount=="number")&&(e.getVideoPlaybackQuality=fM)}}function fM(){return{droppedVideoFrames:this.webkitDroppedFrameCount,totalVideoFrames:this.webkitDecodedFrameCount,corruptedVideoFrames:0,creationTime:NaN,totalFrameDelay:0}}Ft.VideoPlaybackQuality=fT,fT.install=dT,nn(dT);function pT(){}function hT(){if(!B.VTTCue&&B.TextTrackCue){var e=null,t=TextTrackCue.length;if(t==3)e=Mp;else if(t==6)e=dM;else{try{var n=!!Mp(1,2,"")}catch{n=!1}n&&(e=Mp)}e&&(B.VTTCue=function(i,r,o){return e(i,r,o)})}}function Mp(e,t,n){return new B.TextTrackCue(e,t,n)}function dM(e,t,n){return new B.TextTrackCue(e+"-"+t+"-"+n,e,t,n)}Ft.VTTCue=pT,pT.install=hT,nn(hT);function gt(e){Le.call(this),this.g=e,this.m=null,this.h=[],this.j=-1,this.i=this.l=null,this.o=new Ee}$e(gt,Le),d=gt.prototype,d.destroy=function(){var e=this;return k(function(t){if(t.g==1)return T(t,e.removeAllItems(),2);e.g=null,e.o&&(e.o.release(),e.o=null),Le.prototype.release.call(e),G(t)})},d.configure=function(e){this.m=e},d.getConfiguration=function(){return this.m},d.getCurrentItem=function(){return this.h.length&&this.j>=0&&this.j<this.h.length?this.h[this.j]:null},d.getCurrentItemIndex=function(){return this.j},d.getItems=function(){return this.h.slice()},d.insertItems=function(e){this.h.push.apply(this.h,H(e)),this.dispatchEvent(new z("itemsinserted"))},d.removeAllItems=function(){var e=this,t,n,i,r;return k(function(o){if(o.g==1)return e.o.Qa(),e.h.length&&e.j>=0?T(o,e.g.Dc(),2):o.A(2);if(o.g!=4){for(t=[],e.i&&(e.i.preloadManager.l||t.push(e.i.preloadManager.destroy()),e.i=null),e.l&&(e.l.preloadManager.l||t.push(e.l.preloadManager.destroy()),e.l=null),n=m(e.h),i=n.next();!i.done;i=n.next())r=i.value,r.preloadManager&&!r.preloadManager.l&&t.push(r.preloadManager.destroy());return t.length?T(o,Promise.all(t),4):o.A(4)}e.h=[],e.j=-1,e.dispatchEvent(new z("itemsremoved")),G(o)})},d.playItem=function(e){var t=this,n,i,r,o,s,u,a,l,c,f,p,h,g,v,y,S,x;return k(function(w){switch(w.g){case 1:if(t.o.Qa(),!t.h.length||e>=t.h.length)throw new D(2,7,7007);if(n=t.getCurrentItem(),i=t.h[e],t.j!=e&&(t.j=e,t.dispatchEvent(new z("currentitemchanged"))),r=t.g.bf(),o=t.m?t.m.preloadNextUrlWindow:0,o>0&&(s=!1,t.o.D(r,"timeupdate",function(){var I,L,A,C;return k(function(E){switch(E.g){case 1:if(t.l||t.h.length<=1||s||t.g.W()||!r.duration)return E.return();if(I=t.g.Ra().end-r.currentTime,isNaN(I)){E.A(0);break}if(!(I<=o)){E.A(0);break}if(L=t.m&&t.m.repeatMode,A=null,t.j+1<t.h.length?A=t.h[t.j+1]:L==1&&(A=t.h[0]),!A||A.preloadManager&&!A.preloadManager.l){E.A(0);break}return s=!0,C=null,se(E,5),T(E,t.g.preload(A.manifestUri,A.startTime,A.mimeType,A.config),7);case 7:C=E.h,fe(E,6);break;case 5:ue(E),C=null;case 6:t.l={item:A,preloadManager:C},s=!1,G(E)}})})),t.o.D(t.g,"complete",function(){var I=t.m&&t.m.repeatMode,L=!1;if(I==2)L=!0;else{var A=t.j+1;A<t.h.length?t.playItem(A):I==1&&(t.h.length==1?L=!0:t.playItem(0))}L&&(r.paused?(r.currentTime=t.g.Ra().start,r.play()):t.o.D(r,"paused",function(){r.currentTime=t.g.Ra().start,r.play()}))}),u=i.manifestUri,i.preloadManager&&!i.preloadManager.l&&(u=i.preloadManager),a=!1,t.l&&t.l.item==i&&t.l.preloadManager?u=t.l.preloadManager:t.i&&t.i.item==i&&t.i.preloadManager&&(u=t.i.preloadManager,a=!0),!t.i){w.A(2);break}if(a||t.i.preloadManager.l){w.A(3);break}return T(w,t.i.preloadManager.destroy(),3);case 3:t.i=null;case 2:if(!(t.m&&t.m.preloadPrevItem&&n&&t.g.ae()===St)){w.A(5);break}return l=null,se(w,6),T(w,t.g.kj(),8);case 8:l=w.h,fe(w,7);break;case 6:ue(w),l=null;case 7:t.i={item:n,preloadManager:l};case 5:return i.config&&(t.g.Pi(),t.g.configure(i.config)),T(w,t.g.load(u,i.startTime,i.mimeType),9);case 9:if(t.l=null,i.extraText)for(c=m(i.extraText),f=c.next();!f.done;f=c.next())p=f.value,p.mime?t.g.Sd(p.uri,p.language,p.kind,p.mime,p.codecs):t.g.Sd(p.uri,p.language,p.kind);if(i.extraThumbnail)for(h=m(i.extraThumbnail),g=h.next();!g.done;g=h.next())v=g.value,t.g.Pe(v);if(i.extraChapter)for(y=m(i.extraChapter),S=y.next();!S.done;S=y.next())x=S.value,t.g.Oe(x.uri,x.language,x.mime);G(w)}})},K("shaka.queue.QueueManager",gt),gt.prototype.playItem=gt.prototype.playItem,gt.prototype.removeAllItems=gt.prototype.removeAllItems,gt.prototype.insertItems=gt.prototype.insertItems,gt.prototype.getItems=gt.prototype.getItems,gt.prototype.getCurrentItemIndex=gt.prototype.getCurrentItemIndex,gt.prototype.getCurrentItem=gt.prototype.getCurrentItem,gt.prototype.getConfiguration=gt.prototype.getConfiguration,gt.prototype.configure=gt.prototype.configure,gt.prototype.destroy=gt.prototype.destroy,Ga=function(e){return new gt(e)};function an(){}an.prototype.parseInit=function(){},an.prototype.setSequenceMode=function(){},an.prototype.setManifestType=function(){},an.prototype.parseMedia=function(e,t){var n=null,i=[];e=Xe(e).split(/\r?\n/),e=m(e);for(var r=e.next();!r.done;r=e.next())if((r=r.value)&&!/^\s+$/.test(r)&&(r=pM.exec(r))){var o=hM.exec(r[1]);o=parseInt(o[1],10)*60+parseFloat(o[2].replace(",",".")),r=new be(o,t.segmentEnd?t.segmentEnd:o+2,r[2]),n&&(n.endTime=o,i.push(n)),n=r}return n&&i.push(n),i},K("shaka.text.LrcTextParser",an),an.prototype.parseMedia=an.prototype.parseMedia,an.prototype.setManifestType=an.prototype.setManifestType,an.prototype.setSequenceMode=an.prototype.setSequenceMode,an.prototype.parseInit=an.prototype.parseInit;var pM=/^\[(\d{1,2}:\d{1,2}(?:[.,]\d{1,3})?)\](.*)/,hM=/^(\d+):(\d{1,2}(?:[.,]\d{1,3})?)$/;Tt("application/x-subtitle-lrc",function(){return new an});function rn(){this.g="UNKNOWN"}rn.prototype.parseInit=function(){},rn.prototype.setSequenceMode=function(){},rn.prototype.setManifestType=function(e){this.g=e},rn.prototype.parseMedia=function(e,t,n,i){var r=Xe(e);if(e=[],r=="")return e;var o=dr(r,"tt",!0);if(!o)throw new D(2,2,2005,"Failed to parse TTML.");if(r=Hn(o,"body")[0],!r)return[];var s=Yn(o,su,"frameRate"),u=Yn(o,su,"subFrameRate"),a=Yn(o,su,"frameRateMultiplier"),l=Yn(o,su,"tickRate"),c=Yn(o,su,"cellResolution"),f=o.attributes["xml:space"]||"default",p=Yn(o,Hl,"extent");if(f!="default"&&f!="preserve")throw new D(2,2,2005,"Invalid xml:space value: "+f);f=f=="default",s=new TM(s,u,a,l),c=yM(c),u=Hn(o,"metadata")[0],u=(u?u.children:[]).filter(function(v){return v!=`
`}),a=Hn(o,"style"),o=Hn(o,"region"),l=[];for(var h=m(o),g=h.next();!g.done;g=h.next())(g=gM(this,g.value,a,p))&&l.push(g);if(De(r,"p").length)throw new D(2,2,2001,"<p> can only be inside <div> in TTML");for(p=m(De(r,"div")),h=p.next();!h.done;h=p.next())if(De(h.value,"span").length)throw new D(2,2,2001,"<span> can only be inside <p> in TTML");return(t=gT(this,r,t,s,u,a,o,l,f,c,null,!1,n,i))&&(t.backgroundColor||(t.backgroundColor="transparent"),e.push(t)),e};function gT(e,t,n,i,r,o,s,u,a,l,c,f,p,h){var g=c;if(wu(t)){if(!f)return null;var v={tagName:"span",children:[nt(t)],attributes:{},parent:null}}else v=t;for(var y=null,S=m(IT),x=S.next();!x.done&&!(y=Vl(v,"backgroundImage",r,"#",x.value)[0]);x=S.next());S=null,x=Yn(v,IT,"backgroundImage");var w=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/;if(x&&w.test(x)){if(S=parseInt(x.split(":").pop(),10)-1,S>=h.length)return null;S=h[S]}else p&&x&&!x.startsWith("#")&&(w=new tt(p),x=new tt(x),(x=w.resolve(x).toString())&&(S=x));if((t.tagName=="p"||y||S)&&(f=!0),t=f,x=(v.attributes["xml:space"]||(a?"default":"preserve"))=="default",w=v.children.every(wu),a=[],!w)for(var I=m(v.children),L=I.next();!L.done;L=I.next())(L=gT(e,L.value,n,i,r,o,s,u,x,l,v,f,p,h))&&a.push(L);if(r=c!=null,p=nt(v),p=v.children.length&&p&&/\S/.test(p),I=v.attributes.begin||v.attributes.end||v.attributes.dur,!(I||p||v.tagName=="br"||a.length!=0||r&&!x))return null;for(h=yT(v,i),p=h.start,h=h.end;g&&g.tagName&&g.tagName!="tt";)h=vM(g,i,p,h),p=h.start,h=h.end,g=g.parent;if(p==null&&(p=0),p+=n.periodStart,h=h==null?1/0:h+n.periodStart,e.g!=="HLS"&&(p=Math.max(p,n.segmentStart),h=Math.min(h,n.segmentEnd)),!I&&a.length>0)for(p=1/0,h=0,n=m(a),i=n.next();!i.done;i=n.next())i=i.value,p=Math.min(p,i.startTime),h=Math.max(h,i.endTime);if(v.tagName=="br")return e=new be(p,h,""),e.lineBreak=!0,e;if(n="",w&&(n=Ut(nt(v)||""),x&&(n=n.replace(/\s+/g," "))),n=new be(p,h,n),n.nestedCues=a,f||(n.isContainer=!0),l&&(n.cellResolution=l),l=Vl(v,"region",s,"")[0],v.attributes.region&&l&&l.attributes["xml:id"]){var A=l.attributes["xml:id"];n.region=u.filter(function(C){return C.id==A})[0]}return u=l,c&&r&&!v.attributes.region&&!v.attributes.style&&(u=Vl(c,"region",s,"")[0]),mM(e,n,v,u,y,S,o,t,a.length==0),n}function gM(e,t,n,i){var r=new cr,o=t.attributes["xml:id"];if(!o)return null;r.id=o,o=null,i&&(o=Pp.exec(i)||Np.exec(i)),i=o?Number(o[1]):null,o=o?Number(o[2]):null;var s,u=Fl(e,t,n,"extent");if(u){var a=(s=Pp.exec(u))||Np.exec(u);a!=null&&(r.width=Number(a[1]),r.height=Number(a[2]),s||(i!=null&&(r.width=r.width*100/i),o!=null&&(r.height=r.height*100/o)),r.widthUnits=s||i!=null?qt:0,r.heightUnits=s||o!=null?qt:0)}return(e=Fl(e,t,n,"origin"))&&(a=(s=Pp.exec(e))||Np.exec(e),a!=null&&(r.viewportAnchorX=Number(a[1]),r.viewportAnchorY=Number(a[2]),s?u||(r.width=100-r.viewportAnchorX,r.widthUnits=qt,r.height=100-r.viewportAnchorY,r.heightUnits=qt):(o!=null&&(r.viewportAnchorY=r.viewportAnchorY*100/o),i!=null&&(r.viewportAnchorX=r.viewportAnchorX*100/i)),r.viewportAnchorUnits=s||i!=null?qt:0)),r}function kp(e){var t=e.match(/rgba\(([^)]+)\)/);return t&&(t=t[1].split(","),t.length==4)?(t[3]=String(Number(t[3])/255),"rgba("+t.join(",")+")"):e}function mM(e,t,n,i,r,o,s,u,a){if(u=u||a,Pt(e,n,i,s,"direction",u)=="rtl"&&(t.direction="rtl"),a=Pt(e,n,i,s,"writingMode",u),a=="tb"||a=="tblr"?t.writingMode="vertical-lr":a=="tbrl"?t.writingMode="vertical-rl":a=="rltb"||a=="rl"?t.direction="rtl":a&&(t.direction=zo),(a=Pt(e,n,i,s,"textAlign",!0))?(t.positionAlign=wM.get(a),t.lineAlign=SM.get(a),t.textAlign=pc[a.toUpperCase()]):t.textAlign=$n,(a=Pt(e,n,i,s,"displayAlign",!0))&&(t.displayAlign=mh[a.toUpperCase()]),(a=Pt(e,n,i,s,"color",u))&&(t.color=kp(a)),(a=Pt(e,n,i,s,"backgroundColor",u))&&(t.backgroundColor=kp(a)),(a=Pt(e,n,i,s,"border",u))&&(t.border=a),a=Pt(e,n,i,s,"fontFamily",u))switch(a){case"monospaceSerif":t.fontFamily="Courier New,Liberation Mono,Courier,monospace";break;case"proportionalSansSerif":t.fontFamily="Arial,Helvetica,Liberation Sans,sans-serif";break;case"sansSerif":t.fontFamily="sans-serif";break;case"monospaceSansSerif":t.fontFamily="Consolas,monospace";break;case"proportionalSerif":t.fontFamily="serif";break;default:t.fontFamily=a.split(",").filter(function(l){return l!="default"}).join(",")}switch((a=Pt(e,n,i,s,"fontWeight",u))&&a=="bold"&&(t.fontWeight=Hr),a=Pt(e,n,i,s,"wrapOption",u),t.wrapLine=!(a&&a=="noWrap"),(a=Pt(e,n,i,s,"lineHeight",u))&&a.match(Po)&&(t.lineHeight=a),(a=Pt(e,n,i,s,"fontSize",u))&&(a.match(Po)||a.match(xM))&&(t.fontSize=a),(a=Pt(e,n,i,s,"fontStyle",u))&&(t.fontStyle=xh[a.toUpperCase()]),r?(o=r.attributes.imageType||r.attributes.imagetype,a=r.attributes.encoding,r=nt(r).trim(),o=="PNG"&&a=="Base64"&&r&&(t.backgroundImage="data:image/png;base64,"+r)):o&&(t.backgroundImage=o),(r=Pt(e,n,i,s,"textOutline",u))&&(r=r.split(" "),r[0].match(Po)?t.textStrokeColor=t.color:(t.textStrokeColor=kp(r[0]),r.shift()),r[0]&&r[0].match(Po)?t.textStrokeWidth=r[0]:t.textStrokeColor=""),(r=Pt(e,n,i,s,"letterSpacing",u))&&r.match(Po)&&(t.letterSpacing=r),(r=Pt(e,n,i,s,"linePadding",u))&&r.match(Po)&&(t.linePadding=r),(r=Pt(e,n,i,s,"opacity",u))&&(t.opacity=parseFloat(r)),(r=Fl(e,i,s,"textDecoration"))&&mT(t,r),(r=Dp(e,n,s,"textDecoration"))&&mT(t,r),(r=Pt(e,n,i,s,"textCombine",u))&&(t.textCombineUpright=r),Pt(e,n,i,s,"ruby",u)){case"container":t.rubyTag="ruby";break;case"text":t.rubyTag="rt"}}function mT(e,t){t=m(t.split(" "));for(var n=t.next();!n.done;n=t.next())switch(n.value){case"underline":e.textDecoration.includes(li)||e.textDecoration.push(li);break;case"noUnderline":e.textDecoration.includes(li)&&Rn(e.textDecoration,li);break;case"lineThrough":e.textDecoration.includes("lineThrough")||e.textDecoration.push("lineThrough");break;case"noLineThrough":e.textDecoration.includes("lineThrough")&&Rn(e.textDecoration,"lineThrough");break;case"overline":e.textDecoration.includes("overline")||e.textDecoration.push("overline");break;case"noOverline":e.textDecoration.includes("overline")&&Rn(e.textDecoration,"overline")}}function Pt(e,t,n,i,r,o){return o=o===void 0?!0:o,(t=Dp(e,t,i,r))?t:o?Fl(e,n,i,r):null}function Fl(e,t,n,i){if(!t)return null;var r=Yn(t,Hl,i);return r||vT(e,t,n,i)}function Dp(e,t,n,i){var r=Yn(t,Hl,i);return r||vT(e,t,n,i)}function vT(e,t,n,i){t=Vl(t,"style",n,"");for(var r=null,o=0;o<t.length;o++){var s=ui(t[o],"urn:ebu:tt:style",i);s||(s=Yn(t[o],Hl,i)),s||(s=Dp(e,t[o],n,i)),s&&(r=s)}return r}function Vl(e,t,n,i,r){var o=[];if(!e||n.length<1)return o;var s=e;for(e=null;!e&&!(e=r?ui(s,r,t):s.attributes[t])&&(s=s.parent,s););if(t=e){for(t=m(t.split(" ")),r=t.next();!r.done;r=t.next())for(r=r.value,e=m(n),s=e.next();!s.done;s=e.next())if(s=s.value,i+s.attributes["xml:id"]==r){o.push(s);break}}return o}function vM(e,t,n,i){return e=yT(e,t),n==null?n=e.start:e.start!=null&&(n+=e.start),i==null?i=e.end:e.start!=null&&(i+=e.start),{start:n,end:i}}function yT(e,t){var n=Rp(e.attributes.begin,t),i=Rp(e.attributes.end,t);return e=Rp(e.attributes.dur,t),i==null&&e!=null&&(i=n+e),{start:n,end:i}}function Rp(e,t){var n=null;if(TT.test(e)){e=TT.exec(e),n=Number(e[1]);var i=Number(e[2]),r=Number(e[3]),o=Number(e[4]);o+=(Number(e[5])||0)/t.h,r+=o/t.frameRate,n=r+i*60+n*3600}else if(xT.test(e))n=Lp(xT,e);else if(ST.test(e))n=Lp(ST,e);else if(wT.test(e))e=wT.exec(e),n=Number(e[1])/t.frameRate;else if(AT.test(e))e=AT.exec(e),n=Number(e[1])/t.g;else if(ET.test(e))n=Lp(ET,e);else if(e)throw new D(2,2,2001,"Could not parse cue time range in TTML");return n}function Lp(e,t){return e=e.exec(t),e==null||e[0]==""?null:(Number(e[4])||0)/1e3+(Number(e[3])||0)+(Number(e[2])||0)*60+(Number(e[1])||0)*3600}function yM(e){return e&&(e=/^(\d+) (\d+)$/.exec(e))?{columns:parseInt(e[1],10),rows:parseInt(e[2],10)}:null}K("shaka.text.TtmlTextParser",rn),rn.prototype.parseMedia=rn.prototype.parseMedia,rn.prototype.setManifestType=rn.prototype.setManifestType,rn.prototype.setSequenceMode=rn.prototype.setSequenceMode,rn.prototype.parseInit=rn.prototype.parseInit;function TM(e,t,n,i){this.frameRate=Number(e)||30,this.h=Number(t)||1,this.g=Number(i),this.g==0&&(this.g=e?this.frameRate*this.h:1),n&&(e=/^(\d+) (\d+)$/g.exec(n))&&(this.frameRate*=Number(e[1])/Number(e[2]))}var Pp=/^(\d{1,2}(?:\.\d+)?|100(?:\.0+)?)% (\d{1,2}(?:\.\d+)?|100(?:\.0+)?)%$/,xM=/^(\d{1,4}(?:\.\d+)?|100)%$/,Po=/^(\d+px|\d+em|\d*\.?\d+c)$/,Np=/^(\d+)px (\d+)px$/,TT=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,xT=/^(?:(\d{2,}):)?(\d{2}):(\d{2})$/,ST=/^(?:(\d{2,}):)?(\d{2}):(\d{2}\.\d+)$/,wT=/^(\d*(?:\.\d*)?)f$/,AT=/^(\d*(?:\.\d*)?)t$/,ET=RegExp("^(?:(\\d*(?:\\.\\d*)?)h)?(?:(\\d*(?:\\.\\d*)?)m)?(?:(\\d*(?:\\.\\d*)?)s)?(?:(\\d*(?:\\.\\d*)?)ms)?$"),SM=new Map().set("left",hr).set("center","center").set("right","end").set("start",hr).set("end","end"),wM=new Map().set("left","line-left").set("center","center").set("right","line-right"),su=["http://www.w3.org/ns/ttml#parameter","http://www.w3.org/2006/10/ttaf1#parameter"],Hl=["http://www.w3.org/ns/ttml#styling","http://www.w3.org/2006/10/ttaf1#styling"],IT=["http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt","http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt"];Tt("application/ttml+xml",function(){return new rn});function ct(){this.g=new rn}ct.prototype.parseInit=function(e){var t=!1;if(new Ne().box("moov",ce).box("trak",ce).box("mdia",ce).box("minf",ce).box("stbl",ce).S("stsd",gi).box("stpp",function(n){t=!0,n.parser.stop()}).parse(e),!t)throw new D(2,2,2007)},ct.prototype.setSequenceMode=function(e){this.g.setSequenceMode(e)},ct.prototype.setManifestType=function(e){this.g.setManifestType(e)},ct.prototype.parseMedia=function(e,t,n){var i=[],r=null,o=[],s=new Map,u=[];if(new Ne().box("moof",ce).box("traf",ce).S("tfhd",function(S){r=Yu(S.reader,S.flags).Yd}).S("trun",function(S){S=$u(S.reader,S.version,S.flags),S=m(S.nh);for(var x=S.next();!x.done;x=S.next())u.push(x.value.sampleSize||r||0)}).S("subs",function(S){for(var x=S.reader,w=x.U(),I=-1,L=0;L<w;L++){var A=x.U();I+=A,A=x.Ca();for(var C=[],E=0;E<A;E++)S.version==1?C.push(x.U()):C.push(x.Ca()),x.Z(),x.Z(),x.U();s.set(I,C)}}).box("mdat",$r(function(S){o.push(S)},!1)).parse(e,!1),o.length==0)throw new D(2,2,2007);e=it.apply(Et,H(o));for(var a=0,l=0;l<u.length;l++){var c=re(e,a,u[l]);a+=u[l];var f=s.get(l);if(f&&f.length){for(var p=re(c,0,f[0]),h=[],g=f[0],v=1;v<f.length;v++){var y=re(c,g,f[v]);y=yu(y),h.push("data:image/png;base64,"+y),g+=f[v]}i=i.concat(this.g.parseMedia(p,t,n,h))}else i=i.concat(this.g.parseMedia(c,t,n,[]))}return i},K("shaka.text.Mp4TtmlParser",ct),ct.prototype.parseMedia=ct.prototype.parseMedia,ct.prototype.setManifestType=ct.prototype.setManifestType,ct.prototype.setSequenceMode=ct.prototype.setSequenceMode,ct.prototype.parseInit=ct.prototype.parseInit,Tt('application/mp4; codecs="stpp"',function(){return new ct}),Tt('application/mp4; codecs="stpp.ttml"',function(){return new ct}),Tt('application/mp4; codecs="stpp.ttml.im1i"',function(){return new ct}),Tt('application/mp4; codecs="stpp.ttml.im1t"',function(){return new ct}),Tt('application/mp4; codecs="stpp.ttml.im2i"',function(){return new ct}),Tt('application/mp4; codecs="stpp.ttml.im2t"',function(){return new ct}),Tt('application/mp4; codecs="stpp.ttml.etd1"',function(){return new ct}),Tt('application/mp4; codecs="stpp.ttml.etd1|im1t"',function(){return new ct}),Tt('application/mp4; codecs="stpp.ttml.im1t|etd1"',function(){return new ct}),Tt('application/mp4; codecs="stpp.TTML.im1t"',function(){return new ct});function Vt(){this.g="UNKNOWN"}Vt.prototype.parseInit=function(){},Vt.prototype.setSequenceMode=function(){},Vt.prototype.setManifestType=function(e){this.g=e},Vt.prototype.parseMedia=function(e,t){e=Xe(e),e=e.replace(/\r\n|\r(?=[^\n]|$)/gm,`
`);var n=e.split(/\n{2,}/m);if(!/^WEBVTT($|[ \t\n])/m.test(n[0]))throw new D(2,2,2e3);if(e=t.vttOffset,this.g=="HLS"&&n[0].includes("X-TIMESTAMP-MAP")){var i=n[0];if(e=i.match(/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m),i=i.match(/MPEGTS:(\d+)/m),!e||!i)throw new D(2,2,2e3);if(e=Vr(e[1]),e==null)throw new D(2,2,2e3);i=Number(i[1]);for(var r=t.segmentStart-t.periodStart;r>=95443.7176888889;)r-=95443.7176888889,i+=8589934592;e=t.periodStart+i/9e4-e}for(t=[],i=m(n[0].split(`
`)),r=i.next();!r.done;r=i.next())if(r=r.value,/^Region:/.test(r)){r=new br(r);var o=new cr;fr(r),Fr(r);for(var s=fr(r);s;){var u=o,a=s;(s=/^id=(.*)$/.exec(a))?u.id=s[1]:(s=/^width=(\d{1,2}|100)%$/.exec(a))?u.width=Number(s[1]):(s=/^lines=(\d+)$/.exec(a))?(u.height=Number(s[1]),u.heightUnits=2):(s=/^regionanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.regionAnchorX=Number(s[1]),u.regionAnchorY=Number(s[2])):(s=/^viewportanchor=(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(a))?(u.viewportAnchorX=Number(s[1]),u.viewportAnchorY=Number(s[2])):/^scroll=up$/.exec(a)&&(u.scroll="up"),Fr(r),s=fr(r)}t.push(o)}for(i=new Map,hh(i),r=[],n=m(n.slice(1)),o=n.next();!o.done;o=n.next()){if(o=o.value.split(`
`),(o.length!=1||o[0])&&!/^NOTE($|[ \t])/.test(o[0])&&o[0]=="STYLE"){for(u=[],s=-1,a=1;a<o.length;a++)o[a].includes("::cue")&&(u.push([]),s=u.length-1),s!=-1&&(u[s].push(o[a]),o[a].includes("}")&&(s=-1));for(u=m(u),s=u.next();!s.done;s=u.next()){var l=s.value;s="global",(a=l[0].match(/\((.*)\)/))&&(s=a.pop()),a=l.slice(1,-1),l[0].includes("}")&&(l=/\{(.*?)\}/.exec(l[0]))&&(a=l[1].split(";")),(l=i.get(s))||(l=new be(0,0,""));for(var c=!1,f=0;f<a.length;f++){var p=/^\s*([^:]+):\s*(.*)/.exec(a[f]);if(p){var h=p[2].trim().replace(";","");switch(p[1].trim()){case"background-color":case"background":c=!0,l.backgroundColor=h;break;case"color":c=!0,l.color=h;break;case"font-family":c=!0,l.fontFamily=h;break;case"font-size":c=!0,l.fontSize=h;break;case"font-weight":(parseInt(h,10)>=700||h=="bold")&&(c=!0,l.fontWeight=Hr);break;case"font-style":switch(h){case"normal":c=!0,l.fontStyle=gc;break;case"italic":c=!0,l.fontStyle=Gr;break;case"oblique":c=!0,l.fontStyle="oblique"}break;case"opacity":c=!0,l.opacity=parseFloat(h);break;case"text-combine-upright":c=!0,l.textCombineUpright=h;break;case"text-shadow":c=!0,l.textShadow=h;break;case"white-space":c=!0,l.wrapLine=h!="noWrap"}}}c&&i.set(s,l)}}if(l=o,c=e,l.length==1&&!l[0]||/^NOTE($|[ \t])/.test(l[0])||l[0]=="STYLE"||l[0]=="REGION")o=null;else if(o=null,l[0].includes("-->")||(o=l[0],l.splice(0,1)),u=new br(l[0]),s=Go(u),f=ji(u,/[ \t]+--\x3e[ \t]+/g),a=Go(u),s==null||f==null||a==null)ve("Failed to parse VTT time code. Cue skipped:",o,l),o=null;else{for(s+=c,a+=c,s<0&&(s=0),c=l.slice(1).join(`
`).trim(),i.has("global")?(l=i.get("global").clone(),l.startTime=s,l.endTime=a,l.payload=c):l=new be(s,a,c),Fr(u),s=fr(u);s;)CT(l,s,t),Fr(u),s=fr(u);ku(l,i),o!=null&&(l.id=o),o=l}o&&r.push(o)}return r};function CT(e,t,n){var i;(i=/^align:(start|middle|center|end|left|right)$/.exec(t))?(t=i[1],t=="middle"?e.textAlign=$n:e.textAlign=pc[t.toUpperCase()]):(i=/^vertical:(lr|rl)$/.exec(t))?e.writingMode=i[1]=="lr"?"vertical-lr":"vertical-rl":(i=/^size:([\d.]+)%$/.exec(t))?e.size=Number(i[1]):(i=/^position:([\d.]+)%(?:,(line-left|line-right|middle|center|start|end|auto))?$/.exec(t))?(e.position=Number(i[1]),i[2]&&(t=i[2],e.positionAlign=t=="line-left"||t=="start"?"line-left":t=="line-right"||t=="end"?"line-right":t=="center"||t=="middle"?"center":Du)):(i=/^region:(.*)$/.exec(t))?(t=AM(n,i[1]))&&(e.region=t):(n=/^line:([\d.]+)%(?:,(start|end|center))?$/.exec(t))?(e.lineInterpretation=1,e.line=Number(n[1]),n[2]&&(e.lineAlign=hc[n[2].toUpperCase()])):(n=/^line:(-?\d+)(?:,(start|end|center))?$/.exec(t))&&(e.lineInterpretation=Yo,e.line=Number(n[1]),n[2]&&(e.lineAlign=hc[n[2].toUpperCase()]))}function AM(e,t){return e=e.filter(function(n){return n.id==t}),e.length?e[0]:null}K("shaka.text.VttTextParser",Vt),Vt.prototype.parseMedia=Vt.prototype.parseMedia,Vt.prototype.setManifestType=Vt.prototype.setManifestType,Vt.prototype.setSequenceMode=Vt.prototype.setSequenceMode,Vt.prototype.parseInit=Vt.prototype.parseInit,Tt("text/vtt",function(){return new Vt}),Tt('text/vtt; codecs="vtt"',function(){return new Vt}),Tt('text/vtt; codecs="wvtt"',function(){return new Vt});function ln(){this.g=null}ln.prototype.parseInit=function(e){var t=this,n=!1;if(new Ne().box("moov",ce).box("trak",ce).box("mdia",ce).S("mdhd",function(i){i=Ju(i.reader,i.version),t.g=i.timescale}).box("minf",ce).box("stbl",ce).S("stsd",gi).box("wvtt",function(){n=!0}).parse(e),!this.g)throw new D(2,2,2008);if(!n)throw new D(2,2,2008)},ln.prototype.setSequenceMode=function(){},ln.prototype.setManifestType=function(){},ln.prototype.parseMedia=function(e,t){if(!e.length)return[];if(!this.g)throw new D(2,2,2008);var n=0,i=[],r,o=[],s=!1,u=!1,a=!1,l=null;if(new Ne().box("moof",ce).box("traf",ce).S("tfdt",function(w){s=!0,n=qu(w.reader,w.version).baseMediaDecodeTime}).S("tfhd",function(w){l=Yu(w.reader,w.flags).Xd}).S("trun",function(w){u=!0,i=$u(w.reader,w.version,w.flags).nh}).box("mdat",$r(function(w){a=!0,r=w},!1)).parse(e,!1),!a&&!s&&!u)throw new D(2,2,2008);e=n;for(var c=new Fe(r,0),f=m(i),p=f.next();!p.done;p=f.next()){p=p.value;var h=p.oh||l,g=p.Gf?n+p.Gf:e;e=g+(h||0);var v=0;do{var y=c.U();v+=y;var S=c.U(),x=null;Wu(S)=="vttc"?y>8&&(x=c.Tb(y-8,!1)):c.skip(y-8),h&&x&&(y=EM(x,t.periodStart+g/this.g,t.periodStart+e/this.g),o.push(y))}while(p.sampleSize&&v<p.sampleSize)}return o.filter(bi)};function EM(e,t,n){var i,r,o;return new Ne().box("payl",$r(function(s){i=Xe(s)},!1)).box("iden",$r(function(s){r=Xe(s)},!1)).box("sttg",$r(function(s){o=Xe(s)},!1)).parse(e),i?IM(i,r,o,t,n):null}function IM(e,t,n,i,r){if(e=new be(i,r,e),ku(e),t&&(e.id=t),n)for(t=new br(n),n=fr(t);n;)CT(e,n,[]),Fr(t),n=fr(t);return e}K("shaka.text.Mp4VttParser",ln),ln.prototype.parseMedia=ln.prototype.parseMedia,ln.prototype.setManifestType=ln.prototype.setManifestType,ln.prototype.setSequenceMode=ln.prototype.setSequenceMode,ln.prototype.parseInit=ln.prototype.parseInit,Tt('application/mp4; codecs="wvtt"',function(){return new ln});function cn(){}cn.prototype.parseInit=function(){},cn.prototype.setSequenceMode=function(){},cn.prototype.setManifestType=function(){},cn.prototype.parseMedia=function(e){var t=Xe(e).replace(/\r+/g,"");if(t=t.trim(),e=[],t=="")return e;t=m(t.split(`

`));for(var n=t.next();!n.done;n=t.next()){n=n.value.split(`
`);var i=new br(n[0]),r=Go(i),o=ji(i,/,/g);if(i=Go(i),r==null||o==null||i==null)throw new D(2,2,2001,"Could not parse cue time range in SubViewer");e.push(new be(r,i,n.slice(1).join(`
`).trim()))}return e},K("shaka.text.SbvTextParser",cn),cn.prototype.parseMedia=cn.prototype.parseMedia,cn.prototype.setManifestType=cn.prototype.setManifestType,cn.prototype.setSequenceMode=cn.prototype.setSequenceMode,cn.prototype.parseInit=cn.prototype.parseInit,Tt("text/x-subviewer",function(){return new cn});function fn(){this.g=new Vt}fn.prototype.parseInit=function(){},fn.prototype.setSequenceMode=function(){},fn.prototype.setManifestType=function(){},fn.prototype.parseMedia=function(e,t,n){var i=Xe(e);if(e=`WEBVTT

`,i!=""){i=i.replace(/\r+/g,""),i=i.trim(),i=m(i.split(`

`));for(var r=i.next();!r.done;r=i.next())r=r.value.split(/\n/),r[0].match(/\d+/)&&r.shift(),r[0]=r[0].replace(/,/g,"."),e+=r.join(`
`).replace(/{b}/g,"<b>").replace(/{\/b}/g,"</b>").replace(/{i}/g,"<i>").replace(/{\/i}/g,"</i>").replace(/{u}/g,"<u>").replace(/{\/u}/g,"</u>")+`

`}return e=re(Ln(e)),this.g.parseMedia(e,t,n,[])},K("shaka.text.SrtTextParser",fn),fn.prototype.parseMedia=fn.prototype.parseMedia,fn.prototype.setManifestType=fn.prototype.setManifestType,fn.prototype.setSequenceMode=fn.prototype.setSequenceMode,fn.prototype.parseInit=fn.prototype.parseInit,Tt("text/srt",function(){return new fn});function dn(){}dn.prototype.parseInit=function(){},dn.prototype.setSequenceMode=function(){},dn.prototype.setManifestType=function(){},dn.prototype.parseMedia=function(e){var t="",n="",i=null,r=null;for(r=Xe(e).split(/\r?\n\s*\r?\n/),e=m(r),r=e.next();!r.done;r=e.next()){var o=r.value;r=o,(o=MM.exec(o))&&(i=o[1],r=o[2]),i=="V4 Styles"||i=="V4+ Styles"?(t=r,t=n?t+(`
`+r):r):i=="Events"&&(n=n?n+(`
`+r):r)}for(i=[],r=null,t=m(t.split(/\r?\n/)),e=t.next();!e.done;e=t.next())if(e=e.value,!/^\s*;/.test(e)&&(o=DT.exec(e))){if(e=o[1].trim(),o=o[2].trim(),e=="Format")r=o.split(Gl);else if(e=="Style"){e=o.split(Gl),o={};for(var s=0;s<r.length&&s<e.length;s++)o[r[s]]=e[s];i.push(o)}}for(r=[],t=null,n=m(n.split(/\r?\n/)),o=n.next(),e={};!o.done;e={bj:void 0},o=n.next())if(o=o.value,!/^\s*;/.test(o)&&(s=DT.exec(o))){if(o=s[1].trim(),s=s[2].trim(),o=="Format")t=s.split(Gl);else if(o=="Dialogue"){s=s.split(Gl),o={};for(var u=0;u<t.length&&u<s.length;u++)o[t[u]]=s[u];u=kT(o.Start);var a=kT(o.End);s=new be(u,a,s.slice(t.length-1).join(",").replace(/\\N/g,`
`).replace(/\{[^}]+\}/g,"")),e.bj=o.Style,(e=i.find(function(l){return function(c){return c.Name==l.bj}}(e)))&&CM(s,e),r.push(s)}}return r};function CM(e,t){var n=t.Fontname;if(n&&(e.fontFamily=n),(n=t.Fontsize)&&(e.fontSize=n+"px"),(n=t.PrimaryColour)&&(n=MT(n))&&(e.color=n),(n=t.BackColour)&&(n=MT(n))&&(e.backgroundColor=n),t.Bold&&(e.fontWeight=Hr),t.Italic&&(e.fontStyle=Gr),t.Underline&&e.textDecoration.push(li),(n=t.Spacing)&&(e.letterSpacing=n+"px"),n=t.Alignment)switch(parseInt(n,10)){case 1:e.displayAlign=Xo,e.textAlign="start";break;case 2:e.displayAlign=Xo,e.textAlign=$n;break;case 3:e.displayAlign=Xo,e.textAlign="end";break;case 5:e.displayAlign="before",e.textAlign="start";break;case 6:e.displayAlign="before",e.textAlign=$n;break;case 7:e.displayAlign="before",e.textAlign="end";break;case 9:e.displayAlign="center",e.textAlign="start";break;case 10:e.displayAlign="center",e.textAlign=$n;break;case 11:e.displayAlign="center",e.textAlign="end"}(t=t.AlphaLevel)&&(e.opacity=parseFloat(t))}function MT(e){return e=parseInt(e.replace("&H",""),16),e>=0?"rgba("+(e&255)+","+(e>>8&255)+","+(e>>16&255)+","+(e>>24&255^255)/255+")":null}function kT(e){return e=kM.exec(e),(e[1]?parseInt(e[1].replace(":",""),10):0)*3600+parseInt(e[2],10)*60+parseFloat(e[3])}K("shaka.text.SsaTextParser",dn),dn.prototype.parseMedia=dn.prototype.parseMedia,dn.prototype.setManifestType=dn.prototype.setManifestType,dn.prototype.setSequenceMode=dn.prototype.setSequenceMode,dn.prototype.parseInit=dn.prototype.parseInit;var MM=/^\s*\[([^\]]+)\]\r?\n([\s\S]*)/,DT=/^\s*([^:]+):\s*(.*)/,Gl=/\s*,\s*/,kM=/^(\d+:)?(\d{1,2}):(\d{1,2}(?:[.]\d{1,3})?)?$/;Tt("text/x-ssa",function(){return new dn});function RT(e,t){var n=e[t+1]&1?7:9;return t+n<=e.length&&(e=((e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5)-n,e>0)?{ee:n,ra:e}:null}function LT(e,t){var n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],i=(e[t+2]&60)>>>2;if(i>n.length-1)return null;var r=((e[t+2]&192)>>>6)+1,o=(e[t+2]&1)<<2;return o|=(e[t+3]&192)>>>6,{sampleRate:n[i],channelCount:o,codec:"mp4a.40."+r}}function PT(e,t){if(t+1<e.length&&e[t]===255&&(e[t+1]&246)===240){var n=e[t+1]&1?7:9;if(t+n>=e.length)return!1;var i=(e[t+3]&3)<<11|e[t+4]<<3|(e[t+5]&224)>>>5;return i<=n?!1:(t+=i,t===e.length||t+1<e.length&&e[t]===255&&(e[t+1]&246)===240)}return!1}function DM(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2||t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null}function pn(e){this.j=e,this.g=0,this.h=new Map,this.i=null}d=pn.prototype,d.destroy=function(){this.h.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/aac"?jt(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/aac"?'audio/mp4; codecs="'+(Kt(t)||"mp4a.40.2")+'"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){for(var r=re(e),o=to(r),s=o.length;s<r.length&&!PT(r,s);s++);if(e=n.endTime*1e3,o=Er(o),o.length&&n&&(o=o.find(function(f){return f.description==="com.apple.streaming.transportStreamTimestamp"}))&&(e=o.data),o=LT(r,s),!o)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=o.sampleRate,t.channelsCount=o.channelCount;for(var u=[];s<r.length;){var a=RT(r,s);if(!a)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));var l=a.ee+a.ra;s+l<=r.length&&u.push({data:r.subarray(s+a.ee,s+l),size:a.ra,duration:1024,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),s+=l}r=o.sampleRate,e=Math.floor(e*r/1e3),i={id:t.id,type:"audio",codecs:o.codec,timescale:r,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:e,zb:u},stream:t};var c=new Qr([i]);return t=this.h.getOrInsertComputed(t.id+"_"+n.i,function(){return Zr(c)}),n=this.i!==t,i=as(c),this.i=t,this.g++,Promise.resolve({data:i,init:n?t:null})},K("shaka.transmuxer.AacTransmuxer",pn),pn.prototype.transmux=pn.prototype.transmux,pn.prototype.getOriginalMimeType=pn.prototype.getOriginalMimeType,pn.prototype.convertCodecs=pn.prototype.convertCodecs,pn.prototype.isSupported=pn.prototype.isSupported,pn.prototype.destroy=pn.prototype.destroy,ci("audio/aac",function(){return new pn("audio/aac")},_i);function NT(e,t){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return null;var n=e[t+4]>>6;if(n>=3)return null;var i=e[t+4]&63,r=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][i*3+n]*2;if(t+r>e.length)return null;var o=e[t+6]>>5,s=0;o===2?s+=2:(o&1&&o!==1&&(s+=2),o&4&&(s+=2)),s=(e[t+6]<<8|e[t+7])>>12-s&1;var u=e[t+5]&7;return e=new Uint8Array([n<<6|e[t+5]>>3<<1|u>>2,(u&3)<<6|o<<3|s<<2|i>>4,i<<4&224]),{sampleRate:[48e3,44100,32e3][n],channelCount:[2,1,2,3,3,4,4,5][o]+s,Fa:e,ra:r}}function RM(e,t){if(e[t]===11&&e[t+1]===119){var n=0,i=5;t+=i;for(var r,o;i>0;){o=e[t];var s=Math.min(i,8),u=8-s;r=4278190080>>>24+u<<u,r=(o&r)>>u,n=n?n<<s|r:r,t+=1,i-=s}if(n<16)return!0}return!1}function En(e){this.j=e,this.g=0,this.h=new Map,this.i=null}d=En.prototype,d.destroy=function(){this.h.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ac3"?jt(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ac3"?pe().se()?'audio/mp4; codecs="ec-3"':'audio/mp4; codecs="ac-3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){e=re(e);for(var r=to(e),o=r.length;o<e.length&&!RM(e,o);o++);var s=n.endTime*1e3;r=Er(r),r.length&&n&&(r=r.find(function(f){return f.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=r.data),r=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var l=NT(e,o);if(!l)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,u=l.Fa,a.push({data:e.subarray(o,o+l.ra),size:l.ra,duration:1536,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),o+=l.ra}e=Math.floor(s*r/1e3),i={id:t.id,type:"audio",codecs:"ac-3",timescale:r,duration:i,Bb:[],Fa:u,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:e,zb:a},stream:t};var c=new Qr([i]);return t=this.h.getOrInsertComputed(t.id+"_"+n.i,function(){return Zr(c)}),n=this.i!==t,i=as(c),this.i=t,this.g++,Promise.resolve({data:i,init:n?t:null})},K("shaka.transmuxer.Ac3Transmuxer",En),En.prototype.transmux=En.prototype.transmux,En.prototype.getOriginalMimeType=En.prototype.getOriginalMimeType,En.prototype.convertCodecs=En.prototype.convertCodecs,En.prototype.isSupported=En.prototype.isSupported,En.prototype.destroy=En.prototype.destroy,ci("audio/ac3",function(){return new En("audio/ac3")},_i);function jT(e,t){if(t+8>e.length||(e[t]<<8|e[t+1]<<0)!==2935)return null;var n=new yi(e.subarray(t+2));Zt(n,2),Zt(n,3);var i=me(n,11)+1<<1,r=me(n,2);if(r==3){r=me(n,2),r=[24e3,22060,16e3][r];var o=3}else r=[48e3,44100,32e3][r],o=me(n,2);var s=me(n,3),u=me(n,1);return n=me(n,5),t+i>e.byteLength?null:(e=Math.floor(i*r/([1,2,3,6][o]*16)),e=new Uint8Array([(e&8160)>>5,(e&31)<<3,r<<6|n<<1|0,0|s<<1|u<<0,0]),{sampleRate:r,channelCount:[2,1,2,3,3,4,4,5][s]+u,Fa:e,ra:i})}function In(e){this.j=e,this.g=0,this.h=new Map,this.i=null}d=In.prototype,d.destroy=function(){this.h.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/ec3"?jt(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/ec3"?'audio/mp4; codecs="ec-3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){e=re(e);for(var r=to(e),o=r.length;o<e.length&&(e[o]<<8|e[o+1]<<0)!==2935;o++);var s=n.endTime*1e3;r=Er(r),r.length&&n&&(r=r.find(function(f){return f.description==="com.apple.streaming.transportStreamTimestamp"}))&&(s=r.data),r=0;for(var u=new Uint8Array([]),a=[];o<e.length;){var l=jT(e,o);if(!l)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));t.audioSamplingRate=l.sampleRate,t.channelsCount=l.channelCount,r=l.sampleRate,u=l.Fa,a.push({data:e.subarray(o,o+l.ra),size:l.ra,duration:1536,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),o+=l.ra}e=Math.floor(s*r/1e3),i={id:t.id,type:"audio",codecs:"ec-3",timescale:r,duration:i,Bb:[],Fa:u,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:e,zb:a},stream:t};var c=new Qr([i]);return t=this.h.getOrInsertComputed(t.id+"_"+n.i,function(){return Zr(c)}),n=this.i!==t,i=as(c),this.i=t,this.g++,Promise.resolve({data:i,init:n?t:null})},K("shaka.transmuxer.Ec3Transmuxer",In),In.prototype.transmux=In.prototype.transmux,In.prototype.getOriginalMimeType=In.prototype.getOriginalMimeType,In.prototype.convertCodecs=In.prototype.convertCodecs,In.prototype.isSupported=In.prototype.isSupported,In.prototype.destroy=In.prototype.destroy,ci("audio/ec3",function(){return new In("audio/ec3")},_i);function LM(e){if(!e.length)return null;var t=e.find(function(v){return v.type==7});if(e=e.find(function(v){return v.type==8}),!t||!e)return null;var n=new yi(t.data),i=Me(n);if(Me(n),Me(n),xt(n),NM.includes(i)&&(i=X(n),i===3&&Zt(n,1),xt(n),xt(n),Zt(n,1),J(n))){i=i!==3?8:12;for(var r=0;r<i;r++)J(n)&&(r<6?ta(n,16):ta(n,64))}if(xt(n),i=X(n),i===0)X(n);else if(i===1)for(Zt(n,1),xt(n),xt(n),i=X(n),r=0;r<i;r++)xt(n);xt(n),Zt(n,1);var o=X(n),s=X(n),u=me(n,1);u===0&&Zt(n,1),Zt(n,1);var a=0,l=0,c=0,f=0;if(J(n)&&(a=X(n),l=X(n),c=X(n),f=X(n)),r=i=1,J(n)&&J(n)){var p=Me(n),h=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],g=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];p>0&&p<=16?(i=h[p-1],r=g[p-1]):p===255&&(i=me(n,16),r=me(n,16))}return n=(2-u)*(s+1)*16-c*2-f*2,o=(o+1)*16-a*2-l*2,a=[],t=t.fullData,a.push(t.byteLength>>>8&255),a.push(t.byteLength&255),a=a.concat.apply(a,H(t)),t=[],e=e.fullData,t.push(e.byteLength>>>8&255),t.push(e.byteLength&255),t=t.concat.apply(t,H(e)),e=new Uint8Array([1,a[3],a[4],a[5],255,225].concat(a,[1],t)),{height:n,width:o,Sa:e,Za:i,$a:r}}function PM(e){function t(g){r={data:new Uint8Array([]),frame:!1,isKeyframe:!1,pts:g.pts,dts:g.dts,nalus:[]}}function n(){if(r&&r.nalus.length&&r.frame){for(var g=[],v=m(r.nalus),y=v.next();!y.done;y=v.next()){y=y.value;var S=y.fullData.byteLength,x=new Uint8Array(4);x[0]=S>>24&255,x[1]=S>>16&255,x[2]=S>>8&255,x[3]=S&255,g.push(x),g.push(y.fullData)}r.data=it.apply(Et,H(g)),i.push(r)}}for(var i=[],r=null,o=!1,s=0;s<e.length;s++){var u=e[s],a=u.nalus,l=!1;r&&a.length&&!o&&(n(),t(u)),a=m(u.nalus);for(var c=a.next();!c.done;c=a.next()){c=c.value;var f=!1;switch(c.type){case 1:var p=!1;f=!0;var h=c.data;l&&h.length>4&&(h=LS(new yi(h)),h===2||h===4||h===7||h===9)&&(p=!0),p&&r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(u),r.frame=!0,r.isKeyframe=p;break;case 5:f=!0,r&&r.frame&&!r.isKeyframe&&(n(),r=null),r||t(u),r.frame=!0,r.isKeyframe=!0;break;case 6:f=!0;break;case 7:l=f=!0;break;case 8:f=!0;break;case 9:o=f=!0,r&&r.frame&&(n(),r=null),r||t(u);break;case 12:f=!0;break;default:f=!1}r&&f&&r.nalus.push(c)}}return n(),i}var NM=[100,110,122,244,44,83,86,118,128,138,139,134];function jM(e){if(!e.length)return null;var t=e.find(function(s){return s.type==32}),n=e.find(function(s){return s.type==33}),i=e.find(function(s){return s.type==34});if(!t||!n||!i)return null;var r=OM(t.fullData);e=UM(n.fullData);var o=_M(i.fullData);return t=BM(t.fullData,n.fullData,i.fullData,{Yg:r.Yg,Fh:r.Fh,Ig:e.Ig,Jg:e.Jg,Cg:e.Cg,Hg:e.Hg,Dg:e.Dg,Eg:e.Eg,Fg:e.Fg,Gg:e.Gg,wg:e.wg,xg:e.xg,yg:e.yg,zg:e.zg,Ag:e.Ag,Bg:e.Bg,uf:e.uf,kg:e.kg,jg:e.jg,ig:e.ig,$g:o.$g,vg:e.vg,ug:e.ug}),{height:e.height,width:e.width,Sa:t,Za:e.Vk,$a:e.Uk}}function OM(e){var t=new yi(e,!0);return Me(t),Me(t),me(t,4),me(t,2),me(t,6),e=me(t,3),t=J(t),{Yg:e+1,Fh:t}}function UM(e){e=new yi(e,!0),Me(e),Me(e);var t=0,n=0,i=0,r=0;me(e,4);var o=me(e,3);J(e);for(var s=me(e,2),u=me(e,1),a=me(e,5),l=Me(e),c=Me(e),f=Me(e),p=Me(e),h=Me(e),g=Me(e),v=Me(e),y=Me(e),S=Me(e),x=Me(e),w=Me(e),I=[],L=[],A=0;A<o;A++)I.push(J(e)),L.push(J(e));if(o>0)for(A=o;A<8;A++)me(e,2);for(A=0;A<o;A++)I[A]&&me(e,88),L[A]&&Me(e);X(e),I=X(e),I==3&&me(e,1),L=X(e),A=X(e),J(e)&&(t+=X(e),n+=X(e),i+=X(e),r+=X(e));var C=X(e),E=X(e),R=X(e);if(J(e))for(var M=0;M<=o;M++)X(e),X(e),X(e);else X(e),X(e),X(e);if(X(e),X(e),X(e),X(e),X(e),X(e),J(e)&&J(e))for(M=0;M<4;M++)for(var P=0;P<(M===3?2:6);P++)if(J(e)){var N=Math.min(64,1<<4+(M<<1));M>1&&no(e);for(var b=0;b<N;b++)no(e)}else X(e);for(J(e),J(e),J(e)&&(Me(e),X(e),X(e),J(e)),M=X(e),N=P=0;N<M;N++)if(b=!1,N!==0&&(b=J(e)),b){N===M&&X(e),J(e),X(e);for(var _=b=0;_<=P;_++){var j=J(e),O=!1;j||(O=J(e)),(j||O)&&b++}P=b}else{for(_=X(e),b=X(e),P=_+b,j=0;j<_;j++)X(e),J(e);for(_=0;_<b;_++)X(e),J(e)}if(J(e))for(M=X(e),P=0;P<M;P++){for(N=0;N<R+4;N++)me(e,1);me(e,1)}if(M=R=1,P=!0,N=1,_=b=0,J(e),J(e),J(e)){if(J(e)){j=Me(e),O=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2];var F=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];j>0&&j<=16?(R=O[j-1],M=F[j-1]):j===255&&(R=me(e,16),M=me(e,16))}if(J(e)&&J(e),J(e)&&(me(e,3),J(e),J(e)&&(Me(e),Me(e),Me(e))),J(e)&&(X(e),X(e)),J(e),J(e),J(e),(j=J(e))&&(xt(e),xt(e),xt(e),xt(e)),J(e)&&(N=me(e,32),b=me(e,32),J(e)&&X(e),J(e))){F=!1,j=J(e),O=J(e),(j||O)&&((F=J(e))&&(Me(e),me(e,5),J(e),me(e,5)),me(e,4),me(e,4),F&&me(e,4),me(e,5),me(e,5),me(e,5));for(var V=0;V<=o;V++){P=J(e);var le=!0,q=1;P||(le=J(e));var Re=!1;if(le?X(e):Re=J(e),Re||(q=X(e)+1),j){for(le=0;le<q;le++)X(e),X(e),F&&(X(e),X(e));J(e)}if(O){for(le=0;le<q;le++)X(e),X(e),F&&(X(e),X(e));J(e)}}}J(e)&&(J(e),J(e),J(e),_=X(e),X(e),X(e),X(e),X(e))}return{Cg:w,Ig:s,Jg:u,Hg:a,Dg:l,Eg:c,Fg:f,Gg:p,wg:h,xg:g,yg:v,zg:y,Ag:S,Bg:x,uf:_,kg:I,jg:C,ig:E,width:L-(t+n)*(I===1||I===2?2:1),height:A-(i+r)*(I===1?2:1),Vk:R,Uk:M,vg:b/N,ug:P}}function _M(e){var t=new yi(e,!0);Me(t),Me(t),X(t),X(t),J(t),J(t),me(t,3),J(t),J(t),X(t),X(t),no(t),J(t),J(t),J(t)&&X(t),no(t),no(t),J(t),J(t),J(t),J(t),e=J(t),t=J(t);var n=1;return t&&e?n=0:t?n=3:e&&(n=2),{$g:n}}function BM(e,t,n,i){var r=new Uint8Array(23+(5+e.byteLength)+(5+t.byteLength)+(5+n.byteLength));for(r[0]=1,r[1]=(i.Ig&3)<<6|(i.Jg?1:0)<<5|i.Hg&31,r[2]=i.Dg,r[3]=i.Eg,r[4]=i.Fg,r[5]=i.Gg,r[6]=i.wg,r[7]=i.xg,r[8]=i.yg,r[9]=i.zg,r[10]=i.Ag,r[11]=i.Bg,r[12]=i.Cg,r[13]=240|(i.uf&3840)>>8,r[14]=i.uf&255,r[15]=252|i.$g&3,r[16]=252|i.kg&3,r[17]=248|i.jg&7,r[18]=248|i.ig&7,r[19]=0,r[20]=parseInt(i.vg,10),r[21]=((i.ug?1:0)&3)<<6|(i.Yg&7)<<3|(i.Fh?1:0)<<2|3,r[22]=3,e=[e,t,n],t=23,n=e.length-1,i=0;i<e.length;i+=1)r.set(new Uint8Array([32+i|(i===n?128:0),0,1]),t),t+=3,r.set(new Uint8Array([e[i].byteLength>>8,e[i].byteLength&255]),t),t+=2,r.set(e[i],t),t+=e[i].byteLength;return r}function Kl(e,t){var n=e[t+1]>>3&3,i=e[t+1]>>1&3,r=e[t+2]>>4&15,o=e[t+2]>>2&3;if(n!==1&&r!==0&&r!==15&&o!==3){var s=e[t+3]>>6;r=bM[(n===3?3-i:i===3?3:4)*14+r-1]*1e3,o=FM[(n===3?0:n===2?1:2)*3+o],n=VM[n][i];var u=HM[i],a=Math.floor(n*r/o+(e[t+2]>>1&1))*u,l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);return(l=l?parseInt(l[1],10):0)&&l<=87&&i===2&&r>=224e3&&s===0&&(e[t+3]|=128),{sampleRate:o,channelCount:s===3?1:2,ra:a,Tk:n*8*u}}return null}function OT(e,t){return e[t]===255&&(e[t+1]&224)===224&&(e[t+1]&6)!==0}function UT(e,t){if(t+1<e.length&&OT(e,t)){var n=Kl(e,t),i=4;return n&&n.ra&&(i=n.ra),t+=i,t===e.length||t+1<e.length&&OT(e,t)}return!1}var bM=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],FM=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],VM=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],HM=[0,1,1,4];function Cn(e){this.j=e,this.g=0,this.h=new Map,this.i=null}d=Cn.prototype,d.destroy=function(){this.h.clear()},d.isSupported=function(e){return e.toLowerCase().split(";")[0]=="audio/mpeg"?jt(this.convertCodecs("audio",e)):!1},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="audio/mpeg"?'audio/mp4; codecs="mp3"':t},d.getOriginalMimeType=function(){return this.j},d.transmux=function(e,t,n,i){for(var r=re(e),o=to(r).length;o<r.length&&!UT(r,o);o++);var s;for(e=[];o<r.length;){var u=Kl(r,o);if(!u)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));s||(s=u),o+u.ra<=r.length&&e.push({data:r.subarray(o,o+u.ra),size:u.ra,duration:1152,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),o+=u.ra}if(!s)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));r=s.Tk*9e4/s.sampleRate*this.g,i={id:t.id,type:"audio",codecs:"mp3",timescale:s.sampleRate,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:this.g,baseMediaDecodeTime:r,zb:e},stream:t};var a=new Qr([i]);return t=this.h.getOrInsertComputed(t.id+"_"+n.i,function(){return Zr(a)}),n=this.i!==t,i=as(a),this.i=t,this.g++,Promise.resolve({data:i,init:n?t:null})},K("shaka.transmuxer.Mp3Transmuxer",Cn),Cn.prototype.transmux=Cn.prototype.transmux,Cn.prototype.getOriginalMimeType=Cn.prototype.getOriginalMimeType,Cn.prototype.convertCodecs=Cn.prototype.convertCodecs,Cn.prototype.isSupported=Cn.prototype.isSupported,Cn.prototype.destroy=Cn.prototype.destroy,ci("audio/mpeg",function(){return new Cn("audio/mpeg")},_i);function Mn(e){this.h=e,this.g=null}d=Mn.prototype,d.destroy=function(){},d.isSupported=function(e){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var t=Kt(e).split(","),n=Gt("audio",t);return t=Gt("video",t),!n||t||It(n)!="mp3"?!1:jt(this.convertCodecs("audio",e))},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?"audio/mpeg":t},d.getOriginalMimeType=function(){return this.h},d.transmux=function(e,t,n,i,r){if(this.g?this.g.clearData():this.g=new Be,this.g.Kf(n.i),e=re(e),e=this.g.parse(e),e.Zd().audio!="mp3"||r!="audio")return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));for(n=new Uint8Array([]),r=m(e.rb()),e=r.next();!e.done;e=r.next())if(e=e.value.data)for(t=0;t<e.length;)(i=Kl(e,t))?(t+i.ra<=e.length&&(n=it(n,e.subarray(t,t+i.ra))),t+=i.ra):t++;return Promise.resolve(n)},K("shaka.transmuxer.MpegTsTransmuxer",Mn),Mn.prototype.transmux=Mn.prototype.transmux,Mn.prototype.getOriginalMimeType=Mn.prototype.getOriginalMimeType,Mn.prototype.convertCodecs=Mn.prototype.convertCodecs,Mn.prototype.isSupported=Mn.prototype.isSupported,Mn.prototype.destroy=Mn.prototype.destroy,ci("video/mp2t",function(){return new Mn("video/mp2t")},vc);/*
 @license
 MSS Transmuxer
 Copyright 2015 Dash Industry Forum
 SPDX-License-Identifier: BSD-3-Clause
*/function hn(e){this.h=e,(this.g=Dd.get("ISOBoxer")())&&GM(this)}function GM(e){function t(){this._procFullBox(),this.flags&1&&(this._procField("AlgorithmID","uint",24),this._procField("IV_size","uint",8),this._procFieldArray("KID",16,"uint",8)),this._procField("sample_count","uint",32),this._procEntries("entry",this.sample_count,function(n){this._procEntryField(n,"InitializationVector","data",8),this.flags&2&&(this._procEntryField(n,"NumberOfEntries","uint",16),this._procSubEntries(n,"clearAndCryptedData",n.NumberOfEntries,function(i){this._procEntryField(i,"BytesOfClearData","uint",16),this._procEntryField(i,"BytesOfEncryptedData","uint",32)}))})}e.g.addBoxProcessor("saio",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("entry_count","uint",32),this._procFieldArray("offset",this.entry_count,"uint",this.version===1?64:32)}),e.g.addBoxProcessor("saiz",function(){this._procFullBox(),this.flags&1&&(this._procField("aux_info_type","uint",32),this._procField("aux_info_type_parameter","uint",32)),this._procField("default_sample_info_size","uint",8),this._procField("sample_count","uint",32),this.default_sample_info_size===0&&this._procFieldArray("sample_info_size",this.sample_count,"uint",8)}),e.g.addBoxProcessor("senc",t),e.g.addBoxProcessor("uuid",function(){for(var n=!0,i=0;i<16;i++)this.usertype[i]!==KM[i]&&(n=!1);n&&(this._parsing&&(this.type="sepiff"),t.call(this))})}d=hn.prototype,d.destroy=function(){},d.isSupported=function(e,t){var n=e.startsWith("mss/");return!this.g||!n?!1:t?jt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),jt(t)||jt(e))},d.convertCodecs=function(e,t){return t.replace("mss/","")},d.getOriginalMimeType=function(){return this.h},d.transmux=function(e,t,n){if(!n)return Promise.resolve(re(e));if(!t.mssPrivateData)return Promise.reject(new D(2,3,3020,n?n.P()[0]:null));try{var i,r=this.g.parseBuffer(e),o=r.fetch("tfhd");o.track_ID=t.id+1;var s=r.fetch("tfdt"),u=r.fetch("traf");s===null&&(s=this.g.createFullBox("tfdt",u,o),s.version=1,s.flags=0,s.baseMediaDecodeTime=Math.floor(n.startTime*t.mssPrivateData.timescale));var a=r.fetch("trun"),l=r.fetch("tfxd");l&&l._parent.boxes.splice(l._parent.boxes.indexOf(l),1);var c=r.fetch("tfrf");c&&c._parent.boxes.splice(c._parent.boxes.indexOf(c),1);var f=r.fetch("sepiff");if(f!==null){f.type="senc",f.usertype=void 0;var p=r.fetch("saio");if(p===null){p=this.g.createFullBox("saio",u),p.version=0,p.flags=0,p.entry_count=1,p.offset=[0];var h=this.g.createFullBox("saiz",u);if(h.version=0,h.flags=0,h.sample_count=f.sample_count,h.default_sample_info_size=0,h.sample_info_size=[],f.flags&2)for(i=0;i<f.sample_count;i+=1)h.sample_info_size[i]=10+6*f.entry[i].NumberOfEntries;else h.default_sample_info_size=8}}o.flags&=16777214,o.flags|=131072,a.flags|=1;var g=r.fetch("moof");a.data_offset=g.getLength()+8;var v=r.fetch("saio");v!==null&&(v.offset[0]=_T(g,"traf")+_T(u,"senc")+16);var y=re(r.write());return Promise.resolve(y)}catch(S){return S instanceof D?Promise.reject(S):Promise.reject(new D(2,3,3022,n?n.P()[0]:null))}};function _T(e,t){for(var n=8,i=0;i<e.boxes.length&&e.boxes[i].type!==t;i++)n+=e.boxes[i].size;return n}K("shaka.transmuxer.MssTransmuxer",hn),hn.prototype.transmux=hn.prototype.transmux,hn.prototype.getOriginalMimeType=hn.prototype.getOriginalMimeType,hn.prototype.convertCodecs=hn.prototype.convertCodecs,hn.prototype.isSupported=hn.prototype.isSupported,hn.prototype.destroy=hn.prototype.destroy;var KM=new Uint8Array([162,57,79,82,90,155,79,20,162,68,108,66,124,100,141,244]);ci("mss/audio/mp4",function(){return new hn("mss/audio/mp4")},_i),ci("mss/video/mp4",function(){return new hn("mss/video/mp4")},_i);function kn(e){this.m=e,this.g=0,this.j=new Map,this.l=this.i=this.h=null}d=kn.prototype,d.destroy=function(){this.j.clear(),this.i&&this.i.destroy()},d.isSupported=function(e,t){if(e.toLowerCase().split(";")[0]!="video/mp2t")return!1;var n=e;t&&(n=this.convertCodecs(t,e));var i=Kt(n).split(",");return n=Gt("audio",i),i=Gt("video",i),n&&(n=It(n),!QM.includes(n))||i&&(n=It(i),!ZM.includes(n))?!1:t?jt(this.convertCodecs(t,e)):(t=this.convertCodecs("audio",e),e=this.convertCodecs("video",e),jt(t)||jt(e))},d.convertCodecs=function(e,t){return t.toLowerCase().split(";")[0]=="video/mp2t"?(t=Kt(t).replace("mp4a.40.34","mp3").split(",").map(function(n){return ts(n,"audio/mp4")}).map(Ph).join(","),e=="audio"?'audio/mp4; codecs="'+t+'"':'video/mp4; codecs="'+t+'"'):t},d.getOriginalMimeType=function(){return this.m},d.transmux=function(e,t,n,i,r){var o=re(e);if(r=="audio"&&!io(o)){for(var s=to(o),u=s.length;u<o.length;u++)if(UT(o,u))return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));for(u=s.length;u<o.length;u++)if(PT(o,u))return this.i||(this.i=new pn("audio/aac")),this.i.transmux(e,t,n,i,r);return Promise.reject(new D(2,3,3018,n?n.P()[0]:null))}this.h?this.h.clearData():this.h=new Be,this.h.Kf(n.i),e=this.h.parse(o),o=[],s=e.Zd();try{if(u=null,r=="video"){switch(s.video){case"avc":u=JM(this,e,t,i,n);break;case"hvc":u=$M(this,e,t,i,n)}u&&(o.push(u),u=null)}if(r=="audio"){switch(s.audio){case"aac":u=WM(this,e,t,i,n);break;case"ac3":u=XM(this,e,t,i,n);break;case"ec3":u=zM(this,e,t,i,n);break;case"mp3":u=YM(this,e,t,i,n);break;case"opus":u=qM(this,e,t,i,n)}u&&(o.push(u),u=null)}}catch(l){return l&&l.code==3023?Promise.resolve(new Uint8Array([])):Promise.reject(l)}if(!o.length)return Promise.reject(new D(2,3,3018,n?n.P()[0]:null));var a=new Qr(o);return t=this.j.getOrInsertComputed(t.id+"_"+n.i,function(){return Zr(a)}),n=this.l!==t,i=as(a),this.l=t,this.g++,Promise.resolve({data:i,init:n?t:null})};function WM(e,t,n,i,r){var o=[],s=null,u=null,a=null;t=m(t.rb());for(var l=t.next();!l.done;l=t.next()){var c=l.value;if(l=c.data){var f=0;if(u==-1&&a)l=it(a,c.data),u=null;else if(u!=null&&a){f=Math.max(0,u);var p=it(a,l.subarray(0,f));o.push({data:p,size:p.byteLength,duration:1024,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),u=a=null}if(p=LT(l,f),!p)throw new D(2,3,3018,r?r.P()[0]:null);for(n.audioSamplingRate=p.sampleRate,n.channelsCount=p.channelCount,s==null&&c.pts!==null&&(s=c.pts);f<l.length;){if(c=RT(l,f),!c){a=l.subarray(f,l.length),u=-1;break}var h=c.ee+c.ra;u=Math.max(0,f+h-l.length),u!=0?a=l.subarray(f+c.ee,f+h):f+h<=l.length&&o.push({data:l.subarray(f+c.ee,f+h),size:c.ra,duration:1024,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),f+=h}}}if(!p||s==null){if(s=r.startTime*9e4,u=Gt("audio",n.codecs.split(",")),!u||!n.channelsCount||!n.audioSamplingRate)throw new D(2,3,3018,r?r.P()[0]:null);if(p={sampleRate:n.audioSamplingRate,channelCount:n.channelsCount,codec:u},u=DM(u,n.channelsCount),!u)throw new D(2,3,3018,r?r.P()[0]:null);for(r=s+(r.endTime-r.startTime)*9e4,a=s;a<r;)o.push({data:u,size:u.byteLength,duration:1024,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),a+=1024/p.sampleRate*9e4}return r=p.sampleRate,s=s/9e4*r,{id:n.id,type:"audio",codecs:p.codec,timescale:r,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:e.g,baseMediaDecodeTime:s,zb:o},stream:n}}function XM(e,t,n,i,r){var o=[],s=0,u=new Uint8Array([]),a=null;t=m(t.rb());for(var l=t.next();!l.done;l=t.next()){var c=l.value;for(l=c.data,a==null&&c.pts!==null&&(a=c.pts),c=0;c<l.length;){var f=NT(l,c);f?(n.audioSamplingRate=f.sampleRate,n.channelsCount=f.channelCount,s=f.sampleRate,u=f.Fa,o.push({data:l.subarray(c,c+f.ra),size:f.ra,duration:1536,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),c+=f.ra):c++}}if(s==0||u.byteLength==0||a==null)throw new D(2,3,3018,r?r.P()[0]:null);return r=a/9e4*s,{id:n.id,type:"audio",codecs:"ac-3",timescale:s,duration:i,Bb:[],Fa:u,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:e.g,baseMediaDecodeTime:r,zb:o},stream:n}}function zM(e,t,n,i,r){var o=[],s=0,u=new Uint8Array([]),a=null;t=m(t.rb());for(var l=t.next();!l.done;l=t.next()){var c=l.value;for(l=c.data,a==null&&c.pts!==null&&(a=c.pts),c=0;c<l.length;){var f=jT(l,c);f?(n.audioSamplingRate=f.sampleRate,n.channelsCount=f.channelCount,s=f.sampleRate,u=f.Fa,o.push({data:l.subarray(c,c+f.ra),size:f.ra,duration:1536,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),c+=f.ra):c++}}if(s==0||u.byteLength==0||a==null)throw new D(2,3,3018,r?r.P()[0]:null);return r=a/9e4*s,{id:n.id,type:"audio",codecs:"ec-3",timescale:s,duration:i,Bb:[],Fa:u,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:e.g,baseMediaDecodeTime:r,zb:o},stream:n}}function YM(e,t,n,i,r){var o=[],s,u=null;t=m(t.rb());for(var a=t.next();!a.done;a=t.next()){var l=a.value;if(a=l.data)for(u==null&&l.pts!==null&&(u=l.pts),l=0;l<a.length;){var c=Kl(a,l);c?(s||(s=c),l+c.ra<=a.length&&o.push({data:a.subarray(l,l+c.ra),size:c.ra,duration:1152,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),l+=c.ra):l++}}if(!s||u==null)throw new D(2,3,3018,r?r.P()[0]:null);return r=s.sampleRate,u=u/9e4*r,{id:n.id,type:"audio",codecs:"mp3",timescale:r,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:e.g,baseMediaDecodeTime:u,zb:o},stream:n}}function qM(e,t,n,i,r){var o=[],s=null,u=t.H;if(!u)throw new D(2,3,3018,r?r.P()[0]:null);var a=[];switch(u.vj){case 1:case 2:a=[0];break;case 0:a=[255,1,1,0,1];break;case 128:a=[255,2,0,0,1];break;case 3:a=[1,2,1,0,2,1];break;case 4:a=[1,2,2,0,1,2,3];break;case 5:a=[1,3,2,0,4,1,2,3];break;case 6:a=[1,4,2,0,4,1,2,3,5];break;case 7:a=[1,4,2,0,4,1,2,3,5,6];break;case 8:a=[1,5,3,0,6,1,2,3,4,5,7];break;case 130:a=[1,1,2,0,1];break;case 131:a=[1,1,3,0,1,2];break;case 132:a=[1,1,4,0,1,2,3];break;case 133:a=[1,1,5,0,1,2,3,4];break;case 134:a=[1,1,6,0,1,2,3,4,5];break;case 135:a=[1,1,7,0,1,2,3,4,5,6];break;case 136:a=[1,1,8,0,1,2,3,4,5,6,7]}a=new Uint8Array([0,u.channelCount,0,0,u.sampleRate>>>24&255,u.sampleRate>>>17&255,u.sampleRate>>>8&255,u.sampleRate>>>0&255,0,0].concat(H(a)));var l=u.sampleRate;t=m(t.rb());for(var c=t.next();!c.done;c=t.next()){var f=c.value;c=f.data,s==null&&f.pts!==null&&(s=f.pts);for(var p=0;p<c.length;){f=(c[p+1]&16)!==0;var h=(c[p+1]&8)!==0;p+=2;for(var g=0;c[p]===255;)g+=255,p+=1;g+=c[p],p+=1,p+=f?2:0,p+=h?2:0,f=c.slice(p,p+g),o.push({data:f,size:f.byteLength,duration:960,qb:0,flags:{wb:0,kb:0,jb:0,gb:0,hb:2,xb:0}}),p+=g}}if(a.byteLength==0||s==null)throw new D(2,3,3018,r?r.P()[0]:null);return n.audioSamplingRate=u.sampleRate,n.channelsCount=u.channelCount,r=s/9e4*l,{id:n.id,type:"audio",codecs:"opus",timescale:l,duration:i,Bb:[],Fa:a,Sa:new Uint8Array([]),Za:0,$a:0,data:{sequenceNumber:e.g,baseMediaDecodeTime:r,zb:o},stream:n}}function JM(e,t,n,i,r){var o=[],s=null;t=t.ud();var u=PM(t);if(!u.length)throw new D(2,3,3023,r?r.P()[0]:null);for(var a=0;a<u.length;a++){var l=u[a];s==null&&(s=l.dts),o.push({data:l.data,size:l.data.byteLength,duration:a+1<u.length?(u[a+1].dts||0)-(l.dts||0):u.length>1?(l.dts||0)-(u[a-1].dts||0):(r.endTime-r.startTime)*9e4,qb:Math.round((l.pts||0)-(l.dts||0)),flags:{wb:0,kb:0,jb:0,gb:0,hb:l.isKeyframe?2:1,xb:l.isKeyframe?0:1}})}for(u=[],t=m(t),a=t.next();!a.done;a=t.next())u.push.apply(u,H(a.value.nalus));if(t=LM(u),!t||s==null)throw new D(2,3,3018,r?r.P()[0]:null);return n.height=n.height||t.height,n.width=n.width||t.width,{id:n.id,type:"video",codecs:"avc1",timescale:9e4,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:t.Sa,Za:t.Za,$a:t.$a,data:{sequenceNumber:e.g,baseMediaDecodeTime:s,zb:o},stream:n}}function $M(e,t,n,i,r){var o=[],s=null,u=[];if(t=t.ud(),!t.length)throw new D(2,3,3023,r?r.P()[0]:null);for(var a=0;a<t.length;a++){var l=t[a],c=l.nalus;u.push.apply(u,H(c));var f=!1,p=[],h=!1;c=m(c);for(var g=c.next();!g.done;g=c.next()){switch(g=g.value,g.type){case 1:case 0:var v=h=!0;break;case 19:case 20:case 21:f=v=h=!0;break;case 32:v=!0;break;case 33:v=!0;break;case 34:v=!0;break;case 35:h=v=!0;break;case 39:case 40:v=!0;break;default:v=!1}if(h&&v){v=g.fullData.byteLength;var y=new Uint8Array(4);y[0]=v>>24&255,y[1]=v>>16&255,y[2]=v>>8&255,y[3]=v&255,p.push(y),p.push(g.fullData)}}(f=p.length?{data:it.apply(Et,H(p)),isKeyframe:f}:null)&&(s==null&&l.dts!=null&&(s=l.dts),o.push({data:f.data,size:f.data.byteLength,duration:a+1<t.length?(t[a+1].dts||0)-(l.dts||0):t.length>1?(l.dts||0)-(t[a-1].dts||0):(r.endTime-r.startTime)*9e4,qb:Math.round((l.pts||0)-(l.dts||0)),flags:{wb:0,kb:0,jb:0,gb:0,hb:f.isKeyframe?2:1,xb:f.isKeyframe?0:1}}))}if(u=jM(u),!u||s==null)throw new D(2,3,3018,r?r.P()[0]:null);return n.height=n.height||u.height,n.width=n.width||u.width,{id:n.id,type:"video",codecs:"hvc1",timescale:9e4,duration:i,Bb:[],Fa:new Uint8Array([]),Sa:u.Sa,Za:u.Za,$a:u.$a,data:{sequenceNumber:e.g,baseMediaDecodeTime:s,zb:o},stream:n}}K("shaka.transmuxer.TsTransmuxer",kn),kn.prototype.transmux=kn.prototype.transmux,kn.prototype.getOriginalMimeType=kn.prototype.getOriginalMimeType,kn.prototype.convertCodecs=kn.prototype.convertCodecs,kn.prototype.isSupported=kn.prototype.isSupported,kn.prototype.destroy=kn.prototype.destroy;var QM=["aac","ac-3","ec-3","mp3","opus"],ZM=["avc","hevc"];ci("video/mp2t",function(){return new kn("video/mp2t")},yc);function BT(){}$e(BT,Xt),K("shaka.util.FairPlayUtils",BT)}).call(ir,Oo,Oo,void 0);for(var Di in ir.shaka)jo[Di]=ir.shaka[Di]})()})(Up);const ak=ok(Up),pk=uk({__proto__:null,default:ak},[Up]);export{pk as s};
